(self.webpackChunkkanban_fire=self.webpackChunkkanban_fire||[]).push([[179],{8255:gt=>{function Oe(O){return Promise.resolve().then(()=>{var d=new Error("Cannot find module '"+O+"'");throw d.code="MODULE_NOT_FOUND",d})}Oe.keys=()=>[],Oe.resolve=Oe,Oe.id=8255,gt.exports=Oe},7716:(gt,Oe,O)=>{"use strict";O.d(Oe,{deG:()=>Ov,tb:()=>gw,AFp:()=>W_,ip1:()=>Jd,CZH:()=>ql,hGG:()=>uy,z2F:()=>th,sBO:()=>gO,Sil:()=>Kl,_Vd:()=>Ul,EJc:()=>fu,SBq:()=>gr,qLn:()=>Df,vpe:()=>Jo,gxx:()=>ho,tBr:()=>Vo,XFs:()=>re,OlP:()=>ur,zs3:()=>ar,ZZ4:()=>su,aQg:()=>ap,soG:()=>q_,YKP:()=>cp,v3s:()=>BP,h0i:()=>Ba,PXZ:()=>Vp,R0b:()=>Yi,FiY:()=>Uo,Lbi:()=>pw,g9A:()=>fw,Qsj:()=>TB,FYo:()=>IE,JOm:()=>xa,Tiy:()=>ip,q3G:()=>Nr,tp0:()=>Bo,EAV:()=>Mw,Rgc:()=>ou,dDg:()=>Yl,DyG:()=>dr,q4F:()=>PD,GfV:()=>OD,s_b:()=>ME,ifc:()=>$e,eFA:()=>Dw,G48:()=>NP,Gpc:()=>j,f3M:()=>Es,X6Q:()=>X_,_c5:()=>GP,VLi:()=>Cw,c2e:()=>jS,zSh:()=>Ad,wAp:()=>jt,vHH:()=>Le,EiD:()=>DM,mCW:()=>Ra,qzn:()=>E,JVY:()=>y,pB0:()=>_e,eBb:()=>M,L6k:()=>I,LAX:()=>V,cg1:()=>qT,Tjo:()=>Hp,kL8:()=>Mk,yhl:()=>_,dqk:()=>Zt,sIi:()=>Zc,CqO:()=>tE,QGY:()=>e_,F4k:()=>lT,RDi:()=>_v,AaK:()=>te,z3N:()=>Ho,qOj:()=>jm,TTD:()=>Us,_Bn:()=>bE,xp6:()=>ix,uIk:()=>Rd,ekj:()=>s_,Suo:()=>rn,Xpm:()=>tt,lG2:()=>Qt,Yz7:()=>rt,cJS:()=>qt,oAB:()=>Ze,Yjl:()=>mn,Y36:()=>Mi,_UZ:()=>$f,BQk:()=>Xb,ynx:()=>zf,qZA:()=>Xm,TgZ:()=>Jb,EpF:()=>eE,n5z:()=>uf,Ikx:()=>pE,LFG:()=>sr,$8M:()=>hf,NdJ:()=>t_,CRH:()=>Tp,oxw:()=>Gf,ALo:()=>gS,lcZ:()=>mS,Hsn:()=>uT,F$t:()=>cT,Q6J:()=>Zb,VKq:()=>uS,WLB:()=>nP,iGM:()=>yt,MAs:()=>QI,CHM:()=>Tc,LSH:()=>V0,kYT:()=>St,Udp:()=>Yo,WFA:()=>nE,d8E:()=>a_,YNc:()=>ZI,_uU:()=>xT,Oqu:()=>uE,hij:()=>Yf,Gf:()=>N_});var d=O(9765),U=O(5319),F=O(7574),le=O(6682),ye=O(8819);function J(s){for(let o in s)if(s[o]===J)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function te(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(te).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function X(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const N=J({__forward_ref__:J});function j(s){return s.__forward_ref__=j,s.toString=function(){return te(this())},s}function L(s){return ne(s)?s():s}function ne(s){return"function"==typeof s&&s.hasOwnProperty(N)&&s.__forward_ref__===j}class Le extends Error{constructor(o,l){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,l)),this.code=o}}function oe(s){return"string"==typeof s?s:null==s?"":String(s)}function Re(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():oe(s)}function Pt(s,o){const l=o?` in ${o}`:"";throw new Le("201",`No provider for ${Re(s)} found${l}`)}function bt(s,o){null==s&&function(s,o,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${o} <=Actual]`))}(o,s,null,"!=")}function rt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function dn(s){return zn(s,Gn)||zn(s,Qn)}function zn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ir(s){return s&&(s.hasOwnProperty(wn)||s.hasOwnProperty(it))?s[wn]:null}const Gn=J({\u0275prov:J}),wn=J({\u0275inj:J}),Qn=J({ngInjectableDef:J}),it=J({ngInjectorDef:J});var re=(()=>((re=re||{})[re.Default=0]="Default",re[re.Host=1]="Host",re[re.Self=2]="Self",re[re.SkipSelf=4]="SkipSelf",re[re.Optional=8]="Optional",re))();let xe;function mt(s){const o=xe;return xe=s,o}function Je(s,o,l){const u=dn(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&re.Optional?null:void 0!==o?o:void Pt(te(s),"Injector")}function Ot(s){return{toString:s}.toString()}var Dt=(()=>((Dt=Dt||{})[Dt.OnPush=0]="OnPush",Dt[Dt.Default=1]="Default",Dt))(),$e=(()=>(($e=$e||{})[$e.Emulated=0]="Emulated",$e[$e.None=2]="None",$e[$e.ShadowDom=3]="ShadowDom",$e))();const lt="undefined"!=typeof globalThis&&globalThis,Jn="undefined"!=typeof window&&window,kr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zt=lt||"undefined"!=typeof global&&global||Jn||kr,q={},z=[],Q=J({\u0275cmp:J}),Pe=J({\u0275dir:J}),fe=J({\u0275pipe:J}),ut=J({\u0275mod:J}),ce=J({\u0275loc:J}),Ie=J({\u0275fac:J}),je=J({__NG_ELEMENT_ID__:J});let nt=0;function tt(s){return Ot(()=>{const l={},u={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||z,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$e.Emulated,id:"c",styles:s.styles||z,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,m=s.pipes;return u.id+=nt++,u.inputs=Kt(s.inputs,l),u.outputs=Kt(s.outputs),p&&p.forEach(v=>v(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map($):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(G):null,u})}function $(s){return Cn(s)||function(s){return s[Pe]||null}(s)}function G(s){return function(s){return s[fe]||null}(s)}const Ae={};function Ze(s){return Ot(()=>{const o={type:s.type,bootstrap:s.bootstrap||z,declarations:s.declarations||z,imports:s.imports||z,exports:s.exports||z,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Ae[s.id]=s.type),o})}function St(s,o){return Ot(()=>{const l=jn(s,!0);l.declarations=o.declarations||z,l.imports=o.imports||z,l.exports=o.exports||z})}function Kt(s,o){if(null==s)return q;const l={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=u,o&&(o[h]=p)}return l}const Qt=tt;function mn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Cn(s){return s[Q]||null}function jn(s,o){const l=s[ut]||null;if(!l&&!0===o)throw new Error(`Type ${te(s)} does not have '\u0275mod' property.`);return l}function eo(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ti(s){return Array.isArray(s)&&!0===s[1]}function jh(s){return 0!=(8&s.flags)}function tl(s){return 2==(2&s.flags)}function Mo(s){return 1==(1&s.flags)}function Br(s){return null!==s.template}function ji(s){return 0!=(512&s[2])}function fa(s,o){return s.hasOwnProperty(Ie)?s[Ie]:null}class gv{constructor(o,l,u){this.previousValue=o,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function Us(){return $h}function $h(s){return s.type.prototype.ngOnChanges&&(s.setInput=mv),$u}function $u(){const s=rl(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===q)s.previous=o;else for(let u in o)l[u]=o[u];s.current=null,this.ngOnChanges(o)}}function mv(s,o,l,u){const h=rl(s)||function(s,o){return s[zh]=o}(s,{previous:q,current:null}),p=h.current||(h.current={}),m=h.previous,v=this.declaredInputs[l],w=m[v];p[v]=new gv(w&&w.currentValue,o,m===q),s[u]=o}Us.ngInherit=!0;const zh="__ngSimpleChanges__";function rl(s){return s[zh]||null}let bc;function _v(s){bc=s}function tr(s){return!!s.listen}const ko={createRenderer:(s,o)=>void 0!==bc?bc:"undefined"!=typeof document?document:void 0};function Kn(s){for(;Array.isArray(s);)s=s[0];return s}function pa(s,o){return Kn(o[s])}function Di(s,o){return Kn(o[s.index])}function wc(s,o){return s.data[o]}function ga(s,o){return s[o]}function pi(s,o){const l=o[s];return eo(l)?l:l[0]}function yv(s){return 4==(4&s[2])}function Wu(s){return 128==(128&s[2])}function to(s,o){return null==o?null:s[o]}function Cc(s){s[18]=0}function Ic(s,o){s[5]+=o;let l=s,u=s[3];for(;null!==u&&(1===o&&1===l[5]||-1===o&&0===l[5]);)u[5]+=o,l=u,u=u[3]}const zt={lFrame:Iv(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ev(){return zt.bindingsEnabled}function He(){return zt.lFrame.lView}function hn(){return zt.lFrame.tView}function Tc(s){return zt.lFrame.contextLView=s,s[8]}function rr(){let s=Dc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Dc(){return zt.lFrame.currentTNode}function rs(s,o){const l=zt.lFrame;l.currentTNode=s,l.isParent=o}function ol(){return zt.lFrame.isParent}function Ku(){zt.lFrame.isParent=!1}function Yu(){return zt.isInCheckNoChangesMode}function al(s){zt.isInCheckNoChangesMode=s}function jr(){const s=zt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function _s(){return zt.lFrame.bindingIndex++}function Zu(s,o){const l=zt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Sc(o)}function Sc(s){zt.lFrame.currentDirectiveIndex=s}function Xh(s){const o=zt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Vg(){return zt.lFrame.currentQueryIndex}function ll(s){zt.lFrame.currentQueryIndex=s}function Qu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ug(s,o,l){if(l&re.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&re.Host||(h=Qu(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const u=zt.lFrame=ef();return u.currentTNode=o,u.lView=s,!0}function no(s){const o=ef(),l=s[1];zt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function ef(){const s=zt.lFrame,o=null===s?null:s.child;return null===o?Iv(s):o}function Iv(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Bg(){const s=zt.lFrame;return zt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Tv=Bg;function Ac(){const s=Bg();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function gi(){return zt.lFrame.selectedIndex}function _a(s){zt.lFrame.selectedIndex=s}function Dr(){const s=zt.lFrame;return wc(s.tView,s.selectedIndex)}function Ju(s,o){for(let l=o.directiveStart,u=o.directiveEnd;l<u;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:w,ngAfterViewChecked:T,ngOnDestroy:S}=p;m&&(s.contentHooks||(s.contentHooks=[])).push(-l,m),v&&((s.contentHooks||(s.contentHooks=[])).push(l,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,v)),w&&(s.viewHooks||(s.viewHooks=[])).push(-l,w),T&&((s.viewHooks||(s.viewHooks=[])).push(l,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,T)),null!=S&&(s.destroyHooks||(s.destroyHooks=[])).push(l,S)}}function cl(s,o,l){ed(s,o,3,l)}function Xu(s,o,l,u){(3&s[2])===l&&ed(s,o,l,u)}function nf(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function ed(s,o,l,u){const p=null!=u?u:-1,m=o.length-1;let v=0;for(let w=void 0!==u?65535&s[18]:0;w<m;w++)if("number"==typeof o[w+1]){if(v=o[w],null!=u&&v>=u)break}else o[w]<0&&(s[18]+=65536),(v<p||-1==p)&&(rf(s,l,o,w),s[18]=(4294901760&s[18])+w+2),w++}function rf(s,o,l,u){const h=l[u]<0,p=l[u+1],v=s[h?-l[u]:l[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class va{constructor(o,l,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function td(s,o,l){const u=tr(s);let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const m=l[h++],v=l[h++],w=l[h++];u?s.setAttribute(o,v,w,m):o.setAttributeNS(m,v,w)}else{const m=p,v=l[++h];Si(m)?u&&s.setProperty(o,m,v):u?s.setAttribute(o,m,v):o.setAttribute(m,v),h++}}return h}function af(s){return 3===s||4===s||6===s}function Si(s){return 64===s.charCodeAt(0)}function nd(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?l=h:0===l||Sr(s,l,h,null,-1===l||2===l?o[++u]:null)}}return s}function Sr(s,o,l,u,h){let p=0,m=s.length;if(-1===o)m=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){m=-1;break}if(v>o){m=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===l){if(null===u)return void(null!==h&&(s[p+1]=h));if(u===s[p+1])return void(s[p+2]=h)}p++,null!==u&&p++,null!==h&&p++}-1!==m&&(s.splice(m,0,o),p=m+1),s.splice(p++,0,l),null!==u&&s.splice(p++,0,u),null!==h&&s.splice(p++,0,h)}function rd(s){return-1!==s}function ro(s){return 32767&s}function ba(s,o){let l=function(s){return s>>16}(s),u=o;for(;l>0;)u=u[15],l--;return u}let Hg=!0;function id(s){const o=Hg;return Hg=s,o}let xv=0;function No(s,o){const l=An(s,o);if(-1!==l)return l;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,zg(u.data,s),zg(o,null),zg(u.blueprint,null));const h=Gi(s,o),p=s.injectorIndex;if(rd(h)){const m=ro(h),v=ba(h,o),w=v[1].data;for(let T=0;T<8;T++)o[p+T]=v[m+T]|w[m+T]}return o[p+8]=h,p}function zg(s,o){s.push(0,0,0,0,0,0,0,0,o)}function An(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Gi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,h=o;for(;null!==h;){const p=h[1],m=p.type;if(u=2===m?p.declTNode:1===m?h[6]:null,null===u)return-1;if(l++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function ul(s,o,l){!function(s,o,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(je)&&(u=l[je]),null==u&&(u=l[je]=xv++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function ir(s,o,l){if(l&re.Optional)return s;Pt(o,"NodeInjector")}function nr(s,o,l,u){if(l&re.Optional&&void 0===u&&(u=null),0==(l&(re.Self|re.Host))){const h=s[9],p=mt(void 0);try{return h?h.get(o,u,l&re.Optional):Je(o,u,l&re.Optional)}finally{mt(p)}}return ir(u,o,l)}function kv(s,o,l,u=re.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(je)?s[je]:void 0;return"number"==typeof o?o>=0?255&o:wt:o}(l);if("function"==typeof p){if(!Ug(o,s,u))return u&re.Host?ir(h,l,u):nr(o,l,u,h);try{const m=p(u);if(null!=m||u&re.Optional)return m;Pt(l)}finally{Tv()}}else if("number"==typeof p){let m=null,v=An(s,o),w=-1,T=u&re.Host?o[16][6]:null;for((-1===v||u&re.SkipSelf)&&(w=-1===v?Gi(s,o):o[v+8],-1!==w&&dl(u,!1)?(m=o[1],v=ro(w),o=ba(w,o)):v=-1);-1!==v;){const S=o[1];if(cf(p,v,S.data)){const k=Yn(v,o,l,m,u,T);if(k!==At)return k}w=o[v+8],-1!==w&&dl(u,o[1].data[v+8]===T)&&cf(p,v,o)?(m=S,v=ro(w),o=ba(w,o)):v=-1}}}return nr(o,l,u,h)}const At={};function wt(){return new Fo(rr(),He())}function Yn(s,o,l,u,h,p){const m=o[1],v=m.data[s+8],S=Ea(v,m,l,null==u?tl(v)&&Hg:u!=m&&0!=(3&v.type),h&re.Host&&p===v);return null!==S?Mc(o,m,S,v):At}function Ea(s,o,l,u,h){const p=s.providerIndexes,m=o.data,v=1048575&p,w=s.directiveStart,S=p>>20,P=h?v+S:s.directiveEnd;for(let W=u?v:v+S;W<P;W++){const ee=m[W];if(W<w&&l===ee||W>=w&&ee.type===l)return W}if(h){const W=m[w];if(W&&Br(W)&&W.type===l)return w}return null}function Mc(s,o,l,u){let h=s[l];const p=o.data;if(function(s){return s instanceof va}(h)){const m=h;m.resolving&&function(s,o){throw new Le("200",`Circular dependency in DI detected for ${s}`)}(Re(p[l]));const v=id(m.canSeeViewProviders);m.resolving=!0;const w=m.injectImpl?mt(m.injectImpl):null;Ug(s,u,re.Default);try{h=s[l]=m.factory(void 0,p,s,u),o.firstCreatePass&&l>=u.directiveStart&&function(s,o,l){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(u){const m=$h(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==w&&mt(w),id(v),m.resolving=!1,Tv()}}return h}function cf(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function dl(s,o){return!(s&re.Self||s&re.Host&&o)}class Fo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,u){return kv(this._tNode,this._lView,o,u,l)}}function uf(s){return Ot(()=>{const o=s.prototype.constructor,l=o[Ie]||df(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const p=h[Ie]||df(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function df(s){return ne(s)?()=>{const o=df(L(s));return o&&o()}:fa(s)}function hf(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const u=l.length;let h=0;for(;h<u;){const p=l[h];if(af(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<u&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(rr(),s)}const hl="__parameters__";function gl(s,o,l){return Ot(()=>{const u=function(s){return function(...l){if(s){const u=s(...l);for(const h in u)this[h]=u[h]}}}(o);function h(...p){if(this instanceof h)return u.apply(this,p),this;const m=new h(...p);return v.annotation=m,v;function v(w,T,S){const k=w.hasOwnProperty(hl)?w[hl]:Object.defineProperty(w,hl,{value:[]})[hl];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(m),w}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class ur{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=rt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ov=new ur("AnalyzeForEntryComponents"),dr=Function;function is(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(o===s&&(o=s.slice(0,l)),is(u,o)):o!==s&&o.push(u)}return o}function Ai(s,o){s.forEach(l=>Array.isArray(l)?Ai(l,o):o(l))}function Hr(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function vs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Lo(s,o){const l=[];for(let u=0;u<s;u++)l.push(o);return l}function Xr(s,o,l){let u=_l(s,o);return u>=0?s[1|u]=l:(u=~u,function(s,o,l,u){let h=s.length;if(h==o)s.push(l,u);else if(1===h)s.push(u,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=u}}(s,u,o,l)),u}function Ca(s,o){const l=_l(s,o);if(l>=0)return s[1|l]}function _l(s,o){return function(s,o,l){let u=0,h=s.length>>l;for(;h!==u;){const p=u+(h-u>>1),m=s[p<<l];if(o===m)return p<<l;m>o?h=p:u=p+1}return~(h<<l)}(s,o,1)}const Nc={},bs="__NG_DI_FLAG__",so="ngTempTokenPath",pd=/\n/gm,Da="__source",Sa=J({provide:String,useValue:J});let oo;function Pr(s){const o=oo;return oo=s,o}function _f(s,o=re.Default){if(void 0===oo)throw new Error("inject() must be called from an injection context");return null===oo?Je(s,void 0,o):oo.get(s,o&re.Optional?null:void 0,o)}function sr(s,o=re.Default){return(xe||_f)(L(s),o)}const Es=sr;function vl(s){const o=[];for(let l=0;l<s.length;l++){const u=L(s[l]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,p=re.Default;for(let m=0;m<u.length;m++){const v=u[m],w=vf(v);"number"==typeof w?-1===w?h=v.token:p|=w:h=v}o.push(sr(h,p))}else o.push(sr(u))}return o}function js(s,o){return s[bs]=o,s.prototype[bs]=o,s}function vf(s){return s[bs]}function Qg(s,o,l,u){const h=s[so];throw o[Da]&&h.unshift(o[Da]),s.message=function(s,o,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=te(o);if(Array.isArray(o))h=o.map(te).join(" -> ");else if("object"==typeof o){let p=[];for(let m in o)if(o.hasOwnProperty(m)){let v=o[m];p.push(m+":"+("string"==typeof v?JSON.stringify(v):te(v)))}h=`{${p.join(", ")}}`}return`${l}${u?"("+u+")":""}[${h}]: ${s.replace(pd,"\n  ")}`}("\n"+s.message,h,l,u),s.ngTokenPath=h,s[so]=null,s}const Vo=js(gl("Inject",s=>({token:s})),-1),Uo=js(gl("Optional"),8),Bo=js(gl("SkipSelf"),4);let El;function $r(s){var o;return(null===(o=function(){if(void 0===El&&(El=null,Zt.trustedTypes))try{El=Zt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return El}())||void 0===o?void 0:o.createHTML(s))||s}class wl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vv extends wl{getTypeName(){return"HTML"}}class If extends wl{getTypeName(){return"Style"}}class Uv extends wl{getTypeName(){return"Script"}}class O0 extends wl{getTypeName(){return"URL"}}class P0 extends wl{getTypeName(){return"ResourceURL"}}function Ho(s){return s instanceof wl?s.changingThisBreaksApplicationSecurity:s}function E(s,o){const l=_(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function _(s){return s instanceof wl&&s.getTypeName()||null}function y(s){return new Vv(s)}function I(s){return new If(s)}function M(s){return new Uv(s)}function V(s){return new O0(s)}function _e(s){return new P0(s)}class Tt{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString($r(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class Wt{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=$r(o),l;const u=this.inertDocument.createElement("body");return u.innerHTML=$r(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const m=l.item(h).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&o.removeAttribute(m)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const or=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Aa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ra(s){return(s=String(s)).match(or)||s.match(Aa)?s:"unsafe:"+s}function ws(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function Bc(...s){const o={};for(const l of s)for(const u in l)l.hasOwnProperty(u)&&(o[u]=!0);return o}const am=ws("area,br,col,hr,img,wbr"),Tf=ws("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lm=ws("rp,rt"),cm=Bc(am,Bc(Tf,ws("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bc(lm,ws("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bc(lm,Tf)),_d=ws("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),um=ws("srcset"),IM=Bc(_d,um,ws("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ws("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),WV=ws("script,style,template");class qV{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,u=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?u=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,u&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!cm.hasOwnProperty(l))return this.sanitizedSomething=!0,!WV.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const u=o.attributes;for(let h=0;h<u.length;h++){const p=u.item(h),m=p.name,v=m.toLowerCase();if(!IM.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let w=p.value;_d[v]&&(w=Ra(w)),um[v]&&(s=w,w=(s=String(s)).split(",").map(o=>Ra(o.trim())).join(", ")),this.buf.push(" ",m,'="',TM(w),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();cm.hasOwnProperty(l)&&!am.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(TM(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const KV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,YV=/([^\#-~ |!])/g;function TM(s){return s.replace(/&/g,"&amp;").replace(KV,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(YV,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jv;function DM(s,o){let l=null;try{jv=jv||function(s){const o=new Wt(s);return function(){try{return!!(new window.DOMParser).parseFromString($r(""),"text/html")}catch(s){return!1}}()?new Tt(o):o}(s);let u=o?String(o):"";l=jv.getInertBodyElement(u);let h=5,p=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=p,p=l.innerHTML,l=jv.getInertBodyElement(u)}while(u!==p);return $r((new qV).sanitizeChildren(L0(l)||l))}finally{if(l){const u=L0(l)||l;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function L0(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Nr=(()=>((Nr=Nr||{})[Nr.NONE=0]="NONE",Nr[Nr.HTML=1]="HTML",Nr[Nr.STYLE=2]="STYLE",Nr[Nr.SCRIPT=3]="SCRIPT",Nr[Nr.URL=4]="URL",Nr[Nr.RESOURCE_URL=5]="RESOURCE_URL",Nr))();function V0(s){const o=function(){const s=He();return s&&s[12]}();return o?o.sanitize(Nr.URL,s)||"":E(s,"URL")?Ho(s):Ra(oe(s))}const RM="__ngContext__";function qi(s,o){s[RM]=o}function B0(s){const o=function(s){return s[RM]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Hv(s){return s.ngOriginalError}function pU(s,...o){s.error(...o)}class Df{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),u=this._findContext(o),h=(s=o)&&s.ngErrorLogger||pU;var s;h(this._console,"ERROR",o),l&&h(this._console,"ORIGINAL ERROR",l),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(o){return o?o.ngDebugContext||this._findContext(Hv(o)):null}_findOriginalError(o){let l=o&&Hv(o);for(;l&&Hv(l);)l=Hv(l);return l||null}}const VM=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zt))();function Ma(s){return s instanceof Function?s():s}var xa=(()=>((xa=xa||{})[xa.Important=1]="Important",xa[xa.DashCase=2]="DashCase",xa))();function zv(s,o){return undefined(s,o)}function yd(s){const o=s[3];return Ti(o)?o[3]:o}function Wv(s){return $0(s[13])}function qv(s){return $0(s[4])}function $0(s){for(;null!==s&&!Ti(s);)s=s[4];return s}function vd(s,o,l,u,h){if(null!=u){let p,m=!1;Ti(u)?p=u:eo(u)&&(m=!0,u=u[0]);const v=Kn(u);0===s&&null!==l?null==h?KM(o,l,v):bd(o,l,v,h||null,!0):1===s&&null!==l?bd(o,l,v,h||null,!0):2===s?function(s,o,l){const u=Jv(s,o);u&&function(s,o,l,u){tr(s)?s.removeChild(o,l,u):o.removeChild(l)}(s,u,o,l)}(o,v,m):3===s&&o.destroyNode(v),null!=p&&function(s,o,l,u,h){const p=l[7];p!==Kn(l)&&vd(o,s,u,p,h);for(let v=10;v<l.length;v++){const w=l[v];Af(w[1],w,s,o,u,p)}}(o,s,p,l,h)}}function Yv(s,o,l){return tr(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function $M(s,o){const l=s[9],u=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ic(h,-1)),l.splice(u,1)}function fm(s,o){if(s.length<=10)return;const l=10+o,u=s[l];if(u){const h=u[17];null!==h&&h!==s&&$M(h,u),o>0&&(s[l-1][4]=u[4]);const p=vs(s,10+o);!function(s,o){Af(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const m=p[19];null!==m&&m.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function zM(s,o){if(!(256&o[2])){const l=o[11];tr(l)&&l.destroyNode&&Af(s,o,l,3,null,null),function(s){let o=s[13];if(!o)return Qv(s[1],s);for(;o;){let l=null;if(eo(o))l=o[13];else{const u=o[10];u&&(l=u)}if(!l){for(;o&&!o[4]&&o!==s;)eo(o)&&Qv(o[1],o),o=o[3];null===o&&(o=s),eo(o)&&Qv(o[1],o),l=o&&o[4]}o=l}}(o)}}function Qv(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const h=o[l[u]];if(!(h instanceof va)){const p=l[u+1];if(Array.isArray(p))for(let m=0;m<p.length;m+=2){const v=h[p[m]],w=p[m+1];try{w.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const l=s.cleanup,u=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const m=l[p+1],v="function"==typeof m?m(o):Kn(o[m]),w=u[h=l[p+2]],T=l[p+3];"boolean"==typeof T?v.removeEventListener(l[p],w,T):T>=0?u[h=T]():u[h=-T].unsubscribe(),p+=2}else{const m=u[h=l[p+1]];l[p].call(m)}if(null!==u){for(let p=h+1;p<u.length;p++)u[p]();o[7]=null}}(s,o),1===o[1].type&&tr(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&Ti(o[3])){l!==o[3]&&$M(l,o);const u=o[19];null!==u&&u.detachView(s)}}}function WM(s,o,l){return function(s,o,l){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return l[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===$e.None||h===$e.Emulated)return null}return Di(u,l)}(s,o.parent,l)}function bd(s,o,l,u,h){tr(s)?s.insertBefore(o,l,u,h):o.insertBefore(l,u,h)}function KM(s,o,l){tr(s)?s.appendChild(o,l):o.appendChild(l)}function YM(s,o,l,u,h){null!==u?bd(s,o,l,u,h):KM(s,o,l)}function Jv(s,o){return tr(s)?s.parentNode(o):o.parentNode}function ZM(s,o,l){return K0(s,o,l)}let K0=function(s,o,l){return 40&s.type?Di(s,l):null};function pm(s,o,l,u){const h=WM(s,u,o),p=o[11],v=ZM(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(l))for(let w=0;w<l.length;w++)YM(p,h,l[w],v,!1);else YM(p,h,l,v,!1)}function gm(s,o){if(null!==o){const l=o.type;if(3&l)return Di(o,s);if(4&l)return tb(-1,s[o.index]);if(8&l){const u=o.child;if(null!==u)return gm(s,u);{const h=s[o.index];return Ti(h)?tb(-1,h):Kn(h)}}if(32&l)return zv(o,s)()||Kn(s[o.index]);{const u=Z0(s,o);return null!==u?Array.isArray(u)?u[0]:gm(yd(s[16]),u):gm(s,o.next)}}return null}function Z0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function tb(s,o){const l=10+s+1;if(l<o.length){const u=o[l],h=u[1].firstChild;if(null!==h)return gm(u,h)}return o[7]}function mm(s,o,l,u,h,p,m){for(;null!=l;){const v=u[l.index],w=l.type;if(m&&0===o&&(v&&qi(Kn(v),u),l.flags|=4),64!=(64&l.flags))if(8&w)mm(s,o,l.child,u,h,p,!1),vd(o,s,h,v,p);else if(32&w){const T=zv(l,u);let S;for(;S=T();)vd(o,s,h,S,p);vd(o,s,h,v,p)}else 16&w?Q0(s,o,u,l,h,p):vd(o,s,h,v,p);l=m?l.projectionNext:l.next}}function Af(s,o,l,u,h,p){mm(l,u,s.firstChild,o,h,p,!1)}function Q0(s,o,l,u,h,p){const m=l[16],w=m[6].projection[u.projection];if(Array.isArray(w))for(let T=0;T<w.length;T++)vd(o,s,h,w[T],p);else mm(s,o,w,m[3],h,p,!0)}function XM(s,o,l){tr(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function X0(s,o,l){tr(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function ex(s,o,l){let u=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===u||s.charCodeAt(h+p)<=32)return h}l=h+1}}const eI="ng-template";function tx(s,o,l){let u=0;for(;u<s.length;){let h=s[u++];if(l&&"class"===h){if(h=s[u],-1!==ex(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function tI(s){return 4===s.type&&s.value!==eI}function xU(s,o,l){return o===(4!==s.type||l?s.value:eI)}function kU(s,o,l){let u=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(af(s[o]))return o;return s.length}(h);let m=!1;for(let v=0;v<o.length;v++){const w=o[v];if("number"!=typeof w){if(!m)if(4&u){if(u=2|1&u,""!==w&&!xU(s,w,l)||""===w&&1===o.length){if(Go(u))return!1;m=!0}}else{const T=8&u?w:o[++v];if(8&u&&null!==s.attrs){if(!tx(s.attrs,T,l)){if(Go(u))return!1;m=!0}continue}const k=rb(8&u?"class":w,h,tI(s),l);if(-1===k){if(Go(u))return!1;m=!0;continue}if(""!==T){let P;P=k>p?"":h[k+1].toLowerCase();const W=8&u?P:null;if(W&&-1!==ex(W,T,0)||2&u&&T!==P){if(Go(u))return!1;m=!0}}}}else{if(!m&&!Go(u)&&!Go(w))return!1;if(m&&Go(w))continue;m=!1,u=w|1&u}}return Go(u)||m}function Go(s){return 0==(1&s)}function rb(s,o,l,u){if(null===o)return-1;let h=0;if(u||!l){let p=!1;for(;h<o.length;){const m=o[h];if(m===s)return h;if(3===m||6===m)p=!0;else{if(1===m||2===m){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===o)return l;l++}return-1}(o,s)}function _m(s,o,l=!1){for(let u=0;u<o.length;u++)if(kU(s,o[u],l))return!0;return!1}function Ed(s,o){e:for(let l=0;l<o.length;l++){const u=o[l];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function ib(s,o){return s?":not("+o.trim()+")":o}function iI(s){let o=s[0],l=1,u=2,h="",p=!1;for(;l<s.length;){let m=s[l];if("string"==typeof m)if(2&u){const v=s[++l];h+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?h+="."+m:4&u&&(h+=" "+m);else""!==h&&!Go(m)&&(o+=ib(p,h),h=""),u=m,p=p||!Go(u);l++}return""!==h&&(o+=ib(p,h)),o}const on={};function ix(s){sb(hn(),He(),gi()+s,Yu())}function sb(s,o,l,u){if(!u)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&cl(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Xu(o,p,0,l)}_a(l)}function jc(s,o){return s<<17|o<<2}function os(s){return s>>17&32767}function ym(s){return 2|s}function co(s){return(131068&s)>>2}function vm(s,o){return-131069&s|o<<2}function ob(s){return 1|s}function pb(s,o){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const h=l[u],p=l[u+1];if(-1!==p){const m=s.data[p];ll(h),m.contentQueries(2,o[p],p)}}}function Id(s,o,l,u,h,p,m,v,w,T){const S=o.blueprint.slice();return S[0]=h,S[2]=140|u,Cc(S),S[3]=S[15]=s,S[8]=l,S[10]=m||s&&s[10],S[11]=v||s&&s[11],S[12]=w||s&&s[12]||null,S[9]=T||s&&s[9]||null,S[6]=p,S[16]=2==o.type?s[16]:S,S}function Td(s,o,l,u,h){let p=s.data[o];if(null===p)p=function(s,o,l,u,h){const p=Dc(),m=ol(),w=s.data[o]=function(s,o,l,u,h,p){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?p:p&&p.parent,l,o,u,h);return null===s.firstChild&&(s.firstChild=w),null!==p&&(m?null==p.child&&null!==w.parent&&(p.child=w):null===p.next&&(p.next=w)),w}(s,o,l,u,h),zt.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=u,p.attrs=h;const m=function(){const s=zt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===m?-1:m.injectorIndex}return rs(p,!0),p}function Cl(s,o,l,u){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function $c(s,o,l){no(o);try{const u=s.viewQuery;null!==u&&zc(1,u,l);const h=s.template;null!==h&&_x(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&pb(s,o),s.staticViewQueries&&zc(2,s.viewQuery,l);const p=s.components;null!==p&&function(s,o){for(let l=0;l<o.length;l++)Ax(s,o[l])}(o,p)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,Ac()}}function xf(s,o,l,u){const h=o[2];if(256==(256&h))return;no(o);const p=Yu();try{Cc(o),function(s){zt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&_x(s,o,l,2,u);const m=3==(3&h);if(!p)if(m){const T=s.preOrderCheckHooks;null!==T&&cl(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Xu(o,T,0,null),nf(o,0)}if(function(s){for(let o=Wv(s);null!==o;o=qv(o)){if(!o[2])continue;const l=o[9];for(let u=0;u<l.length;u++){const h=l[u],p=h[3];0==(1024&h[2])&&Ic(p,1),h[2]|=1024}}}(o),function(s){for(let o=Wv(s);null!==o;o=qv(o))for(let l=10;l<o.length;l++){const u=o[l],h=u[1];Wu(u)&&xf(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&pb(s,o),!p)if(m){const T=s.contentCheckHooks;null!==T&&cl(o,T)}else{const T=s.contentHooks;null!==T&&Xu(o,T,1),nf(o,1)}!function(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const h=l[u];if(h<0)_a(~h);else{const p=h,m=l[++u],v=l[++u];Zu(m,p),v(2,o[p])}}}finally{_a(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let l=0;l<o.length;l++)DI(s,o[l])}(o,v);const w=s.viewQuery;if(null!==w&&zc(2,w,u),!p)if(m){const T=s.viewCheckHooks;null!==T&&cl(o,T)}else{const T=s.viewHooks;null!==T&&Xu(o,T,2),nf(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ic(o[3],-1))}finally{Ac()}}function gI(s,o,l,u){const h=o[10],p=!Yu(),m=yv(o);try{p&&!m&&h.begin&&h.begin(),m&&$c(s,o,u),xf(s,o,l,u)}finally{p&&!m&&h.end&&h.end()}}function _x(s,o,l,u,h){const p=gi(),m=2&u;try{_a(-1),m&&o.length>20&&sb(s,o,20,Yu()),l(u,h)}finally{_a(p)}}function mI(s,o,l){if(jh(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const m=s.data[p];m.contentQueries&&m.contentQueries(1,l[p],p)}}}function Dm(s,o,l){!Ev()||(function(s,o,l,u){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||No(l,o),qi(u,o);const m=l.initialInputs;for(let v=h;v<p;v++){const w=s.data[v],T=Br(w);T&&Dx(o,l,w);const S=Mc(o,s,v,l);qi(S,o),null!==m&&CI(0,v-h,S,w,0,m),T&&(pi(l.index,o)[8]=S)}}(s,o,l,Di(l,o)),128==(128&l.flags)&&function(s,o,l){const u=l.directiveStart,h=l.directiveEnd,m=l.index,v=zt.lFrame.currentDirectiveIndex;try{_a(m);for(let w=u;w<h;w++){const T=s.data[w],S=o[w];Sc(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Cx(T,S)}}finally{_a(-1),Sc(v)}}(s,o,l))}function gb(s,o,l=Di){const u=o.localNames;if(null!==u){let h=o.index+1;for(let p=0;p<u.length;p+=2){const m=u[p+1],v=-1===m?l(o,s):s[m];s[h++]=v}}}function _I(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Dd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Dd(s,o,l,u,h,p,m,v,w,T){const S=20+u,k=S+h,P=function(s,o){const l=[];for(let u=0;u<o;u++)l.push(u<s?null:on);return l}(S,k),W="function"==typeof T?T():T;return P[1]={type:s,blueprint:P,template:l,queries:null,viewQuery:v,declTNode:o,data:P.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:W,incompleteFirstPass:!1}}function yx(s,o,l,u){const h=xI(o);null===l?h.push(u):(h.push(l),s.firstCreatePass&&Db(s).push(u,h.length-1))}function yI(s,o,l){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(o,h):l[u]=[o,h]}return l}function $s(s,o,l,u,h,p,m,v){const w=Di(o,l);let S,T=o.inputs;!v&&null!=T&&(S=T[u])?(Ab(s,l,S,u,h),tl(o)&&function(s,o){const l=pi(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(u=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=m?m(h,o.value||"",u):h,tr(p)?p.setProperty(w,u,h):Si(u)||(w.setProperty?w.setProperty(u,h):w[u]=h))}function Sd(s,o,l,u){let h=!1;if(Ev()){const p=function(s,o,l){const u=s.directiveRegistry;let h=null;if(u)for(let p=0;p<u.length;p++){const m=u[p];_m(l,m.selectors,!1)&&(h||(h=[]),ul(No(l,o),s,m.type),Br(m)?(Ix(s,l),h.unshift(m)):h.push(m))}return h}(s,o,l),m=null===u?null:{"":-1};if(null!==p){h=!0,bb(l,s.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let v=!1,w=!1,T=Cl(s,o,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];l.mergedAttrs=nd(l.mergedAttrs,k.hostAttrs),Tx(s,l,o,T,k),jU(T,k,m),null!==k.contentQueries&&(l.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(l.flags|=128);const P=k.type.prototype;!v&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),v=!0),!w&&(P.ngOnChanges||P.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),w=!0),T++}!function(s,o){const u=o.directiveEnd,h=s.data,p=o.attrs,m=[];let v=null,w=null;for(let T=o.directiveStart;T<u;T++){const S=h[T],k=S.inputs,P=null===p||tI(o)?null:Sx(k,p);m.push(P),v=yI(k,T,v),w=yI(S.outputs,T,w)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=m,o.inputs=v,o.outputs=w}(s,l)}m&&function(s,o,l){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Le("301",`Export of name '${o[h+1]}' not found!`);u.push(o[h],p)}}}(l,u,m)}return l.mergedAttrs=nd(l.mergedAttrs,l.attrs),h}function EI(s,o,l,u,h,p){const m=p.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const w=~o.index;(function(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(v)!=w&&v.push(w),v.push(u,h,m)}}function Cx(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ix(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function jU(s,o,l){if(l){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)l[o.exportAs[u]]=s;Br(o)&&(l[""]=s)}}function bb(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Tx(s,o,l,u,h){s.data[u]=h;const p=h.factory||(h.factory=fa(h.type)),m=new va(p,Br(h),null);s.blueprint[u]=m,l[u]=m,EI(s,o,0,u,Cl(s,l,h.hostVars,on),h)}function Dx(s,o,l){const u=Di(o,s),h=_I(l),p=s[10],m=Am(s,Id(s,h,null,l.onPush?64:16,u,o,p,p.createRenderer(u,l),null,null));s[o.index]=m}function Wo(s,o,l,u,h,p){const m=Di(s,o);!function(s,o,l,u,h,p,m){if(null==p)tr(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const v=null==m?oe(p):m(p,u||"",h);tr(s)?s.setAttribute(o,h,v,l):l?o.setAttributeNS(l,h,v):o.setAttribute(h,v)}}(o[11],m,p,s.value,l,u,h)}function CI(s,o,l,u,h,p){const m=p[o];if(null!==m){const v=u.setInput;for(let w=0;w<m.length;){const T=m[w++],S=m[w++],k=m[w++];null!==v?u.setInput(l,k,T,S):l[S]=k}}}function Sx(s,o){let l=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return l}function II(s,o,l,u){return new Array(s,!0,!1,o,null,0,u,l,null,null)}function DI(s,o){const l=pi(o,s);if(Wu(l)){const u=l[1];80&l[2]?xf(u,l,u.template,l[8]):l[5]>0&&Cb(l)}}function Cb(s){for(let u=Wv(s);null!==u;u=qv(u))for(let h=10;h<u.length;h++){const p=u[h];if(1024&p[2]){const m=p[1];xf(m,p,m.template,p[8])}else p[5]>0&&Cb(p)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const h=pi(l[u],s);Wu(h)&&h[5]>0&&Cb(h)}}function Ax(s,o){const l=pi(o,s),u=l[1];(function(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(u,l),$c(u,l,l[8])}function Am(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function SI(s){for(;s;){s[2]|=64;const o=yd(s);if(ji(s)&&!o)return s;s=o}return null}function RI(s,o,l){const u=o[10];u.begin&&u.begin();try{xf(s,o,s.template,l)}catch(h){throw Sb(o,h),h}finally{u.end&&u.end()}}function Tb(s){!function(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],u=B0(l),h=u[1];gI(h,u,h.template,l)}}(s[8])}function zc(s,o,l){ll(0),o(s,l)}const MI=(()=>Promise.resolve(null))();function xI(s){return s[7]||(s[7]=[])}function Db(s){return s.cleanup||(s.cleanup=[])}function Il(s,o,l){return(null===s||Br(s))&&(l=function(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}function Sb(s,o){const l=s[9],u=l?l.get(Df,null):null;u&&u.handleError(o)}function Ab(s,o,l,u,h){for(let p=0;p<l.length;){const m=l[p++],v=l[p++],w=o[m],T=s.data[m];null!==T.setInput?T.setInput(w,h,u,v):w[v]=h}}function Pa(s,o,l){const u=pa(o,s);!function(s,o,l){tr(s)?s.setValue(o,l):o.textContent=l}(s[11],u,l)}function kf(s,o,l){let u=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?p=v:1==p?h=X(h,v):2==p&&(u=X(u,v+": "+o[++m]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=h:s.classesWithoutHost=h}const ho=new ur("INJECTOR",-1);class kI{get(o,l=Nc){if(l===Nc){const u=new Error(`NullInjectorError: No provider for ${te(o)}!`);throw u.name="NullInjectorError",u}return l}}const Ad=new ur("Set Injector scope."),Rm={},zU={};let Rb;function OI(){return void 0===Rb&&(Rb=new kI),Rb}function Nx(s,o=null,l=null,u){return new PI(s,l,o||OI(),u)}class PI{constructor(o,l,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&Ai(l,v=>this.processProvider(v,o,l)),Ai([o],v=>this.processInjectorType(v,[],p)),this.records.set(ho,Tl(void 0,this));const m=this.records.get(Ad);this.scope=null!=m?m.value:null,this.source=h||("object"==typeof o?null:te(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Nc,u=re.Default){this.assertNotDestroyed();const h=Pr(this),p=mt(void 0);try{if(!(u&re.SkipSelf)){let v=this.records.get(o);if(void 0===v){const w=("function"==typeof(s=o)||"object"==typeof s&&s instanceof ur)&&dn(o);v=w&&this.injectableDefInScope(w)?Tl(Mm(o),Rm):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(u&re.Self?OI():this.parent).get(o,l=u&re.Optional&&l===Nc?null:l)}catch(m){if("NullInjectorError"===m.name){if((m[so]=m[so]||[]).unshift(te(o)),h)throw m;return Qg(m,o,"R3InjectorError",this.source)}throw m}finally{mt(p),Pr(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((u,h)=>o.push(te(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,l,u){if(!(o=L(o)))return!1;let h=Ir(o);const p=null==h&&o.ngModule||void 0,m=void 0===p?o:p,v=-1!==u.indexOf(m);if(void 0!==p&&(h=Ir(p)),null==h)return!1;if(null!=h.imports&&!v){let S;u.push(m);try{Ai(h.imports,k=>{this.processInjectorType(k,l,u)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:P,providers:W}=S[k];Ai(W,ee=>this.processProvider(ee,P,W||z))}}this.injectorDefTypes.add(m);const w=fa(m)||(()=>new m);this.records.set(m,Tl(w,Rm));const T=h.providers;if(null!=T&&!v){const S=o;Ai(T,k=>this.processProvider(k,S,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,u){let h=Sl(o=L(o))?o:L(o&&o.provide);const p=Lx(s=o)?Tl(void 0,s.useValue):Tl(Mb(s),Rm);var s;if(Sl(o)||!0!==o.multi)this.records.get(h);else{let m=this.records.get(h);m||(m=Tl(void 0,Rm,!0),m.factory=()=>vl(m.multi),this.records.set(h,m)),h=o,m.multi.push(o)}this.records.set(h,p)}hydrate(o,l){return l.value===Rm&&(l.value=zU,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(s=l.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const l=L(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Mm(s){const o=dn(s),l=null!==o?o.factory:fa(s);if(null!==l)return l;if(s instanceof ur)throw new Error(`Token ${te(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const u=Lo(o,"?");throw new Error(`Can't resolve all parameters for ${te(s)}: (${u.join(", ")}).`)}const l=function(s){const o=s&&(s[Gn]||s[Qn]);if(o){const l=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function Mb(s,o,l){let u;if(Sl(s)){const h=L(s);return fa(h)||Mm(h)}if(Lx(s))u=()=>L(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...vl(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))u=()=>sr(L(s.useExisting));else{const h=L(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return fa(h)||Mm(h);u=()=>new h(...vl(s.deps))}return u}function Tl(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Lx(s){return null!==s&&"object"==typeof s&&Sa in s}function Sl(s){return"function"==typeof s}const Vx=function(s,o,l){return function(s,o=null,l=null,u){const h=Nx(s,o,l,u);return h._resolveInjectorDefTypes(),h}({name:l},o,s,l)};let ar=(()=>{class s{static create(l,u){return Array.isArray(l)?Vx(l,u,""):Vx(l.providers,l.parent,l.name||"")}}return s.THROW_IF_NOT_FOUND=Nc,s.NULL=new kI,s.\u0275prov=rt({token:s,providedIn:"any",factory:()=>sr(ho)}),s.__NG_ELEMENT_ID__=-1,s})();function Bm(s,o){Ju(B0(s)[1],rr())}function jm(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;o;){let h;if(Br(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(l){u.push(h);const m=s;m.inputs=Hm(s.inputs),m.declaredInputs=Hm(s.declaredInputs),m.outputs=Hm(s.outputs);const v=h.hostBindings;v&&Yc(s,v);const w=h.viewQuery,T=h.contentQueries;if(w&&zI(s,w),T&&Ko(s,T),ie(s.inputs,h.inputs),ie(s.declaredInputs,h.declaredInputs),ie(s.outputs,h.outputs),Br(h)&&h.data.animation){const S=s.data;S.animation=(S.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let m=0;m<p.length;m++){const v=p[m];v&&v.ngInherit&&v(s),v===jm&&(l=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,l=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=nd(h.hostAttrs,l=nd(l,h.hostAttrs))}}(u)}function Hm(s){return s===q?{}:s===z?[]:s}function zI(s,o){const l=s.viewQuery;s.viewQuery=l?(u,h)=>{o(u,h),l(u,h)}:o}function Ko(s,o){const l=s.contentQueries;s.contentQueries=l?(u,h,p)=>{o(u,h,p),l(u,h,p)}:o}function Yc(s,o){const l=s.hostBindings;s.hostBindings=l?(u,h)=>{o(u,h),l(u,h)}:o}let Ff=null;function Fa(){if(!Ff){const s=Zt.Symbol;if(s&&s.iterator)Ff=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const u=o[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Ff=u)}}}return Ff}class po{constructor(o){this.wrapped=o}static wrap(o){return new po(o)}static unwrap(o){return po.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof po}}function Zc(s){return!!$m(s)&&(Array.isArray(s)||!(s instanceof Map)&&Fa()in s)}function $m(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ar(s,o,l){return s[o]=l}function ei(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Rd(s,o,l,u){const h=He();return ei(h,_s(),o)&&(hn(),Wo(Dr(),h,s,o,l,u)),Rd}function ZI(s,o,l,u,h,p,m,v){const w=He(),T=hn(),S=s+20,k=T.firstCreatePass?function(s,o,l,u,h,p,m,v,w){const T=o.consts,S=Td(o,s,4,m||null,to(T,v));Sd(o,l,S,to(T,w)),Ju(o,S);const k=S.tViews=Dd(2,S,u,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,S),k.queries=o.queries.embeddedTView(S)),S}(S,T,w,o,l,u,h,p,m):T.data[S];rs(k,!1);const P=w[11].createComment("");pm(T,w,P,k),qi(P,w),Am(w,w[S]=II(P,w,P,k)),Mo(k)&&Dm(T,w,k),null!=m&&gb(w,k,v)}function QI(s){return ga(zt.lFrame.contextLView,20+s)}function Mi(s,o=re.Default){const l=He();return null===l?sr(s,o):kv(rr(),l,L(s),o)}function Zb(s,o,l){const u=He();return ei(u,_s(),o)&&$s(hn(),Dr(),u,s,o,u[11],l,!1),Zb}function Qb(s,o,l,u,h){const m=h?"class":"style";Ab(s,l,o.inputs[m],m,u)}function Jb(s,o,l,u){const h=He(),p=hn(),m=20+s,v=h[11],w=h[m]=Yv(v,o,zt.lFrame.currentNamespace),T=p.firstCreatePass?function(s,o,l,u,h,p,m){const v=o.consts,T=Td(o,s,2,h,to(v,p));return Sd(o,l,T,to(v,m)),null!==T.attrs&&kf(T,T.attrs,!1),null!==T.mergedAttrs&&kf(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(m,p,h,0,o,l,u):p.data[m];rs(T,!0);const S=T.mergedAttrs;null!==S&&td(v,w,S);const k=T.classes;null!==k&&X0(v,w,k);const P=T.styles;null!==P&&XM(v,w,P),64!=(64&T.flags)&&pm(p,h,w,T),0===zt.lFrame.elementDepthCount&&qi(w,h),zt.lFrame.elementDepthCount++,Mo(T)&&(Dm(p,h,T),mI(p,T,h)),null!==u&&gb(h,T)}function Xm(){let s=rr();ol()?Ku():(s=s.parent,rs(s,!1));const o=s;zt.lFrame.elementDepthCount--;const l=hn();l.firstCreatePass&&(Ju(l,s),jh(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Qb(l,o,He(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Qb(l,o,He(),o.stylesWithoutHost,!1)}function $f(s,o,l,u){Jb(s,o,l,u),Xm()}function zf(s,o,l){const u=He(),h=hn(),p=s+20,m=h.firstCreatePass?function(s,o,l,u,h){const p=o.consts,m=to(p,u),v=Td(o,s,8,"ng-container",m);return null!==m&&kf(v,m,!0),Sd(o,l,v,to(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,u,o,l):h.data[p];rs(m,!0);const v=u[p]=u[11].createComment("");pm(h,u,v,m),qi(v,u),Mo(m)&&(Dm(h,u,m),mI(h,m,u)),null!=l&&gb(u,m)}function Xb(){let s=rr();const o=hn();ol()?Ku():(s=s.parent,rs(s,!1)),o.firstCreatePass&&(Ju(o,s),jh(s)&&o.queries.elementEnd(s))}function eE(){return He()}function e_(s){return!!s&&"function"==typeof s.then}function lT(s){return!!s&&"function"==typeof s.subscribe}const tE=lT;function t_(s,o,l,u){const h=He(),p=hn(),m=rr();return rE(p,h,h[11],m,s,o,!!l,u),t_}function nE(s,o){const l=rr(),u=He(),h=hn();return rE(h,u,Il(Xh(h.data),l,u),l,s,o,!1),nE}function rE(s,o,l,u,h,p,m,v){const w=Mo(u),S=s.firstCreatePass&&Db(s),k=o[8],P=xI(o);let W=!0;if(3&u.type||v){const he=Di(u,o),Ye=v?v(he):he,Fe=P.length,Ct=v?Ft=>v(Kn(Ft[u.index])):u.index;if(tr(l)){let Ft=null;if(!v&&w&&(Ft=function(s,o,l,u){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const m=h[p];if(m===l&&h[p+1]===u){const v=o[7],w=h[p+2];return v.length>w?v[w]:null}"string"==typeof m&&(p+=2)}return null}(s,o,h,u.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=p,Ft.__ngLastListenerFn__=p,W=!1;else{p=r_(u,o,k,p,!1);const pn=l.listen(Ye,h,p);P.push(p,pn),S&&S.push(h,Ct,Fe,Fe+1)}}else p=r_(u,o,k,p,!0),Ye.addEventListener(h,p,m),P.push(p),S&&S.push(h,Ct,Fe,m)}else p=r_(u,o,k,p,!1);const ee=u.outputs;let Ce;if(W&&null!==ee&&(Ce=ee[h])){const he=Ce.length;if(he)for(let Ye=0;Ye<he;Ye+=2){const lr=o[Ce[Ye]][Ce[Ye+1]].subscribe(p),As=P.length;P.push(p,lr),S&&S.push(h,u.index,As,-(As+1))}}}function n_(s,o,l,u){try{return!1!==l(u)}catch(h){return Sb(s,h),!1}}function r_(s,o,l,u,h){return function p(m){if(m===Function)return u;const v=2&s.flags?pi(s.index,o):o;0==(32&o[2])&&SI(v);let w=n_(o,0,u,m),T=p.__ngNextListenerFn__;for(;T;)w=n_(o,0,T,m)&&w,T=T.__ngNextListenerFn__;return h&&!1===w&&(m.preventDefault(),m.returnValue=!1),w}}function Gf(s=1){return function(s){return(zt.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,zt.lFrame.contextLView))[8]}(s)}function iE(s,o){let l=null;const u=function(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===u?_m(s,p,!0):Ed(u,p))return h}else l=h}return l}function cT(s){const o=He()[16][6];if(!o.projection){const u=o.projection=Lo(s?s.length:1,null),h=u.slice();let p=o.child;for(;null!==p;){const m=s?iE(p,s):0;null!==m&&(h[m]?h[m].projectionNext=p:u[m]=p,h[m]=p),p=p.next}}}function uT(s,o=0,l){const u=He(),h=hn(),p=Td(h,20+s,16,null,l||null);null===p.projection&&(p.projection=o),Ku(),64!=(64&p.flags)&&function(s,o,l){Q0(o[11],0,o,l,WM(s,l,o),ZM(l.parent||o[6],l,o))}(h,u,p)}function yT(s,o,l,u,h){const p=s[l+1],m=null===o;let v=u?os(p):co(p),w=!1;for(;0!==v&&(!1===w||m);){const S=s[v+1];vT(s[v],o)&&(w=!0,s[v+1]=u?ob(S):ym(S)),v=u?os(S):co(S)}w&&(s[l+1]=u?ym(p):ob(p))}function vT(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&_l(s,o)>=0}function Yo(s,o,l){return mo(s,o,l,!1),Yo}function s_(s,o){return mo(s,o,null,!0),s_}function mo(s,o,l,u){const h=He(),p=hn(),m=function(s){const o=zt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);p.firstUpdatePass&&function(s,o,l,u){const h=s.data;if(null===h[l+1]){const p=h[gi()],m=function(s,o){return o>=s.expandoStartIndex}(s,l);(function(s,o){return 0!=(s.flags&(o?16:32))})(p,u)&&null===o&&!m&&(o=!1),o=function(s,o,l,u){const h=Xh(s);let p=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(l=qf(l=o_(null,s,o,l,u),o.attrs,u),p=null);else{const m=o.directiveStylingLast;if(-1===m||s[m]!==h)if(l=o_(h,s,o,l,u),null===p){let w=function(s,o,l){const u=l?o.classBindings:o.styleBindings;if(0!==co(u))return s[os(u)]}(s,o,u);void 0!==w&&Array.isArray(w)&&(w=o_(null,s,o,w[1],u),w=qf(w,o.attrs,u),function(s,o,l,u){s[os(l?o.classBindings:o.styleBindings)]=u}(s,o,u,w))}else p=function(s,o,l){let u;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)u=qf(u,s[p].hostAttrs,l);return qf(u,o.attrs,l)}(s,o,u)}return void 0!==p&&(u?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,u),function(s,o,l,u,h,p){let m=p?o.classBindings:o.styleBindings,v=os(m),w=co(m);s[u]=l;let S,T=!1;if(Array.isArray(l)){const k=l;S=k[1],(null===S||_l(k,S)>0)&&(T=!0)}else S=l;if(h)if(0!==w){const P=os(s[v+1]);s[u+1]=jc(P,v),0!==P&&(s[P+1]=vm(s[P+1],u)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],u)}else s[u+1]=jc(v,0),0!==v&&(s[v+1]=vm(s[v+1],u)),v=u;else s[u+1]=jc(w,0),0===v?v=u:s[w+1]=vm(s[w+1],u),w=u;T&&(s[u+1]=ym(s[u+1])),yT(s,S,u,!0),yT(s,S,u,!1),function(s,o,l,u,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&_l(p,o)>=0&&(l[u+1]=ob(l[u+1]))}(o,S,s,u,p),m=jc(v,w),p?o.classBindings=m:o.styleBindings=m}(h,p,o,l,m,u)}}(p,s,m,u),o!==on&&ei(h,m,o)&&function(s,o,l,u,h,p,m,v){if(!(3&o.type))return;const w=s.data,T=w[v+1];cE(function(s){return 1==(1&s)}(T)?MT(w,o,l,h,co(T),m):void 0)||(cE(p)||function(s){return 2==(2&s)}(T)&&(p=MT(w,null,l,h,v,m)),function(s,o,l,u,h){const p=tr(s);if(o)h?p?s.addClass(l,u):l.classList.add(u):p?s.removeClass(l,u):l.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:xa.DashCase;if(null==h)p?s.removeStyle(l,u,m):l.style.removeProperty(u);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),m|=xa.Important),p?s.setStyle(l,u,h,m):l.style.setProperty(u,h,v?"important":"")}}}(u,m,pa(gi(),l),h,p))}(p,p.data[gi()],h,h[11],s,h[m+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=te(Ho(s)))),s}(o,l),u,m)}function o_(s,o,l,u,h){let p=null;const m=l.directiveEnd;let v=l.directiveStylingLast;for(-1===v?v=l.directiveStart:v++;v<m&&(p=o[v],u=qf(u,p.hostAttrs,h),p!==s);)v++;return null!==s&&(l.directiveStylingLast=v),u}function qf(s,o,l){const u=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const m=o[p];"number"==typeof m?h=m:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xr(s,m,!!l||o[++p]))}return void 0===s?null:s}function MT(s,o,l,u,h,p){const m=null===o;let v;for(;h>0;){const w=s[h],T=Array.isArray(w),S=T?w[1]:w,k=null===S;let P=l[h+1];P===on&&(P=k?z:void 0);let W=k?Ca(P,u):S===u?P:void 0;if(T&&!cE(W)&&(W=Ca(w,u)),cE(W)&&(v=W,m))return v;const ee=s[h+1];h=m?os(ee):co(ee)}if(null!==o){let w=p?o.residualClasses:o.residualStyles;null!=w&&(v=Ca(w,u))}return v}function cE(s){return void 0!==s}function xT(s,o=""){const l=He(),u=hn(),h=s+20,p=u.firstCreatePass?Td(u,h,1,o,null):u.data[h],m=l[h]=function(s,o){return tr(s)?s.createText(o):s.createTextNode(o)}(l[11],o);pm(u,l,m,p),rs(p,!1)}function uE(s){return Yf("",s,""),uE}function Yf(s,o,l){const u=He(),h=function(s,o,l,u){return ei(s,_s(),l)?o+oe(l)+u:on}(u,s,o,l);return h!==on&&Pa(u,gi(),h),Yf}function pE(s,o,l){const u=He();return ei(u,_s(),o)&&$s(hn(),Dr(),u,s,o,u[11],l,!0),pE}function a_(s,o,l){const u=He();if(ei(u,_s(),o)){const p=hn(),m=Dr();$s(p,m,u,s,o,Il(Xh(p.data),m,u),l,!0)}return a_}const Pl=void 0;var Rk=["en",[["a","p"],["AM","PM"],Pl],[["AM","PM"],Pl,Pl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pl,"{1} 'at' {0}",Pl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let Fd={};function qT(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=xk(o);if(l)return l;const u=o.split("-")[0];if(l=xk(u),l)return l;if("en"===u)return Rk;throw new Error(`Missing locale data for the locale "${s}".`)}function Mk(s){return qT(s)[jt.PluralCase]}function xk(s){return s in Fd||(Fd[s]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[s]),Fd[s]}var jt=(()=>((jt=jt||{})[jt.LocaleId=0]="LocaleId",jt[jt.DayPeriodsFormat=1]="DayPeriodsFormat",jt[jt.DayPeriodsStandalone=2]="DayPeriodsStandalone",jt[jt.DaysFormat=3]="DaysFormat",jt[jt.DaysStandalone=4]="DaysStandalone",jt[jt.MonthsFormat=5]="MonthsFormat",jt[jt.MonthsStandalone=6]="MonthsStandalone",jt[jt.Eras=7]="Eras",jt[jt.FirstDayOfWeek=8]="FirstDayOfWeek",jt[jt.WeekendRange=9]="WeekendRange",jt[jt.DateFormat=10]="DateFormat",jt[jt.TimeFormat=11]="TimeFormat",jt[jt.DateTimeFormat=12]="DateTimeFormat",jt[jt.NumberSymbols=13]="NumberSymbols",jt[jt.NumberFormats=14]="NumberFormats",jt[jt.CurrencyCode=15]="CurrencyCode",jt[jt.CurrencySymbol=16]="CurrencySymbol",jt[jt.CurrencyName=17]="CurrencyName",jt[jt.Currencies=18]="Currencies",jt[jt.Directionality=19]="Directionality",jt[jt.PluralCase=20]="PluralCase",jt[jt.ExtraData=21]="ExtraData",jt))();const l_="en-US";let YT=l_;function u_(s){bt(s,"Expected localeId to be defined"),"string"==typeof s&&(YT=s.toLowerCase().replace(/_/g,"-"))}function g_(s,o,l,u,h){if(s=L(s),Array.isArray(s))for(let p=0;p<s.length;p++)g_(s[p],o,l,u,h);else{const p=hn(),m=He();let v=Sl(s)?s:L(s.provide),w=Mb(s);const T=rr(),S=1048575&T.providerIndexes,k=T.directiveStart,P=T.providerIndexes>>20;if(Sl(s)||!s.multi){const W=new va(w,h,Mi),ee=__(v,o,h?S:S+P,k);-1===ee?(ul(No(T,m),p,v),m_(p,s,o.length),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),l.push(W),m.push(W)):(l[ee]=W,m[ee]=W)}else{const W=__(v,o,S+P,k),ee=__(v,o,S,S+P),Ce=W>=0&&l[W],he=ee>=0&&l[ee];if(h&&!he||!h&&!Ce){ul(No(T,m),p,v);const Ye=function(s,o,l,u,h){const p=new va(s,l,Mi);return p.multi=[],p.index=o,p.componentProviders=0,vE(p,h,u&&!l),p}(h?Vl:ID,l.length,h,u,w);!h&&he&&(l[ee].providerFactory=Ye),m_(p,s,o.length,0),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),l.push(Ye),m.push(Ye)}else m_(p,s,W>-1?W:ee,vE(l[h?ee:W],w,!h&&u));!h&&u&&he&&l[ee].componentProviders++}}}function m_(s,o,l,u){const h=Sl(o);if(h||function(s){return!!s.useClass}(o)){const m=(o.useClass||o).prototype.ngOnDestroy;if(m){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const w=v.indexOf(l);-1===w?v.push(l,[u,m]):v[w+1].push(u,m)}else v.push(l,m)}}}function vE(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function __(s,o,l,u){for(let h=l;h<u;h++)if(o[h]===s)return h;return-1}function ID(s,o,l,u){return y_(this.multi,[])}function Vl(s,o,l,u){const h=this.multi;let p;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Mc(l,l[1],this.providerFactory.index,u);p=v.slice(0,m),y_(h,p);for(let w=m;w<v.length;w++)p.push(v[w])}else p=[],y_(h,p);return p}function y_(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function bE(s,o=[]){return l=>{l.providersResolver=(u,h)=>function(s,o,l){const u=hn();if(u.firstCreatePass){const h=Br(s);g_(l,u.data,u.blueprint,h,!0),g_(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class SD{}const wE="ngComponent";class RD{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${te(s)}. Did you add it to @NgModule.entryComponents?`);return o[wE]=s,o}(o)}}let Ul=(()=>{class s{}return s.NULL=new RD,s})();function rp(...s){}function Ua(s,o){return new gr(Di(s,o))}const xD=function(){return Ua(rr(),He())};let gr=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=xD,s})();function Qo(s){return s instanceof gr?s.nativeElement:s}class IE{}let TB=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>TE(),s})();const TE=function(){const s=He(),l=pi(rr().index,s);return function(s){return s[11]}(eo(l)?l:s)};let ip=(()=>{class s{}return s.\u0275prov=rt({token:s,providedIn:"root",factory:()=>null}),s})();class OD{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const PD=new OD("12.2.13");class uO{constructor(){}supports(o){return Zc(o)}create(o){return new AB(o)}}const SB=(s,o)=>o;class AB{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||SB}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,u=this._removalsHead,h=0,p=null;for(;l||u;){const m=!u||l&&l.currentIndex<Ud(u,h,p)?l:u,v=Ud(m,h,p),w=m.currentIndex;if(m===u)h--,u=u._nextRemoved;else if(l=l._next,null==m.previousIndex)h++;else{p||(p=[]);const T=v-h,S=w-h;if(T!=S){for(let P=0;P<T;P++){const W=P<p.length?p[P]:p[P]=0,ee=W+P;S<=ee&&ee<T&&(p[P]=W+1)}p[m.previousIndex]=S-T}}v!==w&&o(m,v,w)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Zc(o))throw new Error(`Error trying to diff '${te(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,m,l=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],m=this._trackByFn(v,p),null!==l&&Object.is(l.trackById,m)?(u&&(l=this._verifyReinsertion(l,p,m,v)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,m,v),u=!0),l=l._next}else h=0,function(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Fa()]();let u;for(;!(u=l.next()).done;)o(u.value)}}(o,v=>{m=this._trackByFn(h,v),null!==l&&Object.is(l.trackById,m)?(u&&(l=this._verifyReinsertion(l,v,m,h)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,m,h),u=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,u,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new RB(l,u),p,h),o}_verifyReinsertion(o,l,u,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,u),this._addToMoves(o,u),o}_moveAfter(o,l,u){return this._unlink(o),this._insertAfter(o,l,u),this._addToMoves(o,u),o}_addAfter(o,l,u){return this._insertAfter(o,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,u){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new sp),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,u=o._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sp),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class RB{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dO{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const l=o._prevDup,u=o._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class sp{constructor(){this.map=new Map}put(o){const l=o.trackById;let u=this.map.get(l);u||(u=new dO,this.map.set(l,u)),u.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ud(s,o,l){const u=s.previousIndex;if(null===u)return u;let h=0;return l&&u<l.length&&(h=l[u]),u+o+h}class op{constructor(){}supports(o){return o instanceof Map||$m(o)}create(){return new E_}}class E_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||$m(o)))throw new Error(`Error trying to diff '${te(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,u);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const u=o._prev;return l._next=o,l._prev=u,o._prev=l,u&&(u._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,m=h._next;return p&&(p._next=m),m&&(m._prev=p),h._next=null,h._prev=null,h}const u=new hO(o);return this._records.set(o,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(u=>l(o[u],u))}}class hO{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function w_(){return new su([new uO])}let su=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||w_()),deps:[[s,new Bo,new Uo]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=rt({token:s,providedIn:"root",factory:w_}),s})();function ND(){return new ap([new op])}let ap=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||ND()),deps:[[s,new Bo,new Uo]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(u)return u;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=rt({token:s,providedIn:"root",factory:ND}),s})();function C_(s,o,l,u,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&u.push(Kn(p)),Ti(p))for(let v=10;v<p.length;v++){const w=p[v],T=w[1].firstChild;null!==T&&C_(w[1],w,T,u)}const m=l.type;if(8&m)C_(s,o,l.child,u);else if(32&m){const v=zv(l,o);let w;for(;w=v();)u.push(w)}else if(16&m){const v=Z0(o,l);if(Array.isArray(v))u.push(...v);else{const w=yd(o[16]);C_(w[1],w,v,u,!0)}}l=h?l.projectionNext:l.next}return u}class Bd{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return C_(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ti(o)){const l=o[8],u=l?l.indexOf(this):-1;u>-1&&(fm(o,u),vs(l,u))}this._attachedToViewContainer=!1}zM(this._lView[1],this._lView)}onDestroy(o){yx(this._lView[1],this._lView,null,o)}markForCheck(){SI(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){RI(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,l){al(!0);try{RI(s,o,l)}finally{al(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,Af(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class pO extends Bd{constructor(o){super(o),this._view=o}detectChanges(){Tb(this._view)}checkNoChanges(){!function(s){al(!0);try{Tb(s)}finally{al(!1)}}(this._view)}get context(){return null}}const DE=function(s){return function(s,o,l){if(tl(s)&&!l){const u=pi(s.index,o);return new Bd(u,u)}return 47&s.type?new Bd(o[16],o):null}(rr(),He(),16==(16&s))};let gO=(()=>{class s{}return s.__NG_ELEMENT_ID__=DE,s})();const I_=[new op],lp=new su([new uO]),T_=new ap(I_),mO=function(){return Hd(rr(),He())};let ou=(()=>{class s{}return s.__NG_ELEMENT_ID__=mO,s})();const LD=ou,AE=class extends LD{constructor(o,l,u){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(o){const l=this._declarationTContainer.tViews,u=Id(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(l)),$c(l,u,o),new Bd(u)}};function Hd(s,o){return 4&s.type?new AE(o,s,Ua(s,o)):null}class Ba{}class cp{}const _O=function(){return vO(rr(),He())};let ME=(()=>{class s{}return s.__NG_ELEMENT_ID__=_O,s})();const S_=ME,xE=class extends S_{constructor(o,l,u){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=u}get element(){return Ua(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Gi(this._hostTNode,this._hostLView);if(rd(o)){const l=ba(o,this._hostLView),u=ro(o);return new Fo(l[1].data[u+8],l)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=yO(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,u){const h=o.createEmbeddedView(l||{});return this.insert(h,u),h}createComponent(o,l,u,h,p){const m=u||this.parentInjector;if(!p&&null==o.ngModule&&m){const w=m.get(Ba,null);w&&(p=w)}const v=o.create(m,h,void 0,p);return this.insert(v.hostView,l),v}insert(o,l){const u=o._lView,h=u[1];if(Ti(u[3])){const S=this.indexOf(o);if(-1!==S)this.detach(S);else{const k=u[3],P=new xE(k,k[6],k[3]);P.detach(P.indexOf(o))}}const p=this._adjustIndex(l),m=this._lContainer;!function(s,o,l,u){const h=10+u,p=l.length;u>0&&(l[h-1][4]=o),u<p-10?(o[4]=l[h],Hr(l,10+u,o)):(l.push(o),o[4]=null),o[3]=l;const m=o[17];null!==m&&l!==m&&function(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(m,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,u,m,p);const v=tb(p,m),w=u[11],T=Jv(w,m[7]);return null!==T&&function(s,o,l,u,h,p){u[0]=h,u[6]=o,Af(s,u,l,1,h,p)}(h,m[6],w,u,T,v),o.attachToViewContainerRef(),Hr(UD(m),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=yO(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),u=fm(this._lContainer,l);u&&(vs(UD(this._lContainer),l),zM(u[1],u))}detach(o){const l=this._adjustIndex(o,-1),u=fm(this._lContainer,l);return u&&null!=vs(UD(this._lContainer),l)?new Bd(u):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function yO(s){return s[8]}function UD(s){return s[8]||(s[8]=[])}function vO(s,o){let l;const u=o[s.index];if(Ti(u))l=u;else{let h;if(8&s.type)h=Kn(u);else{const p=o[11];h=p.createComment("");const m=Di(s,o);bd(p,Jv(p,m),h,function(s,o){return tr(s)?s.nextSibling(o):o.nextSibling}(p,m),!1)}o[s.index]=l=II(u,o,h,s),Am(o,l)}return new xE(l,s,o)}const $l={};class oS extends Ul{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Cn(o);return new JO(l,this.ngModule)}}function QO(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const KB=new ur("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>VM});class JO extends SD{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=o.selectors.map(iI).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return QO(this.componentDef.inputs)}get outputs(){return QO(this.componentDef.outputs)}create(o,l,u,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(l,u,h)=>{const p=s.get(l,$l,h);return p!==$l||u===$l?p:o.get(l,u,h)}}}(o,h.injector):o,m=p.get(IE,ko),v=p.get(ip,null),w=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=u?function(s,o,l){if(tr(s))return s.selectRootElement(o,l===$e.ShadowDom);let u="string"==typeof o?s.querySelector(o):o;return u.textContent="",u}(w,u,this.componentDef.encapsulation):Yv(m.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),k=this.componentDef.onPush?576:528,P=function(s,o){return{components:[],scheduler:s||VM,clean:MI,playerHandler:o||null,flags:0}}(),W=Dd(0,null,null,1,0,null,null,null,null,null),ee=Id(null,W,P,k,null,null,m,w,v,p);let Ce,he;no(ee);try{const Ye=function(s,o,l,u,h,p){const m=l[1];l[20]=s;const w=Td(m,20,2,"#host",null),T=w.mergedAttrs=o.hostAttrs;null!==T&&(kf(w,T,!0),null!==s&&(td(h,s,T),null!==w.classes&&X0(h,s,w.classes),null!==w.styles&&XM(h,s,w.styles)));const S=u.createRenderer(s,o),k=Id(l,_I(o),null,o.onPush?64:16,l[20],w,u,S,p||null,null);return m.firstCreatePass&&(ul(No(w,l),m,o.type),Ix(m,w),bb(w,l.length,1)),Am(l,k),l[20]=k}(S,this.componentDef,ee,m,w);if(S)if(u)td(w,S,["ng-version",PD.full]);else{const{attrs:Fe,classes:Ct}=function(s){const o=[],l=[];let u=1,h=2;for(;u<s.length;){let p=s[u];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++u]):8===h&&l.push(p);else{if(!Go(h))break;h=p}u++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Fe&&td(w,S,Fe),Ct&&Ct.length>0&&X0(w,S,Ct.join(" "))}if(he=wc(W,20),void 0!==l){const Fe=he.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const Ft=l[Ct];Fe.push(null!=Ft?Array.from(Ft):null)}}Ce=function(s,o,l,u,h){const p=l[1],m=function(s,o,l){const u=rr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Tx(s,u,o,Cl(s,o,1,null),l));const h=Mc(o,s,u.directiveStart,u);qi(h,o);const p=Di(u,o);return p&&qi(p,o),h}(p,l,o);if(u.components.push(m),s[8]=m,h&&h.forEach(w=>w(m,o)),o.contentQueries){const w=rr();o.contentQueries(1,m,w.directiveStart)}const v=rr();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(_a(v.index),EI(l[1],v,0,v.directiveStart,v.directiveEnd,o),Cx(o,m)),m}(Ye,this.componentDef,ee,P,[Bm]),$c(W,ee,null)}finally{Ac()}return new XO(this.componentType,Ce,Ua(he,ee),ee,he)}}class XO extends class{}{constructor(o,l,u,h,p){super(),this.location=u,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new pO(h),this.componentType=o}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const du=new Map;class tP extends Ba{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new oS(this);const u=jn(o),h=o[ce]||null;h&&u_(h),this._bootstrapComponents=Ma(u.bootstrap),this._r3Injector=Nx(o,l,[{provide:Ba,useValue:this},{provide:Ul,useValue:this.componentFactoryResolver}],te(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ar.THROW_IF_NOT_FOUND,u=re.Default){return o===ar||o===Ba||o===ho?this:this._r3Injector.get(o,l,u)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cS extends cp{constructor(o){super(),this.moduleType=o,null!==jn(o)&&function(s){const o=new Set;!function l(u){const h=jn(u,!0),p=h.id;null!==p&&(function(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${te(o)} vs ${te(o.name)}`)}(p,du.get(p),u),du.set(p,u));const m=Ma(h.imports);for(const v of m)o.has(v)||(o.add(v),l(v))}(s)}(o)}create(o){return new tP(this.moduleType,o)}}function uS(s,o,l,u){return bp(He(),jr(),s,o,l,u)}function nP(s,o,l,u,h){return function(s,o,l,u,h,p,m){const v=o+l;return function(s,o,l,u){const h=ei(s,o,l);return ei(s,o+1,u)||h}(s,v,h,p)?Ar(s,v+2,m?u.call(m,h,p):u(h,p)):vo(s,v+2)}(He(),jr(),s,o,l,u,h)}function vo(s,o){const l=s[o];return l===on?void 0:l}function bp(s,o,l,u,h,p){const m=o+l;return ei(s,m,h)?Ar(s,m+1,p?u.call(p,h):u(h)):vo(s,m+1)}function gS(s,o){const l=hn();let u;const h=s+20;l.firstCreatePass?(u=function(s,o){if(o)for(let l=o.length-1;l>=0;l--){const u=o[l];if(s===u.name)return u}throw new Le("302",`The pipe '${s}' could not be found!`)}(o,l.pipeRegistry),l.data[h]=u,u.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,u.onDestroy)):u=l.data[h];const p=u.factory||(u.factory=fa(u.type)),m=mt(Mi);try{const v=id(!1),w=p();return id(v),function(s,o,l,u){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=u}(l,He(),h,w),w}finally{mt(m)}}function mS(s,o,l){const u=s+20,h=He(),p=ga(h,u);return function(s,o){po.isWrapped(o)&&(o=po.unwrap(o),s[zt.lFrame.bindingIndex]=on);return o}(h,function(s,o){return s[1].data[o].pure}(h,u)?bp(h,jr(),o,p.transform,l,p):p.transform(l))}function qE(s){return o=>{setTimeout(s,void 0,o)}}const Jo=class extends d.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,u){var h,p,m;let v=o,w=l||(()=>null),T=u;if(o&&"object"==typeof o){const k=o;v=null===(h=k.next)||void 0===h?void 0:h.bind(k),w=null===(p=k.error)||void 0===p?void 0:p.bind(k),T=null===(m=k.complete)||void 0===m?void 0:m.bind(k)}this.__isAsync&&(w=qE(w),v&&(v=qE(v)),T&&(T=qE(T)));const S=super.subscribe({next:v,error:w,complete:T});return o instanceof U.w&&o.add(S),S}};function dP(){return this._results[Fa()]()}class Cp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Fa(),u=Cp.prototype;u[l]||(u[l]=dP)}get changes(){return this._changes||(this._changes=new Jo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const u=this;u.dirty=!1;const h=is(o);(this._changesDetected=!function(s,o,l){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],p=o[u];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(u._results,h,l))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class KE{constructor(o){this.queryList=o,this.matches=null}clone(){return new KE(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ds{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const u=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<u;p++){const m=l.getByIndex(p);h.push(this.queries[m.indexInDeclarationView].clone())}return new Ds(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==bS(o,l).matches&&this.queries[l].setDirty()}}class hP{constructor(o,l,u=null){this.predicate=o,this.flags=l,this.read=u}}class YE{constructor(o=[]){this.queries=o}elementStart(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let u=0;u<this.length;u++){const h=null!==l?l.length:0,p=this.getByIndex(u).embeddedTView(o,h);p&&(p.indexInDeclarationView=u,null!==l?l.push(p):l=[p])}return null!==l?new YE(l):null}template(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ke{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new ke(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const p=u[h];this.matchTNodeWithReadOption(o,l,kn(l,p)),this.matchTNodeWithReadOption(o,l,Ea(l,o,p,!1,!1))}else u===ou?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Ea(l,o,u,!1,!1))}matchTNodeWithReadOption(o,l,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===gr||h===ME||h===ou&&4&l.type)this.addMatch(l.index,-2);else{const p=Ea(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,u)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function kn(s,o){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===o)return l[u+1];return null}function Ws(s,o,l,u){return-1===l?function(s,o){return 11&s.type?Ua(s,o):4&s.type?Hd(s,o):null}(o,s):-2===l?function(s,o,l){return l===gr?Ua(o,s):l===ou?Hd(o,s):l===ME?vO(o,s):void 0}(s,o,u):Mc(s,s[1],l,o)}function yS(s,o,l,u){const h=o[19].queries[u];if(null===h.matches){const p=s.data,m=l.matches,v=[];for(let w=0;w<m.length;w+=2){const T=m[w];v.push(T<0?null:Ws(o,p[T],m[w+1],l.metadata.read))}h.matches=v}return h.matches}function bo(s,o,l,u){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const m=yS(s,o,h,l);for(let v=0;v<p.length;v+=2){const w=p[v];if(w>0)u.push(m[v/2]);else{const T=p[v+1],S=o[-w];for(let k=10;k<S.length;k++){const P=S[k];P[17]===P[3]&&bo(P[1],P,T,u)}if(null!==S[9]){const k=S[9];for(let P=0;P<k.length;P++){const W=k[P];bo(W[1],W,T,u)}}}}}return u}function yt(s){const o=He(),l=hn(),u=Vg();ll(u+1);const h=bS(l,u);if(s.dirty&&yv(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?bo(l,o,u,[]):yS(l,o,h,u);s.reset(p,Qo),s.notifyOnChanges()}return!0}return!1}function N_(s,o,l){const u=hn();u.firstCreatePass&&(vS(u,new hP(s,o,l),-1),2==(2&o)&&(u.staticViewQueries=!0)),Qd(u,He(),o)}function rn(s,o,l,u){const h=hn();if(h.firstCreatePass){const p=rr();vS(h,new hP(o,l,u),p.index),function(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Qd(h,He(),l)}function Tp(){return s=He(),o=Vg(),s[19].queries[o].queryList;var s,o}function Qd(s,o,l){const u=new Cp(4==(4&l));yx(s,o,u,u.destroy),null===o[19]&&(o[19]=new Ds),o[19].queries.push(new KE(u))}function vS(s,o,l){null===s.queries&&(s.queries=new YE),s.queries.track(new ke(o,l))}function bS(s,o){return s.queries.getByIndex(o)}const Jd=new ur("Application Initializer");let ql=(()=>{class s{constructor(l){this.appInits=l,this.resolve=rp,this.reject=rp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(e_(p))l.push(p);else if(tE(p)){const m=new Promise((v,w)=>{p.subscribe({complete:v,error:w})});l.push(m)}}Promise.all(l).then(()=>{u()}).catch(h=>{this.reject(h)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(sr(Jd,8))},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();const W_=new ur("AppId"),AP={provide:W_,useFactory:function(){return`${hu()}${hu()}${hu()}`},deps:[]};function hu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fw=new ur("Platform Initializer"),pw=new ur("Platform ID"),gw=new ur("appBootstrapListener");let jS=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();const q_=new ur("LocaleId"),fu=new ur("DefaultCurrencyCode");class xp{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}const K_=function(s){return new cS(s)},kp=K_,vw=function(s){return Promise.resolve(K_(s))},bw=function(s){const o=K_(s),u=Ma(jn(s).declarations).reduce((h,p)=>{const m=Cn(p);return m&&h.push(new JO(m)),h},[]);return new xp(o,u)},Op=bw,Ew=function(s){return Promise.resolve(bw(s))};let Kl=(()=>{class s{constructor(){this.compileModuleSync=kp,this.compileModuleAsync=vw,this.compileModuleAndAllComponentsSync=Op,this.compileModuleAndAllComponentsAsync=Ew}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();const kP=(()=>Promise.resolve(0))();function Np(s){"undefined"==typeof Zone?kP.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Yi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&l,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=Zt.requestAnimationFrame,o=Zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,pu(s),s.isCheckStableRunning=!0,Z_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),pu(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,h,p,m,v)=>{try{return ww(s),l.invokeTask(h,p,m,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Fp(s)}},onInvoke:(l,u,h,p,m,v,w)=>{try{return ww(s),l.invoke(h,p,m,v,w)}finally{s.shouldCoalesceRunChangeDetection&&o(),Fp(s)}},onHasTask:(l,u,h,p)=>{l.hasTask(h,p),u===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,pu(s),Z_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,u,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,u){return this._inner.run(o,l,u)}runTask(o,l,u,h){const p=this._inner,m=p.scheduleEventTask("NgZoneEvent: "+h,o,WS,rp,rp);try{return p.runTask(m,l,u)}finally{p.cancelTask(m)}}runGuarded(o,l,u){return this._inner.runGuarded(o,l,u)}runOutsideAngular(o){return this._outer.run(o)}}const WS={};function Z_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function pu(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ww(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Fp(s){s._nesting--,Z_(s)}class Lp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}run(o,l,u){return o.apply(l,u)}runGuarded(o,l,u){return o.apply(l,u)}runOutsideAngular(o){return o()}runTask(o,l,u,h){return o.apply(l,u)}}let Yl=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),Np(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Np(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,h){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==p),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,u,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(sr(Yi))},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})(),Q_=(()=>{class s{constructor(){this._applications=new Map,Zl.addToWindow(this)}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return Zl.findTestabilityInTree(this,l,u)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();class PP{addToWindow(o){}findTestabilityInTree(o,l,u){return null}}function Cw(s){Zl=s}let Zl=new PP,J_=!0,Ql=!1;function X_(){return Ql=!0,J_}function NP(){if(Ql)throw new Error("Cannot enable prod mode after platform setup.");J_=!1}let wi;const eh=new ur("AllowMultipleToken");class Vp{constructor(o,l){this.name=o,this.token=l}}function Dw(s,o,l=[]){const u=`Platform: ${o}`,h=new ur(u);return(p=[])=>{let m=YS();if(!m||m.injector.get(eh,!1))if(s)s(l.concat(p).concat({provide:h,useValue:!0}));else{const v=l.concat(p).concat({provide:h,useValue:!0},{provide:Ad,useValue:"platform"});!function(s){if(wi&&!wi.destroyed&&!wi.injector.get(eh,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wi=s.get(ZS);const o=s.get(fw,null);o&&o.forEach(l=>l())}(ar.create({providers:v,name:u}))}return function(s){const o=YS();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function YS(){return wi&&!wi.destroyed?wi:null}let ZS=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const v=function(s,o){let l;return l="noop"===s?new Lp:("zone.js"===s?void 0:s)||new Yi({enableLongStackTrace:X_(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Yi,useValue:v}];return v.run(()=>{const T=ar.create({providers:w,parent:this.injector,name:l.moduleType.name}),S=l.create(T),k=S.injector.get(Df,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const P=v.onError.subscribe({next:W=>{k.handleError(W)}});S.onDestroy(()=>{ny(this._modules,S),P.unsubscribe()})}),function(s,o,l){try{const u=l();return e_(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(k,v,()=>{const P=S.injector.get(ql);return P.runInitializers(),P.donePromise.then(()=>(u_(S.injector.get(q_,l_)||l_),this._moduleDoBootstrap(S),S))})})}bootstrapModule(l,u=[]){const h=Sw({},u);return function(s,o,l){const u=new cS(l);return Promise.resolve(u)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const u=l.injector.get(th);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Error(`The module ${te(l.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(sr(ar))},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();function Sw(s,o){return Array.isArray(o)?o.reduce(Sw,s):Object.assign(Object.assign({},s),o)}let th=(()=>{class s{constructor(l,u,h,p,m){this._zone=l,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new F.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new F.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),Np(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,le.T)(v,w.pipe((0,ye.B)()))}bootstrap(l,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=l instanceof SD?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Ba),v=h.create(ar.NULL,[],u||h.selector,p),w=v.location.nativeElement,T=v.injector.get(Yl,null),S=T&&v.injector.get(Q_);return T&&S&&S.registerApplication(w,T),v.onDestroy(()=>{this.detachView(v.hostView),ny(this.components,v),S&&S.unregisterApplication(w)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;ny(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(gw,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(sr(Yi),sr(ar),sr(Df),sr(Ul),sr(ql))},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();function ny(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}class BP{}class QS{}const JS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Mw=(()=>{class s{constructor(l,u){this._compiler=l,this._config=u||JS}load(l){return this.loadAndCompile(l)}loadAndCompile(l){let[u,h]=l.split("#");return void 0===h&&(h="default"),O(8255)(u).then(p=>p[h]).then(p=>XS(p,u,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(l){let[u,h]=l.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),O(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[h+p]).then(m=>XS(m,u,h))}}return s.\u0275fac=function(l){return new(l||s)(sr(Kl),sr(QS,8))},s.\u0275prov=rt({token:s,factory:s.\u0275fac}),s})();function XS(s,o,l){if(!s)throw new Error(`Cannot find '${l}' in '${o}'`);return s}const Hp=function(s){return null},GP=Dw(null,"core",[{provide:pw,useValue:"unknown"},{provide:ZS,deps:[ar]},{provide:Q_,deps:[]},{provide:jS,deps:[]}]),Nw=[{provide:th,useClass:th,deps:[Yi,ar,Df,Ul,ql]},{provide:KB,deps:[Yi],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:ql,useClass:ql,deps:[[new Uo,Jd]]},{provide:Kl,useClass:Kl,deps:[]},AP,{provide:su,useFactory:function(){return lp},deps:[]},{provide:ap,useFactory:function(){return T_},deps:[]},{provide:q_,useFactory:function(s){return u_(s=s||"undefined"!=typeof $localize&&$localize.locale||l_),s},deps:[[new Vo(q_),new Uo,new Bo]]},{provide:fu,useValue:"USD"}];let uy=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(sr(th))},s.\u0275mod=Ze({type:s}),s.\u0275inj=qt({providers:Nw}),s})()},8939:(gt,Oe,O)=>{"use strict";O.d(Oe,{hO:()=>ne,xv:()=>X,Dh:()=>te,GT:()=>J,cc:()=>De,on:()=>N,pX:()=>ye});var d=O(7716),U=O(7841),F=O(7667);gt=O.hmd(gt);const le=["ngOnDestroy"],ye=(oe,Re,Be,Ke={})=>new Proxy(oe,{get:(Lt,Pt)=>Be.runOutsideAngular(()=>{var Ht;if(oe[Pt])return(null===(Ht=null==Ke?void 0:Ke.spy)||void 0===Ht?void 0:Ht.get)&&Ke.spy.get(Pt,oe[Pt]),oe[Pt];if(le.indexOf(Pt)>-1)return()=>{};const ve=Re.toPromise().then(Jt=>{const de=Jt&&Jt[Pt];return"function"==typeof de?de.bind(Jt):de&&de.then?de.then(Ee=>Be.run(()=>Ee)):Be.run(()=>de)});return new Proxy(()=>{},{get:(Jt,de)=>ve[de],apply:(Jt,de,Ee)=>ve.then(pe=>{var Se;const Ue=pe&&pe(...Ee);return(null===(Se=null==Ke?void 0:Ke.spy)||void 0===Se?void 0:Se.apply)&&Ke.spy.apply(Pt,Ee,Ue),Ue})})})}),J=(oe,Re)=>{Re.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(Ke=>{Object.defineProperty(oe.prototype,Ke,Object.getOwnPropertyDescriptor(Be.prototype||Be,Ke))})})};class ie{constructor(Re){return Re}}const te=new d.OlP("angularfire2.app.options"),X=new d.OlP("angularfire2.app.name");function N(oe,Re,Be){const Lt="object"==typeof Be&&Be||{};Lt.name=Lt.name||"string"==typeof Be&&Be||"[DEFAULT]";const Ht=U.Z.apps.filter(ve=>ve&&ve.name===Lt.name)[0]||Re.runOutsideAngular(()=>U.Z.initializeApp(oe,Lt));try{JSON.stringify(oe)!==JSON.stringify(Ht.options)&&j("error",`${Ht.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ve){}return new ie(Ht)}const j=(oe,...Re)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[oe](...Re)},L={provide:ie,useFactory:N,deps:[te,d.R0b,[new d.FiY,X]]};let ne=(()=>{class oe{constructor(Be){U.Z.registerVersion("angularfire",F.q4.full,"core"),U.Z.registerVersion("angularfire",F.q4.full,"app-compat"),U.Z.registerVersion("angular",d.q4F.full,Be.toString())}static initializeApp(Be,Ke){return{ngModule:oe,providers:[{provide:te,useValue:Be},{provide:X,useValue:Ke}]}}}return oe.\u0275fac=function(Be){return new(Be||oe)(d.LFG(d.Lbi))},oe.\u0275mod=d.oAB({type:oe}),oe.\u0275inj=d.cJS({providers:[L]}),oe})();function De(oe,Re,Be,Ke,Lt){const[,Pt,Ht]=globalThis.\u0275AngularfireInstanceCache.find(ve=>ve[0]===oe)||[];if(Pt)return function(oe,Re){try{return oe.toString()===Re.toString()}catch(Be){return oe===Re}}(Lt,Ht)||(ge("error",`${Re} was already initialized on the ${Be} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Lt,was:Ht})),Pt;{const ve=Ke();return globalThis.\u0275AngularfireInstanceCache.push([oe,ve,Lt]),ve}}const we=!!gt.hot,ge=(oe,...Re)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[oe](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7667:(gt,Oe,O)=>{"use strict";O.d(Oe,{q4:()=>L,iC:()=>sn,HU:()=>Ee,vb:()=>Ht,JM:()=>Pt,nk:()=>Lt,n1:()=>Be,_J:()=>Ke,u3:()=>bt});var d=O(7716),U=O(2329),F=O(2354),le=O(7373),ye=O(3047),J=O(7771),ie=O(3637),te=O(7574),X=O(3342),N=O(9673),j=O(6136);const L=new d.GfV("7.2.0"),ne="__angularfire_symbol__analyticsIsSupportedValue",De="__angularfire_symbol__analyticsIsSupported",Le="__angularfire_symbol__remoteConfigIsSupportedValue",we="__angularfire_symbol__remoteConfigIsSupported",ge="__angularfire_symbol__messagingIsSupportedValue",oe="__angularfire_symbol__messagingIsSupported";globalThis[De]||(globalThis[De]=(0,ye.Gb)().then(Ne=>globalThis[ne]=Ne)),globalThis[oe]||(globalThis[oe]=(0,le.Gb)().then(Ne=>globalThis[ge]=Ne)),globalThis[we]||(globalThis[we]=(0,F.Gb)().then(Ne=>globalThis[Le]=Ne));const Re=Ne=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Ne} in the constructor, first ensure that ${Ne} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Ne})\`.`,Be={async:()=>globalThis[oe],sync:()=>{const Ne=globalThis[ge];if(void 0===Ne)throw new Error(Re("Messaging"));return Ne}},Ke={async:()=>globalThis[we],sync:()=>{const Ne=globalThis[Le];if(void 0===Ne)throw new Error(Re("RemoteConfig"));return Ne}},Lt={async:()=>globalThis[De],sync:()=>{const Ne=globalThis[ne];if(void 0===Ne)throw new Error(Re("Analytics"));return Ne}};function Pt(Ne,Rt,Nt){if(Rt){if(1===Rt.length)return Rt[0];const Ut=Rt.filter(qt=>qt.app===Nt);if(1===Ut.length)return Ut[0]}return Nt.container.getProvider(Ne).getImmediate({optional:!0})}const Ht=(Ne,Rt)=>{const Nt=Rt?[Rt]:(0,U.C6)(),Vt=[];return Nt.forEach(rt=>{rt.container.getProvider(Ne).instances.forEach(qt=>{Vt.includes(qt)||Vt.push(qt)})}),Vt};function ve(){}class Jt{constructor(Rt,Nt=J.N){this.zone=Rt,this.delegate=Nt}now(){return this.delegate.now()}schedule(Rt,Nt,Vt){const rt=this.zone;return this.delegate.schedule(function(qt){rt.runGuarded(()=>{Rt.apply(this,[qt])})},Nt,Vt)}}class de{constructor(Rt){this.zone=Rt,this.task=null}call(Rt,Nt){const Vt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ve,{},ve,ve)),Nt.pipe((0,X.b)({next:Vt,complete:Vt,error:Vt})).subscribe(Rt).add(Vt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ee=(()=>{class Ne{constructor(Nt){this.ngZone=Nt,this.outsideAngular=Nt.runOutsideAngular(()=>new Jt(Zone.current)),this.insideAngular=Nt.run(()=>new Jt(Zone.current,ie.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ne.\u0275fac=function(Nt){return new(Nt||Ne)(d.LFG(d.R0b))},Ne.\u0275prov=d.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})();function pe(){const Ne=globalThis.\u0275AngularFireScheduler;if(!Ne)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ne}function Se(Ne){return pe().ngZone.runOutsideAngular(()=>Ne())}function Ue(Ne){return pe().ngZone.run(()=>Ne())}function sn(Ne){return pe(),function(Ne){return function(Nt){return(Nt=Nt.lift(new de(Ne.ngZone))).pipe((0,N.R)(Ne.outsideAngular),(0,j.QV)(Ne.insideAngular))}}(pe())(Ne)}const Et=(Ne,Rt)=>function(){return Rt&&setTimeout(()=>{"scheduled"===Rt.state&&Rt.invoke()},10),Ue(()=>Ne.apply(void 0,arguments))},bt=(Ne,Rt)=>function(){let Nt;for(let rt=0;rt<arguments.length;rt++)"function"==typeof arguments[rt]&&(Rt&&(Nt||(Nt=Ue(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ve,{},ve,ve)))),arguments[rt]=Et(arguments[rt],Nt));const Vt=Se(()=>Ne.apply(this,arguments));if(!Rt){if(Vt instanceof te.y){const rt=pe();return Vt.pipe((0,N.R)(rt.outsideAngular),(0,j.QV)(rt.insideAngular))}return Ue(()=>Vt)}return Vt instanceof te.y?Vt.pipe(sn):Vt instanceof Promise?Ue(()=>new Promise((rt,Ut)=>Vt.then(qt=>Ue(()=>rt(qt)),qt=>Ue(()=>Ut(qt))))):"function"==typeof Vt&&Nt?function(){return setTimeout(()=>{Nt&&"scheduled"===Nt.state&&Nt.invoke()},10),Vt.apply(this,arguments)}:Ue(()=>Vt)}},4495:(gt,Oe,O)=>{"use strict";O.d(Oe,{$:()=>vv,A:()=>j,E:()=>Y,G:()=>ft,I:()=>Ls,K:()=>tt,L:()=>Hh,M:()=>kg,N:()=>Og,P:()=>Or,Q:()=>fa,R:()=>Ov,T:()=>Hu,U:()=>$u,V:()=>mv,W:()=>y0,X:()=>pa,Y:()=>Gu,Z:()=>ga,_:()=>qu,a:()=>Mv,a0:()=>bv,a1:()=>Ev,a2:()=>sl,a3:()=>hn,a4:()=>rr,a5:()=>ma,a6:()=>rs,a7:()=>Ku,a8:()=>v0,a9:()=>jr,aA:()=>Zg,aB:()=>mf,aC:()=>Qe,aG:()=>Si,aJ:()=>Us,aa:()=>wv,ab:()=>ys,ae:()=>Cv,af:()=>Xh,ag:()=>Vg,aj:()=>_v,ak:()=>Dv,am:()=>Ju,an:()=>Po,ao:()=>tn,ap:()=>de,aq:()=>In,ar:()=>Qt,as:()=>Be,at:()=>im,au:()=>js,av:()=>Ke,aw:()=>ve,ax:()=>pe,ay:()=>K,az:()=>sr,b:()=>Rv,c:()=>Lo,d:()=>A0,e:()=>hr,f:()=>Bs,g:()=>so,h:()=>fd,i:()=>Yn,j:()=>Fc,k:()=>Cf,l:()=>D0,m:()=>wl,n:()=>Ho,o:()=>te,r:()=>ff,s:()=>T0,t:()=>_a,u:()=>Er,z:()=>De});var d=O(8239),U=O(3854),F=O(8026),le=O(4762),ye=O(5422),J=O(3910);const te={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const De=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},we=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),oe=new ye.Yd("@firebase/auth");function Re(E,..._){oe.logLevel<=ye.in.ERROR&&oe.error(`Auth (${F.SDK_VERSION}): ${E}`,..._)}function Be(E,..._){throw Ht(E,..._)}function Ke(E,..._){return Ht(E,..._)}function Lt(E,_,y){const I=Object.assign(Object.assign({},Le()),{[_]:y});return new U.LL("auth","Firebase",I).create(_,{appName:E.name})}function Pt(E,_,y){if(!(_ instanceof y))throw y.name!==_.constructor.name&&Be(E,"argument-error"),Lt(E,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(E,..._){if("string"!=typeof E){const y=_[0],I=[..._.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(y,...I)}return we.create(E,..._)}function ve(E,_,...y){if(!E)throw Ht(_,...y)}function Jt(E){const _="INTERNAL ASSERTION FAILED: "+E;throw Re(_),new Error(_)}function de(E,_){E||Jt(_)}const Ee=new Map;function pe(E){de(E instanceof Function,"Expected a class definition");let _=Ee.get(E);return _?(de(_ instanceof E,"Instance stored in cache mismatched with class"),_):(_=new E,Ee.set(E,_),_)}function be(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function It(){return"http:"===sn()||"https:"===sn()}function sn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class bt{constructor(_,y){this.shortDelay=_,this.longDelay=y,de(y>_,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(It()||(0,U.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ne(E,_){de(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return _?`${y}${_.startsWith("/")?_.slice(1):_}`:y}class Rt{static initialize(_,y,I){this.fetchImpl=_,y&&(this.headersImpl=y),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vt=new bt(3e4,6e4);function rt(E,_){return E.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:E.tenantId}):_}function Ut(E,_,y,I){return qt.apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(E,_,y,I,M={}){return dn(E,M,()=>{let V={},_e={};I&&("GET"===_?_e=I:V={body:JSON.stringify(I)});const We=(0,U.xO)(Object.assign({key:E.config.apiKey},_e)).slice(1),Tt=new(Rt.headers());return Tt.set("Content-Type","application/json"),Tt.set("X-Client-Version",E._getSdkClientVersion()),E.languageCode&&Tt.set("X-Firebase-Locale",E.languageCode),Rt.fetch()(Ir(E,E.config.apiHost,y,We),Object.assign({method:_,headers:Tt,referrerPolicy:"no-referrer"},V))})})).apply(this,arguments)}function dn(E,_,y){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(E,_,y){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},Nt),_);try{const M=new Gn(E),V=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const _e=yield V.json();if("needConfirmation"in _e)throw wn(E,"account-exists-with-different-credential",_e);if(V.ok&&!("errorMessage"in _e))return _e;{const We=V.ok?_e.errorMessage:_e.error.message,[Tt,Wt]=We.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Tt)throw wn(E,"credential-already-in-use",_e);if("EMAIL_EXISTS"===Tt)throw wn(E,"email-already-in-use",_e);const fn=I[Tt]||Tt.toLowerCase().replace(/[_\s]+/g,"-");if(Wt)throw Lt(E,fn,Wt);Be(E,fn)}}catch(M){if(M instanceof U.ZR)throw M;Be(E,"network-request-failed")}})).apply(this,arguments)}function Un(E,_,y,I){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(E,_,y,I,M={}){const V=yield Ut(E,_,y,I,M);return"mfaPendingCredential"in V&&Be(E,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function Ir(E,_,y,I){const M=`${_}${y}?${I}`;return E.config.emulator?Ne(E.config,M):`${E.config.apiScheme}://${M}`}class Gn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((y,I)=>{this.timer=setTimeout(()=>I(Ke(this.auth,"timeout")),Vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wn(E,_,y){const I={appName:E.name};y.email&&(I.email=y.email),y.phoneNumber&&(I.phoneNumber=y.phoneNumber);const M=Ke(E,_,I);return M.customData._tokenResponse=y,M}function it(){return(it=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function re(E,_){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ct(E,_){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Je(E){if(E)try{const _=new Date(Number(E));if(!isNaN(_.getTime()))return _.toUTCString()}catch(_){}}function Dt(){return(Dt=(0,d.Z)(function*(E,_=!1){const y=(0,U.m9)(E),I=yield y.getIdToken(_),M=Mt(I);ve(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const V="object"==typeof M.firebase?M.firebase:void 0,_e=null==V?void 0:V.sign_in_provider;return{claims:M,token:I,authTime:Je(Yt(M.auth_time)),issuedAtTime:Je(Yt(M.iat)),expirationTime:Je(Yt(M.exp)),signInProvider:_e||null,signInSecondFactor:(null==V?void 0:V.sign_in_second_factor)||null}})).apply(this,arguments)}function Yt(E){return 1e3*Number(E)}function Mt(E){const[_,y,I]=E.split(".");if(void 0===_||void 0===y||void 0===I)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,U.tV)(y);return M?JSON.parse(M):(Re("Failed to decode base64 JWT payload"),null)}catch(M){return Re("Caught error parsing JWT payload as JSON",M),null}}function lt(E,_){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(E,_,y=!1){if(y)return _;try{return yield _}catch(I){throw I instanceof U.ZR&&kr(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function kr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Xn{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var y;if(_){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(_=!1){var y=this;if(!this.isRunning)return;const I=this.getInterval(_);this.timerId=setTimeout((0,d.Z)(function*(){yield y.iteration()}),I)}iteration(){var _=this;return(0,d.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&_.schedule(!0))}_.schedule()})()}}class Zt{constructor(_,y){this.createdAt=_,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Je(this.lastLoginAt),this.creationTime=Je(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xt(E){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(E){var _;const y=E.auth,I=yield E.getIdToken(),M=yield lt(E,ct(y,{idToken:I}));ve(null==M?void 0:M.users.length,y,"internal-error");const V=M.users[0];E._notifyReloadListener(V);const _e=(null===(_=V.providerUserInfo)||void 0===_?void 0:_.length)?Pe(V.providerUserInfo):[],We=Q(E.providerData,_e),fn=!!E.isAnonymous&&!(E.email&&V.passwordHash||(null==We?void 0:We.length)),or={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:We,metadata:new Zt(V.createdAt,V.lastLoginAt),isAnonymous:fn};Object.assign(E,or)})).apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(E){const _=(0,U.m9)(E);yield Xt(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Q(E,_){return[...E.filter(I=>!_.some(M=>M.providerId===I.providerId)),..._]}function Pe(E){return E.map(_=>{var{providerId:y}=_,I=(0,le._T)(_,["providerId"]);return{providerId:y,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function ut(){return(ut=(0,d.Z)(function*(E,_){const y=yield dn(E,{},()=>{const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:M,apiKey:V}=E.config,_e=Ir(E,M,"/v1/token",`key=${V}`);return Rt.fetch()(_e,{method:"POST",headers:{"X-Client-Version":E._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:I})});return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){ve(_.idToken,"internal-error"),ve(void 0!==_.idToken,"internal-error"),ve(void 0!==_.refreshToken,"internal-error");const y="expiresIn"in _&&void 0!==_.expiresIn?Number(_.expiresIn):function(E){const _=Mt(E);return ve(_,"internal-error"),ve(void 0!==_.exp,"internal-error"),ve(void 0!==_.iat,"internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,y)}getToken(_,y=!1){var I=this;return(0,d.Z)(function*(){return ve(!I.accessToken||I.refreshToken,_,"user-token-expired"),y||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(_,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,y){var I=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:V,expiresIn:_e}=yield function(E,_){return ut.apply(this,arguments)}(_,y);I.updateTokensAndExpiration(M,V,Number(_e))})()}updateTokensAndExpiration(_,y,I){this.refreshToken=y||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(_,y){const{refreshToken:I,accessToken:M,expirationTime:V}=y,_e=new ce;return I&&(ve("string"==typeof I,"internal-error",{appName:_}),_e.refreshToken=I),M&&(ve("string"==typeof M,"internal-error",{appName:_}),_e.accessToken=M),V&&(ve("number"==typeof V,"internal-error",{appName:_}),_e.expirationTime=V),_e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return Jt("not implemented")}}function Ie(E,_){ve("string"==typeof E||void 0===E,"internal-error",{appName:_})}class je{constructor(_){var{uid:y,auth:I,stsTokenManager:M}=_,V=(0,le._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.metadata=new Zt(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(_){var y=this;return(0,d.Z)(function*(){const I=yield lt(y,y.stsTokenManager.getToken(y.auth,_));return ve(I,y.auth,"internal-error"),y.accessToken!==I&&(y.accessToken=I,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),I})()}getIdTokenResult(_){return function(E){return Dt.apply(this,arguments)}(this,_)}reload(){return function(E){return z.apply(this,arguments)}(this)}_assign(_){this!==_&&(ve(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(y=>Object.assign({},y)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new je(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,y=!1){var I=this;return(0,d.Z)(function*(){let M=!1;_.idToken&&_.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(_),M=!0),y&&(yield Xt(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var _=this;return(0,d.Z)(function*(){const y=yield _.getIdToken();return yield lt(_,function(E,_){return it.apply(this,arguments)}(_.auth,{idToken:y})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,y){var I,M,V,_e,We,Tt,Wt,fn;const or=null!==(I=y.displayName)&&void 0!==I?I:void 0,$o=null!==(M=y.email)&&void 0!==M?M:void 0,Aa=null!==(V=y.phoneNumber)&&void 0!==V?V:void 0,Ra=null!==(_e=y.photoURL)&&void 0!==_e?_e:void 0,om=null!==(We=y.tenantId)&&void 0!==We?We:void 0,ws=null!==(Tt=y._redirectEventId)&&void 0!==Tt?Tt:void 0,Bc=null!==(Wt=y.createdAt)&&void 0!==Wt?Wt:void 0,am=null!==(fn=y.lastLoginAt)&&void 0!==fn?fn:void 0,{uid:Tf,emailVerified:lm,isAnonymous:N0,providerData:Bv,stsTokenManager:F0}=y;ve(Tf&&F0,_,"internal-error");const cm=ce.fromJSON(this.name,F0);ve("string"==typeof Tf,_,"internal-error"),Ie(or,_.name),Ie($o,_.name),ve("boolean"==typeof lm,_,"internal-error"),ve("boolean"==typeof N0,_,"internal-error"),Ie(Aa,_.name),Ie(Ra,_.name),Ie(om,_.name),Ie(ws,_.name),Ie(Bc,_.name),Ie(am,_.name);const _d=new je({uid:Tf,auth:_,email:$o,emailVerified:lm,displayName:or,isAnonymous:N0,photoURL:Ra,phoneNumber:Aa,tenantId:om,stsTokenManager:cm,createdAt:Bc,lastLoginAt:am});return Bv&&Array.isArray(Bv)&&(_d.providerData=Bv.map(um=>Object.assign({},um))),ws&&(_d._redirectEventId=ws),_d}static _fromIdTokenResponse(_,y,I=!1){return(0,d.Z)(function*(){const M=new ce;M.updateFromServerResponse(y);const V=new je({uid:y.localId,auth:_,stsTokenManager:M,isAnonymous:I});return yield Xt(V),V})()}}const tt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(y,I){var M=this;return(0,d.Z)(function*(){M.storage[y]=I})()}_get(y){var I=this;return(0,d.Z)(function*(){const M=I.storage[y];return void 0===M?null:M})()}_remove(y){var I=this;return(0,d.Z)(function*(){delete I.storage[y]})()}_addListener(y,I){}_removeListener(y,I){}}return E.type="NONE",E})();function K(E,_,y){return`firebase:${E}:${_}:${y}`}class ${constructor(_,y,I){this.persistence=_,this.auth=y,this.userKey=I;const{config:M,name:V}=this.auth;this.fullUserKey=K(this.userKey,M.apiKey,V),this.fullPersistenceKey=K("persistence",M.apiKey,V),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,d.Z)(function*(){const y=yield _.persistence._get(_.fullUserKey);return y?je._fromJSON(_.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var y=this;return(0,d.Z)(function*(){if(y.persistence===_)return;const I=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=_,I?y.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,y,I="authUser"){return(0,d.Z)(function*(){if(!y.length)return new $(pe(tt),_,I);const M=(yield Promise.all(y.map(function(){var Wt=(0,d.Z)(function*(fn){if(yield fn._isAvailable())return fn});return function(fn){return Wt.apply(this,arguments)}}()))).filter(Wt=>Wt);let V=M[0]||pe(tt);const _e=K(I,_.config.apiKey,_.name);let We=null;for(const Wt of y)try{const fn=yield Wt._get(_e);if(fn){const or=je._fromJSON(_,fn);Wt!==V&&(We=or),V=Wt;break}}catch(fn){}const Tt=M.filter(Wt=>Wt._shouldAllowMigration);return V._shouldAllowMigration&&Tt.length?(V=Tt[0],We&&(yield V._set(_e,We.toJSON())),yield Promise.all(y.map(function(){var Wt=(0,d.Z)(function*(fn){if(fn!==V)try{yield fn._remove(_e)}catch(or){}});return function(fn){return Wt.apply(this,arguments)}}())),new $(V,_,I)):new $(V,_,I)})()}}function G(E){const _=E.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(Kt(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(Ae(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(mn(_))return"Blackberry";if(Cn(_))return"Webos";if(Ze(_))return"Safari";if((_.includes("chrome/")||St(_))&&!_.includes("edge/"))return"Chrome";if(Qt(_))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Ae(E=(0,U.z$)()){return/firefox\//i.test(E)}function Ze(E=(0,U.z$)()){const _=E.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function St(E=(0,U.z$)()){return/crios\//i.test(E)}function Kt(E=(0,U.z$)()){return/iemobile/i.test(E)}function Qt(E=(0,U.z$)()){return/android/i.test(E)}function mn(E=(0,U.z$)()){return/blackberry/i.test(E)}function Cn(E=(0,U.z$)()){return/webos/i.test(E)}function In(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)}function tn(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Tr(E=(0,U.z$)()){return In(E)||Qt(E)||Cn(E)||mn(E)||/windows phone/i.test(E)||Kt(E)}function ue(E,_=[]){let y;switch(E){case"Browser":y=G((0,U.z$)());break;case"Worker":y=`${G((0,U.z$)())}-${E}`;break;default:y=E}const I=_.length?_.join(","):"FirebaseCore-web";return`${y}/JsCore/${F.SDK_VERSION}/${I}`}class qe{constructor(_,y){this.app=_,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $t(this),this.idTokenSubscription=new $t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(_,y){var I=this;return y&&(this._popupRedirectResolver=pe(y)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,V;I._deleted||(I.persistenceManager=yield $.create(I,_),!I._deleted&&((null===(M=I._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)&&(yield I._popupRedirectResolver._initialize(I)),yield I.initializeCurrentUser(y),I.lastNotifiedUid=(null===(V=I.currentUser)||void 0===V?void 0:V.uid)||null,!I._deleted&&(I._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,d.Z)(function*(){if(_._deleted)return;const y=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||y){if(_.currentUser&&y&&_.currentUser.uid===y.uid)return _._currentUser._assign(y),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(y)}})()}initializeCurrentUser(_){var y=this;return(0,d.Z)(function*(){var I;let M=yield y.assertedPersistence.getCurrentUser();if(_&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const V=null===(I=y.redirectUser)||void 0===I?void 0:I._redirectEventId,_e=null==M?void 0:M._redirectEventId,We=yield y.tryRedirectSignIn(_);(!V||V===_e)&&(null==We?void 0:We.user)&&(M=We.user)}return M?M._redirectEventId?(ve(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===M._redirectEventId?y.directlySetCurrentUser(M):y.reloadAndSetCurrentUserOrClear(M)):y.reloadAndSetCurrentUserOrClear(M):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(_){var y=this;return(0,d.Z)(function*(){let I=null;try{I=yield y._popupRedirectResolver._completeRedirectFn(y,_,!0)}catch(M){yield y._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(_){var y=this;return(0,d.Z)(function*(){try{yield Xt(_)}catch(I){if("auth/network-request-failed"!==I.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var _=this;return(0,d.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var y=this;return(0,d.Z)(function*(){const I=_?(0,U.m9)(_):null;return I&&ve(I.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(I&&I._clone(y))})()}_updateCurrentUser(_){var y=this;return(0,d.Z)(function*(){if(!y._deleted)return _&&ve(y.tenantId===_.tenantId,y,"tenant-id-mismatch"),y.queue((0,d.Z)(function*(){yield y.directlySetCurrentUser(_),y.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,d.Z)(function*(){return(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null)})()}setPersistence(_){var y=this;return this.queue((0,d.Z)(function*(){yield y.assertedPersistence.setPersistence(pe(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new U.LL("auth","Firebase",_())}onAuthStateChanged(_,y,I){return this.registerStateListener(this.authStateSubscription,_,y,I)}onIdTokenChanged(_,y,I){return this.registerStateListener(this.idTokenSubscription,_,y,I)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,y){var I=this;return(0,d.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(y);return null===_?M.removeCurrentUser():M.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var y=this;return(0,d.Z)(function*(){if(!y.redirectPersistenceManager){const I=_&&pe(_)||y._popupRedirectResolver;ve(I,y,"argument-error"),y.redirectPersistenceManager=yield $.create(y,[pe(I._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(_){var y=this;return(0,d.Z)(function*(){var I,M;return y._isInitialized&&(yield y.queue((0,d.Z)(function*(){}))),(null===(I=y._currentUser)||void 0===I?void 0:I._redirectEventId)===_?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===_?y.redirectUser:null})()}_persistUserIfCurrent(_){var y=this;return(0,d.Z)(function*(){if(_===y.currentUser)return y.queue((0,d.Z)(function*(){return y.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(y=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,y,I,M){if(this._deleted)return()=>{};const V="function"==typeof y?y:y.next.bind(y),_e=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(_e,this,"internal-error"),_e.then(()=>V(this.currentUser)),"function"==typeof y?_.addObserver(y,I,M):_.addObserver(y)}directlySetCurrentUser(_){var y=this;return(0,d.Z)(function*(){y.currentUser&&y.currentUser!==_&&(y._currentUser._stopProactiveRefresh(),_&&y.isProactiveRefreshEnabled&&_._startProactiveRefresh()),y.currentUser=_,_?yield y.assertedPersistence.setCurrentUser(_):yield y.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Qe(E){return(0,U.m9)(E)}class $t{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,U.ne)(y=>this.observer=y)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Y(E,_,y){const I=Qe(E);ve(I._canInitEmulator,I,"emulator-config-failed"),ve(/^https?:\/\//.test(_),I,"invalid-emulator-scheme");const M=!!(null==y?void 0:y.disableWarnings),V=Te(_),{host:_e,port:We}=function(E){const _=Te(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(_.length));if(!y)return{host:"",port:null};const I=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const V=M[1];return{host:V,port:Xe(I.substr(V.length+1))}}{const[V,_e]=I.split(":");return{host:V,port:Xe(_e)}}}(_);I.config.emulator={url:`${V}//${_e}${null===We?"":`:${We}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:_e,port:We,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function(){function E(){const _=document.createElement("p"),y=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Te(E){const _=E.indexOf(":");return _<0?"":E.substr(0,_+1)}function Xe(E){if(!E)return null;const _=Number(E);return isNaN(_)?null:_}class ft{constructor(_,y){this.providerId=_,this.signInMethod=y}toJSON(){return Jt("not implemented")}_getIdTokenResponse(_){return Jt("not implemented")}_linkToIdToken(_,y){return Jt("not implemented")}_getReauthenticationResolver(_){return Jt("not implemented")}}function er(E,_){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:resetPassword",rt(E,_))})).apply(this,arguments)}function Js(E,_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function ai(E,_){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:update",rt(E,_))})).apply(this,arguments)}function Bi(){return(Bi=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithPassword",rt(E,_))})).apply(this,arguments)}function Sn(E,_){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:sendOobCode",rt(E,_))})).apply(this,arguments)}function hv(E,_){return ms.apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(E,_){return Sn(E,_)})).apply(this,arguments)}function Uh(E,_){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(E,_){return Sn(E,_)})).apply(this,arguments)}function el(E,_){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(E,_){return Sn(E,_)})).apply(this,arguments)}function Jr(E,_){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,d.Z)(function*(E,_){return Sn(E,_)})).apply(this,arguments)}function Ti(){return(Ti=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithEmailLink",rt(E,_))})).apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithEmailLink",rt(E,_))})).apply(this,arguments)}class Mo extends ft{constructor(_,y,I,M=null){super("password",I),this._email=_,this._password=y,this._tenantId=M}static _fromEmailAndPassword(_,y){return new Mo(_,y,"password")}static _fromEmailAndCode(_,y,I=null){return new Mo(_,y,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(_){var y=this;return(0,d.Z)(function*(){switch(y.signInMethod){case"password":return function(E,_){return Bi.apply(this,arguments)}(_,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(E,_){return Ti.apply(this,arguments)}(_,{email:y._email,oobCode:y._password});default:Be(_,"internal-error")}})()}_linkToIdToken(_,y){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return Js(_,{idToken:y,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function(E,_){return tl.apply(this,arguments)}(_,{idToken:y,email:I._email,oobCode:I._password});default:Be(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Br(E,_){return ji.apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithIdp",rt(E,_))})).apply(this,arguments)}class Ls extends ft{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const y=new Ls(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(y.idToken=_.idToken),_.accessToken&&(y.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(y.nonce=_.nonce),_.pendingToken&&(y.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(y.accessToken=_.oauthToken,y.secret=_.oauthTokenSecret):Be("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_,{providerId:I,signInMethod:M}=y,V=(0,le._T)(y,["providerId","signInMethod"]);if(!I||!M)return null;const _e=new Ls(I,M);return _e.idToken=V.idToken||void 0,_e.accessToken=V.accessToken||void 0,_e.secret=V.secret,_e.nonce=V.nonce,_e.pendingToken=V.pendingToken||null,_e}_getIdTokenResponse(_){return Br(_,this.buildRequest())}_linkToIdToken(_,y){const I=this.buildRequest();return I.idToken=y,Br(_,I)}_getReauthenticationResolver(_){const y=this.buildRequest();return y.autoCreate=!1,Br(_,y)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),_.postBody=(0,U.xO)(y)}return _}}function fv(E,_){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:sendVerificationCode",rt(E,_))})).apply(this,arguments)}function Rg(){return(Rg=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithPhoneNumber",rt(E,_))})).apply(this,arguments)}function Mg(){return(Mg=(0,d.Z)(function*(E,_){const y=yield Un(E,"POST","/v1/accounts:signInWithPhoneNumber",rt(E,_));if(y.temporaryProof)throw wn(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const p0={USER_NOT_FOUND:"user-not-found"};function xg(){return(xg=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithPhoneNumber",rt(E,Object.assign(Object.assign({},_),{operation:"REAUTH"})),p0)})).apply(this,arguments)}class nl extends ft{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,y){return new nl({verificationId:_,verificationCode:y})}static _fromTokenResponse(_,y){return new nl({phoneNumber:_,temporaryProof:y})}_getIdTokenResponse(_){return function(E,_){return Rg.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,y){return function(E,_){return Mg.apply(this,arguments)}(_,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function(E,_){return xg.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:y,verificationId:I,verificationCode:M}=this.params;return _&&y?{temporaryProof:_,phoneNumber:y}:{sessionInfo:I,code:M}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:y,verificationCode:I,phoneNumber:M,temporaryProof:V}=_;return I||y||M||V?new nl({verificationId:y,verificationCode:I,phoneNumber:M,temporaryProof:V}):null}}class ju{constructor(_){var y,I,M,V,_e,We;const Tt=(0,U.zd)((0,U.pd)(_)),Wt=null!==(y=Tt.apiKey)&&void 0!==y?y:null,fn=null!==(I=Tt.oobCode)&&void 0!==I?I:null,or=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Tt.mode)&&void 0!==M?M:null);ve(Wt&&fn&&or,"argument-error"),this.apiKey=Wt,this.operation=or,this.code=fn,this.continueUrl=null!==(V=Tt.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(_e=Tt.languageCode)&&void 0!==_e?_e:null,this.tenantId=null!==(We=Tt.tenantId)&&void 0!==We?We:null}static parseLink(_){const y=function(E){const _=(0,U.zd)((0,U.pd)(E)).link,y=_?(0,U.zd)((0,U.pd)(_)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||y||_||E}(_);try{return new ju(y)}catch(I){return null}}}let Hh=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,I){return Mo._fromEmailAndPassword(y,I)}static credentialWithLink(y,I){const M=ju.parseLink(I);return ve(M,"argument-error"),Mo._fromEmailAndCode(y,M.code,M.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Vs{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class xo extends Vs{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Hu extends xo{static credentialFromJSON(_){const y="string"==typeof _?JSON.parse(_):_;return ve("providerId"in y&&"signInMethod"in y,"argument-error"),Ls._fromParams(y)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return ve(_.idToken||_.accessToken,"argument-error"),Ls._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Hu.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Hu.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:y,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:V,nonce:_e,providerId:We}=_;if(!I&&!M&&!y&&!V||!We)return null;try{return new Hu(We)._credential({idToken:y,accessToken:I,nonce:_e,pendingToken:V})}catch(Tt){return null}}}let kg=(()=>{class E extends xo{constructor(){super("facebook.com")}static credential(y){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch(I){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Og=(()=>{class E extends xo{constructor(){super("google.com"),this.addScope("profile")}static credential(y,I){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:I})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:I,oauthAccessToken:M}=y;if(!I&&!M)return null;try{return E.credential(I,M)}catch(V){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),fa=(()=>{class E extends xo{constructor(){super("github.com")}static credential(y){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch(I){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Us extends ft{constructor(_,y){super(_,_),this.pendingToken=y}_getIdTokenResponse(_){return Br(_,this.buildRequest())}_linkToIdToken(_,y){const I=this.buildRequest();return I.idToken=y,Br(_,I)}_getReauthenticationResolver(_){const y=this.buildRequest();return y.autoCreate=!1,Br(_,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const y="string"==typeof _?JSON.parse(_):_,{providerId:I,signInMethod:M,pendingToken:V}=y;return I&&M&&V&&I===M?new Us(I,V):null}static _create(_,y){return new Us(_,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $u extends Vs{constructor(_){ve(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return $u.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return $u.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const y=Us.fromJSON(_);return ve(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:y,providerId:I}=_;if(!y||!I)return null;try{return Us._create(I,y)}catch(M){return null}}}let mv=(()=>{class E extends xo{constructor(){super("twitter.com")}static credential(y,I){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:I})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=y;if(!I||!M)return null;try{return E.credential(I,M)}catch(V){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function zh(E,_){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signUp",rt(E,_))})).apply(this,arguments)}class Hi{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,y,I,M=!1){return(0,d.Z)(function*(){const V=yield je._fromIdTokenResponse(_,I,M),_e=Gh(I);return new Hi({user:V,providerId:_e,_tokenResponse:I,operationType:y})})()}static _forOperation(_,y,I){return(0,d.Z)(function*(){yield _._updateTokensIfNecessary(I,!0);const M=Gh(I);return new Hi({user:_,providerId:M,_tokenResponse:I,operationType:y})})()}}function Gh(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function y0(E){return $i.apply(this,arguments)}function $i(){return($i=(0,d.Z)(function*(E){var _;const y=Qe(E);if(yield y._initializationPromise,null===(_=y.currentUser)||void 0===_?void 0:_.isAnonymous)return new Hi({user:y.currentUser,providerId:null,operationType:"signIn"});const I=yield zh(y,{returnSecureToken:!0}),M=yield Hi._fromIdTokenResponse(y,"signIn",I,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class il extends U.ZR{constructor(_,y,I,M){var V;super(y.code,y.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,il.prototype),this.customData={appName:_.name,tenantId:null!==(V=_.tenantId)&&void 0!==V?V:void 0,_serverResponse:y.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(_,y,I,M){return new il(_,y,I,M)}}function Wh(E,_,y,I){return("reauthenticate"===_?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?il._fromErrorAndOperation(E,V,_,I):V})}function bc(E){return new Set(E.map(({providerId:_})=>_).filter(_=>!!_))}function _v(E,_){return zu.apply(this,arguments)}function zu(){return(zu=(0,d.Z)(function*(E,_){const y=(0,U.m9)(E);yield Ec(!0,y,_);const{providerUserInfo:I}=yield re(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[_]}),M=bc(I||[]);return y.providerData=y.providerData.filter(V=>M.has(V.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function qh(E,_){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(E,_,y=!1){const I=yield lt(E,_._linkToIdToken(E.auth,yield E.getIdToken()),y);return Hi._forOperation(E,"link",I)})).apply(this,arguments)}function Ec(E,_,y){return ko.apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(E,_,y){yield Xt(_);const M=!1===E?"provider-already-linked":"no-such-provider";ve(bc(_.providerData).has(y)===E,_.auth,M)})).apply(this,arguments)}function Pg(E,_){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(E,_,y=!1){const{auth:I}=E,M="reauthenticate";try{const V=yield lt(E,Wh(I,M,_,E),y);ve(V.idToken,I,"internal-error");const _e=Mt(V.idToken);ve(_e,I,"internal-error");const{sub:We}=_e;return ve(E.uid===We,I,"user-mismatch"),Hi._forOperation(E,M,V)}catch(V){throw"auth/user-not-found"===(null==V?void 0:V.code)&&Be(I,"user-mismatch"),V}})).apply(this,arguments)}function Ng(E,_){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,d.Z)(function*(E,_,y=!1){const I="signIn",M=yield Wh(E,I,_),V=yield Hi._fromIdTokenResponse(E,I,M);return y||(yield E._updateCurrentUser(V.user)),V})).apply(this,arguments)}function pa(E,_){return Di.apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(E,_){return Ng(Qe(E),_)})).apply(this,arguments)}function Gu(E,_){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(E,_){const y=(0,U.m9)(E);return yield Ec(!1,y,_.providerId),qh(y,_)})).apply(this,arguments)}function ga(E,_){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(E,_){return Pg((0,U.m9)(E),_)})).apply(this,arguments)}function yv(E,_){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,d.Z)(function*(E,_){return Un(E,"POST","/v1/accounts:signInWithCustomToken",rt(E,_))})).apply(this,arguments)}function qu(E,_){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(E,_){const y=Qe(E),I=yield yv(y,{token:_,returnSecureToken:!0}),M=yield Hi._fromIdTokenResponse(y,"signIn",I);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class Cc{constructor(_,y){this.factorId=_,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(_,y){return"phoneInfo"in y?Ic._fromServerResponse(_,y):Be(_,"internal-error")}}class Ic extends Cc{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,y){return new Ic(y)}}function zt(E,_,y){var I;ve((null===(I=y.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),ve(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),_.continueUrl=y.url,_.dynamicLinkDomain=y.dynamicLinkDomain,_.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ve(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),_.iOSBundleId=y.iOS.bundleId),y.android&&(ve(y.android.packageName.length>0,E,"missing-android-pkg-name"),_.androidInstallApp=y.android.installApp,_.androidMinimumVersionCode=y.android.minimumVersion,_.androidPackageName=y.android.packageName)}function vv(E,_,y){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E),M={requestType:"PASSWORD_RESET",email:_};y&&zt(I,M,y),yield Uh(I,M)})).apply(this,arguments)}function bv(E,_,y){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,d.Z)(function*(E,_,y){yield er((0,U.m9)(E),{oobCode:_,newPassword:y})})).apply(this,arguments)}function Ev(E,_){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,d.Z)(function*(E,_){yield ai((0,U.m9)(E),{oobCode:_})})).apply(this,arguments)}function sl(E,_){return He.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(E,_){const y=(0,U.m9)(E),I=yield er(y,{oobCode:_}),M=I.requestType;switch(ve(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(I.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(I.mfaInfo,y,"internal-error");default:ve(I.email,y,"internal-error")}let V=null;return I.mfaInfo&&(V=Cc._fromServerResponse(Qe(y),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:V},operation:M}})).apply(this,arguments)}function hn(E,_){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,d.Z)(function*(E,_){const{data:y}=yield sl((0,U.m9)(E),_);return y.email})).apply(this,arguments)}function rr(E,_,y){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,d.Z)(function*(E,_,y){const I=Qe(E),M=yield zh(I,{returnSecureToken:!0,email:_,password:y}),V=yield Hi._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(V.user),V})).apply(this,arguments)}function ma(E,_,y){return pa((0,U.m9)(E),Hh.credential(_,y))}function rs(E,_,y){return ol.apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E),M={requestType:"EMAIL_SIGNIN",email:_};ve(y.handleCodeInApp,I,"argument-error"),y&&zt(I,M,y),yield el(I,M)})).apply(this,arguments)}function Ku(E,_){const y=ju.parseLink(_);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function v0(E,_,y){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E),M=Hh.credentialWithLink(_,y||be());return ve(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),pa(I,M)})).apply(this,arguments)}function Yu(E,_){return al.apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:createAuthUri",rt(E,_))})).apply(this,arguments)}function jr(E,_){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(E,_){const I={identifier:_,continueUri:It()?be():"http://localhost"},{signinMethods:M}=yield Yu((0,U.m9)(E),I);return M||[]})).apply(this,arguments)}function wv(E,_){return _s.apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(E,_){const y=(0,U.m9)(E),M={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};_&&zt(y.auth,M,_);const{email:V}=yield hv(y.auth,M);V!==E.email&&(yield E.reload())})).apply(this,arguments)}function ys(E,_,y){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:_};y&&zt(I.auth,V,y);const{email:_e}=yield Jr(I.auth,V);_e!==E.email&&(yield E.reload())})).apply(this,arguments)}function Lg(E,_){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,d.Z)(function*(E,_){return Ut(E,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Cv(E,_){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,d.Z)(function*(E,{displayName:_,photoURL:y}){if(void 0===_&&void 0===y)return;const I=(0,U.m9)(E),V={idToken:yield I.getIdToken(),displayName:_,photoUrl:y,returnSecureToken:!0},_e=yield lt(I,Lg(I.auth,V));I.displayName=_e.displayName||null,I.photoURL=_e.photoUrl||null;const We=I.providerData.find(({providerId:Tt})=>"password"===Tt);We&&(We.displayName=I.displayName,We.photoURL=I.photoURL),yield I._updateTokensIfNecessary(_e)})).apply(this,arguments)}function Xh(E,_){return ll((0,U.m9)(E),_,null)}function Vg(E,_){return ll((0,U.m9)(E),null,_)}function ll(E,_,y){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,d.Z)(function*(E,_,y){const{auth:I}=E,V={idToken:yield E.getIdToken(),returnSecureToken:!0};_&&(V.email=_),y&&(V.password=y);const _e=yield lt(E,Js(I,V));yield E._updateTokensIfNecessary(_e,!0)})).apply(this,arguments)}class no{constructor(_,y,I={}){this.isNewUser=_,this.providerId=y,this.profile=I}}class ef extends no{constructor(_,y,I,M){super(_,y,I),this.username=M}}class Iv extends no{constructor(_,y){super(_,"facebook.com",y)}}class Bg extends ef{constructor(_,y){super(_,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Tv extends no{constructor(_,y){super(_,"google.com",y)}}class Ac extends ef{constructor(_,y,I){super(_,"twitter.com",y,I)}}function Dv(E){const{user:_,_tokenResponse:y}=E;return _.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(E){var _,y;if(!E)return null;const{providerId:I}=E,M=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},V=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&(null==E?void 0:E.idToken)){const _e=null===(y=null===(_=Mt(E.idToken))||void 0===_?void 0:_.firebase)||void 0===y?void 0:y.sign_in_provider;if(_e)return new no(V,"anonymous"!==_e&&"custom"!==_e?_e:null)}if(!I)return null;switch(I){case"facebook.com":return new Iv(V,M);case"github.com":return new Bg(V,M);case"google.com":return new Tv(V,M);case"twitter.com":return new Ac(V,M,E.screenName||null);case"custom":case"anonymous":return new no(V,null);default:return new no(V,I,M)}}(y)}function _a(E,_,y,I){return(0,U.m9)(E).onAuthStateChanged(_,y,I)}class ya{constructor(_,y){this.type=_,this.credential=y}static _fromIdtoken(_){return new ya("enroll",_)}static _fromMfaPendingCredential(_){return new ya("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var y,I;if(null==_?void 0:_.multiFactorSession){if(null===(y=_.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ya._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null===(I=_.multiFactorSession)||void 0===I?void 0:I.idToken)return ya._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Oo{constructor(_,y,I){this.session=_,this.hints=y,this.signInResolver=I}static _fromError(_,y){const I=Qe(_),M=y.customData._serverResponse,V=(M.mfaInfo||[]).map(We=>Cc._fromServerResponse(I,We));ve(M.mfaPendingCredential,I,"internal-error");const _e=ya._fromMfaPendingCredential(M.mfaPendingCredential);return new Oo(_e,V,function(){var We=(0,d.Z)(function*(Tt){const Wt=yield Tt._process(I,_e);delete M.mfaInfo,delete M.mfaPendingCredential;const fn=Object.assign(Object.assign({},M),{idToken:Wt.idToken,refreshToken:Wt.refreshToken});switch(y.operationType){case"signIn":const or=yield Hi._fromIdTokenResponse(I,y.operationType,fn);return yield I._updateCurrentUser(or.user),or;case"reauthenticate":return ve(y.user,I,"internal-error"),Hi._forOperation(y.user,y.operationType,fn);default:Be(I,"internal-error")}});return function(Tt){return We.apply(this,arguments)}}())}resolveSignIn(_){var y=this;return(0,d.Z)(function*(){return y.signInResolver(_)})()}}function Ju(E,_){var y;const I=(0,U.m9)(E),M=_;return ve(_.customData.operationType,I,"argument-error"),ve(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,I,"argument-error"),Oo._fromError(I,M)}function cl(E,_){return Ut(E,"POST","/v2/accounts/mfaEnrollment:start",rt(E,_))}class ed{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(I=>Cc._fromServerResponse(_.auth,I)))})}static _fromUser(_){return new ed(_)}getSession(){var _=this;return(0,d.Z)(function*(){return ya._fromIdtoken(yield _.user.getIdToken())})()}enroll(_,y){var I=this;return(0,d.Z)(function*(){const M=_,V=yield I.getSession(),_e=yield lt(I.user,M._process(I.user.auth,V,y));return yield I.user._updateTokensIfNecessary(_e),I.user.reload()})()}unenroll(_){var y=this;return(0,d.Z)(function*(){const I="string"==typeof _?_:_.uid,M=yield y.user.getIdToken(),V=yield lt(y.user,function(E,_){return Ut(E,"POST","/v2/accounts/mfaEnrollment:withdraw",rt(E,_))}(y.user.auth,{idToken:M,mfaEnrollmentId:I}));y.enrolledFactors=y.enrolledFactors.filter(({uid:_e})=>_e!==I),yield y.user._updateTokensIfNecessary(V);try{yield y.user.reload()}catch(_e){if("auth/user-token-expired"!==_e.code)throw _e}})()}}const rf=new WeakMap;function Po(E){const _=(0,U.m9)(E);return rf.has(_)||rf.set(_,ed._fromUser(_)),rf.get(_)}const va="__sak";class Sv{constructor(_,y){this.storageRetriever=_,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(va,"1"),this.storage.removeItem(va),Promise.resolve(!0)):Promise.resolve(!1)}catch(_){return Promise.resolve(!1)}}_set(_,y){return this.storage.setItem(_,JSON.stringify(y)),Promise.resolve()}_get(_){const y=this.storage.getItem(_);return Promise.resolve(y?JSON.parse(y):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rv=(()=>{class E extends Sv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,I)=>this.onStorageEvent(y,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,U.z$)();return Ze(E)||In(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Tr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),V=this.localCache[I];M!==V&&y(I,V,M)}}onStorageEvent(y,I=!1){if(!y.key)return void this.forAllChangedKeys((We,Tt,Wt)=>{this.notifyListeners(We,Wt)});const M=y.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const We=this.storage.getItem(M);if(y.newValue!==We)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!I)return}const V=()=>{const We=this.storage.getItem(M);!I&&this.localCache[M]===We||this.notifyListeners(M,We)},_e=this.storage.getItem(M);(0,U.w1)()&&10===document.documentMode&&_e!==y.newValue&&y.newValue!==y.oldValue?setTimeout(V,10):V()}notifyListeners(y,I){this.localCache[y]=I;const M=this.listeners[y];if(M)for(const V of Array.from(M))V(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(I)}_removeListener(y,I){this.listeners[y]&&(this.listeners[y].delete(I),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,I){var M=()=>super._set,V=this;return(0,d.Z)(function*(){yield M().call(V,y,I),V.localCache[y]=JSON.stringify(I)})()}_get(y){var I=()=>super._get,M=this;return(0,d.Z)(function*(){const V=yield I().call(M,y);return M.localCache[y]=JSON.stringify(V),V})()}_remove(y){var I=()=>super._remove,M=this;return(0,d.Z)(function*(){yield I().call(M,y),delete M.localCache[y]})()}}return E.type="LOCAL",E})(),Mv=(()=>{class E extends Sv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,I){}_removeListener(y,I){}}return E.type="SESSION",E})();let af=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const I=this.receivers.find(V=>V.isListeningto(y));if(I)return I;const M=new E(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var I=this;return(0,d.Z)(function*(){const M=y,{eventId:V,eventType:_e,data:We}=M.data,Tt=I.handlersMap[_e];if(!(null==Tt?void 0:Tt.size))return;M.ports[0].postMessage({status:"ack",eventId:V,eventType:_e});const Wt=Array.from(Tt).map(function(){var or=(0,d.Z)(function*($o){return $o(M.origin,We)});return function($o){return or.apply(this,arguments)}}()),fn=yield function(E){return Promise.all(E.map(function(){var _=(0,d.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(I){return{fulfilled:!1,reason:I}}});return function(y){return _.apply(this,arguments)}}()))}(Wt);M.ports[0].postMessage({status:"done",eventId:V,eventType:_e,response:fn})})()}_subscribe(y,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(I)}_unsubscribe(y,I){this.handlersMap[y]&&I&&this.handlersMap[y].delete(I),(!I||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Si(E="",_=10){let y="";for(let I=0;I<_;I++)y+=Math.floor(10*Math.random());return E+y}class nd{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,y,I=50){var M=this;return(0,d.Z)(function*(){const V="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let _e,We;return new Promise((Tt,Wt)=>{const fn=Si("",20);V.port1.start();const or=setTimeout(()=>{Wt(new Error("unsupported_event"))},I);We={messageChannel:V,onMessage($o){const Aa=$o;if(Aa.data.eventId===fn)switch(Aa.data.status){case"ack":clearTimeout(or),_e=setTimeout(()=>{Wt(new Error("timeout"))},3e3);break;case"done":clearTimeout(_e),Tt(Aa.data.response);break;default:clearTimeout(or),clearTimeout(_e),Wt(new Error("invalid_response"))}}},M.handlers.add(We),V.port1.addEventListener("message",We.onMessage),M.target.postMessage({eventType:_,eventId:fn,data:y},[V.port2])}).finally(()=>{We&&M.removeMessageHandler(We)})})()}}function Sr(){return window}function ro(){return void 0!==Sr().WorkerGlobalScope&&"function"==typeof Sr().importScripts}function ba(){return(ba=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const C0="firebaseLocalStorageDb",sd="firebaseLocalStorage",xv="fbase_key";class od{constructor(_){this.request=_}toPromise(){return new Promise((_,y)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function No(E,_){return E.transaction([sd],_?"readwrite":"readonly").objectStore(sd)}function An(){const E=indexedDB.open(C0,1);return new Promise((_,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(sd,{keyPath:xv})}catch(M){y(M)}}),E.addEventListener("success",(0,d.Z)(function*(){const I=E.result;I.objectStoreNames.contains(sd)?_(I):(I.close(),yield function(){const E=indexedDB.deleteDatabase(C0);return new od(E).toPromise()}(),_(yield An()))}))})}function Gi(E,_,y){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(E,_,y){const I=No(E,!0).put({[xv]:_,value:y});return new od(I).toPromise()})).apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(E,_){const y=No(E,!1).get(_),I=yield new od(y).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function nr(E,_){const y=No(E,!0).delete(_);return new od(y).toPromise()}const Yn=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,d.Z)(function*(){return y.db||(y.db=yield An()),y.db})()}_withRetries(y){var I=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const V=yield I._openDb();return yield y(V)}catch(V){if(M++>3)throw V;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,d.Z)(function*(){return ro()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,d.Z)(function*(){y.receiver=af._getInstance(ro()?self:null),y.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(M,V){return{keyProcessed:(yield y._poll()).includes(V.key)}});return function(M,V){return I.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(M,V){return["keyChanged"]});return function(M,V){return I.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,d.Z)(function*(){var I,M;if(y.activeServiceWorker=yield function(){return ba.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new nd(y.activeServiceWorker);const V=yield y.sender._send("ping",{},800);!V||(null===(I=V[0])||void 0===I?void 0:I.fulfilled)&&(null===(M=V[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:y},I.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const y=yield An();return yield Gi(y,va,"1"),yield nr(y,va),!0}catch(y){}return!1})()}_withPendingWrite(y){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield y()}finally{I.pendingWrites--}})()}_set(y,I){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(V=>Gi(V,y,I)),M.localCache[y]=I,M.notifyServiceWorker(y)}))})()}_get(y){var I=this;return(0,d.Z)(function*(){const M=yield I._withRetries(V=>function(E,_){return ir.apply(this,arguments)}(V,y));return I.localCache[y]=M,M})()}_remove(y){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(M=>nr(M,y)),delete I.localCache[y],I.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,d.Z)(function*(){const I=yield y._withRetries(_e=>{const We=No(_e,!1).getAll();return new od(We).toPromise()});if(!I)return[];if(0!==y.pendingWrites)return[];const M=[],V=new Set;for(const{fbase_key:_e,value:We}of I)V.add(_e),JSON.stringify(y.localCache[_e])!==JSON.stringify(We)&&(y.notifyListeners(_e,We),M.push(_e));for(const _e of Object.keys(y.localCache))y.localCache[_e]&&!V.has(_e)&&(y.notifyListeners(_e,null),M.push(_e));return M})()}notifyListeners(y,I){this.localCache[y]=I;const M=this.listeners[y];if(M)for(const V of Array.from(M))V(I)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(I)}_removeListener(y,I){this.listeners[y]&&(this.listeners[y].delete(I),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Ea(E,_){return Ut(E,"POST","/v2/accounts/mfaSignIn:start",rt(E,_))}function cf(){return(cf=(0,d.Z)(function*(E){return(yield Ut(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fo(E){return new Promise((_,y)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=_,I.onerror=M=>{const V=Ke("internal-error");V.customData=M,y(V)},I.type="text/javascript",I.charset="UTF-8",function(){var E,_;return null!==(_=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==_?_:document}().appendChild(I)})}function uf(E){return`__${E}${Math.floor(1e6*Math.random())}`}const io=1e12;class hl{constructor(_){this.auth=_,this.counter=io,this._widgets=new Map}render(_,y){const I=this.counter;return this._widgets.set(I,new fl(_,this.auth.name,y||{})),this.counter++,I}reset(_){var y;const I=_||io;null===(y=this._widgets.get(I))||void 0===y||y.delete(),this._widgets.delete(I)}getResponse(_){var y;return(null===(y=this._widgets.get(_||io))||void 0===y?void 0:y.getResponse())||""}execute(_){var y=this;return(0,d.Z)(function*(){var I;return null===(I=y._widgets.get(_||io))||void 0===I||I.execute(),""})()}}class fl{constructor(_,y,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof _?document.getElementById(_):_;ve(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const _=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<50;I++)_.push(y.charAt(Math.floor(Math.random()*y.length)));return _.join("")}();const{callback:_,"expired-callback":y}=this.params;if(_)try{_(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pl=uf("rcb"),gl=new bt(3e4,6e4);class li{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Sr().grecaptcha}load(_,y=""){return ve((E=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),_,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Sr().grecaptcha):new Promise((I,M)=>{const V=Sr().setTimeout(()=>{M(Ke(_,"network-request-failed"))},gl.get());Sr()[pl]=()=>{Sr().clearTimeout(V),delete Sr()[pl];const We=Sr().grecaptcha;if(!We)return void M(Ke(_,"internal-error"));const Tt=We.render;We.render=(Wt,fn)=>{const or=Tt(Wt,fn);return this.counter++,or},this.hostLanguage=y,I(We)},Fo(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:pl,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(V),M(Ke(_,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){return!!Sr().grecaptcha&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mi{load(_){return(0,d.Z)(function*(){return new hl(_)})()}clearedOneInstance(){}}const kc="recaptcha",ur={theme:"light",type:"image"};class Ov{constructor(_,y=Object.assign({},ur),I){this.parameters=y,this.type=kc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qe(I),this.isInvisible="invisible"===this.parameters.size,ve("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof _?document.getElementById(_):_;ve(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mi:new li,this.validateStartingState()}verify(){var _=this;return(0,d.Z)(function*(){_.assertNotDestroyed();const y=yield _.render(),I=_.getAssertedRecaptcha();return I.getResponse(y)||new Promise(V=>{const _e=We=>{!We||(_.tokenChangeListeners.delete(_e),V(We))};_.tokenChangeListeners.add(_e),_.isInvisible&&I.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return y=>{if(this.tokenChangeListeners.forEach(I=>I(y)),"function"==typeof _)_(y);else if("string"==typeof _){const I=Sr()[_];"function"==typeof I&&I(y)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,d.Z)(function*(){if(yield _.init(),!_.widgetId){let y=_.container;if(!_.isInvisible){const I=document.createElement("div");y.appendChild(I),y=I}_.widgetId=_.getAssertedRecaptcha().render(y,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,d.Z)(function*(){ve(It()&&!ro(),_.auth,"internal-error"),yield function(){let E=null;return new Promise(_=>{"complete"!==document.readyState?(E=()=>_(),window.addEventListener("load",E)):_()}).catch(_=>{throw E&&window.removeEventListener("load",E),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const y=yield function(E){return cf.apply(this,arguments)}(_.auth);ve(y,_.auth,"internal-error"),_.parameters.sitekey=y})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wi{constructor(_,y){this.verificationId=_,this.onConfirmation=y}confirm(_){const y=nl._fromVerification(this.verificationId,_);return this.onConfirmation(y)}}function T0(E,_,y){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,d.Z)(function*(E,_,y){const I=Qe(E),M=yield pf(I,_,(0,U.m9)(y));return new Wi(M,V=>pa(I,V))})).apply(this,arguments)}function D0(E,_,y){return ad.apply(this,arguments)}function ad(){return(ad=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E);yield Ec(!1,I,"phone");const M=yield pf(I.auth,_,(0,U.m9)(y));return new Wi(M,V=>Gu(I,V))})).apply(this,arguments)}function ff(E,_,y){return qg.apply(this,arguments)}function qg(){return(qg=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E),M=yield pf(I.auth,_,(0,U.m9)(y));return new Wi(M,V=>ga(I,V))})).apply(this,arguments)}function pf(E,_,y){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,d.Z)(function*(E,_,y){var I;const M=yield y.verify();try{let V;if(ve("string"==typeof M,E,"argument-error"),ve(y.type===kc,E,"argument-error"),V="string"==typeof _?{phoneNumber:_}:_,"session"in V){const _e=V.session;if("phoneNumber"in V)return ve("enroll"===_e.type,E,"internal-error"),(yield cl(E,{idToken:_e.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ve("signin"===_e.type,E,"internal-error");const We=(null===(I=V.multiFactorHint)||void 0===I?void 0:I.uid)||V.multiFactorUid;return ve(We,E,"missing-multi-factor-info"),(yield Ea(E,{mfaPendingCredential:_e.credential,mfaEnrollmentId:We,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:_e}=yield fv(E,{phoneNumber:V.phoneNumber,recaptchaToken:M});return _e}}finally{y._reset()}})).apply(this,arguments)}function Er(E,_){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,d.Z)(function*(E,_){yield qh((0,U.m9)(E),_)})).apply(this,arguments)}let Or=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=Qe(y)}verifyPhoneNumber(y,I){return pf(this.auth,y,(0,U.m9)(I))}static credential(y,I){return nl._fromVerification(y,I)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:I,temporaryProof:M}=y;return I&&M?nl._fromTokenResponse(I,M):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function dr(E,_){return _?pe(_):(ve(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ml extends ft{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Br(_,this._buildIdpRequest())}_linkToIdToken(_,y){return Br(_,this._buildIdpRequest(y))}_getReauthenticationResolver(_){return Br(_,this._buildIdpRequest())}_buildIdpRequest(_){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(y.idToken=_),y}}function S0(E){return Ng(E.auth,new ml(E),E.bypassAuthState)}function ld(E){const{auth:_,user:y}=E;return ve(y,_,"internal-error"),Pg(y,new ml(E),E.bypassAuthState)}function is(E){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(E){const{auth:_,user:y}=E;return ve(y,_,"internal-error"),qh(y,new ml(E),E.bypassAuthState)})).apply(this,arguments)}class Hr{constructor(_,y,I,M,V=!1){this.auth=_,this.resolver=I,this.user=M,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var _=this;return new Promise(function(){var y=(0,d.Z)(function*(I,M){_.pendingPromise={resolve:I,reject:M};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(V){_.reject(V)}});return function(I,M){return y.apply(this,arguments)}}())}onAuthEvent(_){var y=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:V,tenantId:_e,error:We,type:Tt}=_;if(We)return void y.reject(We);const Wt={auth:y.auth,requestUri:I,sessionId:M,tenantId:_e||void 0,postBody:V||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Tt)(Wt))}catch(fn){y.reject(fn)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return S0;case"linkViaPopup":case"linkViaRedirect":return is;case"reauthViaPopup":case"reauthViaRedirect":return ld;default:Be(this.auth,"internal-error")}}resolve(_){de(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){de(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vs=new bt(2e3,1e4);function Lo(E,_,y){return cd.apply(this,arguments)}function cd(){return(cd=(0,d.Z)(function*(E,_,y){const I=Qe(E);Pt(E,_,Vs);const M=dr(I,y);return new ud(I,"signInViaPopup",_,M).executeNotNull()})).apply(this,arguments)}function hr(E,_,y){return fr.apply(this,arguments)}function fr(){return(fr=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E);Pt(I.auth,_,Vs);const M=dr(I.auth,y);return new ud(I.auth,"reauthViaPopup",_,M,I).executeNotNull()})).apply(this,arguments)}function A0(E,_,y){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E);Pt(I.auth,_,Vs);const M=dr(I.auth,y);return new ud(I.auth,"linkViaPopup",_,M,I).executeNotNull()})).apply(this,arguments)}let ud=(()=>{class E extends Hr{constructor(y,I,M,V,_e){super(y,I,V,_e),this.provider=M,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,d.Z)(function*(){const I=yield y.execute();return ve(I,y.auth,"internal-error"),I})()}onExecution(){var y=this;return(0,d.Z)(function*(){de(1===y.filter.length,"Popup operations only handle one event");const I=Si();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],I),y.authWindow.associatedEvent=I,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Ke(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var I,M;this.pollId=(null===(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,vs.get())};y()}}return E.currentPopupAction=null,E})();const Ca=new Map;class _l extends Hr{constructor(_,y,I=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,I),this.eventId=null}execute(){var _=()=>super.execute,y=this;return(0,d.Z)(function*(){let I=Ca.get(y.auth._key());if(!I){try{const V=(yield function(E,_){return dd.apply(this,arguments)}(y.resolver,y.auth))?yield _().call(y):null;I=()=>Promise.resolve(V)}catch(M){I=()=>Promise.reject(M)}Ca.set(y.auth._key(),I)}return y.bypassAuthState||Ca.set(y.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(_){var y=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===_.type)return y().call(I,_);if("unknown"!==_.type){if(_.eventId){const M=yield I.auth._redirectUserForId(_.eventId);if(M)return I.user=M,y().call(I,_);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function dd(){return(dd=(0,d.Z)(function*(E,_){const y=yl(_),I=Vn(E);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(y));return yield I._remove(y),M})).apply(this,arguments)}function Pc(E,_){return gf.apply(this,arguments)}function gf(){return(gf=(0,d.Z)(function*(E,_){return Vn(E)._set(yl(_),"true")})).apply(this,arguments)}function mf(){Ca.clear()}function Vn(E){return pe(E._redirectPersistence)}function yl(E){return K("pendingRedirect",E.config.apiKey,E.name)}function Bs(E,_,y){return function(E,_,y){return Ia.apply(this,arguments)}(E,_,y)}function Ia(){return(Ia=(0,d.Z)(function*(E,_,y){const I=Qe(E);Pt(E,_,Vs);const M=dr(I,y);return yield Pc(M,I),M._openRedirect(I,_,"signInViaRedirect")})).apply(this,arguments)}function fd(E,_,y){return function(E,_,y){return bs.apply(this,arguments)}(E,_,y)}function bs(){return(bs=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E);Pt(I.auth,_,Vs);const M=dr(I.auth,y);yield Pc(M,I.auth);const V=yield oo(I);return M._openRedirect(I.auth,_,"reauthViaRedirect",V)})).apply(this,arguments)}function so(E,_,y){return function(E,_,y){return pd.apply(this,arguments)}(E,_,y)}function pd(){return(pd=(0,d.Z)(function*(E,_,y){const I=(0,U.m9)(E);Pt(I.auth,_,Vs);const M=dr(I.auth,y);yield Ec(!1,I,_.providerId),yield Pc(M,I.auth);const V=yield oo(I);return M._openRedirect(I.auth,_,"linkViaRedirect",V)})).apply(this,arguments)}function Fc(E,_){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(E,_){return yield Qe(E)._initializationPromise,Zg(E,_,!1)})).apply(this,arguments)}function Zg(E,_){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(E,_,y=!1){const I=Qe(E),M=dr(I,_),_e=yield new _l(I,M,y).execute();return _e&&!y&&(delete _e.user._redirectEventId,yield I._persistUserIfCurrent(_e.user),yield I._setRedirectUser(null,_)),_e})).apply(this,arguments)}function oo(E){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(E){const _=Si(`${E.uid}:::`);return E._redirectEventId=_,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),_})).apply(this,arguments)}class sr{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let y=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(_,I)&&(y=!0,this.sendToConsumer(_,I),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Es(E);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=_,y=!0)),y}sendToConsumer(_,y){var I;if(_.error&&!Es(_)){const M=(null===(I=_.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";y.onError(Ke(this.auth,M))}else y.onAuthEvent(_)}isEventForConsumer(_,y){const I=null===y.eventId||!!_.eventId&&_.eventId===y.eventId;return y.filter.includes(_.type)&&I}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yf(_))}saveEventToCache(_){this.cachedEventUids.add(yf(_)),this.lastProcessedEventTime=Date.now()}}function yf(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(_=>_).join("-")}function Es({type:E,error:_}){return"unknown"===E&&"auth/no-auth-event"===(null==_?void 0:_.code)}function js(E){return vf.apply(this,arguments)}function vf(){return(vf=(0,d.Z)(function*(E,_={}){return Ut(E,"GET","/v1/projects",_)})).apply(this,arguments)}const Qg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jg=/^https?/;function Vo(){return(Vo=(0,d.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:_}=yield js(E);for(const y of _)try{if(Uo(y))return}catch(I){}Be(E,"unauthorized-domain")})).apply(this,arguments)}function Uo(E){const _=be(),{protocol:y,hostname:I}=new URL(_);if(E.startsWith("chrome-extension://")){const _e=new URL(E);return""===_e.hostname&&""===I?"chrome-extension:"===y&&E.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===y&&_e.hostname===I}if(!Jg.test(y))return!1;if(Qg.test(E))return I===E;const M=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const bf=new bt(3e4,6e4);function Bo(){const E=Sr().___jsl;if(null==E?void 0:E.H)for(const _ of Object.keys(E.H))if(E.H[_].r=E.H[_].r||[],E.H[_].L=E.H[_].L||[],E.H[_].r=[...E.H[_].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let Lc=null;function Ef(E){return Lc=Lc||function(E){return new Promise((_,y)=>{var I,M,V;function _e(){Bo(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Bo(),y(Ke(E,"network-request-failed"))},timeout:bf.get()})}if(null===(M=null===(I=Sr().gapi)||void 0===I?void 0:I.iframes)||void 0===M?void 0:M.Iframe)_(gapi.iframes.getContext());else{if(!(null===(V=Sr().gapi)||void 0===V?void 0:V.load)){const We=uf("iframefcb");return Sr()[We]=()=>{gapi.load?_e():y(Ke(E,"network-request-failed"))},Fo(`https://apis.google.com/js/api.js?onload=${We}`)}_e()}}).catch(_=>{throw Lc=null,_})}(E),Lc}const Vc=new bt(5e3,15e3),M0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ao(E){const _=E.config;ve(_.authDomain,E,"auth-domain-config-required");const y=_.emulator?Ne(_,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:_.apiKey,appName:E.name,v:F.SDK_VERSION},M=bl.get(E.config.apiHost);M&&(I.eid=M);const V=E._getFrameworks();return V.length&&(I.fw=V.join(",")),`${y}?${(0,U.xO)(I).slice(1)}`}function nm(){return(nm=(0,d.Z)(function*(E){const _=yield Ef(E),y=Sr().gapi;return ve(y,E,"internal-error"),_.open({where:document.body,url:ao(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M0,dontclear:!0},I=>new Promise(function(){var M=(0,d.Z)(function*(V,_e){yield I.restyle({setHideOnLeave:!1});const We=Ke(E,"network-request-failed"),Tt=Sr().setTimeout(()=>{_e(We)},Vc.get());function Wt(){Sr().clearTimeout(Tt),V(I)}I.ping(Wt).then(Wt,()=>{_e(We)})});return function(V,_e){return M.apply(this,arguments)}}()))})).apply(this,arguments)}const jo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lv{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_){}}}function im(E,_,y,I,M,V){ve(E.config.authDomain,E,"auth-domain-config-required"),ve(E.config.apiKey,E,"invalid-api-key");const _e={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:I,v:F.SDK_VERSION,eventId:M};if(_ instanceof Vs){_.setDefaultLanguage(E.languageCode),_e.providerId=_.providerId||"",(0,U.xb)(_.getCustomParameters())||(_e.customParameters=JSON.stringify(_.getCustomParameters()));for(const[Tt,Wt]of Object.entries(V||{}))_e[Tt]=Wt}if(_ instanceof xo){const Tt=_.getScopes().filter(Wt=>""!==Wt);Tt.length>0&&(_e.scopes=Tt.join(","))}E.tenantId&&(_e.tid=E.tenantId);const We=_e;for(const Tt of Object.keys(We))void 0===We[Tt]&&delete We[Tt];return`${function({config:E}){return E.emulator?Ne(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,U.xO)(We).slice(1)}`}const Uc="webStorageSupport",Cf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mv,this._completeRedirectFn=Zg}_openPopup(_,y,I,M){var V=this;return(0,d.Z)(function*(){var _e;de(null===(_e=V.eventManagers[_._key()])||void 0===_e?void 0:_e.manager,"_initialize() not called before _openPopup()");const We=im(_,y,I,be(),M);return function(E,_,y,I=500,M=600){const V=Math.max((window.screen.availHeight-M)/2,0).toString(),_e=Math.max((window.screen.availWidth-I)/2,0).toString();let We="";const Tt=Object.assign(Object.assign({},jo),{width:I.toString(),height:M.toString(),top:V,left:_e}),Wt=(0,U.z$)().toLowerCase();y&&(We=St(Wt)?"_blank":y),Ae(Wt)&&(_=_||"http://localhost",Tt.scrollbars="yes");const fn=Object.entries(Tt).reduce(($o,[Aa,Ra])=>`${$o}${Aa}=${Ra},`,"");if(function(E=(0,U.z$)()){var _;return In(E)&&!!(null===(_=window.navigator)||void 0===_?void 0:_.standalone)}(Wt)&&"_self"!==We)return function(E,_){const y=document.createElement("a");y.href=E,y.target=_;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(I)}(_||"",We),new Lv(null);const or=window.open(_||"",We,fn);ve(or,E,"popup-blocked");try{or.focus()}catch($o){}return new Lv(or)}(_,We,Si())})()}_openRedirect(_,y,I,M){var V=this;return(0,d.Z)(function*(){return yield V._originValidation(_),E=im(_,y,I,be(),M),Sr().location.href=E,new Promise(()=>{});var E})()}_initialize(_){const y=_._key();if(this.eventManagers[y]){const{manager:M,promise:V}=this.eventManagers[y];return M?Promise.resolve(M):(de(V,"If manager is not set, promise should be"),V)}const I=this.initAndGetManager(_);return this.eventManagers[y]={promise:I},I}initAndGetManager(_){var y=this;return(0,d.Z)(function*(){const I=yield function(E){return nm.apply(this,arguments)}(_),M=new sr(_);return I.register("authEvent",V=>(ve(null==V?void 0:V.authEvent,_,"invalid-auth-event"),{status:M.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[_._key()]={manager:M},y.iframes[_._key()]=I,M})()}_isIframeWebStorageSupported(_,y){this.iframes[_._key()].send(Uc,{type:Uc},M=>{var V;const _e=null===(V=null==M?void 0:M[0])||void 0===V?void 0:V[Uc];void 0!==_e&&y(!!_e),Be(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const y=_._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(E){return Vo.apply(this,arguments)}(_)),this.originValidationPromises[y]}get _shouldInitProactively(){return Tr()||Ze()||In()}};class md extends class{constructor(_){this.factorId=_}_process(_,y,I){switch(y.type){case"enroll":return this._finalizeEnroll(_,y.credential,I);case"signin":return this._finalizeSignIn(_,y.credential);default:return Jt("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new md(_)}_finalizeEnroll(_,y,I){return function(E,_){return Ut(E,"POST","/v2/accounts/mfaEnrollment:finalize",rt(E,_))}(_,{idToken:y,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,y){return function(E,_){return Ut(E,"POST","/v2/accounts/mfaSignIn:finalize",rt(E,_))}(_,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wl=(()=>{class E{constructor(){}static assertion(y){return md._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var E,Vv="@firebase/auth";class Uv{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var y=this;return(0,d.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const y=this.auth.onIdTokenChanged(I=>{var M;_((null===(M=I)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,y),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const y=this.internalListeners.get(_);!y||(this.internalListeners.delete(_),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ho(E=(0,F.getApp)()){const _=(0,F._getProvider)(E,"auth");return _.isInitialized()?_.getImmediate():function(E,_){const y=(0,F._getProvider)(E,"auth");if(y.isInitialized()){const M=y.getImmediate(),V=y.getOptions();if((0,U.vZ)(V,null!=_?_:{}))return M;Be(M,"already-initialized")}return y.initialize({options:_})}(E,{popupRedirectResolver:Cf,persistence:[Yn,Rv,Mv]})}E="Browser",(0,F._registerComponent)(new J.wA("auth",(_,{options:y})=>{const I=_.getProvider("app").getImmediate(),{apiKey:M,authDomain:V}=I.options;return(_e=>{ve(M&&!M.includes(":"),"invalid-api-key",{appName:_e.name}),ve(!(null==V?void 0:V.includes(":")),"argument-error",{appName:_e.name});const We={apiKey:M,authDomain:V,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ue(E)},Tt=new qe(_e,We);return function(E,_){const y=(null==_?void 0:_.persistence)||[],I=(Array.isArray(y)?y:[y]).map(pe);(null==_?void 0:_.errorMap)&&E._updateErrorMap(_.errorMap),E._initializeWithPersistence(I,null==_?void 0:_.popupRedirectResolver)}(Tt,y),Tt})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,y,I)=>{_.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new J.wA("auth-internal",_=>{const y=Qe(_.getProvider("auth").getImmediate());return new Uv(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(Vv,"0.19.3",void 0),(0,F.registerVersion)(Vv,"0.19.3","esm2017")},3854:(gt,Oe,O)=>{"use strict";O.d(Oe,{BH:()=>ne,LL:()=>be,ZR:()=>Ue,gQ:()=>wn,zI:()=>Ee,hu:()=>U,g5:()=>F,US:()=>J,tV:()=>X,h$:()=>ie,$s:()=>Xn,r3:()=>rt,Sg:()=>De,ne:()=>Qn,p$:()=>N,vZ:()=>zn,ZB:()=>j,gK:()=>Je,pd:()=>Gn,m9:()=>Wn,z$:()=>Le,GJ:()=>Vt,jU:()=>oe,ru:()=>Re,d:()=>Ke,xb:()=>qt,w1:()=>Lt,hl:()=>Jt,uI:()=>we,UG:()=>ge,Yr:()=>Ht,b$:()=>Be,G6:()=>ve,Mn:()=>Pt,w9:()=>Nt,cI:()=>gn,UI:()=>dn,xO:()=>Bn,zd:()=>Ir,DV:()=>Ut,ug:()=>Mt,dS:()=>Yt,Pz:()=>Et,eu:()=>de});const U=function(q,z){if(!q)throw F(z)},F=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},le=function(q){const z=[];let Q=0;for(let Pe=0;Pe<q.length;Pe++){let fe=q.charCodeAt(Pe);fe<128?z[Q++]=fe:fe<2048?(z[Q++]=fe>>6|192,z[Q++]=63&fe|128):55296==(64512&fe)&&Pe+1<q.length&&56320==(64512&q.charCodeAt(Pe+1))?(fe=65536+((1023&fe)<<10)+(1023&q.charCodeAt(++Pe)),z[Q++]=fe>>18|240,z[Q++]=fe>>12&63|128,z[Q++]=fe>>6&63|128,z[Q++]=63&fe|128):(z[Q++]=fe>>12|224,z[Q++]=fe>>6&63|128,z[Q++]=63&fe|128)}return z},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,z){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Pe=[];for(let fe=0;fe<q.length;fe+=3){const ut=q[fe],ce=fe+1<q.length,Ie=ce?q[fe+1]:0,je=fe+2<q.length,nt=je?q[fe+2]:0;let $=(15&Ie)<<2|nt>>6,G=63&nt;je||(G=64,ce||($=64)),Pe.push(Q[ut>>2],Q[(3&ut)<<4|Ie>>4],Q[$],Q[G])}return Pe.join("")},encodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(q):this.encodeByteArray(le(q),z)},decodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(q):function(q){const z=[];let Q=0,Pe=0;for(;Q<q.length;){const fe=q[Q++];if(fe<128)z[Pe++]=String.fromCharCode(fe);else if(fe>191&&fe<224){const ut=q[Q++];z[Pe++]=String.fromCharCode((31&fe)<<6|63&ut)}else if(fe>239&&fe<365){const je=((7&fe)<<18|(63&q[Q++])<<12|(63&q[Q++])<<6|63&q[Q++])-65536;z[Pe++]=String.fromCharCode(55296+(je>>10)),z[Pe++]=String.fromCharCode(56320+(1023&je))}else{const ut=q[Q++],ce=q[Q++];z[Pe++]=String.fromCharCode((15&fe)<<12|(63&ut)<<6|63&ce)}}return z.join("")}(this.decodeStringToByteArray(q,z))},decodeStringToByteArray(q,z){this.init_();const Q=z?this.charToByteMapWebSafe_:this.charToByteMap_,Pe=[];for(let fe=0;fe<q.length;){const ut=Q[q.charAt(fe++)],Ie=fe<q.length?Q[q.charAt(fe)]:0;++fe;const nt=fe<q.length?Q[q.charAt(fe)]:64;++fe;const K=fe<q.length?Q[q.charAt(fe)]:64;if(++fe,null==ut||null==Ie||null==nt||null==K)throw Error();Pe.push(ut<<2|Ie>>4),64!==nt&&(Pe.push(Ie<<4&240|nt>>2),64!==K&&Pe.push(nt<<6&192|K))}return Pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ie=function(q){const z=le(q);return J.encodeByteArray(z,!0)},te=function(q){return ie(q).replace(/\./g,"")},X=function(q){try{return J.decodeString(q,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function N(q){return j(void 0,q)}function j(q,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return z}for(const Q in z)!z.hasOwnProperty(Q)||!L(Q)||(q[Q]=j(q[Q],z[Q]));return q}function L(q){return"__proto__"!==q}class ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,Q)=>{this.resolve=z,this.reject=Q})}wrapCallback(z){return(Q,Pe)=>{Q?this.reject(Q):this.resolve(Pe),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(Q):z(Q,Pe))}}}function De(q,z){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Pe=z||"demo-project",fe=q.iat||0,ut=q.sub||q.user_id;if(!ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ce=Object.assign({iss:`https://securetoken.google.com/${Pe}`,aud:Pe,iat:fe,exp:fe+3600,auth_time:fe,sub:ut,user_id:ut,firebase:{sign_in_provider:"custom",identities:{}}},q);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(ce)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function oe(){return"object"==typeof self&&self.self===self}function Re(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){return Le().indexOf("Electron/")>=0}function Lt(){const q=Le();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Pt(){return Le().indexOf("MSAppHost/")>=0}function Ht(){return!1}function ve(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jt(){return"object"==typeof indexedDB}function de(){return new Promise((q,z)=>{try{let Q=!0;const Pe="validate-browser-context-for-indexeddb-analytics-module",fe=self.indexedDB.open(Pe);fe.onsuccess=()=>{fe.result.close(),Q||self.indexedDB.deleteDatabase(Pe),q(!0)},fe.onupgradeneeded=()=>{Q=!1},fe.onerror=()=>{var ut;z((null===(ut=fe.error)||void 0===ut?void 0:ut.message)||"")}}catch(Q){z(Q)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ue extends Error{constructor(z,Q,Pe){super(Q),this.code=z,this.customData=Pe,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(z,Q,Pe){this.service=z,this.serviceName=Q,this.errors=Pe}create(z,...Q){const Pe=Q[0]||{},fe=`${this.service}/${z}`,ut=this.errors[z],ce=ut?function(q,z){return q.replace(sn,(Q,Pe)=>{const fe=z[Pe];return null!=fe?String(fe):`<${Pe}?>`})}(ut,Pe):"Error";return new Ue(fe,`${this.serviceName}: ${ce} (${fe}).`,Pe)}}const sn=/\{\$([^}]+)}/g;function gn(q){return JSON.parse(q)}function Et(q){return JSON.stringify(q)}const bt=function(q){let z={},Q={},Pe={},fe="";try{const ut=q.split(".");z=gn(X(ut[0])||""),Q=gn(X(ut[1])||""),fe=ut[2],Pe=Q.d||{},delete Q.d}catch(ut){}return{header:z,claims:Q,data:Pe,signature:fe}},Nt=function(q){const Q=bt(q).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Vt=function(q){const z=bt(q).claims;return"object"==typeof z&&!0===z.admin};function rt(q,z){return Object.prototype.hasOwnProperty.call(q,z)}function Ut(q,z){if(Object.prototype.hasOwnProperty.call(q,z))return q[z]}function qt(q){for(const z in q)if(Object.prototype.hasOwnProperty.call(q,z))return!1;return!0}function dn(q,z,Q){const Pe={};for(const fe in q)Object.prototype.hasOwnProperty.call(q,fe)&&(Pe[fe]=z.call(Q,q[fe],fe,q));return Pe}function zn(q,z){if(q===z)return!0;const Q=Object.keys(q),Pe=Object.keys(z);for(const fe of Q){if(!Pe.includes(fe))return!1;const ut=q[fe],ce=z[fe];if(Un(ut)&&Un(ce)){if(!zn(ut,ce))return!1}else if(ut!==ce)return!1}for(const fe of Pe)if(!Q.includes(fe))return!1;return!0}function Un(q){return null!==q&&"object"==typeof q}function Bn(q){const z=[];for(const[Q,Pe]of Object.entries(q))Array.isArray(Pe)?Pe.forEach(fe=>{z.push(encodeURIComponent(Q)+"="+encodeURIComponent(fe))}):z.push(encodeURIComponent(Q)+"="+encodeURIComponent(Pe));return z.length?"&"+z.join("&"):""}function Ir(q){const z={};return q.replace(/^\?/,"").split("&").forEach(Pe=>{if(Pe){const[fe,ut]=Pe.split("=");z[decodeURIComponent(fe)]=decodeURIComponent(ut)}}),z}function Gn(q){const z=q.indexOf("?");if(!z)return"";const Q=q.indexOf("#",z);return q.substring(z,Q>0?Q:void 0)}class wn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,Q){Q||(Q=0);const Pe=this.W_;if("string"==typeof z)for(let K=0;K<16;K++)Pe[K]=z.charCodeAt(Q)<<24|z.charCodeAt(Q+1)<<16|z.charCodeAt(Q+2)<<8|z.charCodeAt(Q+3),Q+=4;else for(let K=0;K<16;K++)Pe[K]=z[Q]<<24|z[Q+1]<<16|z[Q+2]<<8|z[Q+3],Q+=4;for(let K=16;K<80;K++){const $=Pe[K-3]^Pe[K-8]^Pe[K-14]^Pe[K-16];Pe[K]=4294967295&($<<1|$>>>31)}let nt,tt,fe=this.chain_[0],ut=this.chain_[1],ce=this.chain_[2],Ie=this.chain_[3],je=this.chain_[4];for(let K=0;K<80;K++){K<40?K<20?(nt=Ie^ut&(ce^Ie),tt=1518500249):(nt=ut^ce^Ie,tt=1859775393):K<60?(nt=ut&ce|Ie&(ut|ce),tt=2400959708):(nt=ut^ce^Ie,tt=3395469782);const $=(fe<<5|fe>>>27)+nt+je+tt+Pe[K]&4294967295;je=Ie,Ie=ce,ce=4294967295&(ut<<30|ut>>>2),ut=fe,fe=$}this.chain_[0]=this.chain_[0]+fe&4294967295,this.chain_[1]=this.chain_[1]+ut&4294967295,this.chain_[2]=this.chain_[2]+ce&4294967295,this.chain_[3]=this.chain_[3]+Ie&4294967295,this.chain_[4]=this.chain_[4]+je&4294967295}update(z,Q){if(null==z)return;void 0===Q&&(Q=z.length);const Pe=Q-this.blockSize;let fe=0;const ut=this.buf_;let ce=this.inbuf_;for(;fe<Q;){if(0===ce)for(;fe<=Pe;)this.compress_(z,fe),fe+=this.blockSize;if("string"==typeof z){for(;fe<Q;)if(ut[ce]=z.charCodeAt(fe),++ce,++fe,ce===this.blockSize){this.compress_(ut),ce=0;break}}else for(;fe<Q;)if(ut[ce]=z[fe],++ce,++fe,ce===this.blockSize){this.compress_(ut),ce=0;break}}this.inbuf_=ce,this.total_+=Q}digest(){const z=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let fe=this.blockSize-1;fe>=56;fe--)this.buf_[fe]=255&Q,Q/=256;this.compress_(this.buf_);let Pe=0;for(let fe=0;fe<5;fe++)for(let ut=24;ut>=0;ut-=8)z[Pe]=this.chain_[fe]>>ut&255,++Pe;return z}}function Qn(q,z){const Q=new it(q,z);return Q.subscribe.bind(Q)}class it{constructor(z,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{z(this)}).catch(Pe=>{this.error(Pe)})}next(z){this.forEachObserver(Q=>{Q.next(z)})}error(z){this.forEachObserver(Q=>{Q.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,Q,Pe){let fe;if(void 0===z&&void 0===Q&&void 0===Pe)throw new Error("Missing Observer.");fe=function(q,z){if("object"!=typeof q||null===q)return!1;for(const Q of["next","error","complete"])if(Q in q&&"function"==typeof q[Q])return!0;return!1}(z)?z:{next:z,error:Q,complete:Pe},void 0===fe.next&&(fe.next=ct),void 0===fe.error&&(fe.error=ct),void 0===fe.complete&&(fe.complete=ct);const ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?fe.error(this.finalError):fe.complete()}catch(ce){}}),this.observers.push(fe),ut}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,z)}sendOne(z,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{Q(this.observers[z])}catch(Pe){"undefined"!=typeof console&&console.error&&console.error(Pe)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ct(){}function Je(q,z){return`${q} failed: ${z} argument `}const Yt=function(q){const z=[];let Q=0;for(let Pe=0;Pe<q.length;Pe++){let fe=q.charCodeAt(Pe);if(fe>=55296&&fe<=56319){const ut=fe-55296;Pe++,U(Pe<q.length,"Surrogate pair missing trail surrogate."),fe=65536+(ut<<10)+(q.charCodeAt(Pe)-56320)}fe<128?z[Q++]=fe:fe<2048?(z[Q++]=fe>>6|192,z[Q++]=63&fe|128):fe<65536?(z[Q++]=fe>>12|224,z[Q++]=fe>>6&63|128,z[Q++]=63&fe|128):(z[Q++]=fe>>18|240,z[Q++]=fe>>12&63|128,z[Q++]=fe>>6&63|128,z[Q++]=63&fe|128)}return z},Mt=function(q){let z=0;for(let Q=0;Q<q.length;Q++){const Pe=q.charCodeAt(Q);Pe<128?z++:Pe<2048?z+=2:Pe>=55296&&Pe<=56319?(z+=4,Q++):z+=3}return z};function Xn(q,z=1e3,Q=2){const Pe=z*Math.pow(Q,q),fe=Math.round(.5*Pe*(Math.random()-.5)*2);return Math.min(144e5,Pe+fe)}function Wn(q){return q&&q._delegate?q._delegate:q}},3047:(gt,Oe,O)=>{"use strict";O.d(Oe,{IH:()=>Jn,Gb:()=>Xn,Kz:()=>Q,Iv:()=>Wn});var d=O(8239),U=O(8026),F=O(5422),le=O(3854),ye=O(3910);O(3328);const ie="analytics",te="firebase_id",X="origin",j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",L="https://www.googletagmanager.com/gtag/js",ne=new F.Yd("@firebase/analytics");function De(ce){return Promise.all(ce.map(Ie=>Ie.catch(je=>je)))}function Le(ce,Ie){const je=document.createElement("script");je.src=`${L}?l=${ce}&id=${Ie}`,je.async=!0,document.head.appendChild(je)}function ge(ce,Ie,je,nt,tt,K){return oe.apply(this,arguments)}function oe(){return(oe=(0,d.Z)(function*(ce,Ie,je,nt,tt,K){const $=nt[tt];try{if($)yield Ie[$];else{const Ae=(yield De(je)).find(Ze=>Ze.measurementId===tt);Ae&&(yield Ie[Ae.appId])}}catch(G){ne.error(G)}ce("config",tt,K)})).apply(this,arguments)}function Re(ce,Ie,je,nt,tt){return Be.apply(this,arguments)}function Be(){return(Be=(0,d.Z)(function*(ce,Ie,je,nt,tt){try{let K=[];if(tt&&tt.send_to){let $=tt.send_to;Array.isArray($)||($=[$]);const G=yield De(je);for(const Ae of $){const Ze=G.find(Kt=>Kt.measurementId===Ae),St=Ze&&Ie[Ze.appId];if(!St){K=[];break}K.push(St)}}0===K.length&&(K=Object.values(Ie)),yield Promise.all(K),ce("event",nt,tt||{})}catch(K){ne.error(K)}})).apply(this,arguments)}function Pt(){const ce=window.document.getElementsByTagName("script");for(const Ie of Object.values(ce))if(Ie.src&&Ie.src.includes(L))return Ie;return null}const ve=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),pe=new class{constructor(Ie={},je=1e3){this.throttleMetadata=Ie,this.intervalMillis=je}getThrottleMetadata(Ie){return this.throttleMetadata[Ie]}setThrottleMetadata(Ie,je){this.throttleMetadata[Ie]=je}deleteThrottleMetadata(Ie){delete this.throttleMetadata[Ie]}};function Se(ce){return new Headers({Accept:"application/json","x-goog-api-key":ce})}function Ue(ce){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(ce){var Ie;const{appId:je,apiKey:nt}=ce,tt={method:"GET",headers:Se(nt)},K=j.replace("{app-id}",je),$=yield fetch(K,tt);if(200!==$.status&&304!==$.status){let G="";try{const Ae=yield $.json();(null===(Ie=Ae.error)||void 0===Ie?void 0:Ie.message)&&(G=Ae.error.message)}catch(Ae){}throw ve.create("config-fetch-failed",{httpStatus:$.status,responseMessage:G})}return $.json()})).apply(this,arguments)}function It(ce){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(ce,Ie=pe,je){const{appId:nt,apiKey:tt,measurementId:K}=ce.options;if(!nt)throw ve.create("no-app-id");if(!tt){if(K)return{measurementId:K,appId:nt};throw ve.create("no-api-key")}const $=Ie.getThrottleMetadata(nt)||{backoffCount:0,throttleEndTimeMillis:Date.now()},G=new Rt;return setTimeout((0,d.Z)(function*(){G.abort()}),void 0!==je?je:6e4),gn({appId:nt,apiKey:tt,measurementId:K},$,G,Ie)})).apply(this,arguments)}function gn(ce,Ie,je){return Et.apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(ce,{throttleEndTimeMillis:Ie,backoffCount:je},nt,tt=pe){const{appId:K,measurementId:$}=ce;try{yield bt(nt,Ie)}catch(G){if($)return ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$} provided in the "measurementId" field in the local Firebase config. [${G.message}]`),{appId:K,measurementId:$};throw G}try{const G=yield Ue(ce);return tt.deleteThrottleMetadata(K),G}catch(G){if(!Ne(G)){if(tt.deleteThrottleMetadata(K),$)return ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$} provided in the "measurementId" field in the local Firebase config. [${G.message}]`),{appId:K,measurementId:$};throw G}const Ae=503===Number(G.customData.httpStatus)?(0,le.$s)(je,tt.intervalMillis,30):(0,le.$s)(je,tt.intervalMillis),Ze={throttleEndTimeMillis:Date.now()+Ae,backoffCount:je+1};return tt.setThrottleMetadata(K,Ze),ne.debug(`Calling attemptFetch again in ${Ae} millis`),gn(ce,Ze,nt,tt)}})).apply(this,arguments)}function bt(ce,Ie){return new Promise((je,nt)=>{const tt=Math.max(Ie-Date.now(),0),K=setTimeout(je,tt);ce.addEventListener(()=>{clearTimeout(K),nt(ve.create("fetch-throttle",{throttleEndTimeMillis:Ie}))})})}function Ne(ce){if(!(ce instanceof le.ZR&&ce.customData))return!1;const Ie=Number(ce.customData.httpStatus);return 429===Ie||500===Ie||503===Ie||504===Ie}class Rt{constructor(){this.listeners=[]}addEventListener(Ie){this.listeners.push(Ie)}abort(){this.listeners.forEach(Ie=>Ie())}}function Nt(){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,d.Z)(function*(){if(!(0,le.hl)())return ne.warn(ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(ce){return ne.warn(ve.create("indexeddb-unavailable",{errorInfo:ce}).message),!1}return!0})).apply(this,arguments)}function Ut(){return(Ut=(0,d.Z)(function*(ce,Ie,je,nt,tt,K,$){var G;const Ae=It(ce);Ae.then(mn=>{je[mn.measurementId]=mn.appId,ce.options.measurementId&&mn.measurementId!==ce.options.measurementId&&ne.warn(`The measurement ID in the local Firebase config (${ce.options.measurementId}) does not match the measurement ID fetched from the server (${mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mn=>ne.error(mn)),Ie.push(Ae);const Ze=Nt().then(mn=>{if(mn)return nt.getId()}),[St,Kt]=yield Promise.all([Ae,Ze]);Pt()||Le(K,St.measurementId),tt("js",new Date);const Qt=null!==(G=null==$?void 0:$.config)&&void 0!==G?G:{};return Qt[X]="firebase",Qt.update=!0,null!=Kt&&(Qt[te]=Kt),tt("config",St.measurementId,Qt),St.measurementId})).apply(this,arguments)}class qt{constructor(Ie){this.app=Ie}_delete(){return delete dn[this.app.options.appId],Promise.resolve()}}let dn={},zn=[];const Un={};let Gn,wn,Bn="dataLayer",Qn=!1;function xe(ce,Ie,je){!function(){const ce=[];if((0,le.ru)()&&ce.push("This is a browser extension environment."),(0,le.zI)()||ce.push("Cookies are not available."),ce.length>0){const Ie=ce.map((nt,tt)=>`(${tt+1}) ${nt}`).join(" "),je=ve.create("invalid-analytics-context",{errorInfo:Ie});ne.warn(je.message)}}();const nt=ce.options.appId;if(!nt)throw ve.create("no-app-id");if(!ce.options.apiKey){if(!ce.options.measurementId)throw ve.create("no-api-key");ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${ce.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=dn[nt])throw ve.create("already-exists",{id:nt});if(!Qn){!function(ce){let Ie=[];Array.isArray(window[ce])?Ie=window[ce]:window[ce]=Ie}(Bn);const{wrappedGtag:K,gtagCore:$}=function(ce,Ie,je,nt,tt){let K=function(...$){window[nt].push(arguments)};return window[tt]&&"function"==typeof window[tt]&&(K=window[tt]),window[tt]=function(ce,Ie,je,nt){function K(){return(K=(0,d.Z)(function*($,G,Ae){try{"event"===$?yield Re(ce,Ie,je,G,Ae):"config"===$?yield ge(ce,Ie,je,nt,G,Ae):ce("set",G)}catch(Ze){ne.error(Ze)}})).apply(this,arguments)}return function($,G,Ae){return K.apply(this,arguments)}}(K,ce,Ie,je),{gtagCore:K,wrappedGtag:window[tt]}}(dn,zn,Un,Bn,"gtag");wn=K,Gn=$,Qn=!0}return dn[nt]=function(ce,Ie,je,nt,tt,K,$){return Ut.apply(this,arguments)}(ce,zn,Un,Ie,Gn,Bn,je),new qt(ce)}function mt(){return(mt=(0,d.Z)(function*(ce,Ie,je,nt,tt){if(tt&&tt.global)ce("event",je,nt);else{const K=yield Ie;ce("event",je,Object.assign(Object.assign({},nt),{send_to:K}))}})).apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(ce,Ie,je,nt){if(nt&&nt.global)return ce("set",{user_id:je}),Promise.resolve();ce("config",yield Ie,{update:!0,user_id:je})})).apply(this,arguments)}function Jn(ce=(0,U.getApp)()){ce=(0,le.m9)(ce);const Ie=(0,U._getProvider)(ce,ie);return Ie.isInitialized()?Ie.getImmediate():function(ce,Ie={}){const je=(0,U._getProvider)(ce,ie);if(je.isInitialized()){const tt=je.getImmediate();if((0,le.vZ)(Ie,je.getOptions()))return tt;throw ve.create("already-initialized")}return je.initialize({options:Ie})}(ce)}function Xn(){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(ce){return!1}})).apply(this,arguments)}function Wn(ce,Ie,je){ce=(0,le.m9)(ce),function(ce,Ie,je,nt){return Dt.apply(this,arguments)}(wn,dn[ce.app.options.appId],Ie,je).catch(nt=>ne.error(nt))}function Q(ce,Ie,je,nt){ce=(0,le.m9)(ce),function(ce,Ie,je,nt,tt){return mt.apply(this,arguments)}(wn,dn[ce.app.options.appId],Ie,je,nt).catch(tt=>ne.error(tt))}const Pe="@firebase/analytics";(0,U._registerComponent)(new ye.wA(ie,(Ie,{options:je})=>xe(Ie.getProvider("app").getImmediate(),Ie.getProvider("installations-internal").getImmediate(),je),"PUBLIC")),(0,U._registerComponent)(new ye.wA("analytics-internal",function(Ie){try{const je=Ie.getProvider(ie).getImmediate();return{logEvent:(nt,tt,K)=>Q(je,nt,tt,K)}}catch(je){throw ve.create("interop-component-reg-failed",{reason:je})}},"PRIVATE")),(0,U.registerVersion)(Pe,"0.7.4"),(0,U.registerVersion)(Pe,"0.7.4","esm2017")},2329:(gt,Oe,O)=>{"use strict";O.d(Oe,{Mq:()=>d.getApp,C6:()=>d.getApps,ZF:()=>d.initializeApp,KN:()=>d.registerVersion});var d=O(8026);(0,d.registerVersion)("firebase","9.4.1","app")},7841:(gt,Oe,O)=>{"use strict";O.d(Oe,{Z:()=>d.Z});var d=O(3394);d.Z.registerVersion("firebase","9.4.1","app-compat")},4828:(gt,Oe,O)=>{"use strict";O.r(Oe);var d=O(8239),U=O(3394),F=O(4495),le=O(3854),ie=(O(8026),O(5422),O(3910));function te(){return window}function j(){return(j=(0,d.Z)(function*(K,$,G){var Ae;const{BuildInfo:Ze}=te();(0,F.ap)($.sessionId,"AuthEvent did not contain a session ID");const St=yield oe($.sessionId),Kt={};return(0,F.aq)()?Kt.ibi=Ze.packageName:(0,F.ar)()?Kt.apn=Ze.packageName:(0,F.as)(K,"operation-not-supported-in-this-environment"),Ze.displayName&&(Kt.appDisplayName=Ze.displayName),Kt.sessionId=St,(0,F.at)(K,G,$.type,void 0,null!==(Ae=$.eventId)&&void 0!==Ae?Ae:void 0,Kt)})).apply(this,arguments)}function ne(){return(ne=(0,d.Z)(function*(K){const{BuildInfo:$}=te(),G={};(0,F.aq)()?G.iosBundleId=$.packageName:(0,F.ar)()?G.androidPackageName=$.packageName:(0,F.as)(K,"operation-not-supported-in-this-environment"),yield(0,F.au)(K,G)})).apply(this,arguments)}function we(){return(we=(0,d.Z)(function*(K,$,G){const{cordova:Ae}=te();let Ze=()=>{};try{yield new Promise((St,Kt)=>{let Qt=null;function mn(){var tn;St();const jn=null===(tn=Ae.plugins.browsertab)||void 0===tn?void 0:tn.close;"function"==typeof jn&&jn(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function Cn(){Qt||(Qt=window.setTimeout(()=>{Kt((0,F.av)(K,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===(null==document?void 0:document.visibilityState)&&Cn()}$.addPassiveListener(mn),document.addEventListener("resume",Cn,!1),(0,F.ar)()&&document.addEventListener("visibilitychange",In,!1),Ze=()=>{$.removePassiveListener(mn),document.removeEventListener("resume",Cn,!1),document.removeEventListener("visibilitychange",In,!1),Qt&&window.clearTimeout(Qt)}})}finally{Ze()}})).apply(this,arguments)}function oe(K){return Re.apply(this,arguments)}function Re(){return(Re=(0,d.Z)(function*(K){const $=Be(K),G=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(G)).map(Ze=>Ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Be(K){if((0,F.ap)(/[0-9a-zA-Z]+/.test(K),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(K);const $=new ArrayBuffer(K.length),G=new Uint8Array($);for(let Ae=0;Ae<K.length;Ae++)G[Ae]=K.charCodeAt(Ae);return G}class Lt extends F.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(G=>G($)),super.onEvent($)}initialized(){var $=this;return(0,d.Z)(function*(){yield $.initPromise})()}}function ve(K){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(K){const $=yield pe()._get(Se(K));return $&&(yield pe()._remove(Se(K))),$})).apply(this,arguments)}function Ee(){const K=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const Ae=Math.floor(Math.random()*$.length);K.push($.charAt(Ae))}return K.join("")}function pe(){return(0,F.ax)(F.b)}function Se(K){return(0,F.ay)("authEvent",K.config.apiKey,K.name)}function It(K){if(!(null==K?void 0:K.includes("?")))return{};const[$,...G]=K.split("?");return(0,le.zd)(G.join("?"))}function bt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.av)("no-auth-event")}}function rt(){var K;return(null===(K=null==self?void 0:self.location)||void 0===K?void 0:K.protocol)||null}function qt(K=(0,le.z$)()){return!("file:"!==rt()&&"ionic:"!==rt()||!K.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){try{const K=self.localStorage,$=F.aG();if(K)return K.setItem($,"1"),K.removeItem($),!function(K=(0,le.z$)()){return(0,le.w1)()&&11===(null==document?void 0:document.documentMode)||function(K=(0,le.z$)()){return/Edge\/\d+/.test(K)}(K)}()||(0,le.hl)()}catch(K){return Gn()&&(0,le.hl)()}return!1}function Gn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function wn(){return("http:"===rt()||"https:"===rt()||(0,le.ru)()||qt())&&!((0,le.b$)()||(0,le.UG)())&&Ir()&&!Gn()}function Qn(){return qt()&&"undefined"!=typeof document}function re(){return(re=(0,d.Z)(function*(){return!!Qn()&&new Promise(K=>{const $=setTimeout(()=>{K(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),K(!0)})})})).apply(this,arguments)}const xe={LOCAL:"local",NONE:"none",SESSION:"session"},ct=F.aw,mt="persistence";function ot(K){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(K){yield K._initializationPromise;const $=Yt(),G=F.ay(mt,K.config.apiKey,K.name);(null==$?void 0:$.sessionStorage)&&$.sessionStorage.setItem(G,K._getPersistence())})).apply(this,arguments)}function Yt(){return"undefined"!=typeof window?window:null}const Mt=F.aw;class $e{constructor(){this.browserResolver=F.ax(F.k),this.cordovaResolver=F.ax(class{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aA}_initialize($){var G=this;return(0,d.Z)(function*(){const Ae=$._key();let Ze=G.eventManagers.get(Ae);return Ze||(Ze=new Lt($),G.eventManagers.set(Ae,Ze),G.attachCallbackListeners($,Ze)),Ze})()}_openPopup($){(0,F.as)($,"operation-not-supported-in-this-environment")}_openRedirect($,G,Ae,Ze){var St=this;return(0,d.Z)(function*(){!function(K){var $,G,Ae,Ze,St,Kt,Qt,mn,Cn,In;const tn=te();(0,F.aw)("function"==typeof(null===($=null==tn?void 0:tn.universalLinks)||void 0===$?void 0:$.subscribe),K,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aw)(void 0!==(null===(G=null==tn?void 0:tn.BuildInfo)||void 0===G?void 0:G.packageName),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aw)("function"==typeof(null===(St=null===(Ze=null===(Ae=null==tn?void 0:tn.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===St?void 0:St.openUrl),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(mn=null===(Qt=null===(Kt=null==tn?void 0:tn.cordova)||void 0===Kt?void 0:Kt.plugins)||void 0===Qt?void 0:Qt.browsertab)||void 0===mn?void 0:mn.isAvailable),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(In=null===(Cn=null==tn?void 0:tn.cordova)||void 0===Cn?void 0:Cn.InAppBrowser)||void 0===In?void 0:In.open),K,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Kt=yield St._initialize($);yield Kt.initialized(),Kt.resetRedirect(),(0,F.aB)(),yield St._originValidation($);const Qt=function(K,$,G=null){return{type:$,eventId:G,urlResponse:null,sessionId:Ee(),postBody:null,tenantId:K.tenantId,error:(0,F.av)(K,"no-auth-event")}}($,Ae,Ze);yield function(K,$){return pe()._set(Se(K),$)}($,Qt);const mn=yield function(K,$,G){return j.apply(this,arguments)}($,Qt,G),Cn=yield function(K){const{cordova:$}=te();return new Promise(G=>{$.plugins.browsertab.isAvailable(Ae=>{let Ze=null;Ae?$.plugins.browsertab.openUrl(K):Ze=$.InAppBrowser.open(K,(0,F.ao)()?"_blank":"_system","location=yes"),G(Ze)})})}(mn);return function(K,$,G){return we.apply(this,arguments)}($,Kt,Cn)})()}_isIframeWebStorageSupported($,G){throw new Error("Method not implemented.")}_originValidation($){const G=$._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function(K){return ne.apply(this,arguments)}($)),this.originValidationPromises[G]}attachCallbackListeners($,G){const{universalLinks:Ae,handleOpenURL:Ze,BuildInfo:St}=te(),Kt=setTimeout((0,d.Z)(function*(){yield ve($),G.onEvent(bt())}),500),Qt=function(){var In=(0,d.Z)(function*(tn){clearTimeout(Kt);const jn=yield ve($);let da=null;jn&&(null==tn?void 0:tn.url)&&(da=function(K,$){var G,Ae;const Ze=function(K){const $=It(K),G=$.link?decodeURIComponent($.link):void 0,Ae=It(G).link,Ze=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return It(Ze).link||Ze||Ae||G||K}($);if(Ze.includes("/__/auth/callback")){const St=It(Ze),Kt=St.firebaseError?function(K){try{return JSON.parse(K)}catch($){return null}}(decodeURIComponent(St.firebaseError)):null,Qt=null===(Ae=null===(G=null==Kt?void 0:Kt.code)||void 0===G?void 0:G.split("auth/"))||void 0===Ae?void 0:Ae[1],mn=Qt?(0,F.av)(Qt):null;return mn?{type:K.type,eventId:K.eventId,tenantId:K.tenantId,error:mn,urlResponse:null,sessionId:null,postBody:null}:{type:K.type,eventId:K.eventId,tenantId:K.tenantId,sessionId:K.sessionId,urlResponse:Ze,postBody:null}}return null}(jn,tn.url)),G.onEvent(da||bt())});return function(jn){return In.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Qt);const mn=Ze,Cn=`${St.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var In=(0,d.Z)(function*(tn){if(tn.toLowerCase().startsWith(Cn)&&Qt({url:tn}),"function"==typeof mn)try{mn(tn)}catch(jn){console.error(jn)}});return function(tn){return In.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aA}_initialize($){var G=this;return(0,d.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize($)})()}_openPopup($,G,Ae,Ze){var St=this;return(0,d.Z)(function*(){return yield St.selectUnderlyingResolver(),St.assertedUnderlyingResolver._openPopup($,G,Ae,Ze)})()}_openRedirect($,G,Ae,Ze){var St=this;return(0,d.Z)(function*(){return yield St.selectUnderlyingResolver(),St.assertedUnderlyingResolver._openRedirect($,G,Ae,Ze)})()}_isIframeWebStorageSupported($,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,G)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return Qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,d.Z)(function*(){if($.underlyingResolver)return;const G=yield function(){return re.apply(this,arguments)}();$.underlyingResolver=G?$.cordovaResolver:$.browserResolver})()}}function lt(K){return K.unwrap()}function kr(K){return Zt(K)}function Zt(K){const{_tokenResponse:$}=K instanceof le.ZR?K.customData:K;if(!$)return null;if(!(K instanceof le.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return F.P.credentialFromResult(K);const G=$.providerId;if(!G||G===F.o.PASSWORD)return null;let Ae;switch(G){case F.o.GOOGLE:Ae=F.N;break;case F.o.FACEBOOK:Ae=F.M;break;case F.o.GITHUB:Ae=F.Q;break;case F.o.TWITTER:Ae=F.V;break;default:const{oauthIdToken:Ze,oauthAccessToken:St,oauthTokenSecret:Kt,pendingToken:Qt,nonce:mn}=$;return St||Kt||Ze||Qt?Qt?G.startsWith("saml.")?F.aJ._create(G,Qt):F.I._fromParams({providerId:G,signInMethod:G,pendingToken:Qt,idToken:Ze,accessToken:St}):new F.T(G).credential({idToken:Ze,accessToken:St,rawNonce:mn}):null}return K instanceof le.ZR?Ae.credentialFromError(K):Ae.credentialFromResult(K)}function Xt(K,$){return $.catch(G=>{throw G instanceof le.ZR&&function(K,$){var G;const Ae=null===(G=$.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===$.code)$.resolver=new z(K,F.am(K,$));else if(Ae){const Ze=Zt($),St=$;Ze&&(St.credential=Ze,St.tenantId=Ae.tenantId||void 0,St.email=Ae.email||void 0,St.phoneNumber=Ae.phoneNumber||void 0)}}(K,G),G}).then(G=>{const Ze=G.user;return{operationType:G.operationType,credential:kr(G),additionalUserInfo:F.ak(G),user:Q.getOrCreate(Ze)}})}function Wn(K,$){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(K,$){const G=yield $;return{verificationId:G.verificationId,confirm:Ae=>Xt(K,G.confirm(Ae))}})).apply(this,arguments)}class z{constructor($,G){this.resolver=G,this.auth=$.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return Xt(lt(this.auth),this.resolver.resolveSignIn($))}}class Q{constructor($){this._delegate=$,this.multiFactor=F.an($)}static getOrCreate($){return Q.USER_MAP.has($)||Q.USER_MAP.set($,new Q($)),Q.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var G=this;return(0,d.Z)(function*(){return Xt(G.auth,F.Y(G._delegate,$))})()}linkWithPhoneNumber($,G){var Ae=this;return(0,d.Z)(function*(){return Wn(Ae.auth,F.l(Ae._delegate,$,G))})()}linkWithPopup($){var G=this;return(0,d.Z)(function*(){return Xt(G.auth,F.d(G._delegate,$,$e))})()}linkWithRedirect($){var G=this;return(0,d.Z)(function*(){return yield ot(F.aC(G.auth)),F.g(G._delegate,$,$e)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var G=this;return(0,d.Z)(function*(){return Xt(G.auth,F.Z(G._delegate,$))})()}reauthenticateWithPhoneNumber($,G){return Wn(this.auth,F.r(this._delegate,$,G))}reauthenticateWithPopup($){return Xt(this.auth,F.e(this._delegate,$,$e))}reauthenticateWithRedirect($){var G=this;return(0,d.Z)(function*(){return yield ot(F.aC(G.auth)),F.h(G._delegate,$,$e)})()}sendEmailVerification($){return F.aa(this._delegate,$)}unlink($){var G=this;return(0,d.Z)(function*(){return yield F.aj(G._delegate,$),G})()}updateEmail($){return F.af(this._delegate,$)}updatePassword($){return F.ag(this._delegate,$)}updatePhoneNumber($){return F.u(this._delegate,$)}updateProfile($){return F.ae(this._delegate,$)}verifyBeforeUpdateEmail($,G){return F.ab(this._delegate,$,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Q.USER_MAP=new WeakMap;const Pe=F.aw;let fe=(()=>{class K{constructor(G,Ae){if(this.app=G,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ze}=G.options;Pe(Ze,"invalid-api-key",{appName:G.name});let St=[F.K];if("undefined"!=typeof window){St=function(K,$){const G=Yt();if(!(null==G?void 0:G.sessionStorage))return[];const Ae=F.ay(mt,K,$);switch(G.sessionStorage.getItem(Ae)){case xe.NONE:return[F.K];case xe.LOCAL:return[F.i,F.a];case xe.SESSION:return[F.a];default:return[]}}(Ze,G.name);for(const Qt of[F.i,F.b,F.a])St.includes(Qt)||St.push(Qt)}Pe(Ze,"invalid-api-key",{appName:G.name});const Kt="undefined"!=typeof window?$e:void 0;this._delegate=Ae.initialize({options:{persistence:St,popupRedirectResolver:Kt}}),this._delegate._updateErrorMap(F.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Q.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,Ae){F.E(this._delegate,G,Ae)}applyActionCode(G){return F.a1(this._delegate,G)}checkActionCode(G){return F.a2(this._delegate,G)}confirmPasswordReset(G,Ae){return F.a0(this._delegate,G,Ae)}createUserWithEmailAndPassword(G,Ae){var Ze=this;return(0,d.Z)(function*(){return Xt(Ze._delegate,F.a4(Ze._delegate,G,Ae))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return F.a9(this._delegate,G)}isSignInWithEmailLink(G){return F.a7(this._delegate,G)}getRedirectResult(){var G=this;return(0,d.Z)(function*(){Pe(wn(),G._delegate,"operation-not-supported-in-this-environment");const Ae=yield F.j(G._delegate,$e);return Ae?Xt(G._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function(K,$){(0,F.aC)(K)._logFramework($)}(this._delegate,G)}onAuthStateChanged(G,Ae,Ze){const{next:St,error:Kt,complete:Qt}=ut(G,Ae,Ze);return this._delegate.onAuthStateChanged(St,Kt,Qt)}onIdTokenChanged(G,Ae,Ze){const{next:St,error:Kt,complete:Qt}=ut(G,Ae,Ze);return this._delegate.onIdTokenChanged(St,Kt,Qt)}sendSignInLinkToEmail(G,Ae){return F.a6(this._delegate,G,Ae)}sendPasswordResetEmail(G,Ae){return F.$(this._delegate,G,Ae||void 0)}setPersistence(G){var Ae=this;return(0,d.Z)(function*(){let Ze;switch(function(K,$){ct(Object.values(xe).includes($),K,"invalid-persistence-type"),(0,le.b$)()?ct($!==xe.SESSION,K,"unsupported-persistence-type"):(0,le.UG)()?ct($===xe.NONE,K,"unsupported-persistence-type"):Gn()?ct($===xe.NONE||$===xe.LOCAL&&(0,le.hl)(),K,"unsupported-persistence-type"):ct($===xe.NONE||Ir(),K,"unsupported-persistence-type")}(Ae._delegate,G),G){case xe.SESSION:Ze=F.a;break;case xe.LOCAL:Ze=(yield F.ax(F.i)._isAvailable())?F.i:F.b;break;case xe.NONE:Ze=F.K;break;default:return F.as("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(Ze)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return Xt(this._delegate,F.W(this._delegate))}signInWithCredential(G){return Xt(this._delegate,F.X(this._delegate,G))}signInWithCustomToken(G){return Xt(this._delegate,F._(this._delegate,G))}signInWithEmailAndPassword(G,Ae){return Xt(this._delegate,F.a5(this._delegate,G,Ae))}signInWithEmailLink(G,Ae){return Xt(this._delegate,F.a8(this._delegate,G,Ae))}signInWithPhoneNumber(G,Ae){return Wn(this._delegate,F.s(this._delegate,G,Ae))}signInWithPopup(G){var Ae=this;return(0,d.Z)(function*(){return Pe(wn(),Ae._delegate,"operation-not-supported-in-this-environment"),Xt(Ae._delegate,F.c(Ae._delegate,G,$e))})()}signInWithRedirect(G){var Ae=this;return(0,d.Z)(function*(){return Pe(wn(),Ae._delegate,"operation-not-supported-in-this-environment"),yield ot(Ae._delegate),F.f(Ae._delegate,G,$e)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return F.a3(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return K.Persistence=xe,K})();function ut(K,$,G){let Ae=K;"function"!=typeof K&&({next:Ae,error:$,complete:G}=K);const Ze=Ae;return{next:Kt=>Ze(Kt&&Q.getOrCreate(Kt)),error:$,complete:G}}class ce{constructor(){this.providerId="phone",this._delegate=new F.P(lt(U.Z.auth()))}static credential($,G){return F.P.credential($,G)}verifyPhoneNumber($,G){return this._delegate.verifyPhoneNumber($,G)}unwrap(){return this._delegate}}ce.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,ce.PROVIDER_ID=F.P.PROVIDER_ID;const Ie=F.aw;var K;(K=U.Z).INTERNAL.registerComponent(new ie.wA("auth-compat",$=>{const G=$.getProvider("app-compat").getImmediate(),Ae=$.getProvider("auth");return new fe(G,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.L,FacebookAuthProvider:F.M,GithubAuthProvider:F.Q,GoogleAuthProvider:F.N,OAuthProvider:F.T,SAMLAuthProvider:F.U,PhoneAuthProvider:ce,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:class{constructor($,G,Ae=U.Z.app()){var Ze;Ie(null===(Ze=Ae.options)||void 0===Ze?void 0:Ze.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new F.R($,G,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:F.V,Auth:fe,AuthCredential:F.G,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),K.registerVersion("@firebase/auth-compat","0.2.3")},7373:(gt,Oe,O)=>{"use strict";O.d(Oe,{KL:()=>In,Gb:()=>St});var d=O(8239),F=(O(3328),O(3910)),le=O(6676),ye=O(3854),J=O(8026);const ie="/firebase-messaging-sw.js",te="/firebase-cloud-messaging-push-scope",X="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",j="google.c.a.c_id",L="google.c.a.c_l",ne="google.c.a.ts",De="google.c.a.e";var we=(()=>{return(H=we||(we={})).PUSH_RECEIVED="push-received",H.NOTIFICATION_CLICKED="notification-clicked",we;var H})();function ge(H){const ue=new Uint8Array(H);return btoa(String.fromCharCode(...ue)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oe(H){const qe=(H+"=".repeat((4-H.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Qe=atob(qe),$t=new Uint8Array(Qe.length);for(let Y=0;Y<Qe.length;++Y)$t[Y]=Qe.charCodeAt(Y);return $t}const Re="fcm_token_details_db",Ke="fcm_token_object_Store";function Lt(H){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(H){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Re))return null;let ue=null;return(yield(0,le.openDb)(Re,5,function(){var Qe=(0,d.Z)(function*($t){var Y;if($t.oldVersion<2||!$t.objectStoreNames.contains(Ke))return;const Te=$t.transaction.objectStore(Ke),Ve=yield Te.index("fcmSenderId").get(H);if(yield Te.clear(),Ve)if(2===$t.oldVersion){const Xe=Ve;if(!Xe.auth||!Xe.p256dh||!Xe.endpoint)return;ue={token:Xe.fcmToken,createTime:null!==(Y=Xe.createTime)&&void 0!==Y?Y:Date.now(),subscriptionOptions:{auth:Xe.auth,p256dh:Xe.p256dh,endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:"string"==typeof Xe.vapidKey?Xe.vapidKey:ge(Xe.vapidKey)}}}else if(3===$t.oldVersion){const Xe=Ve;ue={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:ge(Xe.auth),p256dh:ge(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:ge(Xe.vapidKey)}}}else if(4===$t.oldVersion){const Xe=Ve;ue={token:Xe.fcmToken,createTime:Xe.createTime,subscriptionOptions:{auth:ge(Xe.auth),p256dh:ge(Xe.p256dh),endpoint:Xe.endpoint,swScope:Xe.swScope,vapidKey:ge(Xe.vapidKey)}}}});return function($t){return Qe.apply(this,arguments)}}())).close(),yield(0,le.deleteDb)(Re),yield(0,le.deleteDb)("fcm_vapid_details_db"),yield(0,le.deleteDb)("undefined"),Ht(ue)?ue:null})).apply(this,arguments)}function Ht(H){if(!H||!H.subscriptionOptions)return!1;const{subscriptionOptions:ue}=H;return"number"==typeof H.createTime&&H.createTime>0&&"string"==typeof H.token&&H.token.length>0&&"string"==typeof ue.auth&&ue.auth.length>0&&"string"==typeof ue.p256dh&&ue.p256dh.length>0&&"string"==typeof ue.endpoint&&ue.endpoint.length>0&&"string"==typeof ue.swScope&&ue.swScope.length>0&&"string"==typeof ue.vapidKey&&ue.vapidKey.length>0}const de="firebase-messaging-store";let Ee=null;function pe(){return Ee||(Ee=(0,le.openDb)("firebase-messaging-database",1,H=>{switch(H.oldVersion){case 0:H.createObjectStore(de)}})),Ee}function Se(H){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,d.Z)(function*(H){const ue=Et(H),Qe=yield(yield pe()).transaction(de).objectStore(de).get(ue);if(Qe)return Qe;{const $t=yield Lt(H.appConfig.senderId);if($t)return yield be(H,$t),$t}})).apply(this,arguments)}function be(H,ue){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(H,ue){const qe=Et(H),$t=(yield pe()).transaction(de,"readwrite");return yield $t.objectStore(de).put(ue,qe),yield $t.complete,ue})).apply(this,arguments)}function sn(H){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(H){const ue=Et(H),Qe=(yield pe()).transaction(de,"readwrite");yield Qe.objectStore(de).delete(ue),yield Qe.complete})).apply(this,arguments)}function Et({appConfig:H}){return H.appId}const Ne=new ye.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rt(H,ue){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(H,ue){const qe=yield zn(H),Qe=Bn(ue),$t={method:"POST",headers:qe,body:JSON.stringify(Qe)};let Y;try{Y=yield(yield fetch(dn(H.appConfig),$t)).json()}catch(Te){throw Ne.create("token-subscribe-failed",{errorInfo:Te})}if(Y.error)throw Ne.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw Ne.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Vt(H,ue){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(H,ue){const qe=yield zn(H),Qe=Bn(ue.subscriptionOptions),$t={method:"PATCH",headers:qe,body:JSON.stringify(Qe)};let Y;try{Y=yield(yield fetch(`${dn(H.appConfig)}/${ue.token}`,$t)).json()}catch(Te){throw Ne.create("token-update-failed",{errorInfo:Te})}if(Y.error)throw Ne.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw Ne.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Ut(H,ue){return qt.apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(H,ue){const Qe={method:"DELETE",headers:yield zn(H)};try{const Y=yield(yield fetch(`${dn(H.appConfig)}/${ue}`,Qe)).json();if(Y.error)throw Ne.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch($t){throw Ne.create("token-unsubscribe-failed",{errorInfo:$t})}})).apply(this,arguments)}function dn({projectId:H}){return`https://fcmregistrations.googleapis.com/v1/projects/${H}/registrations`}function zn(H){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*({appConfig:H,installations:ue}){const qe=yield ue.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H.apiKey,"x-goog-firebase-installations-auth":`FIS ${qe}`})})).apply(this,arguments)}function Bn({p256dh:H,auth:ue,endpoint:qe,vapidKey:Qe}){const $t={web:{endpoint:qe,auth:ue,p256dh:H}};return Qe!==X&&($t.web.applicationPubKey=Qe),$t}const Ir=6048e5;function Gn(H){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(H){const ue=yield Je(H.swRegistration,H.vapidKey),qe={vapidKey:H.vapidKey,swScope:H.swRegistration.scope,endpoint:ue.endpoint,auth:ge(ue.getKey("auth")),p256dh:ge(ue.getKey("p256dh"))},Qe=yield Se(H.firebaseDependencies);if(Qe){if(Ot(Qe.subscriptionOptions,qe))return Date.now()>=Qe.createTime+Ir?re(H,{token:Qe.token,createTime:Date.now(),subscriptionOptions:qe}):Qe.token;try{yield Ut(H.firebaseDependencies,Qe.token)}catch($t){console.warn($t)}return ct(H.firebaseDependencies,qe)}return ct(H.firebaseDependencies,qe)})).apply(this,arguments)}function Qn(H){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(H){const ue=yield Se(H.firebaseDependencies);ue&&(yield Ut(H.firebaseDependencies,ue.token),yield sn(H.firebaseDependencies));const qe=yield H.swRegistration.pushManager.getSubscription();return!qe||qe.unsubscribe()})).apply(this,arguments)}function re(H,ue){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(H,ue){try{const qe=yield Vt(H.firebaseDependencies,ue),Qe=Object.assign(Object.assign({},ue),{token:qe,createTime:Date.now()});return yield be(H.firebaseDependencies,Qe),qe}catch(qe){throw yield Qn(H),qe}})).apply(this,arguments)}function ct(H,ue){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(H,ue){const Qe={token:yield Rt(H,ue),createTime:Date.now(),subscriptionOptions:ue};return yield be(H,Qe),Qe.token})).apply(this,arguments)}function Je(H,ue){return ot.apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(H,ue){return(yield H.pushManager.getSubscription())||H.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oe(ue)})})).apply(this,arguments)}function Ot(H,ue){return ue.vapidKey===H.vapidKey&&ue.endpoint===H.endpoint&&ue.auth===H.auth&&ue.p256dh===H.p256dh}function Dt(H){const ue={from:H.from,collapseKey:H.collapse_key,messageId:H.fcm_message_id};return function(H,ue){if(!ue.notification)return;H.notification={};const qe=ue.notification.title;qe&&(H.notification.title=qe);const Qe=ue.notification.body;Qe&&(H.notification.body=Qe);const $t=ue.notification.image;$t&&(H.notification.image=$t)}(ue,H),function(H,ue){!ue.data||(H.data=ue.data)}(ue,H),function(H,ue){if(!ue.fcmOptions)return;H.fcmOptions={};const qe=ue.fcmOptions.link;qe&&(H.fcmOptions.link=qe);const Qe=ue.fcmOptions.analytics_label;Qe&&(H.fcmOptions.analyticsLabel=Qe)}(ue,H),ue}function lt(H){return"object"==typeof H&&!!H&&j in H}function Jn(H,ue){const qe=[];for(let Qe=0;Qe<H.length;Qe++)qe.push(H.charAt(Qe)),Qe<ue.length&&qe.push(ue.charAt(Qe));return qe.join("")}function Xn(H){return Ne.create("missing-app-config-values",{valueName:H})}Jn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Jn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zt{constructor(ue,qe,Qe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $t=function(H){if(!H||!H.options)throw Xn("App Configuration Object");if(!H.name)throw Xn("App Name");const ue=["projectId","apiKey","appId","messagingSenderId"],{options:qe}=H;for(const Qe of ue)if(!qe[Qe])throw Xn(Qe);return{appName:H.name,projectId:qe.projectId,apiKey:qe.apiKey,appId:qe.appId,senderId:qe.messagingSenderId}}(ue);this.firebaseDependencies={app:ue,appConfig:$t,installations:qe,analyticsProvider:Qe}}_delete(){return Promise.resolve()}}function Xt(H){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(H){try{H.swRegistration=yield navigator.serviceWorker.register(ie,{scope:te}),H.swRegistration.update().catch(()=>{})}catch(ue){throw Ne.create("failed-service-worker-registration",{browserErrorMessage:ue.message})}})).apply(this,arguments)}function q(H,ue){return z.apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(H,ue){if(!ue&&!H.swRegistration&&(yield Xt(H)),ue||!H.swRegistration){if(!(ue instanceof ServiceWorkerRegistration))throw Ne.create("invalid-sw-registration");H.swRegistration=ue}})).apply(this,arguments)}function Q(H,ue){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(H,ue){ue?H.vapidKey=ue:H.vapidKey||(H.vapidKey=X)})).apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(H,ue){if(!navigator)throw Ne.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ne.create("permission-blocked");return yield Q(H,null==ue?void 0:ue.vapidKey),yield q(H,null==ue?void 0:ue.serviceWorkerRegistration),Gn(H)})).apply(this,arguments)}function ce(H,ue,qe){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(H,ue,qe){const Qe=je(ue);(yield H.firebaseDependencies.analyticsProvider.get()).logEvent(Qe,{message_id:qe[j],message_name:qe[L],message_time:qe[ne],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function je(H){switch(H){case we.NOTIFICATION_CLICKED:return"notification_open";case we.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tt(){return(tt=(0,d.Z)(function*(H,ue){const qe=ue.data;if(!qe.isFirebaseMessaging)return;H.onMessageHandler&&qe.messageType===we.PUSH_RECEIVED&&("function"==typeof H.onMessageHandler?H.onMessageHandler(Dt(qe)):H.onMessageHandler.next(Dt(qe)));const Qe=qe.data;lt(Qe)&&"1"===Qe[De]&&(yield ce(H,qe.messageType,Qe))})).apply(this,arguments)}const K="@firebase/messaging",$="0.9.4";function St(){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,d.Z)(function*(){return"undefined"!=typeof window&&(0,ye.hl)()&&(yield(0,ye.eu)())&&(0,ye.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function In(H=(0,J.getApp)()){return St().then(ue=>{if(!ue)throw Ne.create("unsupported-browser")},ue=>{throw Ne.create("indexed-db-unsupported")}),(0,J._getProvider)((0,ye.m9)(H),"messaging").getImmediate()}(0,J._registerComponent)(new F.wA("messaging",H=>{const ue=new Zt(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),H.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",qe=>function(H,ue){return tt.apply(this,arguments)}(ue,qe)),ue},"PUBLIC")),(0,J._registerComponent)(new F.wA("messaging-internal",H=>{const ue=H.getProvider("messaging").getImmediate();return{getToken:Qe=>function(H,ue){return ut.apply(this,arguments)}(ue,Qe)}},"PRIVATE")),(0,J.registerVersion)(K,$),(0,J.registerVersion)(K,$,"esm2017")},2354:(gt,Oe,O)=>{"use strict";O.d(Oe,{sN:()=>Re,Gb:()=>wn});var d=O(8239),U=O(8026),F=O(3854),le=O(3910),ye=O(5422);O(3328);const ie="@firebase/remote-config",N="remote-config",L=new F.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function Re(it=(0,U.getApp)()){return it=(0,F.m9)(it),(0,U._getProvider)(it,N).getImmediate()}class be{constructor(re,xe,ct,mt){this.client=re,this.storage=xe,this.storageCache=ct,this.logger=mt}isCachedDataFresh(re,xe){if(!xe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ct=Date.now()-xe,mt=ct<=re;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ct}. Cache max age millis (minimumFetchIntervalMillis setting): ${re}. Is cache hit: ${mt}.`),mt}fetch(re){var xe=this;return(0,d.Z)(function*(){const[ct,mt]=yield Promise.all([xe.storage.getLastSuccessfulFetchTimestampMillis(),xe.storage.getLastSuccessfulFetchResponse()]);if(mt&&xe.isCachedDataFresh(re.cacheMaxAgeMillis,ct))return mt;re.eTag=mt&&mt.eTag;const Je=yield xe.client.fetch(re),ot=[xe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Je.status&&ot.push(xe.storage.setLastSuccessfulFetchResponse(Je)),yield Promise.all(ot),Je})()}}function It(it=navigator){return it.languages&&it.languages[0]||it.language}class sn{constructor(re,xe,ct,mt,Je,ot){this.firebaseInstallations=re,this.sdkVersion=xe,this.namespace=ct,this.projectId=mt,this.apiKey=Je,this.appId=ot}fetch(re){var xe=this;return(0,d.Z)(function*(){const[ct,mt]=yield Promise.all([xe.firebaseInstallations.getId(),xe.firebaseInstallations.getToken()]),ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${xe.projectId}/namespaces/${xe.namespace}:fetch?key=${xe.apiKey}`,Ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":re.eTag||"*"},Dt={sdk_version:xe.sdkVersion,app_instance_id:ct,app_instance_id_token:mt,app_id:xe.appId,language_code:It()},Yt={method:"POST",headers:Ot,body:JSON.stringify(Dt)},Mt=fetch(ot,Yt),$e=new Promise((Xt,Wn)=>{re.signal.addEventListener(()=>{const q=new Error("The operation was aborted.");q.name="AbortError",Wn(q)})});let lt;try{yield Promise.race([Mt,$e]),lt=yield Mt}catch(Xt){let Wn="fetch-client-network";throw"AbortError"===Xt.name&&(Wn="fetch-timeout"),L.create(Wn,{originalErrorMessage:Xt.message})}let Jn=lt.status;const kr=lt.headers.get("ETag")||void 0;let Xn,Zt;if(200===lt.status){let Xt;try{Xt=yield lt.json()}catch(Wn){throw L.create("fetch-client-parse",{originalErrorMessage:Wn.message})}Xn=Xt.entries,Zt=Xt.state}if("INSTANCE_STATE_UNSPECIFIED"===Zt?Jn=500:"NO_CHANGE"===Zt?Jn=304:("NO_TEMPLATE"===Zt||"EMPTY_CONFIG"===Zt)&&(Xn={}),304!==Jn&&200!==Jn)throw L.create("fetch-status",{httpStatus:Jn});return{status:Jn,eTag:kr,config:Xn}})()}}class bt{constructor(re,xe){this.client=re,this.storage=xe}fetch(re){var xe=this;return(0,d.Z)(function*(){const ct=(yield xe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return xe.attemptFetch(re,ct)})()}attemptFetch(re,{throttleEndTimeMillis:xe,backoffCount:ct}){var mt=this;return(0,d.Z)(function*(){yield function(it,re){return new Promise((xe,ct)=>{const mt=Math.max(re-Date.now(),0),Je=setTimeout(xe,mt);it.addEventListener(()=>{clearTimeout(Je),ct(L.create("fetch-throttle",{throttleEndTimeMillis:re}))})})}(re.signal,xe);try{const Je=yield mt.client.fetch(re);return yield mt.storage.deleteThrottleMetadata(),Je}catch(Je){if(!function(it){if(!(it instanceof F.ZR&&it.customData))return!1;const re=Number(it.customData.httpStatus);return 429===re||500===re||503===re||504===re}(Je))throw Je;const ot={throttleEndTimeMillis:Date.now()+(0,F.$s)(ct),backoffCount:ct+1};return yield mt.storage.setThrottleMetadata(ot),mt.attemptFetch(re,ot)}})()}}class Nt{constructor(re,xe,ct,mt,Je){this.app=re,this._client=xe,this._storageCache=ct,this._storage=mt,this._logger=Je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vt(it,re){const xe=it.target.error||void 0;return L.create(re,{originalErrorMessage:xe&&xe.message})}const rt="app_namespace_store";class zn{constructor(re,xe,ct,mt=function(){return new Promise((it,re)=>{try{const xe=indexedDB.open("firebase_remote_config",1);xe.onerror=ct=>{re(Vt(ct,"storage-open"))},xe.onsuccess=ct=>{it(ct.target.result)},xe.onupgradeneeded=ct=>{const mt=ct.target.result;switch(ct.oldVersion){case 0:mt.createObjectStore(rt,{keyPath:"compositeKey"})}}}catch(xe){re(L.create("storage-open",{originalErrorMessage:xe}))}})}()){this.appId=re,this.appName=xe,this.namespace=ct,this.openDbPromise=mt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(re){return this.set("last_fetch_status",re)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(re){return this.set("last_successful_fetch_timestamp_millis",re)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(re){return this.set("last_successful_fetch_response",re)}getActiveConfig(){return this.get("active_config")}setActiveConfig(re){return this.set("active_config",re)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(re){return this.set("active_config_etag",re)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(re){return this.set("throttle_metadata",re)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(re){var xe=this;return(0,d.Z)(function*(){const ct=yield xe.openDbPromise;return new Promise((mt,Je)=>{const Ot=ct.transaction([rt],"readonly").objectStore(rt),Dt=xe.createCompositeKey(re);try{const Yt=Ot.get(Dt);Yt.onerror=Mt=>{Je(Vt(Mt,"storage-get"))},Yt.onsuccess=Mt=>{const $e=Mt.target.result;mt($e?$e.value:void 0)}}catch(Yt){Je(L.create("storage-get",{originalErrorMessage:Yt&&Yt.message}))}})})()}set(re,xe){var ct=this;return(0,d.Z)(function*(){const mt=yield ct.openDbPromise;return new Promise((Je,ot)=>{const Dt=mt.transaction([rt],"readwrite").objectStore(rt),Yt=ct.createCompositeKey(re);try{const Mt=Dt.put({compositeKey:Yt,value:xe});Mt.onerror=$e=>{ot(Vt($e,"storage-set"))},Mt.onsuccess=()=>{Je()}}catch(Mt){ot(L.create("storage-set",{originalErrorMessage:Mt&&Mt.message}))}})})()}delete(re){var xe=this;return(0,d.Z)(function*(){const ct=yield xe.openDbPromise;return new Promise((mt,Je)=>{const Ot=ct.transaction([rt],"readwrite").objectStore(rt),Dt=xe.createCompositeKey(re);try{const Yt=Ot.delete(Dt);Yt.onerror=Mt=>{Je(Vt(Mt,"storage-delete"))},Yt.onsuccess=()=>{mt()}}catch(Yt){Je(L.create("storage-delete",{originalErrorMessage:Yt&&Yt.message}))}})})()}createCompositeKey(re){return[this.appId,this.appName,this.namespace,re].join()}}class Un{constructor(re){this.storage=re}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var re=this;return(0,d.Z)(function*(){const xe=re.storage.getLastFetchStatus(),ct=re.storage.getLastSuccessfulFetchTimestampMillis(),mt=re.storage.getActiveConfig(),Je=yield xe;Je&&(re.lastFetchStatus=Je);const ot=yield ct;ot&&(re.lastSuccessfulFetchTimestampMillis=ot);const Ot=yield mt;Ot&&(re.activeConfig=Ot)})()}setLastFetchStatus(re){return this.lastFetchStatus=re,this.storage.setLastFetchStatus(re)}setLastSuccessfulFetchTimestampMillis(re){return this.lastSuccessfulFetchTimestampMillis=re,this.storage.setLastSuccessfulFetchTimestampMillis(re)}setActiveConfig(re){return this.activeConfig=re,this.storage.setActiveConfig(re)}}function wn(){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(){if(!(0,F.hl)())return!1;try{return yield(0,F.eu)()}catch(it){return!1}})).apply(this,arguments)}(0,U._registerComponent)(new le.wA(N,function(re,{instanceIdentifier:xe}){const ct=re.getProvider("app").getImmediate(),mt=re.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw L.create("registration-window");if(!(0,F.hl)())throw L.create("indexed-db-unavailable");const{projectId:Je,apiKey:ot,appId:Ot}=ct.options;if(!Je)throw L.create("registration-project-id");if(!ot)throw L.create("registration-api-key");if(!Ot)throw L.create("registration-app-id");const Dt=new zn(Ot,ct.name,xe=xe||"firebase"),Yt=new Un(Dt),Mt=new ye.Yd(ie);Mt.logLevel=ye.in.ERROR;const $e=new sn(mt,U.SDK_VERSION,xe,Je,ot,Ot),lt=new bt($e,Dt),Jn=new be(lt,Dt,Yt,Mt),kr=new Nt(ct,Jn,Yt,Dt,Mt);return function(it){const re=(0,F.m9)(it);re._initializePromise||(re._initializePromise=re._storageCache.loadFromStorage().then(()=>{re._isInitializationComplete=!0}))}(kr),kr},"PUBLIC").setMultipleInstances(!0)),(0,U.registerVersion)(ie,"0.3.3"),(0,U.registerVersion)(ie,"0.3.3","esm2017")},6676:function(gt,Oe){!function(O){"use strict";function d(ge){return Array.prototype.slice.call(ge)}function U(ge){return new Promise(function(oe,Re){ge.onsuccess=function(){oe(ge.result)},ge.onerror=function(){Re(ge.error)}})}function F(ge,oe,Re){var Be,Ke=new Promise(function(Lt,Pt){U(Be=ge[oe].apply(ge,Re)).then(Lt,Pt)});return Ke.request=Be,Ke}function le(ge,oe,Re){var Be=F(ge,oe,Re);return Be.then(function(Ke){if(Ke)return new N(Ke,Be.request)})}function ye(ge,oe,Re){Re.forEach(function(Be){Object.defineProperty(ge.prototype,Be,{get:function(){return this[oe][Be]},set:function(Ke){this[oe][Be]=Ke}})})}function J(ge,oe,Re,Be){Be.forEach(function(Ke){Ke in Re.prototype&&(ge.prototype[Ke]=function(){return F(this[oe],Ke,arguments)})})}function ie(ge,oe,Re,Be){Be.forEach(function(Ke){Ke in Re.prototype&&(ge.prototype[Ke]=function(){return this[oe][Ke].apply(this[oe],arguments)})})}function te(ge,oe,Re,Be){Be.forEach(function(Ke){Ke in Re.prototype&&(ge.prototype[Ke]=function(){return le(this[oe],Ke,arguments)})})}function X(ge){this._index=ge}function N(ge,oe){this._cursor=ge,this._request=oe}function j(ge){this._store=ge}function L(ge){this._tx=ge,this.complete=new Promise(function(oe,Re){ge.oncomplete=function(){oe()},ge.onerror=function(){Re(ge.error)},ge.onabort=function(){Re(ge.error)}})}function ne(ge,oe,Re){this._db=ge,this.oldVersion=oe,this.transaction=new L(Re)}function De(ge){this._db=ge}ye(X,"_index",["name","keyPath","multiEntry","unique"]),J(X,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),te(X,"_index",IDBIndex,["openCursor","openKeyCursor"]),ye(N,"_cursor",["direction","key","primaryKey","value"]),J(N,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ge){ge in IDBCursor.prototype&&(N.prototype[ge]=function(){var oe=this,Re=arguments;return Promise.resolve().then(function(){return oe._cursor[ge].apply(oe._cursor,Re),U(oe._request).then(function(Be){if(Be)return new N(Be,oe._request)})})})}),j.prototype.createIndex=function(){return new X(this._store.createIndex.apply(this._store,arguments))},j.prototype.index=function(){return new X(this._store.index.apply(this._store,arguments))},ye(j,"_store",["name","keyPath","indexNames","autoIncrement"]),J(j,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),te(j,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ie(j,"_store",IDBObjectStore,["deleteIndex"]),L.prototype.objectStore=function(){return new j(this._tx.objectStore.apply(this._tx,arguments))},ye(L,"_tx",["objectStoreNames","mode"]),ie(L,"_tx",IDBTransaction,["abort"]),ne.prototype.createObjectStore=function(){return new j(this._db.createObjectStore.apply(this._db,arguments))},ye(ne,"_db",["name","version","objectStoreNames"]),ie(ne,"_db",IDBDatabase,["deleteObjectStore","close"]),De.prototype.transaction=function(){return new L(this._db.transaction.apply(this._db,arguments))},ye(De,"_db",["name","version","objectStoreNames"]),ie(De,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ge){[j,X].forEach(function(oe){ge in oe.prototype&&(oe.prototype[ge.replace("open","iterate")]=function(){var Re=d(arguments),Be=Re[Re.length-1],Ke=this._store||this._index,Lt=Ke[ge].apply(Ke,Re.slice(0,-1));Lt.onsuccess=function(){Be(Lt.result)}})})}),[X,j].forEach(function(ge){ge.prototype.getAll||(ge.prototype.getAll=function(oe,Re){var Be=this,Ke=[];return new Promise(function(Lt){Be.iterateCursor(oe,function(Pt){Pt?(Ke.push(Pt.value),void 0===Re||Ke.length!=Re?Pt.continue():Lt(Ke)):Lt(Ke)})})})}),O.openDb=function(ge,oe,Re){var Be=F(indexedDB,"open",[ge,oe]),Ke=Be.request;return Ke&&(Ke.onupgradeneeded=function(Lt){Re&&Re(new ne(Ke.result,Lt.oldVersion,Ke.transaction))}),Be.then(function(Lt){return new De(Lt)})},O.deleteDb=function(ge){return F(indexedDB,"deleteDatabase",[ge])},Object.defineProperty(O,"__esModule",{value:!0})}(Oe)},7574:(gt,Oe,O)=>{"use strict";O.d(Oe,{y:()=>j});var d=O(7393),F=O(9181),le=O(6490),J=O(6554),ie=O(4487);var N=O(2494);let j=(()=>{class ne{constructor(Le){this._isScalar=!1,Le&&(this._subscribe=Le)}lift(Le){const we=new ne;return we.source=this,we.operator=Le,we}subscribe(Le,we,ge){const{operator:oe}=this,Re=function(ne,De,Le){if(ne){if(ne instanceof d.L)return ne;if(ne[F.b])return ne[F.b]()}return ne||De||Le?new d.L(ne,De,Le):new d.L(le.c)}(Le,we,ge);if(Re.add(oe?oe.call(Re,this.source):this.source||N.v.useDeprecatedSynchronousErrorHandling&&!Re.syncErrorThrowable?this._subscribe(Re):this._trySubscribe(Re)),N.v.useDeprecatedSynchronousErrorHandling&&Re.syncErrorThrowable&&(Re.syncErrorThrowable=!1,Re.syncErrorThrown))throw Re.syncErrorValue;return Re}_trySubscribe(Le){try{return this._subscribe(Le)}catch(we){N.v.useDeprecatedSynchronousErrorHandling&&(Le.syncErrorThrown=!0,Le.syncErrorValue=we),function(ne){for(;ne;){const{closed:De,destination:Le,isStopped:we}=ne;if(De||we)return!1;ne=Le&&Le instanceof d.L?Le:null}return!0}(Le)?Le.error(we):console.warn(we)}}forEach(Le,we){return new(we=L(we))((ge,oe)=>{let Re;Re=this.subscribe(Be=>{try{Le(Be)}catch(Ke){oe(Ke),Re&&Re.unsubscribe()}},oe,ge)})}_subscribe(Le){const{source:we}=this;return we&&we.subscribe(Le)}[J.L](){return this}pipe(...Le){return 0===Le.length?this:function(ne){return 0===ne.length?ie.y:1===ne.length?ne[0]:function(Le){return ne.reduce((we,ge)=>ge(we),Le)}}(Le)(this)}toPromise(Le){return new(Le=L(Le))((we,ge)=>{let oe;this.subscribe(Re=>oe=Re,Re=>ge(Re),()=>we(oe))})}}return ne.create=De=>new ne(De),ne})();function L(ne){if(ne||(ne=N.v.Promise||Promise),!ne)throw new Error("no Promise impl found");return ne}},6490:(gt,Oe,O)=>{"use strict";O.d(Oe,{c:()=>F});var d=O(2494),U=O(4449);const F={closed:!0,next(le){},error(le){if(d.v.useDeprecatedSynchronousErrorHandling)throw le;(0,U.z)(le)},complete(){}}},9765:(gt,Oe,O)=>{"use strict";O.d(Oe,{Yc:()=>ie,xQ:()=>te});var d=O(7574),U=O(7393),F=O(5319),le=O(7971),ye=O(8858),J=O(9181);class ie extends U.L{constructor(j){super(j),this.destination=j}}let te=(()=>{class N extends d.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[J.b](){return new ie(this)}lift(L){const ne=new X(this,this);return ne.operator=L,ne}next(L){if(this.closed)throw new le.N;if(!this.isStopped){const{observers:ne}=this,De=ne.length,Le=ne.slice();for(let we=0;we<De;we++)Le[we].next(L)}}error(L){if(this.closed)throw new le.N;this.hasError=!0,this.thrownError=L,this.isStopped=!0;const{observers:ne}=this,De=ne.length,Le=ne.slice();for(let we=0;we<De;we++)Le[we].error(L);this.observers.length=0}complete(){if(this.closed)throw new le.N;this.isStopped=!0;const{observers:L}=this,ne=L.length,De=L.slice();for(let Le=0;Le<ne;Le++)De[Le].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(L){if(this.closed)throw new le.N;return super._trySubscribe(L)}_subscribe(L){if(this.closed)throw new le.N;return this.hasError?(L.error(this.thrownError),F.w.EMPTY):this.isStopped?(L.complete(),F.w.EMPTY):(this.observers.push(L),new ye.W(this,L))}asObservable(){const L=new d.y;return L.source=this,L}}return N.create=(j,L)=>new X(j,L),N})();class X extends te{constructor(j,L){super(),this.destination=j,this.source=L}next(j){const{destination:L}=this;L&&L.next&&L.next(j)}error(j){const{destination:L}=this;L&&L.error&&this.destination.error(j)}complete(){const{destination:j}=this;j&&j.complete&&this.destination.complete()}_subscribe(j){const{source:L}=this;return L?this.source.subscribe(j):F.w.EMPTY}}},8858:(gt,Oe,O)=>{"use strict";O.d(Oe,{W:()=>U});var d=O(5319);class U extends d.w{constructor(le,ye){super(),this.subject=le,this.subscriber=ye,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const le=this.subject,ye=le.observers;if(this.subject=null,!ye||0===ye.length||le.isStopped||le.closed)return;const J=ye.indexOf(this.subscriber);-1!==J&&ye.splice(J,1)}}},7393:(gt,Oe,O)=>{"use strict";O.d(Oe,{L:()=>ie});var d=O(9105),U=O(6490),F=O(5319),le=O(9181),ye=O(2494),J=O(4449);class ie extends F.w{constructor(N,j,L){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=U.c;break;case 1:if(!N){this.destination=U.c;break}if("object"==typeof N){N instanceof ie?(this.syncErrorThrowable=N.syncErrorThrowable,this.destination=N,N.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,N));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,N,j,L)}}[le.b](){return this}static create(N,j,L){const ne=new ie(N,j,L);return ne.syncErrorThrowable=!1,ne}next(N){this.isStopped||this._next(N)}error(N){this.isStopped||(this.isStopped=!0,this._error(N))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(N){this.destination.next(N)}_error(N){this.destination.error(N),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:N}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=N,this}}class te extends ie{constructor(N,j,L,ne){super(),this._parentSubscriber=N;let De,Le=this;(0,d.m)(j)?De=j:j&&(De=j.next,L=j.error,ne=j.complete,j!==U.c&&(Le=Object.create(j),(0,d.m)(Le.unsubscribe)&&this.add(Le.unsubscribe.bind(Le)),Le.unsubscribe=this.unsubscribe.bind(this))),this._context=Le,this._next=De,this._error=L,this._complete=ne}next(N){if(!this.isStopped&&this._next){const{_parentSubscriber:j}=this;ye.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?this.__tryOrSetError(j,this._next,N)&&this.unsubscribe():this.__tryOrUnsub(this._next,N)}}error(N){if(!this.isStopped){const{_parentSubscriber:j}=this,{useDeprecatedSynchronousErrorHandling:L}=ye.v;if(this._error)L&&j.syncErrorThrowable?(this.__tryOrSetError(j,this._error,N),this.unsubscribe()):(this.__tryOrUnsub(this._error,N),this.unsubscribe());else if(j.syncErrorThrowable)L?(j.syncErrorValue=N,j.syncErrorThrown=!0):(0,J.z)(N),this.unsubscribe();else{if(this.unsubscribe(),L)throw N;(0,J.z)(N)}}}complete(){if(!this.isStopped){const{_parentSubscriber:N}=this;if(this._complete){const j=()=>this._complete.call(this._context);ye.v.useDeprecatedSynchronousErrorHandling&&N.syncErrorThrowable?(this.__tryOrSetError(N,j),this.unsubscribe()):(this.__tryOrUnsub(j),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(N,j){try{N.call(this._context,j)}catch(L){if(this.unsubscribe(),ye.v.useDeprecatedSynchronousErrorHandling)throw L;(0,J.z)(L)}}__tryOrSetError(N,j,L){if(!ye.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{j.call(this._context,L)}catch(ne){return ye.v.useDeprecatedSynchronousErrorHandling?(N.syncErrorValue=ne,N.syncErrorThrown=!0,!0):((0,J.z)(ne),!0)}return!1}_unsubscribe(){const{_parentSubscriber:N}=this;this._context=null,this._parentSubscriber=null,N.unsubscribe()}}},5319:(gt,Oe,O)=>{"use strict";O.d(Oe,{w:()=>J});var d=O(9796),U=O(1555),F=O(9105);const ye=(()=>{function te(X){return Error.call(this),this.message=X?`${X.length} errors occurred during unsubscription:\n${X.map((N,j)=>`${j+1}) ${N.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=X,this}return te.prototype=Object.create(Error.prototype),te})();class J{constructor(X){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,X&&(this._ctorUnsubscribe=!0,this._unsubscribe=X)}unsubscribe(){let X;if(this.closed)return;let{_parentOrParents:N,_ctorUnsubscribe:j,_unsubscribe:L,_subscriptions:ne}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,N instanceof J)N.remove(this);else if(null!==N)for(let De=0;De<N.length;++De)N[De].remove(this);if((0,F.m)(L)){j&&(this._unsubscribe=void 0);try{L.call(this)}catch(De){X=De instanceof ye?ie(De.errors):[De]}}if((0,d.k)(ne)){let De=-1,Le=ne.length;for(;++De<Le;){const we=ne[De];if((0,U.K)(we))try{we.unsubscribe()}catch(ge){X=X||[],ge instanceof ye?X=X.concat(ie(ge.errors)):X.push(ge)}}}if(X)throw new ye(X)}add(X){let N=X;if(!X)return J.EMPTY;switch(typeof X){case"function":N=new J(X);case"object":if(N===this||N.closed||"function"!=typeof N.unsubscribe)return N;if(this.closed)return N.unsubscribe(),N;if(!(N instanceof J)){const ne=N;N=new J,N._subscriptions=[ne]}break;default:throw new Error("unrecognized teardown "+X+" added to Subscription.")}let{_parentOrParents:j}=N;if(null===j)N._parentOrParents=this;else if(j instanceof J){if(j===this)return N;N._parentOrParents=[j,this]}else{if(-1!==j.indexOf(this))return N;j.push(this)}const L=this._subscriptions;return null===L?this._subscriptions=[N]:L.push(N),N}remove(X){const N=this._subscriptions;if(N){const j=N.indexOf(X);-1!==j&&N.splice(j,1)}}}var te;function ie(te){return te.reduce((X,N)=>X.concat(N instanceof ye?N.errors:N),[])}J.EMPTY=((te=new J).closed=!0,te)},2494:(gt,Oe,O)=>{"use strict";O.d(Oe,{v:()=>U});let d=!1;const U={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const le=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+le.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=F},get useDeprecatedSynchronousErrorHandling(){return d}}},5345:(gt,Oe,O)=>{"use strict";O.d(Oe,{IY:()=>le,Ds:()=>J,ft:()=>te});var d=O(7393),U=O(7574),F=O(7444);class le extends d.L{constructor(N){super(),this.parent=N}_next(N){this.parent.notifyNext(N)}_error(N){this.parent.notifyError(N),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class J extends d.L{notifyNext(N){this.destination.next(N)}notifyError(N){this.destination.error(N)}notifyComplete(){this.destination.complete()}}function te(X,N){if(N.closed)return;if(X instanceof U.y)return X.subscribe(N);let j;try{j=(0,F.s)(X)(N)}catch(L){N.error(L)}return j}},2441:(gt,Oe,O)=>{"use strict";O.d(Oe,{c:()=>ye,N:()=>J});var d=O(9765),U=O(7574),F=O(5319),le=O(1307);class ye extends U.y{constructor(j,L){super(),this.source=j,this.subjectFactory=L,this._refCount=0,this._isComplete=!1}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let j=this._connection;return j||(this._isComplete=!1,j=this._connection=new F.w,j.add(this.source.subscribe(new ie(this.getSubject(),this))),j.closed&&(this._connection=null,j=F.w.EMPTY)),j}refCount(){return(0,le.x)()(this)}}const J=(()=>{const N=ye.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:N._subscribe},_isComplete:{value:N._isComplete,writable:!0},getSubject:{value:N.getSubject},connect:{value:N.connect},refCount:{value:N.refCount}}})();class ie extends d.Yc{constructor(j,L){super(j),this.connectable=L}_error(j){this._unsubscribe(),super._error(j)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const j=this.connectable;if(j){this.connectable=null;const L=j._connection;j._refCount=0,j._subject=null,j._connection=null,L&&L.unsubscribe()}}}},9193:(gt,Oe,O)=>{"use strict";O.d(Oe,{E:()=>U,c:()=>F});var d=O(7574);const U=new d.y(ye=>ye.complete());function F(ye){return ye?function(ye){return new d.y(J=>ye.schedule(()=>J.complete()))}(ye):U}},4402:(gt,Oe,O)=>{"use strict";O.d(Oe,{D:()=>Le});var d=O(7574),U=O(7444),F=O(5319),le=O(6554),ie=O(4087),te=O(377),j=O(4072),L=O(9489);function Le(we,ge){return ge?function(we,ge){if(null!=we){if(function(we){return we&&"function"==typeof we[le.L]}(we))return function(we,ge){return new d.y(oe=>{const Re=new F.w;return Re.add(ge.schedule(()=>{const Be=we[le.L]();Re.add(Be.subscribe({next(Ke){Re.add(ge.schedule(()=>oe.next(Ke)))},error(Ke){Re.add(ge.schedule(()=>oe.error(Ke)))},complete(){Re.add(ge.schedule(()=>oe.complete()))}}))})),Re})}(we,ge);if((0,j.t)(we))return function(we,ge){return new d.y(oe=>{const Re=new F.w;return Re.add(ge.schedule(()=>we.then(Be=>{Re.add(ge.schedule(()=>{oe.next(Be),Re.add(ge.schedule(()=>oe.complete()))}))},Be=>{Re.add(ge.schedule(()=>oe.error(Be)))}))),Re})}(we,ge);if((0,L.z)(we))return(0,ie.r)(we,ge);if(function(we){return we&&"function"==typeof we[te.hZ]}(we)||"string"==typeof we)return function(we,ge){if(!we)throw new Error("Iterable cannot be null");return new d.y(oe=>{const Re=new F.w;let Be;return Re.add(()=>{Be&&"function"==typeof Be.return&&Be.return()}),Re.add(ge.schedule(()=>{Be=we[te.hZ](),Re.add(ge.schedule(function(){if(oe.closed)return;let Ke,Lt;try{const Pt=Be.next();Ke=Pt.value,Lt=Pt.done}catch(Pt){return void oe.error(Pt)}Lt?oe.complete():(oe.next(Ke),this.schedule())}))})),Re})}(we,ge)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,ge):we instanceof d.y?we:new d.y((0,U.s)(we))}},6693:(gt,Oe,O)=>{"use strict";O.d(Oe,{n:()=>le});var d=O(7574),U=O(5015),F=O(4087);function le(ye,J){return J?(0,F.r)(ye,J):new d.y((0,U.V)(ye))}},6682:(gt,Oe,O)=>{"use strict";O.d(Oe,{T:()=>ye});var d=O(7574),U=O(4869),F=O(3282),le=O(6693);function ye(...J){let ie=Number.POSITIVE_INFINITY,te=null,X=J[J.length-1];return(0,U.K)(X)?(te=J.pop(),J.length>1&&"number"==typeof J[J.length-1]&&(ie=J.pop())):"number"==typeof X&&(ie=J.pop()),null===te&&1===J.length&&J[0]instanceof d.y?J[0]:(0,F.J)(ie)((0,le.n)(J,te))}},5917:(gt,Oe,O)=>{"use strict";O.d(Oe,{of:()=>le});var d=O(4869),U=O(6693),F=O(4087);function le(...ye){let J=ye[ye.length-1];return(0,d.K)(J)?(ye.pop(),(0,F.r)(ye,J)):(0,U.n)(ye)}},205:(gt,Oe,O)=>{"use strict";O.d(Oe,{_:()=>U});var d=O(7574);function U(le,ye){return new d.y(ye?J=>ye.schedule(F,0,{error:le,subscriber:J}):J=>J.error(le))}function F({error:le,subscriber:ye}){ye.error(le)}},8002:(gt,Oe,O)=>{"use strict";O.d(Oe,{U:()=>U});var d=O(7393);function U(ye,J){return function(te){if("function"!=typeof ye)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new F(ye,J))}}class F{constructor(J,ie){this.project=J,this.thisArg=ie}call(J,ie){return ie.subscribe(new le(J,this.project,this.thisArg))}}class le extends d.L{constructor(J,ie,te){super(J),this.project=ie,this.count=0,this.thisArg=te||this}_next(J){let ie;try{ie=this.project.call(this.thisArg,J,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(ie)}}},3282:(gt,Oe,O)=>{"use strict";O.d(Oe,{J:()=>F});var d=O(9773),U=O(4487);function F(le=Number.POSITIVE_INFINITY){return(0,d.zg)(U.y,le)}},9773:(gt,Oe,O)=>{"use strict";O.d(Oe,{zg:()=>le});var d=O(8002),U=O(4402),F=O(5345);function le(te,X,N=Number.POSITIVE_INFINITY){return"function"==typeof X?j=>j.pipe(le((L,ne)=>(0,U.D)(te(L,ne)).pipe((0,d.U)((De,Le)=>X(L,De,ne,Le))),N)):("number"==typeof X&&(N=X),j=>j.lift(new ye(te,N)))}class ye{constructor(X,N=Number.POSITIVE_INFINITY){this.project=X,this.concurrent=N}call(X,N){return N.subscribe(new J(X,this.project,this.concurrent))}}class J extends F.Ds{constructor(X,N,j=Number.POSITIVE_INFINITY){super(X),this.project=N,this.concurrent=j,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(X){this.active<this.concurrent?this._tryNext(X):this.buffer.push(X)}_tryNext(X){let N;const j=this.index++;try{N=this.project(X,j)}catch(L){return void this.destination.error(L)}this.active++,this._innerSub(N)}_innerSub(X){const N=new F.IY(this),j=this.destination;j.add(N);const L=(0,F.ft)(X,N);L!==N&&j.add(L)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(X){this.destination.next(X)}notifyComplete(){const X=this.buffer;this.active--,X.length>0?this._next(X.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(gt,Oe,O)=>{"use strict";O.d(Oe,{ht:()=>X,QV:()=>ie});var d=O(7393),U=O(9193),F=O(5917),le=O(205);class J{constructor(L,ne,De){this.kind=L,this.value=ne,this.error=De,this.hasValue="N"===L}observe(L){switch(this.kind){case"N":return L.next&&L.next(this.value);case"E":return L.error&&L.error(this.error);case"C":return L.complete&&L.complete()}}do(L,ne,De){switch(this.kind){case"N":return L&&L(this.value);case"E":return ne&&ne(this.error);case"C":return De&&De()}}accept(L,ne,De){return L&&"function"==typeof L.next?this.observe(L):this.do(L,ne,De)}toObservable(){switch(this.kind){case"N":return(0,F.of)(this.value);case"E":return(0,le._)(this.error);case"C":return(0,U.c)()}throw new Error("unexpected notification kind value")}static createNext(L){return void 0!==L?new J("N",L):J.undefinedValueNotification}static createError(L){return new J("E",void 0,L)}static createComplete(){return J.completeNotification}}function ie(j,L=0){return function(De){return De.lift(new te(j,L))}}J.completeNotification=new J("C"),J.undefinedValueNotification=new J("N",void 0);class te{constructor(L,ne=0){this.scheduler=L,this.delay=ne}call(L,ne){return ne.subscribe(new X(L,this.scheduler,this.delay))}}class X extends d.L{constructor(L,ne,De=0){super(L),this.scheduler=ne,this.delay=De}static dispatch(L){const{notification:ne,destination:De}=L;ne.observe(De),this.unsubscribe()}scheduleMessage(L){this.destination.add(this.scheduler.schedule(X.dispatch,this.delay,new N(L,this.destination)))}_next(L){this.scheduleMessage(J.createNext(L))}_error(L){this.scheduleMessage(J.createError(L)),this.unsubscribe()}_complete(){this.scheduleMessage(J.createComplete()),this.unsubscribe()}}class N{constructor(L,ne){this.notification=L,this.destination=ne}}},1307:(gt,Oe,O)=>{"use strict";O.d(Oe,{x:()=>U});var d=O(7393);function U(){return function(J){return J.lift(new F(J))}}class F{constructor(J){this.connectable=J}call(J,ie){const{connectable:te}=this;te._refCount++;const X=new le(J,te),N=ie.subscribe(X);return X.closed||(X.connection=te.connect()),N}}class le extends d.L{constructor(J,ie){super(J),this.connectable=ie}_unsubscribe(){const{connectable:J}=this;if(!J)return void(this.connection=null);this.connectable=null;const ie=J._refCount;if(ie<=0)return void(this.connection=null);if(J._refCount=ie-1,ie>1)return void(this.connection=null);const{connection:te}=this,X=J._connection;this.connection=null,X&&(!te||X===te)&&X.unsubscribe()}}},8819:(gt,Oe,O)=>{"use strict";O.d(Oe,{B:()=>ie});var d=O(2441);var le=O(1307),ye=O(9765);function J(){return new ye.xQ}function ie(){return te=>(0,le.x)()(function(te,X){return function(j){let L;L="function"==typeof te?te:function(){return te};const ne=Object.create(j,d.N);return ne.source=j,ne.subjectFactory=L,ne}}(J)(te))}},9673:(gt,Oe,O)=>{"use strict";O.d(Oe,{R:()=>ye});var d=O(7574),U=O(4581),F=O(6561);class le extends d.y{constructor(te,X=0,N=U.e){super(),this.source=te,this.delayTime=X,this.scheduler=N,(!(0,F.k)(X)||X<0)&&(this.delayTime=0),(!N||"function"!=typeof N.schedule)&&(this.scheduler=U.e)}static create(te,X=0,N=U.e){return new le(te,X,N)}static dispatch(te){const{source:X,subscriber:N}=te;return this.add(X.subscribe(N))}_subscribe(te){return this.scheduler.schedule(le.dispatch,this.delayTime,{source:this.source,subscriber:te})}}function ye(ie,te=0){return function(N){return N.lift(new J(ie,te))}}class J{constructor(te,X){this.scheduler=te,this.delay=X}call(te,X){return new le(X,this.delay,this.scheduler).subscribe(te)}}},3342:(gt,Oe,O)=>{"use strict";O.d(Oe,{b:()=>le});var d=O(7393);function U(){}var F=O(9105);function le(ie,te,X){return function(j){return j.lift(new ye(ie,te,X))}}class ye{constructor(te,X,N){this.nextOrObserver=te,this.error=X,this.complete=N}call(te,X){return X.subscribe(new J(te,this.nextOrObserver,this.error,this.complete))}}class J extends d.L{constructor(te,X,N,j){super(te),this._tapNext=U,this._tapError=U,this._tapComplete=U,this._tapError=N||U,this._tapComplete=j||U,(0,F.m)(X)?(this._context=this,this._tapNext=X):X&&(this._context=X,this._tapNext=X.next||U,this._tapError=X.error||U,this._tapComplete=X.complete||U)}_next(te){try{this._tapNext.call(this._context,te)}catch(X){return void this.destination.error(X)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(X){return void this.destination.error(X)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(gt,Oe,O)=>{"use strict";O.d(Oe,{r:()=>F});var d=O(7574),U=O(5319);function F(le,ye){return new d.y(J=>{const ie=new U.w;let te=0;return ie.add(ye.schedule(function(){te!==le.length?(J.next(le[te++]),J.closed||ie.add(this.schedule())):J.complete()})),ie})}},6465:(gt,Oe,O)=>{"use strict";O.d(Oe,{o:()=>F});var d=O(5319);class U extends d.w{constructor(ye,J){super()}schedule(ye,J=0){return this}}class F extends U{constructor(ye,J){super(ye,J),this.scheduler=ye,this.work=J,this.pending=!1}schedule(ye,J=0){if(this.closed)return this;this.state=ye;const ie=this.id,te=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(te,ie,J)),this.pending=!0,this.delay=J,this.id=this.id||this.requestAsyncId(te,this.id,J),this}requestAsyncId(ye,J,ie=0){return setInterval(ye.flush.bind(ye,this),ie)}recycleAsyncId(ye,J,ie=0){if(null!==ie&&this.delay===ie&&!1===this.pending)return J;clearInterval(J)}execute(ye,J){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ie=this._execute(ye,J);if(ie)return ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,J){let te,ie=!1;try{this.work(ye)}catch(X){ie=!0,te=!!X&&X||new Error(X)}if(ie)return this.unsubscribe(),te}_unsubscribe(){const ye=this.id,J=this.scheduler,ie=J.actions,te=ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&ie.splice(te,1),null!=ye&&(this.id=this.recycleAsyncId(J,ye,null)),this.delay=null}}},6102:(gt,Oe,O)=>{"use strict";O.d(Oe,{v:()=>U});let d=(()=>{class F{constructor(ye,J=F.now){this.SchedulerAction=ye,this.now=J}schedule(ye,J=0,ie){return new this.SchedulerAction(this,ye).schedule(ie,J)}}return F.now=()=>Date.now(),F})();class U extends d{constructor(le,ye=d.now){super(le,()=>U.delegate&&U.delegate!==this?U.delegate.now():ye()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(le,ye=0,J){return U.delegate&&U.delegate!==this?U.delegate.schedule(le,ye,J):super.schedule(le,ye,J)}flush(le){const{actions:ye}=this;if(this.active)return void ye.push(le);let J;this.active=!0;do{if(J=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this.active=!1,J){for(;le=ye.shift();)le.unsubscribe();throw J}}}},4581:(gt,Oe,O)=>{"use strict";O.d(Oe,{e:()=>L,E:()=>j});let d=1;const U=Promise.resolve(),F={};function le(ne){return ne in F&&(delete F[ne],!0)}const ye={setImmediate(ne){const De=d++;return F[De]=!0,U.then(()=>le(De)&&ne()),De},clearImmediate(ne){le(ne)}};var ie=O(6465),X=O(6102);const j=new class extends X.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:Le}=this;let we,ge=-1,oe=Le.length;De=De||Le.shift();do{if(we=De.execute(De.state,De.delay))break}while(++ge<oe&&(De=Le.shift()));if(this.active=!1,we){for(;++ge<oe&&(De=Le.shift());)De.unsubscribe();throw we}}}(class extends ie.o{constructor(De,Le){super(De,Le),this.scheduler=De,this.work=Le}requestAsyncId(De,Le,we=0){return null!==we&&we>0?super.requestAsyncId(De,Le,we):(De.actions.push(this),De.scheduled||(De.scheduled=ye.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,Le,we=0){if(null!==we&&we>0||null===we&&this.delay>0)return super.recycleAsyncId(De,Le,we);0===De.actions.length&&(ye.clearImmediate(Le),De.scheduled=void 0)}}),L=j},3637:(gt,Oe,O)=>{"use strict";O.d(Oe,{z:()=>F,P:()=>le});var d=O(6465);const F=new(O(6102).v)(d.o),le=F},7771:(gt,Oe,O)=>{"use strict";O.d(Oe,{c:()=>J,N:()=>ye});var d=O(6465),F=O(6102);const ye=new class extends F.v{}(class extends d.o{constructor(te,X){super(te,X),this.scheduler=te,this.work=X}schedule(te,X=0){return X>0?super.schedule(te,X):(this.delay=X,this.state=te,this.scheduler.flush(this),this)}execute(te,X){return X>0||this.closed?super.execute(te,X):this._execute(te,X)}requestAsyncId(te,X,N=0){return null!==N&&N>0||null===N&&this.delay>0?super.requestAsyncId(te,X,N):te.flush(this)}}),J=ye},377:(gt,Oe,O)=>{"use strict";O.d(Oe,{hZ:()=>U});const U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(gt,Oe,O)=>{"use strict";O.d(Oe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(gt,Oe,O)=>{"use strict";O.d(Oe,{b:()=>d});const d="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(gt,Oe,O)=>{"use strict";O.d(Oe,{N:()=>U});const U=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(gt,Oe,O)=>{"use strict";function d(U){setTimeout(()=>{throw U},0)}O.d(Oe,{z:()=>d})},4487:(gt,Oe,O)=>{"use strict";function d(U){return U}O.d(Oe,{y:()=>d})},9796:(gt,Oe,O)=>{"use strict";O.d(Oe,{k:()=>d});const d=Array.isArray||(U=>U&&"number"==typeof U.length)},9489:(gt,Oe,O)=>{"use strict";O.d(Oe,{z:()=>d});const d=U=>U&&"number"==typeof U.length&&"function"!=typeof U},9105:(gt,Oe,O)=>{"use strict";function d(U){return"function"==typeof U}O.d(Oe,{m:()=>d})},6561:(gt,Oe,O)=>{"use strict";O.d(Oe,{k:()=>U});var d=O(9796);function U(F){return!(0,d.k)(F)&&F-parseFloat(F)+1>=0}},1555:(gt,Oe,O)=>{"use strict";function d(U){return null!==U&&"object"==typeof U}O.d(Oe,{K:()=>d})},4072:(gt,Oe,O)=>{"use strict";function d(U){return!!U&&"function"!=typeof U.subscribe&&"function"==typeof U.then}O.d(Oe,{t:()=>d})},4869:(gt,Oe,O)=>{"use strict";function d(U){return U&&"function"==typeof U.schedule}O.d(Oe,{K:()=>d})},7444:(gt,Oe,O)=>{"use strict";O.d(Oe,{s:()=>j});var d=O(5015),U=O(4449),le=O(377),J=O(6554),te=O(9489),X=O(4072),N=O(1555);const j=L=>{if(L&&"function"==typeof L[J.L])return(L=>ne=>{const De=L[J.L]();if("function"!=typeof De.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return De.subscribe(ne)})(L);if((0,te.z)(L))return(0,d.V)(L);if((0,X.t)(L))return(L=>ne=>(L.then(De=>{ne.closed||(ne.next(De),ne.complete())},De=>ne.error(De)).then(null,U.z),ne))(L);if(L&&"function"==typeof L[le.hZ])return(L=>ne=>{const De=L[le.hZ]();for(;;){let Le;try{Le=De.next()}catch(we){return ne.error(we),ne}if(Le.done){ne.complete();break}if(ne.next(Le.value),ne.closed)break}return"function"==typeof De.return&&ne.add(()=>{De.return&&De.return()}),ne})(L);{const De=`You provided ${(0,N.K)(L)?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(De)}}},5015:(gt,Oe,O)=>{"use strict";O.d(Oe,{V:()=>d});const d=U=>F=>{for(let le=0,ye=U.length;le<ye&&!F.closed;le++)F.next(U[le]);F.complete()}},5803:(gt,Oe,O)=>{"use strict";var d=O(7716);let U=null;function F(){return U}const ie=new d.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:X,token:n,providedIn:"platform"}),n})();function X(){return(0,d.LFG)(j)}let j=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){L()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){L()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=(0,d.Yz7)({factory:ne,token:n,providedIn:"platform"}),n})();function L(){return!!window.history.pushState}function ne(){return new j((0,d.LFG)(ie))}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const e=(0,d.LFG)(ie).location;return new Be((0,d.LFG)(te),e&&e.origin||"")}const Re=new d.OlP("appBaseHref");let Be=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+we(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+we(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(te),d.LFG(Re,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Lt=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(ve(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+we(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge),d.LFG(te))},n.normalizeQueryParams=we,n.joinWithSlash=De,n.stripTrailingSlash=Le,n.\u0275prov=(0,d.Yz7)({factory:Pt,token:n,providedIn:"root"}),n})();function Pt(){return new Lt((0,d.LFG)(ge),(0,d.LFG)(te))}function ve(n){return n.replace(/\/index.html$/,"")}var Ee=(()=>((Ee=Ee||{})[Ee.Zero=0]="Zero",Ee[Ee.One=1]="One",Ee[Ee.Two=2]="Two",Ee[Ee.Few=3]="Few",Ee[Ee.Many=4]="Many",Ee[Ee.Other=5]="Other",Ee))();const Gn=d.kL8;class er{}let Js=(()=>{class n extends er{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Gn(r||this.locale)(t)){case Ee.Zero:return"zero";case Ee.One:return"one";case Ee.Two:return"two";case Ee.Few:return"few";case Ee.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Bi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,c)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new Bi(null,this._ngForOf,-1,-1),null===c?void 0:c),g=new Bu(i,f);r.push(g)}else if(null==c)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const f=this._viewContainer.get(a);this._viewContainer.move(f,c);const g=new Bu(i,f);r.push(g)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const c=this._viewContainer.get(i);c.context.index=i,c.context.count=a,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Bu{constructor(e,t){this.record=e,this.view=t}}let ms=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Uh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ro("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ro("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Uh{constructor(){this.$implicit=null,this.ngIf=null}}function Ro(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class el{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ns=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Jr=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new el(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(ns,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})();class h0{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ls{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const fv=new Ls,Ag=new h0;let pv=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return fv;if((0,d.F4k)(t))return Ag;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,d.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1}),n})(),Us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:er,useClass:Js}]}),n})();function rl(n){return"browser"===n}function Hi(n){return"server"===n}class Ec extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ec,U||(U=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ko=ko||document.querySelector("base"),ko?ko.getAttribute("href"):null);return null==t?null:function(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Kn,ko=null;const Kh=new d.OlP("TRANSITION_ID"),Di=[{provide:d.ip1,useFactory:function(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Kh,ie,d.zs3],multi:!0}];class Gu{static init(){(0,d.VLi)(new Gu)}addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(g){c=c||g,a--,0==a&&r(c)};i.forEach(function(g){g.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let wc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sl=new d.OlP("EventManagerPlugins");let He=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sl),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class hn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Tc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),rr=(()=>{class n extends Tc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Dc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Dc))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Dc(n){F().remove(n)}const ma={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rs=/%COMP%/g;function jr(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?jr(n,i,t):(i=i.replace(rs,n),t.push(i))}return t}function zi(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _s=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ys(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Cv(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Sc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=jr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(He),d.LFG(rr),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ys{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(ma[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ma[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ma[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zi(r)):this.eventManager.addEventListener(e,t,zi(r))}}class Cv extends ys{constructor(e,t,r,i){super(e),this.component=r;const a=jr(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(rs,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(rs,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Sc extends ys{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=jr(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Xh=(()=>{class n extends hn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ac=["alt","control","meta","shift"],b0={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},E0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tf=(()=>{class n extends hn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(Ac.forEach(g=>{const b=r.indexOf(g);b>-1&&(r.splice(b,1),c+=g+".")}),c+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&gi.hasOwnProperty(e)&&(e=gi[e]))}return b0[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ac.forEach(a=>{a!=i&&E0[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Oo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:function(){return(0,d.LFG)(cl)},token:n,providedIn:"root"}),n})(),cl=(()=>{class n extends Oo{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.yhl)(r),(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=(0,d.Yz7)({factory:function(){return function(n){return new cl(n.get(ie))}((0,d.LFG)(d.gxx))},token:n,providedIn:"root"}),n})();const Rc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function(){Ec.makeCurrent(),Gu.init()},multi:!0},{provide:ie,useFactory:function(){return(0,d.RDi)(document),document},deps:[]}]),sf=[[],{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function(){return new d.qLn},deps:[]},{provide:sl,useClass:Xh,multi:!0,deps:[ie,d.R0b,d.Lbi]},{provide:sl,useClass:tf,multi:!0,deps:[ie]},[],{provide:_s,useClass:_s,deps:[He,rr,d.AFp]},{provide:d.FYo,useExisting:_s},{provide:Tc,useExisting:rr},{provide:rr,useClass:rr,deps:[ie]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:He,useClass:He,deps:[sl,d.R0b]},{provide:class{},useClass:wc,deps:[]},[]];let jg=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Kh,useExisting:d.AFp},Di]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:sf,imports:[Us,d.hGG]}),n})();function td(){return new af((0,d.LFG)(ie))}let af=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=(0,d.Yz7)({factory:td,token:n,providedIn:"root"}),n})();function An(n){return null!=n&&"false"!=`${n}`}function Gi(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function lf(n){return Array.isArray(n)?n:[n]}function ir(n){return null==n?"":"string"==typeof n?n:`${n}px`}function nr(n){return n instanceof d.SBq?n.nativeElement:n}"undefined"!=typeof window&&window;var At=O(9765),wt=O(5917),Yn=O(7574),Ea=O(9796),Mc=O(9105),Bt=O(8002);function dl(n,e,t,r){return(0,Mc.m)(t)&&(r=t,t=void 0),r?dl(n,e,t).pipe((0,Bt.U)(i=>(0,Ea.k)(i)?r(...i):r(i))):new Yn.y(i=>{Fo(n,e,function(c){i.next(arguments.length>1?Array.prototype.slice.call(arguments):c)},i,t)})}function Fo(n,e,t,r,i){let a;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const c=n;n.addEventListener(e,t,i),a=()=>c.removeEventListener(e,t,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const c=n;n.on(e,t),a=()=>c.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const c=n;n.addListener(e,t),a=()=>c.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let c=0,f=n.length;c<f;c++)Fo(n[c],e,t,r,i)}r.add(a)}var io=O(6465),fl=O(6102);const pl=new class extends fl.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let r,i=-1,a=t.length;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<a&&(e=t.shift()));if(this.active=!1,r){for(;++i<a&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends io.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});O(4581);var li=O(5319),mi=O(7393);function kc(n,e){return t=>t.lift(new ur(n,e))}class ur{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ov(e,this.compare,this.keySelector))}}class Ov extends mi.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var wa=O(3637),Wi=O(5345);class Wg{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new D0(e,this.durationSelector))}}class D0 extends Wi.Ds{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let t;try{const{durationSelector:i}=this;t=i(e)}catch(i){return this.destination.error(i)}const r=(0,Wi.ft)(t,new Wi.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:e,hasValue:t,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var ad=O(6561),ff=O(4869);function pf(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}function Oc(n,e=wa.P){return function(n){return function(t){return t.lift(new Wg(n))}}(()=>function(n=0,e,t){let r=-1;return(0,ad.k)(e)?r=Number(e)<1?1:Number(e):(0,ff.K)(e)&&(t=e),(0,ff.K)(t)||(t=wa.P),new Yn.y(i=>{const a=(0,ad.k)(n)?n:+n-t.now();return t.schedule(pf,a,{index:0,period:r,subscriber:i})})}(n,e))}function Er(n,e){return function(r){return r.lift(new Kg(n,e))}}class Kg{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Or(e,this.predicate,this.thisArg))}}class Or extends mi.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function dr(n){return e=>e.lift(new ml(n))}class ml{constructor(e){this.notifier=e}call(e,t){const r=new S0(e),i=(0,Wi.ft)(this.notifier,new Wi.IY(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class S0 extends Wi.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var ld=O(3282);function Ai(...n){return(0,ld.J)(1)((0,wt.of)(...n))}function Hr(...n){const e=n[n.length-1];return(0,ff.K)(e)?(n.pop(),t=>Ai(n,t,e)):t=>Ai(n,t)}function vs(){return n=>n.lift(new Lo)}class Lo{call(e,t){return t.subscribe(new cd(e))}}class cd extends mi.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var hr=O(4402);function fr(n,e){return"function"==typeof e?t=>t.pipe(fr((r,i)=>(0,hr.D)(n(r,i)).pipe((0,Bt.U)((a,c)=>e(r,a,i,c))))):t=>t.lift(new A0(n))}class A0{constructor(e){this.project=e}call(e,t){return t.subscribe(new Yg(e,this.project))}}class Yg extends Wi.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Wi.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Wi.ft)(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var ud=O(7771),Xr=O(6136),Ca=O(7971),_l=O(8858);class R0 extends At.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new dd(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;let c;if(this.closed)throw new Ca.N;if(this.isStopped||this.hasError?c=li.w.EMPTY:(this.observers.push(e),c=new _l.W(this,e)),i&&e.add(e=new Xr.ht(e,i)),t)for(let f=0;f<a&&!e.closed;f++)e.next(r[f]);else for(let f=0;f<a&&!e.closed;f++)e.next(r[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||ud.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,a=i.length;let c=0;for(;c<a&&!(e-i[c].time<r);)c++;return a>t&&(c=Math.max(c,a-t)),c>0&&i.splice(0,c),i}}class dd{constructor(e,t){this.time=e,this.value=t}}function Pc(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,c,a=0,f=!1,g=!1;return function(C){let D;a++,!i||f?(f=!1,i=new R0(n,e,r),D=i.subscribe(this),c=C.subscribe({next(R){i.next(R)},error(R){f=!0,i.error(R)},complete(){g=!0,c=void 0,i.complete()}}),g&&(c=void 0)):D=i.subscribe(this),this.add(()=>{a--,D.unsubscribe(),D=void 0,c&&!g&&t&&0===a&&(c.unsubscribe(),c=void 0,i=void 0)})}}(r))}let mf;try{mf="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){mf=!1}let Bs,Vn=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?rl(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!mf)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(d.Lbi))},token:n,providedIn:"root"}),n})(),yl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const hd=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Ia(){if(Bs)return Bs;if("object"!=typeof document||!document)return Bs=new Set(hd),Bs;let n=document.createElement("input");return Bs=new Set(hd.filter(e=>(n.setAttribute("type",e),n.type===e))),Bs}let fd,Ta,Da;function bs(n){return function(){if(null==fd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fd=!0}))}finally{fd=fd||!1}return fd}()?n:!!n.capture}function pd(){if(null==Ta){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ta=!1,Ta;if("scrollBehavior"in document.documentElement.style)Ta=!0;else{const n=Element.prototype.scrollTo;Ta=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ta}function Sa(n){if(function(){if(null==Da){const n="undefined"!=typeof document?document.head:null;Da=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Da}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function oo(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Pr(n){return n.composedPath?n.composedPath()[0]:n.target}function _f(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const sr=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,d.f3M)(ie)}});let Es=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null,a=(t.body?t.body.dir:null)||i;this.value="ltr"===a||"rtl"===a?a:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sr,8))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(sr,8))},token:n,providedIn:"root"}),n})(),js=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),ao=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new At.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Yn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(Oc(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,wt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Er(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=nr(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>dl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Vn),d.LFG(ie,8))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(d.R0b),d.LFG(Vn),d.LFG(ie,8))},token:n,providedIn:"root"}),n})(),jo=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new At.xQ,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Oc(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vn),d.LFG(d.R0b),d.LFG(ie,8))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Vn),d.LFG(d.R0b),d.LFG(ie,8))},token:n,providedIn:"root"}),n})(),El=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),gd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[js,yl,El],js,El]}),n})();class $r extends At.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ca.N;return this._value}next(e){super.next(this._value=e)}}const yd=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var zo=O(9193);function Cs(n){return e=>0===n?(0,zo.c)():e.lift(new Wv(n))}class Wv{constructor(e){if(this.total=e,this.total<0)throw new yd}call(e,t){return t.subscribe(new qv(e,this.total))}}class qv extends mi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}class TU{constructor(e){this.total=e}call(e,t){return t.subscribe(new vd(e,this.total))}}class vd extends mi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}class z0{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new jM(e,this.dueTime,this.scheduler))}}class jM extends mi.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Yv,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Yv(n){n.debouncedNext()}let Zv=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),G0=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=nr(t);return new Yn.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new At.xQ,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zv))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Zv))},token:n,providedIn:"root"}),n})(),HM=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=An(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Gi(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(n,e=wa.P){return t=>t.lift(new z0(n,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(G0),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Zv]}),n})(),Xv=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===mm(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),a=mm(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==a:"video"===i?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||nb(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vn))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Vn))},token:n,providedIn:"root"}),n})();function nb(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function mm(n){if(!nb(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class JM{constructor(e,t,r,i,a=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Cs(1)).subscribe(e)}}let J0=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new JM(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xv),d.LFG(d.R0b),d.LFG(ie))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Xv),d.LFG(d.R0b),d.LFG(ie))},token:n,providedIn:"root"}),n})();function rb(n){return 0===n.offsetX&&0===n.offsetY}function _m(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const nI=new d.OlP("cdk-input-modality-detector-options"),nx={ignoreKeys:[18,17,224,91,16]},Ed=bs({passive:!0,capture:!0});let ib=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new $r(null),this._lastTouchMs=0,this._onKeydown=c=>{var f,g;(null===(g=null===(f=this._options)||void 0===f?void 0:f.ignoreKeys)||void 0===g?void 0:g.some(b=>b===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Pr(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(rb(c)?"keyboard":"mouse"),this._mostRecentTarget=Pr(c))},this._onTouchstart=c=>{_m(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Pr(c))},this._options=Object.assign(Object.assign({},nx),a),this.modalityDetected=this._modality.pipe(e=>e.lift(new TU(1))),this.modalityChanged=this.modalityDetected.pipe(kc()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Ed),i.addEventListener("mousedown",this._onMousedown,Ed),i.addEventListener("touchstart",this._onTouchstart,Ed)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ed),document.removeEventListener("mousedown",this._onMousedown,Ed),document.removeEventListener("touchstart",this._onTouchstart,Ed))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vn),d.LFG(d.R0b),d.LFG(ie),d.LFG(nI,8))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Vn),d.LFG(d.R0b),d.LFG(ie),d.LFG(nI,8))},token:n,providedIn:"root"}),n})();const sb=new d.OlP("cdk-focus-monitor-default-options"),jc=bs({passive:!0,capture:!0});let os=(()=>{class n{constructor(t,r,i,a,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new At.xQ,this._rootNodeFocusAndBlurListener=f=>{const g=Pr(f),b="focus"===f.type?this._onFocus:this._onBlur;for(let C=g;C;C=C.parentElement)b.call(this,f,C)},this._document=a,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(t,r=!1){const i=nr(t);if(!this._platform.isBrowser||1!==i.nodeType)return(0,wt.of)(null);const a=Sa(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const f={checkChildren:r,subject:new At.xQ,rootNode:a};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=nr(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=nr(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([f,g])=>this._originChanged(f,r,g)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,r,i){i?t.classList.add(r):t.classList.remove(r)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){this._toggleClass(t,"cdk-focused",!!r),this._toggleClass(t,"cdk-touch-focused","touch"===r),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(t,"cdk-mouse-focused","mouse"===r),this._toggleClass(t,"cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=Pr(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,jc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,jc)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dr(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Vn),d.LFG(ib),d.LFG(ie,8),d.LFG(sb,8))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(d.R0b),d.LFG(Vn),d.LFG(ib),d.LFG(ie,8),d.LFG(sb,8))},token:n,providedIn:"root"}),n})();const oI="cdk-high-contrast-black-on-white",ym="cdk-high-contrast-white-on-black",co="cdk-high-contrast-active";let vm=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(co),t.remove(oI),t.remove(ym),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(co),t.add(oI)):2===r&&(t.add(co),t.add(ym))}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vn),d.LFG(ie))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Vn),d.LFG(ie))},token:n,providedIn:"root"}),n})();function OU(n){const{subscriber:e,counter:t,period:r}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}var wd=O(6682),Ri=O(3342);function uo(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,(null==t?void 0:t.has(r))?"important":""):n.removeProperty(r)}return n}function ka(n,e){const t=e?"":"none";uo(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Rf(n,e,t){uo(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function Cd(n,e){return e&&"none"!=e?n+" "+e:n}function ax(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function bm(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function aI(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function ab(n,e,t){const{top:r,bottom:i,left:a,right:c}=n;return t>=r&&t<=i&&e>=a&&e<=c}function Em(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function lb(n,e,t,r){const{top:i,right:a,bottom:c,left:f,width:g,height:b}=n,C=g*e,D=b*e;return r>i-D&&r<c+D&&t>f-C&&t<a+C}class cb{constructor(e,t){this._document=e,this._viewportRuler=t,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:aI(t)})})}handleScroll(e){const t=Pr(e),r=this.positions.get(t);if(!r)return null;const i=t===this._document?t.documentElement:t,a=r.scrollPosition;let c,f;if(t===this._document){const C=this._viewportRuler.getViewportScrollPosition();c=C.top,f=C.left}else c=t.scrollTop,f=t.scrollLeft;const g=a.top-c,b=a.left-f;return this.positions.forEach((C,D)=>{C.clientRect&&t!==D&&i.contains(D)&&Em(C.clientRect,g,b)}),a.top=c,a.left=f,{top:g,left:b}}}function lI(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?ux(n,e):("input"===r||"select"===r||"textarea"===r)&&cx(n,e),wm("canvas",n,e,ux),wm("input, textarea, select",n,e,cx),e}function wm(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const a=t.querySelectorAll(n);for(let c=0;c<i.length;c++)r(i[c],a[c])}}let PU=0;function cx(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${PU++}`)}function ux(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch(r){}}const dx=bs({passive:!0}),hx=bs({passive:!1}),cI=new Set(["position"]);class FU{constructor(e,t,r,i,a,c){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=a,this._dragDropRegistry=c,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new At.xQ,this._pointerMoveSubscription=li.w.EMPTY,this._pointerUpSubscription=li.w.EMPTY,this._scrollSubscription=li.w.EMPTY,this._resizeSubscription=li.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new At.xQ,this.started=new At.xQ,this.released=new At.xQ,this.ended=new At.xQ,this.entered=new At.xQ,this.exited=new At.xQ,this.dropped=new At.xQ,this.moved=this._moveEvents,this._pointerDown=f=>{if(this.beforeStarted.next(),this._handles.length){const g=this._handles.find(b=>{const C=Pr(f);return!!C&&(C===b||b.contains(C))});g&&!this._disabledHandles.has(g)&&!this.disabled&&this._initializeDragSequence(g,f)}else this.disabled||this._initializeDragSequence(this._rootElement,f)},this._pointerMove=f=>{const g=this._getPointerPositionOnPage(f);if(!this._hasStartedDragging){if(Math.abs(g.x-this._pickupPositionOnPage.x)+Math.abs(g.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const x=Date.now()>=this._dragStartTime+this._getDragStartDelay(f),B=this._dropContainer;if(!x)return void this._endDragSequence(f);(!B||!B.isDragging()&&!B.isReceiving())&&(f.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(f)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),f.preventDefault();const b=this._getConstrainedPointerPosition(g);if(this._hasMoved=!0,this._lastKnownPointerPosition=g,this._updatePointerDirectionDelta(b),this._dropContainer)this._updateActiveDropContainer(b,g);else{const C=this._activeTransform;C.x=b.x-this._pickupPositionOnPage.x+this._passiveTransform.x,C.y=b.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(C.x,C.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${C.x} ${C.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:b,event:f,distance:this._getDragDistance(b),delta:this._pointerDirectionDelta})})},this._pointerUp=f=>{this._endDragSequence(f)},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new cb(r,a),c.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=An(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>ka(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>nr(r)),this._handles.forEach(r=>ka(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=nr(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,hx),t.addEventListener("touchstart",this._pointerDown,dx)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?nr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&db(this._rootElement),db(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),ka(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),ka(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&db(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&db(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Hs(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,a=this._placeholder=this._createPlaceholderElement(),c=this._anchor=this._anchor||this._document.createComment(""),f=this._getShadowRoot();i.insertBefore(c,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),Rf(r,!1,cI),this._document.body.appendChild(i.replaceChild(a,r)),this._getPreviewInsertionPoint(i,f).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=Hs(t),a=!i&&0!==t.button,c=this._rootElement,f=Pr(t),g=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),b=i?_m(t):rb(t);if(f&&f.draggable&&"mousedown"===t.type&&t.preventDefault(),r||a||g||b)return;this._handles.length&&(this._rootElementTapHighlight=c.style.webkitTapHighlightColor||"",c.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(R=>this._updateOnScroll(R)),this._boundaryElement&&(this._boundaryRect=aI(this._boundaryElement));const C=this._previewTemplate;this._pickupPositionInElement=C&&C.template&&!C.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const D=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:D.x,y:D.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Rf(this._rootElement,!0,cI),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),a=this._getDragDistance(i),c=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:a,dropPoint:i}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:a,dropPoint:i}),t.drop(this,r,this._initialIndex,this._initialContainer,c,a,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let a=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=a,this._dropContainer.enter(this,e,t,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const a=e.matchSize?this._rootElement.getBoundingClientRect():null,c=e.viewContainer.createEmbeddedView(r,e.context);c.detectChanges(),i=Cm(c,this._document),this._previewRef=c,e.matchSize?uI(i,a):i.style.transform=ub(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const a=this._rootElement;i=lI(a),uI(i,a.getBoundingClientRect()),this._initialTransform&&(i.style.transform=this._initialTransform)}return uo(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},cI),ka(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(a=>i.classList.add(a)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function(n){const e=getComputedStyle(n),t=bm(e,"transition-property"),r=t.find(f=>"transform"===f||"all"===f);if(!r)return 0;const i=t.indexOf(r),a=bm(e,"transition-duration"),c=bm(e,"transition-delay");return ax(a[i])+ax(c[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=c=>{var f;(!c||Pr(c)===this._preview&&"transform"===c.propertyName)&&(null===(f=this._preview)||void 0===f||f.removeEventListener("transitionend",i),r(),clearTimeout(a))},a=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=Cm(this._placeholderRef,this._document)):r=lI(this._rootElement),r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t){const r=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,a=i?i.getBoundingClientRect():r,c=Hs(t)?t.targetTouches[0]:t,f=this._getViewportScrollPosition();return{x:a.left-r.left+(c.pageX-a.left-f.left),y:a.top-r.top+(c.pageY-a.top-f.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=Hs(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,a=r.pageY-t.top;if(this._ownerSVGElement){const c=this._ownerSVGElement.getScreenCTM();if(c){const f=this._ownerSVGElement.createSVGPoint();return f.x=i,f.y=a,f.matrixTransform(c.inverse())}}return{x:i,y:a}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:a,y:c}=this._pickupPositionInElement,f=this._boundaryRect,g=this._previewRect,b=f.top+c,C=f.bottom-(g.height-c);r=fx(r,f.left+a,f.right-(g.width-a)),i=fx(i,b,C)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,c=Math.abs(t-a.x),f=Math.abs(r-a.y);return c>this._config.pointerDirectionChangeThreshold&&(i.x=t>a.x?1:-1,a.x=t),f>this._config.pointerDirectionChangeThreshold&&(i.y=r>a.y?1:-1,a.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,ka(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,hx),e.removeEventListener("touchstart",this._pointerDown,dx)}_applyRootElementTransform(e,t){const r=ub(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform&&"none"!=this._rootElement.style.transform?this._rootElement.style.transform:""),this._rootElement.style.transform=Cd(r,this._initialTransform)}_applyPreviewTransform(e,t){var r;const i=(null===(r=this._previewTemplate)||void 0===r?void 0:r.template)?void 0:this._initialTransform,a=ub(e,t);this._preview.style.transform=Cd(a,i)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===i.width&&0===i.height)return;const a=r.left-i.left,c=i.right-r.right,f=r.top-i.top,g=i.bottom-r.bottom;r.width>i.width?(a>0&&(e+=a),c>0&&(e-=c)):e=0,r.height>i.height?(f>0&&(t+=f),g>0&&(t-=g)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:Hs(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=Pr(e);this._boundaryRect&&(r===this._document||r!==this._boundaryElement&&r.contains(this._boundaryElement))&&Em(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Sa(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return nr(r)}}function ub(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function fx(n,e,t){return Math.max(e,Math.min(t,n))}function db(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Hs(n){return"t"===n.type[0]}function Cm(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function uI(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=ub(e.left,e.top)}function Hc(n,e){return Math.max(0,Math.min(e,n))}class fI{constructor(e,t,r,i,a){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=a,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new At.xQ,this.entered=new At.xQ,this.exited=new At.xQ,this.dropped=new At.xQ,this.sorted=new At.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=li.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new At.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(n=0,e=wa.P){return(!(0,ad.k)(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=wa.P),new Yn.y(t=>(t.add(e.schedule(OU,n,{subscriber:t,counter:0,period:n})),t))}(0,pl).pipe(dr(this._stopScrollTimers)).subscribe(()=>{const c=this._scrollNode,f=this.autoScrollStep;1===this._verticalScrollDirection?gx(c,-f):2===this._verticalScrollDirection&&gx(c,f),1===this._horizontalScrollDirection?Im(c,-f):2===this._horizontalScrollDirection&&Im(c,f)})},this.element=nr(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new cb(r,a)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){let a;this._draggingStarted(),null==i?(a=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===a&&(a=this._getItemIndexFromPointerPosition(e,t,r))):a=i;const c=this._activeDraggables,f=c.indexOf(e),g=e.getPlaceholderElement();let b=c[a];if(b===e&&(b=c[a+1]),f>-1&&c.splice(f,1),b&&!this._dragDropRegistry.isDragging(b)){const C=b.getRootElement();C.parentElement.insertBefore(g,C),c.splice(a,0,e)}else if(this._shouldEnterAsFirstChild(t,r)){const C=c[0].getRootElement();C.parentNode.insertBefore(g,C),c.unshift(e)}else nr(this.element).appendChild(g),c.push(e);g.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,a,c,f){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:a,distance:c,dropPoint:f})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=nr(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?fb("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,r=>r.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!lb(this._clientRect,.05,t,r))return;const a=this._itemPositions,c=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===c&&a.length>0)return;const f="horizontal"===this._orientation,g=fb(a,me=>me.drag===e),b=a[c],D=b.clientRect,R=g>c?1:-1,x=this._getItemOffsetPx(a[g].clientRect,D,R),B=this._getSiblingOffsetPx(g,a,R),ae=a.slice();(function(n,e,t){const r=Hc(e,n.length-1),i=Hc(t,n.length-1);if(r===i)return;const a=n[r],c=i<r?-1:1;for(let f=r;f!==i;f+=c)n[f]=n[f+c];n[i]=a})(a,g,c),this.sorted.next({previousIndex:g,currentIndex:c,container:this,item:e}),a.forEach((me,et)=>{if(ae[et]===me)return;const pt=me.drag===e,vt=pt?x:B,ht=pt?e.getPlaceholderElement():me.drag.getRootElement();me.offset+=vt,f?(ht.style.transform=Cd(`translate3d(${Math.round(me.offset)}px, 0, 0)`,me.initialTransform),Em(me.clientRect,0,vt)):(ht.style.transform=Cd(`translate3d(0, ${Math.round(me.offset)}px, 0)`,me.initialTransform),Em(me.clientRect,vt,0))}),this._previousSwap.overlaps=ab(D,t,r),this._previousSwap.drag=b.drag,this._previousSwap.delta=f?i.x:i.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,a=0;if(this._parentPositions.positions.forEach((c,f)=>{f===this._document||!c.clientRect||r||lb(c.clientRect,.05,e,t)&&([i,a]=function(n,e,t,r){const i=pI(e,r),a=pb(e,t);let c=0,f=0;if(i){const g=n.scrollTop;1===i?g>0&&(c=1):n.scrollHeight-g>n.clientHeight&&(c=2)}if(a){const g=n.scrollLeft;1===a?g>0&&(f=1):n.scrollWidth-g>n.clientWidth&&(f=2)}return[c,f]}(f,c.clientRect,e,t),(i||a)&&(r=f))}),!i&&!a){const{width:c,height:f}=this._viewportRuler.getViewportSize(),g={width:c,height:f,top:0,right:c,bottom:f,left:0};i=pI(g,t),a=pb(g,e),r=window}r&&(i!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=a,this._scrollNode=r,(i||a)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=nr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=nr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:aI(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_reset(){this._isDragging=!1;const e=nr(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var r;const i=t.getRootElement();if(i){const a=null===(r=this._itemPositions.find(c=>c.drag===t))||void 0===r?void 0:r.initialTransform;i.style.transform=a||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this._orientation,a=t[e].clientRect,c=t[e+-1*r];let f=a[i?"width":"height"]*r;if(c){const g=i?"left":"top",b=i?"right":"bottom";-1===r?f-=c.clientRect[g]-a[b]:f+=a[g]-c.clientRect[b]}return f}_getItemOffsetPx(e,t,r){const i="horizontal"===this._orientation;let a=i?t.left-e.left:t.top-e.top;return-1===r&&(a+=i?t.width-e.width:t.height-e.height),a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this._orientation;if(r[0].drag!==this._activeDraggables[0]){const c=r[r.length-1].clientRect;return i?e>=c.right:t>=c.bottom}{const c=r[0].clientRect;return i?e<=c.left:t<=c.top}}_getItemIndexFromPointerPosition(e,t,r,i){const a="horizontal"===this._orientation,c=fb(this._itemPositions,({drag:f,clientRect:g},b,C)=>{if(f===e)return C.length<2;if(i){const D=a?i.x:i.y;if(f===this._previousSwap.drag&&this._previousSwap.overlaps&&D===this._previousSwap.delta)return!1}return a?t>=Math.floor(g.left)&&t<Math.floor(g.right):r>=Math.floor(g.top)&&r<Math.floor(g.bottom)});return-1!==c&&this.sortPredicate(c,e,this)?c:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&ab(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!ab(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const a=nr(this.element);return i===a||a.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:r})=>{Em(r,t.top,t.left)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=Sa(nr(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function fb(n,e){for(let t=0;t<n.length;t++)if(e(n[t],t,n))return t;return-1}function gx(n,e){n===window?n.scrollBy(0,e):n.scrollTop+=e}function Im(n,e){n===window?n.scrollBy(e,0):n.scrollLeft+=e}function pI(n,e){const{top:t,bottom:r,height:i}=n,a=.05*i;return e>=t-a&&e<=t+a?1:e>=r-a&&e<=r+a?2:0}function pb(n,e){const{left:t,right:r,width:i}=n,a=.05*i;return e>=t-a&&e<=t+a?1:e>=r-a&&e<=r+a?2:0}const Tm=bs({passive:!1,capture:!0});let Id=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new At.xQ,this.pointerUp=new At.xQ,this.scroll=new At.xQ,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Tm)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Tm)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:a=>this.pointerUp.next(a),options:!0}).set("scroll",{handler:a=>this.scroll.next(a),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Tm}),i||this._globalListeners.set("mousemove",{handler:a=>this.pointerMove.next(a),options:Tm}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((a,c)=>{this._document.addEventListener(c,a.handler,a.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new Yn.y(i=>this._ngZone.runOutsideAngular(()=>{const c=f=>{this._activeDragInstances.length&&i.next(f)};return t.addEventListener("scroll",c,!0),()=>{t.removeEventListener("scroll",c,!0)}}))),(0,wd.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(ie))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(d.R0b),d.LFG(ie))},token:n,providedIn:"root"}),n})();const Td={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Mf=(()=>{class n{constructor(t,r,i,a){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=a}createDrag(t,r=Td){return new FU(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new fI(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG(d.R0b),d.LFG(jo),d.LFG(Id))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(ie),d.LFG(d.R0b),d.LFG(jo),d.LFG(Id))},token:n,providedIn:"root"}),n})();const Cl=new d.OlP("CDK_DRAG_PARENT"),$c=new d.OlP("CdkDropListGroup"),gI=new d.OlP("CDK_DRAG_CONFIG");let mI=0;const Dm=new d.OlP("CdkDropList");let _I=(()=>{class n{constructor(t,r,i,a,c,f,g){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=a,this._dir=c,this._group=f,this._destroyed=new At.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+mI++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new d.vpe,this.entered=new d.vpe,this.exited=new d.vpe,this.sorted=new d.vpe,this._unsortedItems=new Set,this._dropListRef=r.createDropList(t),this._dropListRef.data=this,g&&this._assignDefaults(g),this._dropListRef.enterPredicate=(b,C)=>this.enterPredicate(b.data,C.data),this._dropListRef.sortPredicate=(b,C,D)=>this.sortPredicate(b,C.data,D.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),f&&f._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=An(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(Hr(this._dir.value),dr(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{const r=lf(this.connectedTo).map(i=>"string"==typeof i?n._dropLists.find(c=>c.id===i):i);if(this._group&&this._group._items.forEach(i=>{-1===r.indexOf(i)&&r.push(i)}),!this._scrollableParentsResolved){const i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=An(this.sortingDisabled),t.autoScrollDisabled=An(this.autoScrollDisabled),t.autoScrollStep=Gi(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:r,draggingDisabled:i,sortingDisabled:a,listAutoScrollDisabled:c,listOrientation:f}=t;this.disabled=null!=i&&i,this.sortingDisabled=null!=a&&a,this.autoScrollDisabled=null!=c&&c,this.orientation=f||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Mf),d.Y36(d.sBO),d.Y36(ao),d.Y36(Es,8),d.Y36($c,12),d.Y36(gI,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("id",r.id),d.ekj("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[d._Bn([{provide:$c,useValue:void 0},{provide:Dm,useExisting:n}])]}),n._dropLists=[],n})();const Dd=new d.OlP("CdkDragHandle"),mb=new d.OlP("CdkDragPlaceholder"),_b=new d.OlP("CdkDragPreview");let yI=(()=>{class n{constructor(t,r,i,a,c,f,g,b,C,D,R){this.element=t,this.dropContainer=r,this._ngZone=a,this._viewContainerRef=c,this._dir=g,this._changeDetectorRef=C,this._selfHandle=D,this._parentDrag=R,this._destroyed=new At.xQ,this.started=new d.vpe,this.released=new d.vpe,this.ended=new d.vpe,this.entered=new d.vpe,this.exited=new d.vpe,this.dropped=new d.vpe,this.moved=new Yn.y(x=>{const B=this._dragRef.moved.pipe((0,Bt.U)(ae=>({source:this,pointerPosition:ae.pointerPosition,event:ae.event,delta:ae.delta,distance:ae.distance}))).subscribe(x);return()=>{B.unsubscribe()}}),this._dragRef=b.createDrag(t,{dragStartThreshold:f&&null!=f.dragStartThreshold?f.dragStartThreshold:5,pointerDirectionChangeThreshold:f&&null!=f.pointerDirectionChangeThreshold?f.pointerDirectionChangeThreshold:5,zIndex:null==f?void 0:f.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),f&&this._assignDefaults(f),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=An(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Cs(1),dr(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement,r=this.rootElementSelector?vI(t,this.rootElementSelector):t;this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?vI(this.element.nativeElement,t):nr(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Gi(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Cs(1)).subscribe(()=>{var r,i;if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let a=this.element.nativeElement.parentElement;for(;a;){if(null===(r=a.classList)||void 0===r?void 0:r.contains("cdk-drag")){t.withParent((null===(i=n._dragInstances.find(c=>c.element.nativeElement===a))||void 0===i?void 0:i._dragRef)||null);break}a=a.parentElement}})}_handleEvents(t){t.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=>{this.released.emit({source:this})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:a,previewClass:c,boundaryElement:f,draggingDisabled:g,rootElementSelector:b,previewContainer:C}=t;this.disabled=null!=g&&g,this.dragStartDelay=i||0,r&&(this.lockAxis=r),a&&(this.constrainPosition=a),c&&(this.previewClass=c),f&&(this.boundaryElement=f),b&&(this.rootElementSelector=b),C&&(this.previewContainer=C)}_setupHandlesListener(){this._handles.changes.pipe(Hr(this._handles),(0,Ri.b)(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),fr(t=>(0,wd.T)(...t.map(r=>r._stateChanges.pipe(Hr(r))))),dr(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Dm,12),d.Y36(ie),d.Y36(d.R0b),d.Y36(d.s_b),d.Y36(gI,8),d.Y36(Es,8),d.Y36(Mf),d.Y36(d.sBO),d.Y36(Dd,10),d.Y36(Cl,12))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,_b,5),d.Suo(i,mb,5),d.Suo(i,Dd,5)),2&t){let a;d.iGM(a=d.CRH())&&(r._previewTemplate=a.first),d.iGM(a=d.CRH())&&(r._placeholderTemplate=a.first),d.iGM(a=d.CRH())&&(r._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],previewContainer:["cdkDragPreviewContainer","previewContainer"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[d._Bn([{provide:Cl,useExisting:n}]),d.TTD]}),n._dragInstances=[],n})();function vI(n,e){let t=n.parentElement;for(;t;){if(t.matches?t.matches(e):t.msMatchesSelector(e))return t;t=t.parentElement}return null}let bx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Mf],imports:[El]}),n})();class bI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class yb extends bI{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class Sd extends bI{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class EI extends bI{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}class vb{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof yb?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Sd?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof EI?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class wx extends vb{constructor(e,t,r,i,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const f=c.element,g=this._document.createComment("dom-portal");f.parentNode.insertBefore(g,f),this.outletElement.appendChild(f),this._attachedPortal=c,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(f,g)})},this._document=a}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Sm=(()=>{class n extends vb{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=a=>{const c=a.element,f=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(f,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(c,f)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(a,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(ie))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),n})(),bb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const CI=pd();class Sx{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ir(-this._previousScrollPosition.left),e.style.top=ir(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,a=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),CI&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),CI&&(r.scrollBehavior=a,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class II{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class TI{enable(){}disable(){}attach(){}}function wb(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function DI(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Cb{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();wb(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ax=(()=>{class n{constructor(t,r,i,a){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new TI,this.close=c=>new II(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Sx(this._viewportRuler,this._document),this.reposition=c=>new Cb(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ao),d.LFG(jo),d.LFG(d.R0b),d.LFG(ie))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(ao),d.LFG(jo),d.LFG(d.R0b),d.LFG(ie))},token:n,providedIn:"root"}),n})();class Ib{constructor(e){if(this.scrollStrategy=new TI,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Am{constructor(e,t,r,i,a){this.offsetX=r,this.offsetY=i,this.panelClass=a,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Rx{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Tb=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(ie))},token:n,providedIn:"root"}),n})(),Mx=(()=>{class n extends Tb{constructor(t){super(t),this._keydownListener=r=>{const i=this._attachedOverlays;for(let a=i.length-1;a>-1;a--)if(i[a]._keydownEvents.observers.length>0){i[a]._keydownEvents.next(r);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(ie))},token:n,providedIn:"root"}),n})(),xx=(()=>{class n extends Tb{constructor(t,r){super(t),this._platform=r,this._cursorStyleIsSet=!1,this._pointerDownListener=i=>{this._pointerDownEventTarget=Pr(i)},this._clickListener=i=>{const a=Pr(i),c="click"===i.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let g=f.length-1;g>-1;g--){const b=f[g];if(!(b._outsidePointerEvents.observers.length<1)&&b.hasAttached()){if(b.overlayElement.contains(a)||b.overlayElement.contains(c))break;b._outsidePointerEvents.next(i)}}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;r.addEventListener("pointerdown",this._pointerDownListener,!0),r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG(Vn))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(ie),d.LFG(Vn))},token:n,providedIn:"root"}),n})(),zc=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||_f()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].parentNode.removeChild(i[a])}const r=this._document.createElement("div");r.classList.add(t),_f()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG(Vn))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(ie),d.LFG(Vn))},token:n,providedIn:"root"}),n})();class HU{constructor(e,t,r,i,a,c,f,g,b){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=c,this._document=f,this._location=g,this._outsideClickDispatcher=b,this._backdropElement=null,this._backdropClick=new At.xQ,this._attachments=new At.xQ,this._detachments=new At.xQ,this._locationChanges=li.w.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._keydownEvents=new At.xQ,this._outsidePointerEvents=new At.xQ,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Cs(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ir(this._config.width),e.height=ir(this._config.height),e.minWidth=ir(this._config.minWidth),e.minHeight=ir(this._config.minHeight),e.maxWidth=ir(this._config.maxWidth),e.maxHeight=ir(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(!e)return;let t;const r=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",r),this._disposeBackdrop(e)),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",r)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(e,t,r){const i=e.classList;lf(t).forEach(a=>{a&&(r?i.add(a):i.remove(a))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(dr((0,wd.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.parentNode&&e.parentNode.removeChild(e),this._backdropElement===e&&(this._backdropElement=null))}}const MI="cdk-overlay-connected-position-bounding-box",xI=/([A-Za-z%]+)$/;class Db{constructor(e,t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new At.xQ,this._resizeSubscription=li.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(MI),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=[];let a;for(let c of this._preferredPositions){let f=this._getOriginPoint(e,c),g=this._getOverlayPoint(f,t,c),b=this._getOverlayFit(g,t,r,c);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(c,f);this._canFitWithFlexibleDimensions(b,g,r)?i.push({position:c,origin:f,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(f,c)}):(!a||a.overlayFit.visibleArea<b.visibleArea)&&(a={overlayFit:b,overlayPoint:g,originPoint:f,position:c,overlayRect:t})}if(i.length){let c=null,f=-1;for(const g of i){const b=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);b>f&&(f=b,c=g)}return this._isPushed=!1,void this._applyPosition(c.position,c.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Il(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(MI),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let r,i;if("center"==t.originX)r=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r="start"==t.originX?a:c}return i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,{x:r,y:i}}_getOverlayPoint(e,t,r){let i,a;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+a}}_getOverlayFit(e,t,r,i){const a=Ab(t);let{x:c,y:f}=e,g=this._getOffset(i,"x"),b=this._getOffset(i,"y");g&&(c+=g),b&&(f+=b);let R=0-f,x=f+a.height-r.height,B=this._subtractOverflows(a.width,0-c,c+a.width-r.width),ae=this._subtractOverflows(a.height,R,x),me=B*ae;return{visibleArea:me,isCompletelyWithinViewport:a.width*a.height===me,fitsInViewportVertically:ae===a.height,fitsInViewportHorizontally:B==a.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,a=r.right-t.x,c=Sb(this._overlayRef.getConfig().minHeight),f=Sb(this._overlayRef.getConfig().minWidth),b=e.fitsInViewportHorizontally||null!=f&&f<=a;return(e.fitsInViewportVertically||null!=c&&c<=i)&&b}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Ab(t),a=this._viewportRect,c=Math.max(e.x+i.width-a.width,0),f=Math.max(e.y+i.height-a.height,0),g=Math.max(a.top-r.top-e.y,0),b=Math.max(a.left-r.left-e.x,0);let C=0,D=0;return C=i.width<=a.width?b||-c:e.x<this._viewportMargin?a.left-r.left-e.x:0,D=i.height<=a.height?g||-f:e.y<this._viewportMargin?a.top-r.top-e.y:0,this._previousPushAmount={x:C,y:D},{x:e.x+C,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Rx(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let a,c,f,C,D,R;if("top"===t.overlayY)c=e.y,a=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-e.y+2*this._viewportMargin,a=r.height-f+this._viewportMargin;else{const x=Math.min(r.bottom-e.y+r.top,e.y),B=this._lastBoundingBoxSize.height;a=2*x,c=e.y-x,a>B&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-B/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)R=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,C=r.right-e.x;else{const x=Math.min(r.right-e.x+r.left,e.x),B=this._lastBoundingBoxSize.width;C=2*x,D=e.x-x,C>B&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-B/2)}return{top:c,left:D,bottom:f,right:R,width:C,height:a}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=ir(r.height),i.top=ir(r.top),i.bottom=ir(r.bottom),i.width=ir(r.width),i.left=ir(r.left),i.right=ir(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=ir(a)),c&&(i.maxWidth=ir(c))}this._lastBoundingBoxSize=r,Il(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Il(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Il(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();Il(r,this._getExactOverlayY(t,e,C)),Il(r,this._getExactOverlayX(t,e,C))}else r.position="static";let f="",g=this._getOffset(t,"x"),b=this._getOffset(t,"y");g&&(f+=`translateX(${g}px) `),b&&(f+=`translateY(${b}px)`),r.transform=f.trim(),c.maxHeight&&(i?r.maxHeight=ir(c.maxHeight):a&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=ir(c.maxWidth):a&&(r.maxWidth="")),Il(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r));let c=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return a.y-=c,"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=ir(a.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=ir(a.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:DI(e,r),isOriginOutsideView:wb(e,r),isOverlayClipped:DI(t,r),isOverlayOutsideView:wb(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&lf(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof d.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Il(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Sb(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(xI);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Ab(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class Pa{constructor(e,t,r,i,a,c,f){this._preferredPositions=[],this._positionStrategy=new Db(r,i,a,c,f).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,r,i){const a=new Am(e,t,r,i);return this._preferredPositions.push(a),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const kf="cdk-global-overlay-wrapper";class kx{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(kf),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:c,maxHeight:f}=r,g=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),b=!("100%"!==a&&"100vh"!==a||f&&"100%"!==f&&"100vh"!==f);e.position=this._cssPosition,e.marginLeft=g?"0":this._leftOffset,e.marginTop=b?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,g?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=b?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(kf),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Ox=(()=>{class n{constructor(t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a}global(){return new kx}connectedTo(t,r,i){return new Pa(r,i,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new Db(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jo),d.LFG(ie),d.LFG(Vn),d.LFG(zc))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(jo),d.LFG(ie),d.LFG(Vn),d.LFG(zc))},token:n,providedIn:"root"}),n})(),$U=0,ho=(()=>{class n{constructor(t,r,i,a,c,f,g,b,C,D,R){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=f,this._ngZone=g,this._document=b,this._directionality=C,this._location=D,this._outsideClickDispatcher=R}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),a=this._createPortalOutlet(i),c=new Ib(t);return c.direction=c.direction||this._directionality.value,new HU(a,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+$U++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(d.z2F)),new wx(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ax),d.LFG(zc),d.LFG(d._Vd),d.LFG(Ox),d.LFG(Mx),d.LFG(d.zs3),d.LFG(d.R0b),d.LFG(ie),d.LFG(Es),d.LFG(Lt),d.LFG(xx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const OI={provide:new d.OlP("cdk-connected-overlay-scroll-strategy"),deps:[ho],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let Px=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[ho,OI],imports:[[js,bb,gd],gd]}),n})();const PI=new d.GfV("12.2.13");class Mm{}const Na="*";function Mb(n,e){return{type:7,name:n,definitions:e,options:{}}}function Tl(n,e=null){return{type:4,styles:e,timings:n}}function NI(n,e=null){return{type:2,steps:n,options:e}}function Dl(n){return{type:6,styles:n,offset:null}}function Sl(n,e,t){return{type:0,name:n,styles:e,options:t}}function xb(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function ar(n){Promise.resolve(null).then(n)}class Al{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ar(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ux{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?ar(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++r==a&&this._onDestroy()}),c.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function xm(){return"undefined"!=typeof window&&void 0!==window.document}function Of(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gc(n){switch(n.length){case 0:return new Al;case 1:return n[0];default:return new Ux(n)}}function FI(n,e,t,r,i={},a={}){const c=[],f=[];let g=-1,b=null;if(r.forEach(C=>{const D=C.offset,R=D==g,x=R&&b||{};Object.keys(C).forEach(B=>{let ae=B,me=C[B];if("offset"!==B)switch(ae=e.normalizePropertyName(ae,c),me){case"!":me=i[B];break;case Na:me=a[B];break;default:me=e.normalizeStyleValue(B,ae,me,c)}x[ae]=me}),R||f.push(x),b=x,g=D}),c.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${c.join(C)}`)}return f}function kb(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&km(t,"start",n)));break;case"done":n.onDone(()=>r(t&&km(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&km(t,"destroy",n)))}}function km(n,e,t){const r=t.totalTime,a=Om(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function Om(n,e,t,r,i="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!c}}function as(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function Ob(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Pb=(n,e)=>!1,Wc=(n,e)=>!1,Nb=(n,e,t)=>[];const Fb=Of();(Fb||"undefined"!=typeof Element)&&(Pb=xm()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),Wc=(()=>{if(Fb||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):Wc}})(),Nb=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let a=0;a<i.length;a++)r.push(i[a])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let qc=null,UI=!1;function Lb(n){qc||(qc=("undefined"!=typeof document?document.body:null)||{},UI=!!qc.style&&"WebkitAppearance"in qc.style);let e=!0;return qc.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in qc.style,!e&&UI&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in qc.style)),e}const Pm=Wc,BI=Pb,Nm=Nb;function jI(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let HI=(()=>{class n{validateStyleProperty(t){return Lb(t)}matchesElement(t,r){return Pm(t,r)}containsElement(t,r){return BI(t,r)}query(t,r,i){return Nm(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,c,f=[],g){return new Al(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$I=(()=>{class n{}return n.NOOP=new HI,n})();const Lm="ng-enter",Pf="ng-leave",Vb="ng-trigger",Ub=".ng-trigger",$x="ng-animating",Vm=".ng-animating";function Rl(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Um(parseFloat(e[1]),e[2])}function Um(n,e){switch(e){case"s":return 1e3*n;default:return n}}function Bm(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,a=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=Um(parseFloat(f[1]),f[2]);const g=f[3];null!=g&&(a=Um(parseFloat(g),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,g=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),f=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),f=!0),f&&e.splice(g,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:c}}(n,e,t)}function Kc(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ml(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Kc(n,t);return t}function Hm(n,e,t){return t?e+":"+t+";":""}function zI(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Hm(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Hm(0,Gx(t),n.style[t]));n.setAttribute("style",e)}function Ko(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Zc(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Of()&&zI(n))}function Yc(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Zc(t);n.style[r]=""}),Of()&&zI(n))}function Nf(n){return Array.isArray(n)?1==n.length?n[0]:NI(n):n}const Bb=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ff(n){let e=[];if("string"==typeof n){let t;for(;t=Bb.exec(n);)e.push(t[1]);Bb.lastIndex=0}return e}function Fa(n,e,t){const r=n.toString(),i=r.replace(Bb,(a,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(`Please provide a value for the animation param ${c}`),f=""),f.toString()});return i==r?n:i}function Lf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const po=/-+([a-z0-9])/g;function Zc(n){return n.replace(po,(...e)=>e[1].toUpperCase())}function Gx(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function GI(n,e){return 0===n||0===e}function $m(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],c=[];if(r.forEach(f=>{a.hasOwnProperty(f)||c.push(f),a[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(g){f[g]=Qc(n,g)})}}return e}function Ar(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Qc(n,e){return window.getComputedStyle(n)[e]}function Jc(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const g=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],c=r[3];e.push(Xc(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(Xc(c,i))}(r,t,e)):t.push(n),t}const Rd=new Set(["true","1"]),La=new Set(["false","0"]);function Xc(n,e){const t=Rd.has(n)||La.has(n),r=Rd.has(e)||La.has(e);return(i,a)=>{let c="*"==n||n==i,f="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?Rd.has(n):La.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?Rd.has(e):La.has(e)),c&&f}}const Md=new RegExp("s*:selfs*,?","g");function xl(n,e,t){return new xd(n).build(e,t)}class xd{constructor(e){this._driver=e}build(e,t){const r=new WI(t);return this._resetContextStyleTimingState(r),Ar(this,Nf(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const g=f,b=g.name;b.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,a.push(this.visitState(g,t))}),g.name=b}else if(1==f.type){const g=this.visitTransition(f,t);r+=g.queryCount,i+=g.depCount,c.push(g)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,c=i||{};if(r.styles.forEach(f=>{if(Vf(f)){const g=f;Object.keys(g).forEach(b=>{Ff(g[b]).forEach(C=>{c.hasOwnProperty(C)||a.add(C)})})}}),a.size){const f=Lf(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${f.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ar(this,Nf(e.animation),t);return{type:1,matchers:Jc(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:kl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ar(this,r,t)),options:kl(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=r;const f=Ar(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:kl(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Gm(Bm(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=Gm(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||Bm(r,e),Gm(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:Dl({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=Dl(b)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(c,t);g.isEmptyStep=f,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Na?r.push(c):t.errors.push(`The provided style string value ${c} is not allowed.`):r.push(c)}):r.push(e.styles);let i=!1,a=null;return r.forEach(c=>{if(Vf(c)){const f=c,g=f.easing;if(g&&(a=g,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return void t.errors.push(`The provided animation property "${f}" is not a supported CSS property for animations`);const g=t.collectedStyles[t.currentQuerySelector],b=g[f];let C=!0;b&&(a!=i&&a>=b.startTime&&i<=b.endTime&&(t.errors.push(`The CSS property "${f}" that exists between the times of "${b.startTime}ms" and "${b.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),C=!1),a=b.startTime),C&&(g[f]={startTime:a,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=Ff(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const c=[];let f=!1,g=!1,b=0;const C=e.steps.map(et=>{const pt=this._makeStyleAst(et,t);let vt=null!=pt.offset?pt.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Vf(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Vf(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(pt.styles),ht=0;return null!=vt&&(a++,ht=pt.offset=vt),g=g||ht<0||ht>1,f=f||ht<b,b=ht,c.push(ht),pt});g&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),f&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let R=0;a>0&&a<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(R=1/(D-1));const x=D-1,B=t.currentTime,ae=t.currentAnimateTimings,me=ae.duration;return C.forEach((et,pt)=>{const vt=R>0?pt==x?1:R*pt:c[pt],ht=vt*me;t.currentTime=B+ae.delay+ht,ae.duration=ht,this._validateStyleAst(et,t),et.offset=vt,r.styles.push(et)}),r}visitReference(e,t){return{type:8,animation:Ar(this,Nf(e.animation),t),options:kl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:kl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:kl(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Md,"")),[n=n.replace(/@\*/g,Ub).replace(/@\w+/g,t=>Ub+"-"+t.substr(1)).replace(/:animating/g,Vm),e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,as(t.collectedStyles,t.currentQuerySelector,{});const f=Ar(this,Nf(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:kl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Bm(e.timings,t.errors,!0);return{type:12,animation:Ar(this,Nf(e.animation),t),timings:r,options:null}}}class WI{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Vf(n){return!Array.isArray(n)&&"object"==typeof n}function kl(n){return n?(n=Kc(n)).params&&(n.params=function(n){return n?Kc(n):null}(n.params)):n={},n}function Gm(n,e,t){return{duration:n,delay:e,easing:t}}function Wm(n,e,t,r,i,a,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:f}}class Uf{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ZI=new RegExp(":enter","g"),QI=new RegExp(":leave","g");function qm(n,e,t,r,i,a={},c={},f,g,b=[]){return(new Kx).buildKeyframes(n,e,t,r,i,a,c,f,g,b)}class Kx{buildKeyframes(e,t,r,i,a,c,f,g,b,C=[]){b=b||new Uf;const D=new Hb(e,t,b,i,a,C,[]);D.options=g,D.currentTimeline.setStyles([c],null,D.errors,g),Ar(this,r,D);const R=D.timelines.filter(x=>x.containsAnimation());if(R.length&&Object.keys(f).length){const x=R[R.length-1];x.allowOnlyTimelineStyles()||x.setStyles([f],null,D.errors,g)}return R.length?R.map(x=>x.buildKeyframes()):[Wm(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const c=null!=r.duration?Rl(r.duration):null,f=null!=r.delay?Rl(r.delay):null;return 0!==c&&e.forEach(g=>{const b=t.appendInstructionToTimeline(g,c,f);a=Math.max(a,b.duration+b.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Ar(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=jb);const c=Rl(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Ar(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Rl(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),Ar(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Bm(t.params?Fa(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(g=>{f.forwardTime((g.offset||0)*a),f.setStyles(g.styles,g.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Rl(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=jb);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let g=null;f.forEach((b,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,b);a&&D.delayNextStep(a),b===t.element&&(g=D.currentTimeline),Ar(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),f=c*(t.currentQueryTotal-1);let g=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":g=f-g;break;case"full":g=r.currentStaggerTime}const C=t.currentTimeline;g&&C.delayNextStep(g);const D=C.currentTime;Ar(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const jb={};class Hb{constructor(e,t,r,i,a,c,f,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=jb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new Bf(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Rl(r.duration)),null!=r.delay&&(i.delay=Rl(r.delay));const a=r.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=Fa(a[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new Hb(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=jb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new Yx(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(ZI,"."+this._enterClassName)).replace(QI,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!a&&0==f.length&&c.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),f}}class Bf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Bf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Na,this._currentKeyframe[t]=Na}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},c=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Na})):Ml(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const g=Fa(c[f],a,r);this._pendingStyles[f]=g,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Na),this._updateStyle(f,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,g)=>{const b=Ml(f,!0);Object.keys(b).forEach(C=>{const D=b[C];"!"==D?e.add(C):D==Na&&t.add(C)}),r||(b.offset=g/this.duration),i.push(b)});const a=e.size?Lf(e.values()):[],c=t.size?Lf(t.values()):[];if(r){const f=i[0],g=Kc(f);f.offset=0,g.offset=1,i=[f,g]}return Wm(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class Yx extends Bf{constructor(e,t,r,i,a,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=r+t,f=t/c,g=Ml(e[0],!1);g.offset=0,a.push(g);const b=Ml(e[0],!1);b.offset=$b(f),a.push(b);const C=e.length-1;for(let D=1;D<=C;D++){let R=Ml(e[D],!1);R.offset=$b((t+R.offset*r)/c),a.push(R)}r=c,t=0,i="",e=a}return Wm(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function $b(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class JI{}class XI extends JI{normalizePropertyName(e,t){return Zc(e)}normalizeStyleValue(e,t,r,i){let a="";const c=r.toString().trim();if(eB[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return c+a}}const eB=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function eT(n,e,t,r,i,a,c,f,g,b,C,D,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:c,timelines:f,queriedElements:g,preStyleProps:b,postStyleProps:C,totalTime:D,errors:R}}const tT={};class nT{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):c}build(e,t,r,i,a,c,f,g,b,C){const D=[],R=this.ast.options&&this.ast.options.params||tT,B=this.buildStyles(r,f&&f.params||tT,D),ae=g&&g.params||tT,me=this.buildStyles(i,ae,D),et=new Set,pt=new Map,vt=new Map,ht="void"===i,Dn={params:Object.assign(Object.assign({},R),ae)},$n=C?[]:qm(e,t,this.ast.animation,a,c,B,me,Dn,b,D);let oi=0;if($n.forEach(So=>{oi=Math.max(So.duration+So.delay,oi)}),D.length)return eT(t,this._triggerName,r,i,ht,B,me,[],[],pt,vt,oi,D);$n.forEach(So=>{const Uu=So.element,QW=as(pt,Uu,{});So.preStyleProps.forEach(Dg=>QW[Dg]=!0);const u0=as(vt,Uu,{});So.postStyleProps.forEach(Dg=>u0[Dg]=!0),Uu!==t&&et.add(Uu)});const Fs=Lf(et.values());return eT(t,this._triggerName,r,i,ht,B,me,$n,Fs,pt,vt,oi)}}class zb{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Kc(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!=c&&(i[a]=c)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const c=a;Object.keys(c).forEach(f=>{let g=c[f];g.length>1&&(g=Fa(g,i,t));const b=this.normalizer.normalizePropertyName(f,t);g=this.normalizer.normalizeStyleValue(f,b,g,t),r[b]=g})}}),r}}class Jx{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new zb(i.style,i.options&&i.options.params||{},r)}),Xx(this.states,"true","1"),Xx(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new nT(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new nT(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Xx(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const rB=new Uf;class ek{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=xl(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=FI(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let c;const f=new Map;if(a?(c=qm(this._driver,t,a,Lm,Pf,{},{},r,rB,i),c.forEach(C=>{const D=as(f,C.element,{});C.postStyleProps.forEach(R=>D[R]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),c=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);f.forEach((C,D)=>{Object.keys(C).forEach(R=>{C[R]=this._driver.computeStyle(D,R,Na)})});const b=Gc(c.map(C=>{const D=f.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=Om(t,"","","");return kb(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Wb="ng-animate-queued",rT="ng-animate-disabled",nu=".ng-animate-disabled",nk=[],qb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Km={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gs="__ng_removed";class Ym{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const a=Kc(e);delete a.value,this.options=a}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const jf="void",Kb=new Ym(jf);class rk{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Mi(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const a=as(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};a.push(c);const f=as(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Mi(e,Vb),Mi(e,Vb+"-"+t),f[t]=Kb),()=>{this._engine.afterFlush(()=>{const g=a.indexOf(c);g>=0&&a.splice(g,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),c=new Yb(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Mi(e,Vb),Mi(e,Vb+"-"+t),this._engine.statesByElement.set(e,f={}));let g=f[t];const b=new Ym(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&b.absorbOptions(g.options),f[t]=b,g||(g=Kb),b.value!==jf&&g.value===b.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(g.params,b.params)){const ae=[],me=a.matchStyles(g.value,g.params,ae),et=a.matchStyles(b.value,b.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{Yc(e,me),Ko(e,et)})}return}const R=as(this._engine.playersByElement,e,[]);R.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==t&&ae.queued&&ae.destroy()});let x=a.matchTransition(g.value,b.value,e,b.params),B=!1;if(!x){if(!i)return;x=a.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:x,fromState:g,toState:b,player:c,isFallbackTransition:B}),B||(Mi(e,Wb),c.onStart(()=>{Pd(e,Wb)})),c.onDone(()=>{let ae=this.players.indexOf(c);ae>=0&&this.players.splice(ae,1);const me=this._engine.playersByElement.get(e);if(me){let et=me.indexOf(c);et>=0&&me.splice(et,1)}}),this.players.push(c),R.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Ub,!0);r.forEach(i=>{if(i[Gs])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e);if(a){const c=[];if(Object.keys(a).forEach(f=>{if(this._triggers[f]){const g=this.trigger(e,f,jf,i);g&&c.push(g)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Gc(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const g=this._triggers[c].fallbackTransition,b=r[c]||Kb,C=new Ym(jf),D=new Yb(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:g,fromState:b,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Gs];(!a||a===qb)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Mi(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,c=this._elementListeners.get(a);c&&c.forEach(f=>{if(f.name==r.triggerName){const g=Om(a,r.triggerName,r.fromState.value,r.toState.value);g._data=e,kb(r.player,f.phase,g,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class ik{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new rk(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const c=r[i[a]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(Hf(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Hf(t))return;const a=t[Gs];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Mi(e,rT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Pd(e,rT))}removeNode(e,t,r,i){if(Hf(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[Gs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,a){return Hf(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,Ub,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Vm,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Gs];if(t&&t.setForRemoval){if(e[Gs]=qb,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,nu)&&this.markElementAsDisabled(e,!1),this.driver.query(e,nu,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Mi(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Gc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Uf,i=[],a=new Map,c=[],f=new Map,g=new Map,b=new Map,C=new Set;this.disabledNodes.forEach(xt=>{C.add(xt);const Gt=this.driver.query(xt,".ng-animate-queued",!0);for(let cn=0;cn<Gt.length;cn++)C.add(Gt[cn])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),x=Qm(R,this.collectedEnterElements),B=new Map;let ae=0;x.forEach((xt,Gt)=>{const cn=Lm+ae++;B.set(Gt,cn),xt.forEach(Pn=>Mi(Pn,cn))});const me=[],et=new Set,pt=new Set;for(let xt=0;xt<this.collectedLeaveElements.length;xt++){const Gt=this.collectedLeaveElements[xt],cn=Gt[Gs];cn&&cn.setForRemoval&&(me.push(Gt),et.add(Gt),cn.hasAnimation?this.driver.query(Gt,".ng-star-inserted",!0).forEach(Pn=>et.add(Pn)):pt.add(Gt))}const vt=new Map,ht=Qm(R,Array.from(et));ht.forEach((xt,Gt)=>{const cn=Pf+ae++;vt.set(Gt,cn),xt.forEach(Pn=>Mi(Pn,cn))}),e.push(()=>{x.forEach((xt,Gt)=>{const cn=B.get(Gt);xt.forEach(Pn=>Pd(Pn,cn))}),ht.forEach((xt,Gt)=>{const cn=vt.get(Gt);xt.forEach(Pn=>Pd(Pn,cn))}),me.forEach(xt=>{this.processLeaveNode(xt)})});const Dn=[],$n=[];for(let xt=this._namespaceList.length-1;xt>=0;xt--)this._namespaceList[xt].drainQueuedTransitions(t).forEach(cn=>{const Pn=cn.player,Ui=cn.element;if(Dn.push(Pn),this.collectedEnterElements.length){const vc=Ui[Gs];if(vc&&vc.setForMove)return void Pn.destroy()}const yc=!D||!this.driver.containsElement(D,Ui),Ao=vt.get(Ui),Vh=B.get(Ui),Qr=this._buildInstruction(cn,r,Vh,Ao,yc);if(Qr.errors&&Qr.errors.length)$n.push(Qr);else{if(yc)return Pn.onStart(()=>Yc(Ui,Qr.fromStyles)),Pn.onDestroy(()=>Ko(Ui,Qr.toStyles)),void i.push(Pn);if(cn.isFallbackTransition)return Pn.onStart(()=>Yc(Ui,Qr.fromStyles)),Pn.onDestroy(()=>Ko(Ui,Qr.toStyles)),void i.push(Pn);Qr.timelines.forEach(vc=>vc.stretchStartingKeyframe=!0),r.append(Ui,Qr.timelines),c.push({instruction:Qr,player:Pn,element:Ui}),Qr.queriedElements.forEach(vc=>as(f,vc,[]).push(Pn)),Qr.preStyleProps.forEach((vc,d0)=>{const _M=Object.keys(vc);if(_M.length){let Sg=g.get(d0);Sg||g.set(d0,Sg=new Set),_M.forEach(GV=>Sg.add(GV))}}),Qr.postStyleProps.forEach((vc,d0)=>{const _M=Object.keys(vc);let Sg=b.get(d0);Sg||b.set(d0,Sg=new Set),_M.forEach(GV=>Sg.add(GV))})}});if($n.length){const xt=[];$n.forEach(Gt=>{xt.push(`@${Gt.triggerName} has failed due to:\n`),Gt.errors.forEach(cn=>xt.push(`- ${cn}\n`))}),Dn.forEach(Gt=>Gt.destroy()),this.reportError(xt)}const oi=new Map,Fs=new Map;c.forEach(xt=>{const Gt=xt.element;r.has(Gt)&&(Fs.set(Gt,Gt),this._beforeAnimationBuild(xt.player.namespaceId,xt.instruction,oi))}),i.forEach(xt=>{const Gt=xt.element;this._getPreviousPlayers(Gt,!1,xt.namespaceId,xt.triggerName,null).forEach(Pn=>{as(oi,Gt,[]).push(Pn),Pn.destroy()})});const So=me.filter(xt=>Xm(xt,g,b)),Uu=new Map;ok(Uu,this.driver,pt,b,Na).forEach(xt=>{Xm(xt,g,b)&&So.push(xt)});const u0=new Map;x.forEach((xt,Gt)=>{ok(u0,this.driver,new Set(xt),g,"!")}),So.forEach(xt=>{const Gt=Uu.get(xt),cn=u0.get(xt);Uu.set(xt,Object.assign(Object.assign({},Gt),cn))});const Dg=[],JW=[],XW={};c.forEach(xt=>{const{element:Gt,player:cn,instruction:Pn}=xt;if(r.has(Gt)){if(C.has(Gt))return cn.onDestroy(()=>Ko(Gt,Pn.toStyles)),cn.disabled=!0,cn.overrideTotalTime(Pn.totalTime),void i.push(cn);let Ui=XW;if(Fs.size>1){let Ao=Gt;const Vh=[];for(;Ao=Ao.parentNode;){const Qr=Fs.get(Ao);if(Qr){Ui=Qr;break}Vh.push(Ao)}Vh.forEach(Qr=>Fs.set(Qr,Ui))}const yc=this._buildAnimation(cn.namespaceId,Pn,oi,a,u0,Uu);if(cn.setRealPlayer(yc),Ui===XW)Dg.push(cn);else{const Ao=this.playersByElement.get(Ui);Ao&&Ao.length&&(cn.parentPlayer=Gc(Ao)),i.push(cn)}}else Yc(Gt,Pn.fromStyles),cn.onDestroy(()=>Ko(Gt,Pn.toStyles)),JW.push(cn),C.has(Gt)&&i.push(cn)}),JW.forEach(xt=>{const Gt=a.get(xt.element);if(Gt&&Gt.length){const cn=Gc(Gt);xt.setRealPlayer(cn)}}),i.forEach(xt=>{xt.parentPlayer?xt.syncPlayerEvents(xt.parentPlayer):xt.destroy()});for(let xt=0;xt<me.length;xt++){const Gt=me[xt],cn=Gt[Gs];if(Pd(Gt,Pf),cn&&cn.hasAnimation)continue;let Pn=[];if(f.size){let yc=f.get(Gt);yc&&yc.length&&Pn.push(...yc);let Ao=this.driver.query(Gt,Vm,!0);for(let Vh=0;Vh<Ao.length;Vh++){let Qr=f.get(Ao[Vh]);Qr&&Qr.length&&Pn.push(...Qr)}}const Ui=Pn.filter(yc=>!yc.destroyed);Ui.length?Zb(this,Gt,Ui):this.processLeaveNode(Gt)}return me.length=0,Dg.forEach(xt=>{this.players.push(xt),xt.onDone(()=>{xt.destroy();const Gt=this.players.indexOf(xt);this.players.splice(Gt,1)}),xt.play()}),Dg}elementContainsData(e,t){let r=!1;const i=t[Gs];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const g=!a||a==jf;f.forEach(b=>{b.queued||!g&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const a=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const b=g.element,C=b!==a,D=as(r,b,[]);this._getPreviousPlayers(b,C,c,f,t.toState).forEach(x=>{const B=x.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),x.destroy(),D.push(x)})}Yc(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,c){const f=t.triggerName,g=t.element,b=[],C=new Set,D=new Set,R=t.timelines.map(B=>{const ae=B.element;C.add(ae);const me=ae[Gs];if(me&&me.removedBeforeQueried)return new Al(B.duration,B.delay);const et=ae!==g,pt=function(n){const e=[];return aT(n,e),e}((r.get(ae)||nk).map(oi=>oi.getRealPlayer())).filter(oi=>!!oi.element&&oi.element===ae),vt=a.get(ae),ht=c.get(ae),Dn=FI(0,this._normalizer,0,B.keyframes,vt,ht),$n=this._buildPlayer(B,Dn,pt);if(B.subTimeline&&i&&D.add(ae),et){const oi=new Yb(e,f,ae);oi.setRealPlayer($n),b.push(oi)}return $n});b.forEach(B=>{as(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),C.forEach(B=>Mi(B,$x));const x=Gc(R);return x.onDestroy(()=>{C.forEach(B=>Pd(B,$x)),Ko(g,t.toStyles)}),D.forEach(B=>{as(i,B,[]).push(x)}),x}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Al(e.duration,e.delay)}}class Yb{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Al,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>kb(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){as(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Hf(n){return n&&1===n.nodeType}function Zm(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function ok(n,e,t,r,i){const a=[];t.forEach(g=>a.push(Zm(g)));const c=[];r.forEach((g,b)=>{const C={};g.forEach(D=>{const R=C[D]=e.computeStyle(b,D,i);(!R||0==R.length)&&(b[Gs]=Km,c.push(b))}),n.set(b,C)});let f=0;return t.forEach(g=>Zm(g,a[f++])),c}function Qm(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(f){if(!f)return 1;let g=a.get(f);if(g)return g;const b=f.parentNode;return g=t.has(b)?b:i.has(b)?1:c(b),a.set(f,g),g}return e.forEach(f=>{const g=c(f);1!==g&&t.get(g).push(f)}),t}const Jm="$$classes";function Mi(n,e){if(n.classList)n.classList.add(e);else{let t=n[Jm];t||(t=n[Jm]={}),t[e]=!0}}function Pd(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Jm];t&&delete t[e]}}function Zb(n,e,t){Gc(t).onDone(()=>n.processLeaveNode(e))}function aT(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Ux?aT(r.players,e):e.push(r)}}function Xm(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class $f{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new ik(e,t,r),this._timelineEngine=new ek(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const g=[],b=xl(this._driver,a,g);if(g.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${g.join("\n - ")}`);f=function(n,e,t){return new Jx(n,e,t)}(i,b,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,c]=Ob(r);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[c,f]=Ob(r);return this._timelineEngine.listen(c,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ak(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=zf(e[0]),e.length>1&&(r=zf(e[e.length-1]))):e&&(t=zf(e)),t||r?new lk(n,t,r):null}let lk=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Ko(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ko(this._element,this._initialStyles),this._endStyles&&(Ko(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Yc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yc(this._element,this._endStyles),this._endStyles=null),Ko(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function zf(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];Xb(i)&&(e=e||{},e[i]=n[i])}return e}function Xb(n){return"display"===n||"position"===n}const eE="animation",e_="animationend";class tE{constructor(e,t,r,i,a,c,f){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=c,this._onDoneFn=f,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=g=>this._handleCallback(g)}apply(){(function(n,e){const t=iE(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Gf(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),r_(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){t_(this._element,this._name,"paused")}resume(){t_(this._element,this._name,"running")}setPosition(e){const t=rE(this._element,this._name);this._position=e*this._duration,Gf(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),r_(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=iE(n,"").split(","),i=n_(r,e);i>=0&&(r.splice(i,1),Gf(n,"",r.join(",")))}(this._element,this._name))}}function t_(n,e,t){Gf(n,"PlayState",t,rE(n,e))}function rE(n,e){const t=iE(n,"");return t.indexOf(",")>0?n_(t.split(","),e):n_([t],e)}function n_(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function r_(n,e,t){t?n.removeEventListener(e_,e):n.addEventListener(e_,e)}function Gf(n,e,t,r){const i=eE+e;if(null!=r){const a=n.style[i];if(a.length){const c=a.split(",");c[r]=t,t=c.join(",")}}n.style[i]=t}function iE(n,e){return n.style[eE+e]||""}class i_{constructor(e,t,r,i,a,c,f,g){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=f,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=c||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new tE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:Qc(this.element,r))})}this.currentSnapshot=e}}class hT extends Al{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=jI(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class oE{constructor(){this._count=0}validateStyleProperty(e){return Lb(e)}matchesElement(e,t){return Pm(e,t)}containsElement(e,t){return BI(e,t)}query(e,t,r){return Nm(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(f=>jI(f));let i=`@keyframes ${t} {\n`,a="";r.forEach(f=>{a=" ";const g=parseFloat(f.offset);i+=`${a}${100*g}% {\n`,a+=" ",Object.keys(f).forEach(b=>{const C=f[b];switch(b){case"offset":return;case"easing":return void(C&&(i+=`${a}animation-timing-function: ${C};\n`));default:return void(i+=`${a}${b}: ${C};\n`)}}),i+=`${a}}\n`}),i+="}\n";const c=document.createElement("style");return c.textContent=i,c}animate(e,t,r,i,a,c=[],f){const g=c.filter(me=>me instanceof i_),b={};GI(r,i)&&g.forEach(me=>{let et=me.currentSnapshot;Object.keys(et).forEach(pt=>b[pt]=et[pt])});const C=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=$m(e,t,b));if(0==r)return new hT(e,C);const D="gen_css_kf_"+this._count++,R=this.buildKeyframeElement(e,D,t);(function(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(R);const B=ak(e,t),ae=new i_(e,t,D,r,i,a,C,B);return ae.onDestroy(()=>{var n;(n=R).parentNode.removeChild(n)}),ae}}class _T{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Qc(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dk{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(vT().toString()),this._cssKeyframesDriver=new oE}validateStyleProperty(e){return Lb(e)}matchesElement(e,t){return Pm(e,t)}containsElement(e,t){return BI(e,t)}query(e,t,r){return Nm(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,c=[],f){if(!f&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,c);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(C.easing=a);const D={},R=c.filter(B=>B instanceof _T);GI(r,i)&&R.forEach(B=>{let ae=B.currentSnapshot;Object.keys(ae).forEach(me=>D[me]=ae[me])});const x=ak(e,t=$m(e,t=t.map(B=>Ml(B,!1)),D));return new _T(e,t,C,x)}}function vT(){return xm()&&Element.prototype.animate||{}}let ti=(()=>{class n extends Mm{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?NI(t):t;return ET(this._renderer,null,r,"register",[i]),new bT(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class bT extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new hk(this._id,e,t||{},this._renderer)}}class hk{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ET(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function ET(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const wT="@.disabled";let CT=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,c)=>{c&&c.parentNode(a)&&c.removeChild(a.parentNode,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new lE("",a,this.engine),this._rendererCache.set(a,C)),C}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const g=C=>{Array.isArray(C)?C.forEach(g):this.engine.registerTrigger(c,f,t,C.name,C)};return r.data.animation.forEach(g),new Nd(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,f]=a;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG($f),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class lE{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==wT?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Nd extends lE{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==wT?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),c="";return"@"!=a.charAt(0)&&([a,c]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let IT=(()=>{class n extends $f{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG($I),d.LFG(JI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Yo=new d.OlP("AnimationModuleType"),s_=[{provide:Mm,useClass:ti},{provide:JI,useFactory:function(){return new XI}},{provide:$f,useClass:IT},{provide:d.FYo,useFactory:function(n,e,t){return new CT(n,e,t)},deps:[_s,$f,d.R0b]}],go=[{provide:$I,useFactory:function(){return"function"==typeof vT()?new dk:new oE}},{provide:Yo,useValue:"BrowserAnimations"},...s_],DT=[{provide:$I,useClass:HI},{provide:Yo,useValue:"NoopAnimations"},...s_];let mk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?DT:go}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:go,imports:[jg]}),n})();const o_=new d.GfV("12.2.13"),yk=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ol,zr=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!(0,d.X6Q)()||_f())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&o_.full!==PI.full&&console.warn("The Angular Material version ("+o_.full+") does not match the Angular CDK version ("+PI.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vm),d.LFG(yk,8),d.LFG(ie))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[js],js]}),n})();function RT(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=An(e)}}}function Kf(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function MT(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=An(e)}}}function vk(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new At.xQ,this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}try{Ol="undefined"!=typeof Intl}catch(n){Ol=!1}let LT=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();class Dk{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const VT={enterDuration:225,exitDuration:150},dE=bs({passive:!0}),UT=["mousedown","touchstart"],BT=["mouseup","mouseleave","touchend","touchcancel"];class Ak{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=nr(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a=Object.assign(Object.assign({},VT),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),f=e-i.left,g=t-i.top,b=a.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=f-c+"px",C.style.top=g-c+"px",C.style.height=2*c+"px",C.style.width=2*c+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(C),window.getComputedStyle(C).getPropertyValue("opacity"),C.style.transform="scale(1)";const D=new Dk(this,C,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const R=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!R||!this._isPointerDown)&&D.fadeOut()},b),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},VT),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=nr(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(UT))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(BT),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=rb(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_m(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,dE)})})}_removeTriggerEvents(){this._triggerElement&&(UT.forEach(e=>{this._triggerElement.removeEventListener(e,this,dE)}),this._pointerUpEventsRegistered&&BT.forEach(e=>{this._triggerElement.removeEventListener(e,this,dE)}))}}const $T=new d.OlP("mat-ripple-global-options");let Jf=(()=>{class n{constructor(t,r,i,a,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new Ak(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(Vn),d.Y36($T,8),d.Y36(Yo,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),hE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[zr,yl],zr]}),n})();function KT(n){return new Yn.y(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?(0,hr.D)(t):(0,zo.c)()).subscribe(e)})}function jt(n,e){}class gE{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const kk={dialogContainer:Mb("dialogContainer",[Sl("void, exit",Dl({opacity:0,transform:"scale(0.7)"})),Sl("enter",Dl({transform:"none"})),xb("* => enter",Tl("150ms cubic-bezier(0, 0, 0.2, 1)",Dl({transform:"none",opacity:1}))),xb("* => void, * => exit",Tl("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Dl({opacity:0})))])};let l_=(()=>{class n extends vb{constructor(t,r,i,a,c,f){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=c,this._focusMonitor=f,this._animationStateChanged=new d.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=g=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(g)),this._ariaLabelledBy=c.ariaLabelledBy||null,this._document=a}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=oo(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=oo())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=oo();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(J0),d.Y36(d.sBO),d.Y36(ie,8),d.Y36(gE),d.Y36(os))},n.\u0275dir=d.lG2({type:n,viewQuery:function(t,r){if(1&t&&d.Gf(Sm,7),2&t){let i;d.iGM(i=d.CRH())&&(r._portalOutlet=i.first)}},features:[d.qOj]}),n})(),Ok=(()=>{class n extends l_{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&d.WFA("@dialogContainer.start",function(a){return r._onAnimationStart(a)})("@dialogContainer.done",function(a){return r._onAnimationDone(a)}),2&t&&(d.Ikx("id",r._id),d.uIk("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),d.d8E("@dialogContainer",r._state))},features:[d.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&d.YNc(0,jt,0,0,"ng-template",0)},directives:[Sm],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[kk.dialogContainer]}}),n})(),c_=0;class ru{constructor(e,t,r="mat-dialog-"+c_++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new At.xQ,this._afterClosed=new At.xQ,this._beforeClosed=new At.xQ,this._state=0,t._id=r,t._animationStateChanged.pipe(Er(i=>"opened"===i.state),Cs(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Er(i=>"closed"===i.state),Cs(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Er(i=>27===i.keyCode&&!this.disableClose&&!function(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(i))).subscribe(i=>{i.preventDefault(),pr(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():pr(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Er(t=>"closing"===t.state),Cs(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function pr(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const Pk=new d.OlP("MatDialogData"),YT=new d.OlP("mat-dialog-default-options"),u_=new d.OlP("mat-dialog-scroll-strategy"),QT={provide:u_,deps:[ho],useFactory:function(n){return()=>n.scrollStrategies.block()}};let JT=(()=>{class n{constructor(t,r,i,a,c,f,g,b,C){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=a,this._overlayContainer=c,this._dialogRefConstructor=g,this._dialogContainerType=b,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new At.xQ,this._afterOpenedAtThisLevel=new At.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=KT(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Hr(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){(r=function(n,e){return Object.assign(Object.assign({},e),n)}(r,this._defaultOptions||new gE)).id&&this.getDialogById(r.id);const i=this._createOverlay(r),a=this._attachDialogContainer(i,r),c=this._attachDialogContent(t,a,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.afterClosed().subscribe(()=>this._removeOpenDialog(c)),this.afterOpened.next(c),a._initializeWithAttachedContent(),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new Ib({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const a=d.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:gE,useValue:r}]}),c=new yb(this._dialogContainerType,r.viewContainerRef,a,r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,r,i,a){const c=new this._dialogRefConstructor(i,r,a.id);if(t instanceof d.Rgc)r.attachTemplatePortal(new Sd(t,null,{$implicit:a.data,dialogRef:c}));else{const f=this._createInjector(a,c,r),g=r.attachComponentPortal(new yb(t,a.viewContainerRef,f));c.componentInstance=g.instance}return c.updateSize(a.width,a.height).updatePosition(a.position),c}_createInjector(t,r,i){const a=t&&t.viewContainerRef&&t.viewContainerRef.injector,c=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!a||!a.get(Es,null,d.XFs.Optional))&&c.push({provide:Es,useValue:{value:t.direction,change:(0,wt.of)()}}),d.zs3.create({parent:a||this._injector,providers:c})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,a)=>{i?a.setAttribute("aria-hidden",i):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let a=r[i];a!==t&&"SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ho),d.Y36(d.zs3),d.Y36(void 0),d.Y36(void 0),d.Y36(zc),d.Y36(void 0),d.Y36(d.DyG),d.Y36(d.DyG),d.Y36(d.OlP))},n.\u0275dir=d.lG2({type:n}),n})(),Xf=(()=>{class n extends JT{constructor(t,r,i,a,c,f,g){super(t,r,a,f,g,c,ru,Ok,Pk)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ho),d.LFG(d.zs3),d.LFG(Lt,8),d.LFG(YT,8),d.LFG(u_),d.LFG(n,12),d.LFG(zc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Lk=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){pr(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ru,8),d.Y36(d.SBq),d.Y36(Xf))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r._onButtonClick(a)}),2&t&&d.uIk("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{type:"type",dialogResult:["mat-dialog-close","dialogResult"],ariaLabel:["aria-label","ariaLabel"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[d.TTD]}),n})(),Vk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();let h_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Xf,QT],imports:[[Px,bb,zr],zr]}),n})();const eD=["underline"],tD=["connectionContainer"],nD=["inputContainer"],Uk=["label"];function ep(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15),d._UZ(3,"div",16),d._UZ(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15),d._UZ(7,"div",16),d._UZ(8,"div",17),d.qZA(),d.BQk())}function tp(n,e){1&n&&(d.TgZ(0,"div",19),d.Hsn(1,1),d.qZA())}function Bk(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function jk(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function Hk(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function rD(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){return d.CHM(t),d.oxw().updateOutlineGap()}),d.YNc(2,Bk,4,1,"ng-container",12),d.YNc(3,jk,1,0,"ng-content",12),d.YNc(4,Hk,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function iD(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function sD(n,e){if(1&n&&(d.TgZ(0,"div",25,26),d._UZ(2,"span",27),d.qZA()),2&n){const t=d.oxw();d.xp6(2),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function $k(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function oD(n,e){if(1&n&&(d.TgZ(0,"div",31),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function zk(n,e){if(1&n&&(d.TgZ(0,"div",28),d.YNc(1,oD,2,2,"div",29),d.Hsn(2,6),d._UZ(3,"div",30),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const Gk=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],vB=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Wk=new d.OlP("MatError"),aD={transitionMessages:Mb("transitionMessages",[Sl("enter",Dl({opacity:1,transform:"translateY(0%)"})),xb("void => enter",[Dl({opacity:0,transform:"translateY(-5px)"}),Tl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const lD=new d.OlP("MatHint");let mE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),Kk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const cD=new d.OlP("MatPrefix"),uD=new d.OlP("MatSuffix");let iu=0;const Qk=Kf(class{constructor(n){this._elementRef=n}},"primary"),dD=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),hD=new d.OlP("MatFormField");let fD=(()=>{class n extends Qk{constructor(t,r,i,a,c,f,g,b){super(t),this._changeDetectorRef=r,this._dir=a,this._defaults=c,this._platform=f,this._ngZone=g,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new At.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+iu++,this._labelId="mat-form-field-label-"+iu++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==b,this.appearance=c&&c.appearance?c.appearance:"legacy",this._hideRequiredMarker=!(!c||null==c.hideRequiredMarker)&&c.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=An(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Hr(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(dr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dr(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,wd.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Hr(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Hr(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(dr(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,dl(this._label.nativeElement,"transitionend").pipe(Cs(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,i=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&t&&t.children.length&&t.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let r=0,i=0;const a=this._connectionContainerRef.nativeElement,c=a.querySelectorAll(".mat-form-field-outline-start"),f=a.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const g=a.getBoundingClientRect();if(0===g.width&&0===g.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const b=this._getStartEnd(g),C=t.children,D=this._getStartEnd(C[0].getBoundingClientRect());let R=0;for(let x=0;x<C.length;x++)R+=C[x].offsetWidth;r=Math.abs(D-b)-5,i=R>0?.75*R+10:0}for(let g=0;g<c.length;g++)c[g].style.width=`${r}px`;for(let g=0;g<f.length;g++)f[g].style.width=`${i}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(Es,8),d.Y36(dD,8),d.Y36(Vn),d.Y36(d.R0b),d.Y36(Yo,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,Ld,5),d.Suo(i,Ld,7),d.Suo(i,mE,5),d.Suo(i,mE,7),d.Suo(i,Kk,5),d.Suo(i,Wk,5),d.Suo(i,lD,5),d.Suo(i,cD,5),d.Suo(i,uD,5)),2&t){let a;d.iGM(a=d.CRH())&&(r._controlNonStatic=a.first),d.iGM(a=d.CRH())&&(r._controlStatic=a.first),d.iGM(a=d.CRH())&&(r._labelChildNonStatic=a.first),d.iGM(a=d.CRH())&&(r._labelChildStatic=a.first),d.iGM(a=d.CRH())&&(r._placeholderChild=a.first),d.iGM(a=d.CRH())&&(r._errorChildren=a),d.iGM(a=d.CRH())&&(r._hintChildren=a),d.iGM(a=d.CRH())&&(r._prefixChildren=a),d.iGM(a=d.CRH())&&(r._suffixChildren=a)}},viewQuery:function(t,r){if(1&t&&(d.Gf(eD,5),d.Gf(tD,7),d.Gf(nD,5),d.Gf(Uk,5)),2&t){let i;d.iGM(i=d.CRH())&&(r.underlineRef=i.first),d.iGM(i=d.CRH())&&(r._connectionContainerRef=i.first),d.iGM(i=d.CRH())&&(r._inputContainerRef=i.first),d.iGM(i=d.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:hD,useExisting:n}]),d.qOj],ngContentSelectors:vB,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(d.F$t(Gk),d.TgZ(0,"div",0),d.TgZ(1,"div",1,2),d.NdJ("click",function(a){return r._control.onContainerClick&&r._control.onContainerClick(a)}),d.YNc(3,ep,9,0,"ng-container",3),d.YNc(4,tp,2,0,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,rD,5,16,"label",8),d.qZA(),d.qZA(),d.YNc(10,iD,2,0,"div",9),d.qZA(),d.YNc(11,sD,3,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,$k,2,1,"div",12),d.YNc(14,zk,5,2,"div",13),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==r.appearance),d.xp6(1),d.Q6J("ngIf",r._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",r._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",r._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=r.appearance),d.xp6(1),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},directives:[ms,ns,Jr,HM],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[aD.transitionMessages]},changeDetection:0}),n})(),pD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Us,zr,W0],zr]}),n})();const f_=bs({passive:!0});let gD=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return zo.E;const r=nr(t),i=this._monitoredElements.get(r);if(i)return i.subject;const a=new At.xQ,c="cdk-text-field-autofilled",f=g=>{"cdk-text-field-autofill-start"!==g.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===g.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>a.next({target:g.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>a.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",f,f_),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:a,unlisten:()=>{r.removeEventListener("animationstart",f,f_)}}),a}stopMonitoring(t){const r=nr(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vn),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Vn),d.LFG(d.R0b))},token:n,providedIn:"root"}),n})(),_D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[yl]]}),n})();var Xk=O(1555);function yD(...n){if(1===n.length){const e=n[0];if((0,Ea.k)(e))return Vd(e,null);if((0,Xk.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Vd(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Vd(n=1===n.length&&(0,Ea.k)(n[0])?n[0]:n,null).pipe((0,Bt.U)(t=>e(...t)))}return Vd(n,null)}function Vd(n,e){return new Yn.y(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let a=0,c=0;for(let f=0;f<r;f++){const g=(0,hr.D)(n[f]);let b=!1;t.add(g.subscribe({next:C=>{b||(b=!0,c++),i[f]=C},error:C=>t.error(C),complete:()=>{a++,(a===r||!b)&&(c===r&&t.next(e?e.reduce((C,D,R)=>(C[D]=i[R],C),{}):i),t.complete())}}))}})}let vD=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Nl=(()=>{class n extends vD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Zo=new d.OlP("NgValueAccessor"),tO={provide:Zo,useExisting:(0,d.Gpc)(()=>p_),multi:!0},rO=new d.OlP("CompositionEventMode");let p_=(()=>{class n extends vD{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(rO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([tO]),d.qOj]}),n})();const _i=new d.OlP("NgValidators"),Ll=new d.OlP("NgAsyncValidators");function y_(n){return null!=n}function TD(n){const e=(0,d.QGY)(n)?(0,hr.D)(n):n;return(0,d.CqO)(e),e}function bE(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function DD(n,e){return e.map(t=>t(n))}function EE(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function AD(n){return null!=n?function(n){if(!n)return null;const e=n.filter(y_);return 0==e.length?null:function(t){return bE(DD(t,e))}}(EE(n)):null}function Ul(n){return null!=n?function(n){if(!n)return null;const e=n.filter(y_);return 0==e.length?null:function(t){return yD(DD(t,e).map(TD)).pipe((0,Bt.U)(bE))}}(EE(n)):null}function oO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function v_(n){return n._rawValidators}function rp(n){return n._rawAsyncValidators}function CE(n){return n?Array.isArray(n)?n:[n]:[]}function Ua(n,e){return Array.isArray(n)?n.includes(e):n===e}function MD(n,e){const t=CE(e);return CE(n).forEach(i=>{Ua(t,i)||t.push(i)}),t}function aO(n,e){return CE(e).filter(t=>!Ua(n,t))}let xD=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=AD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ul(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})(),gr=(()=>{class n extends xD{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();class Qo extends xD{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let kD=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qo,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})();function Ud(n,e){w_(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ap(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ap(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function op(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),su(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function E_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function w_(n,e){const t=v_(n);null!==e.validator?n.setValidators(oO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=rp(n);null!==e.asyncValidator?n.setAsyncValidators(oO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();E_(e._rawValidators,i),E_(e._rawAsyncValidators,i)}function su(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=v_(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=rp(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return E_(e._rawValidators,r),E_(e._rawAsyncValidators,r),t}function ap(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Bd(n,e){w_(n,e)}function FD(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function I_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lp="VALID",T_="INVALID",jd="PENDING",D_="DISABLED";function ou(n){return(Hd(n)?n.validators:n)||null}function LD(n){return Array.isArray(n)?AD(n):n||null}function AE(n,e){return(Hd(e)?e.asyncValidators:n)||null}function VD(n){return Array.isArray(n)?Ul(n):n||null}function Hd(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ba{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=LD(this._rawValidators),this._composedAsyncValidatorFn=VD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lp}get invalid(){return this.status===T_}get pending(){return this.status==jd}get disabled(){return this.status===D_}get enabled(){return this.status!==D_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=LD(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=VD(e)}addValidators(e){this.setValidators(MD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aO(e,this._rawAsyncValidators))}hasValidator(e){return Ua(this._rawValidators,e)}hasAsyncValidator(e){return Ua(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=D_,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lp,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lp||this.status===jd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?D_:lp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jd,this._hasOwnPendingAsyncValidator=!0;const t=TD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof RE?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof OB&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?D_:this.errors?T_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jd)?jd:this._anyControlsHaveStatus(T_)?T_:lp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hd(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class cp extends Ba{constructor(e=null,t,r){super(ou(t),AE(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){I_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){I_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class RE extends Ba{constructor(e,t,r){super(ou(t),AE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof cp?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class OB extends Ba{constructor(e,t,r){super(ou(t),AE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof cp?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const _O={provide:gr,useExisting:(0,d.Gpc)(()=>S_)},up=(()=>Promise.resolve(null))();let S_=(()=>{class n extends gr{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new d.vpe,this.form=new RE({},AD(t),Ul(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){up.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ud(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){up.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),I_(this._directives,t)})}addFormGroup(t){up.then(()=>{const r=this._findContainer(t.path),i=new RE({});Bd(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){up.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){up.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,FD(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_i,10),d.Y36(Ll,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([_O]),d.qOj]}),n})();const jD={provide:Qo,useExisting:(0,d.Gpc)(()=>$d)},kE=(()=>Promise.resolve(null))();let $d=(()=>{class n extends Qo{constructor(t,r,i,a){super(),this.control=new cp,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===p_?t=a:function(n){return Object.getPrototypeOf(n.constructor)===Nl}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ud(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){kE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;kE.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gr,9),d.Y36(_i,10),d.Y36(Ll,10),d.Y36(Zo,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([jD]),d.qOj,d.TTD]}),n})(),lu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const HD={provide:gr,useExisting:(0,d.Gpc)(()=>fp)};let fp=(()=>{class n extends gr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(su(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ud(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){op(t.control||null,t,!1),I_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,FD(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(op(r||null,t),i instanceof cp&&(Ud(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Bd(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return su(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){w_(this.form,this),this._oldForm&&su(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_i,10),d.Y36(Ll,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([HD]),d.qOj,d.TTD]}),n})(),xO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[lu]]}),n})(),kO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[xO]}),n})();const OO=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),PO=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let NO=0;const FO=vk(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let BE=(()=>{class n extends FO{constructor(t,r,i,a,c,f,g,b,C,D){super(f,a,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=b,this._formField=D,this._uid="mat-input-"+NO++,this.focused=!1,this.stateChanges=new At.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>Ia().has(B));const R=this._elementRef.nativeElement,x=R.nodeName.toLowerCase();this._inputValueAccessor=g||R,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",B=>{const ae=B.target;!ae.value&&0===ae.selectionStart&&0===ae.selectionEnd&&(ae.setSelectionRange(1,1),ae.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===x,this._isTextarea="textarea"===x,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=An(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=An(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Ia().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=An(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,r;const i=(null===(r=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===r?void 0:r.call(t))?null:this.placeholder;if(i!==this._previousPlaceholder){const a=this._elementRef.nativeElement;this._previousPlaceholder=i,i?a.setAttribute("placeholder",i):a.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){PO.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Vn),d.Y36(Qo,10),d.Y36(S_,8),d.Y36(fp,8),d.Y36(LT),d.Y36(OO,10),d.Y36(gD),d.Y36(d.R0b),d.Y36(hD,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(d.Ikx("disabled",r.disabled)("required",r.required),d.uIk("id",r.id)("data-placeholder",r.placeholder)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),d.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[d._Bn([{provide:Ld,useExisting:n}]),d.qOj,d.TTD]}),n})(),LO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[LT],imports:[[_D,pD,zr],_D,pD]}),n})();const YD=["mat-button",""],jE=["*"],zB=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],UO=Kf(RT(MT(class{constructor(n){this._elementRef=n}})));let HE=(()=>{class n extends UO{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of zB)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(os),d.Y36(Yo,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&d.Gf(Jf,5),2&t){let i;d.iGM(i=d.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:YD,ngContentSelectors:jE,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1),d._UZ(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),d.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Jf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),BO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[hE,zr],zr]}),n})();var jO=O(205);function Hl(n){return function(t){const r=new yp(n),i=t.lift(r);return r.caught=i}}class yp{constructor(e){this.selector=e}call(e,t){return t.subscribe(new HO(e,this.selector,this.caught))}}class HO extends Wi.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const r=new Wi.IY(this);this.add(r);const i=(0,Wi.ft)(t,r);i!==r&&this.add(i)}}}function ZD(n){return e=>e.lift(new QD(n))}class QD{constructor(e){this.callback=e}call(e,t){return t.subscribe(new vp(e,this.callback))}}class vp extends mi.L{constructor(e,t){super(e),this.add(new li.w(t))}}var WB=O(8819),yi=O(9773);function qd(n,e){return(0,yi.zg)(n,e,1)}class JD{}class ja{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ja?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ja;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ja?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===a.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class $O{encodeKey(e){return WO(e)}encodeValue(e){return WO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zO=/%(\d[a-f0-9])/gi,GO={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function WO(n){return encodeURIComponent(n).replace(zO,(e,t)=>{var r;return null!==(r=GO[t])&&void 0!==r?r:e})}function qO(n){return`${n}`}class uu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $O,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(c)||[];g.push(f),t.set(c,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new uu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qO(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(qO(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class KO{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function nS(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function rS(n){return"undefined"!=typeof Blob&&n instanceof Blob}function iS(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Kd{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ja),this.context||(this.context=new KO),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new uu,this.urlWithParams=t}serializeBody(){return null===this.body?null:nS(this.body)||rS(this.body)||iS(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof uu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||iS(this.body)?null:rS(this.body)?this.body.type||null:nS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof uu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,C=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((R,x)=>R.set(x,e.setHeaders[x]),b)),e.setParams&&(C=Object.keys(e.setParams).reduce((R,x)=>R.set(x,e.setParams[x]),C)),new Kd(r,i,c,{params:C,headers:b,context:D,reportProgress:g,responseType:a,withCredentials:f})}}var Rr=(()=>((Rr=Rr||{})[Rr.Sent=0]="Sent",Rr[Rr.UploadProgress=1]="UploadProgress",Rr[Rr.ResponseHeader=2]="ResponseHeader",Rr[Rr.DownloadProgress=3]="DownloadProgress",Rr[Rr.Response=4]="Response",Rr[Rr.User=5]="User",Rr))();class ni extends class{constructor(e,t=200,r="OK"){this.headers=e.headers||new ja,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Rr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ni({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Ts(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Yd=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Kd)a=t;else{let g,b;g=i.headers instanceof ja?i.headers:new ja(i.headers),i.params&&(b=i.params instanceof uu?i.params:new uu({fromObject:i.params})),a=new Kd(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,wt.of)(a).pipe(qd(g=>this.handler.handle(g)));if(t instanceof Kd||"events"===i.observe)return c;const f=c.pipe(Er(g=>g instanceof ni));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,Bt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,Bt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,Bt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));case"json":default:return f.pipe((0,Bt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new uu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ts(i,r))}post(t,r,i={}){return this.request("POST",t,Ts(i,r))}put(t,r,i={}){return this.request("PUT",t,Ts(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(JD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const rP=["*"];function dS(n){return Error(`Unable to find icon with the name "${n}"`)}function hS(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function fS(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class vo{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let bp=(()=>{class n{constructor(t,r,i,a){this._httpClient=t,this._sanitizer=r,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,a){return this._addSvgIconConfig(t,r,new vo(i,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,a){const c=this._sanitizer.sanitize(d.q3G.HTML,i);if(!c)throw fS(i);return this._addSvgIconConfig(t,r,new vo("",c,a))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new vo(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const a=this._sanitizer.sanitize(d.q3G.HTML,r);if(!a)throw fS(r);return this._addSvgIconSetConfig(t,new vo("",a,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,t);if(!r)throw hS(t);const i=this._cachedIconsByUrl.get(r);return i?(0,wt.of)(Ep(i)):this._loadSvgIconFromConfig(new vo(t,null)).pipe((0,Ri.b)(a=>this._cachedIconsByUrl.set(r,a)),(0,Bt.U)(a=>Ep(a)))}getNamedSvgIcon(t,r=""){const i=WE(r,t);let a=this._svgIconConfigs.get(i);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(r,t),a)return this._svgIconConfigs.set(i,a),this._getSvgFromConfig(a);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(t,c):(0,jO._)(dS(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,wt.of)(Ep(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Bt.U)(r=>Ep(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?(0,wt.of)(i):yD(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Hl(f=>{const b=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,c.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(b)),(0,wt.of)(null)})))).pipe((0,Bt.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,r);if(!c)throw dS(t);return c}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const a=r[i];if(a.svgText&&a.svgText.indexOf(t)>-1){const c=this._svgElementFromConfig(a),f=this._extractSvgIconFromSet(c,t,a.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Ri.b)(r=>t.svgText=r),(0,Bt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,wt.of)(null):this._fetchIcon(t).pipe((0,Ri.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const a=t.querySelector(`[id="${r}"]`);if(!a)return null;const c=a.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const f=this._svgElementFromString("<svg></svg>");return f.appendChild(c),this._setSvgAttributes(f,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString("<svg></svg>"),i=t.attributes;for(let a=0;a<i.length;a++){const{name:c,value:f}=i[a];"id"!==c&&r.setAttribute(c,f)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[a].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:a}=t,c=null!==(r=null==a?void 0:a.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const f=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,i);if(!f)throw hS(i);const g=this._inProgressUrlFetches.get(f);if(g)return g;const b=this._httpClient.get(f,{responseType:"text",withCredentials:c}).pipe(ZD(()=>this._inProgressUrlFetches.delete(f)),(0,WB.B)());return this._inProgressUrlFetches.set(f,b),b}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(WE(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const a=this._resolvers[i](r,t);if(a)return gS(a)?new vo(a.url,null,a.options):new vo(a,null)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yd,8),d.LFG(Oo),d.LFG(ie,8),d.LFG(d.qLn))},n.\u0275prov=d.Yz7({factory:function(){return new n(d.LFG(Yd,8),d.LFG(Oo),d.LFG(ie,8),d.LFG(d.qLn))},token:n,providedIn:"root"}),n})();function Ep(n){return n.cloneNode(!0)}function WE(n,e){return n+":"+e}function gS(n){return!(!n.url||!n.options)}const oP=Kf(class{constructor(n){this._elementRef=n}}),mS=new d.OlP("mat-icon-location",{providedIn:"root",factory:function(){const n=(0,d.f3M)(ie),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),_S=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],cP=_S.map(n=>`[${n}]`).join(", "),wp=/^url\(['"]?#(.*?)['"]?\)$/;let Zd=(()=>{class n extends oP{constructor(t,r,i,a,c){super(t),this._iconRegistry=r,this._location=a,this._errorHandler=c,this._inline=!1,this._currentIconFetch=li.w.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=An(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=t.querySelectorAll("style");for(let a=0;a<r.length;a++)r[a].textContent+=" ";const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&t.removeChild(i)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,a)=>{i.forEach(c=>{a.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(cP),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<r.length;a++)_S.forEach(c=>{const f=r[a],g=f.getAttribute(c),b=g?g.match(wp):null;if(b){let C=i.get(f);C||(C=[],i.set(f,C)),C.push({name:c,value:b[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Cs(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${a.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(bp),d.$8M("aria-hidden"),d.Y36(mS),d.Y36(d.qLn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:rP,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),uP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[zr],zr]}),n})();const qE=function(n){return{task:n,delete:!0}};function Jo(n,e){if(1&n&&(d.TgZ(0,"button",6),d.TgZ(1,"mat-icon"),d._uU(2,"delete"),d.qZA(),d.qZA()),2&n){const t=d.oxw();d.Q6J("mat-dialog-close",d.VKq(1,qE,t.data.task))}}const dP=function(n){return{task:n}};let Cp=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.backupTask=Object.assign({},this.data.task)}cancel(){this.data.task.title=this.backupTask.title,this.data.task.description=this.backupTask.description,this.dialogRef.close(this.data)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ru),d.Y36(Pk))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-task-dialog"]],decls:14,vars:6,consts:[["matInput","","cdkFocusInitial","",3,"ngModel","ngModelChange"],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","",3,"click"],["mat-fab","","color","primary","aria-label","Delete",3,"mat-dialog-close",4,"ngIf"],["mat-fab","","color","primary","aria-label","Delete",3,"mat-dialog-close"]],template:function(t,r){1&t&&(d.TgZ(0,"mat-form-field"),d.TgZ(1,"mat-label"),d._uU(2,"Title"),d.qZA(),d.TgZ(3,"input",0),d.NdJ("ngModelChange",function(a){return r.data.task.title=a}),d.qZA(),d.qZA(),d.TgZ(4,"mat-form-field"),d.TgZ(5,"mat-label"),d._uU(6,"Description"),d.qZA(),d.TgZ(7,"textarea",1),d.NdJ("ngModelChange",function(a){return r.data.task.description=a}),d.qZA(),d.qZA(),d.TgZ(8,"div",2),d.TgZ(9,"button",3),d._uU(10,"OK"),d.qZA(),d.TgZ(11,"button",4),d.NdJ("click",function(){return r.cancel()}),d._uU(12,"Cancel"),d.qZA(),d.YNc(13,Jo,3,3,"button",5),d.qZA()),2&t&&(d.xp6(3),d.Q6J("ngModel",r.data.task.title),d.xp6(4),d.Q6J("ngModel",r.data.task.description),d.xp6(2),d.Q6J("mat-dialog-close",d.VKq(4,dP,r.data.task)),d.xp6(4),d.Q6J("ngIf",r.data.enableDelete))},directives:[fD,mE,BE,p_,kD,$d,Vk,HE,Lk,ms,Zd],styles:[""]}),n})();var at=O(7667);function Ip(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new t2(n,e,t))}}class t2{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new KE(e,this.accumulator,this.seed,this.hasSeed))}}class KE extends mi.L{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}var yt,Ds=O(8939),YE=(O(4828),O(3394)),ke=O(8239),kn=O(8026),zl=O(3910),Ws=O(5422),se=O(3854),yS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bo={},N_=N_||{},rn=yS||self;function Tp(){}function ZE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var QE="closure_uid_"+(1e9*Math.random()>>>0),bS=0;function fP(n,e,t){return n.call.apply(n.bind,arguments)}function n2(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function On(n,e,t){return(On=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fP:n2).apply(null,arguments)}function Ha(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function vi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Gl(){this.s=this.s,this.o=this.o}var Dp={};Gl.prototype.s=!1,Gl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,QE)&&n[QE]||(n[QE]=++bS)}(this);delete Dp[n]}},Gl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ES=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},F_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function JE(n){return Array.prototype.concat.apply([],arguments)}function XE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function L_(n){return/^[\s\xa0]*$/.test(n)}var ci,V_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xi(n,e){return-1!=n.indexOf(e)}function U_(n,e){return n<e?-1:n>e?1:0}e:{var B_=rn.navigator;if(B_){var gP=B_.userAgent;if(gP){ci=gP;break e}}ci=""}function j_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wS(n){const e={};for(const t in n)e[t]=n[t];return e}var ew="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sp(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<ew.length;a++)t=ew[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function H_(n){return H_[" "](n),n}H_[" "]=Tp;var $_,n,tw=xi(ci,"Opera"),Wl=xi(ci,"Trident")||xi(ci,"MSIE"),CS=xi(ci,"Edge"),nw=CS||Wl,rw=xi(ci,"Gecko")&&!(xi(ci.toLowerCase(),"webkit")&&!xi(ci,"Edge"))&&!(xi(ci,"Trident")||xi(ci,"MSIE"))&&!xi(ci,"Edge"),IS=xi(ci.toLowerCase(),"webkit")&&!xi(ci,"Edge");function iw(){var n=rn.document;return n?n.documentMode:void 0}e:{var z_="",G_=(n=ci,rw?/rv:([^\);]+)(\)|;)/.exec(n):CS?/Edge\/([\d\.]+)/.exec(n):Wl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):IS?/WebKit\/(\S+)/.exec(n):tw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(G_&&(z_=G_?G_[1]:""),Wl){var sw=iw();if(null!=sw&&sw>parseFloat(z_)){$_=String(sw);break e}}$_=z_}var _P={};function TS(){return e=_P,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=V_(String($_)).split("."),t=V_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=U_(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||U_(0==i[2].length,0==a[2].length)||U_(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n}();var e}var DS=rn.document&&Wl&&(iw()||parseInt($_,10))||void 0,SS=function(){if(!rn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{rn.addEventListener("test",Tp,e),rn.removeEventListener("test",Tp,e)}catch(t){}return n}();function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ap(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rw){e:{try{H_(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yP[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ap.Z.h.call(this)}}bi.prototype.h=function(){this.defaultPrevented=!0},vi(Ap,bi);var yP={2:"touch",3:"pen",4:"mouse"};Ap.prototype.h=function(){Ap.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rp="closure_listenable_"+(1e6*Math.random()|0),AS=0;function s2(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++AS,this.ca=this.fa=!1}function lw(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function cw(n){this.src=n,this.g={},this.h=0}function RS(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ES(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(lw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function MS(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}cw.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=MS(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new s2(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var xS="closure_lm_"+(1e6*Math.random()|0),kS={};function vP(n,e,t,r,i){if(r&&r.once)return EP(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)vP(n,e[a],t,r,i);return null}return t=uw(t),n&&n[Rp]?n.N(e,t,Qd(r)?!!r.capture:!!r,i):bP(n,e,t,!1,r,i)}function bP(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Qd(i)?!!i.capture:!!i,f=PS(n);if(f||(n[xS]=f=new cw(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function(){var e=a2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)SS||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(CP(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function EP(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)EP(n,e[a],t,r,i);return null}return t=uw(t),n&&n[Rp]?n.O(e,t,Qd(r)?!!r.capture:!!r,i):bP(n,e,t,!0,r,i)}function wP(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)wP(n,e[a],t,r,i);else r=Qd(r)?!!r.capture:!!r,t=uw(t),n&&n[Rp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=MS(a=n.g[e],t,r,i))&&(lw(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=PS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=MS(e,t,r,i)),(t=-1<n?e[n]:null)&&OS(t))}function OS(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rp])RS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(CP(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=PS(e))?(RS(t,n),0==t.h&&(t.src=null,e[xS]=null)):lw(n)}}}function CP(n){return n in kS?kS[n]:kS[n]="on"+n}function a2(n,e){if(n.ca)n=!0;else{e=new Ap(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&OS(n),n=t.call(r,e)}return n}function PS(n){return(n=n[xS])instanceof cw?n:null}var NS="__closure_events_fn_"+(1e9*Math.random()>>>0);function uw(n){return"function"==typeof n?n:(n[NS]||(n[NS]=function(e){return n.handleEvent(e)}),n[NS])}function ui(){Gl.call(this),this.i=new cw(this),this.P=this,this.I=null}function Ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var i=e;Sp(e=new bi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=dw(c,r,!0,e)&&i}if(i=dw(c=e.g=n,r,!0,e)&&i,i=dw(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=dw(c=e.g=t[a],r,!1,e)&&i}function dw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var f=c.listener,g=c.ia||c.src;c.fa&&RS(n.i,c),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}vi(ui,Gl),ui.prototype[Rp]=!0,ui.prototype.removeEventListener=function(n,e,t,r){wP(this,n,e,t,r)},ui.prototype.M=function(){if(ui.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)lw(t[r]);delete n.g[e],n.h--}}this.I=null},ui.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var FS=rn.JSON.stringify;function l2(){var n=DP;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var US,LS=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new TP,n=>n.reset());class TP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function c2(n){rn.setTimeout(()=>{throw n},0)}function VS(n,e){US||function(){var n=rn.Promise.resolve(void 0);US=function(){n.then(SP)}}(),hw||(US(),hw=!0),DP.add(n,e)}var hw=!1,DP=new class{constructor(){this.h=this.g=null}add(e,t){const r=LS.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function SP(){for(var n;n=l2();){try{n.h.call(n.g)}catch(t){c2(t)}var e=LS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hw=!1}function Jd(n,e){ui.call(this),this.h=n||1,this.g=e||rn,this.j=On(this.kb,this),this.l=Date.now()}function ql(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function W_(n,e,t){if("function"==typeof n)t&&(n=On(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=On(n.handleEvent,n)}return 2147483647<Number(e)?-1:rn.setTimeout(n,e||0)}function BS(n){n.g=W_(()=>{n.g=null,n.i&&(n.i=!1,BS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vi(Jd,ui),(yt=Jd.prototype).da=!1,yt.S=null,yt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ei(this,"tick"),this.da&&(ql(this),this.start()))}},yt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){Jd.Z.M.call(this),ql(this),delete this.g};class AP extends Gl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:BS(this)}M(){super.M(),this.g&&(rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hu(n){Gl.call(this),this.h=n,this.g={}}vi(hu,Gl);var fw=[];function pw(n,e,t,r){Array.isArray(t)||(t&&(fw[0]=t.toString()),t=fw);for(var i=0;i<t.length;i++){var a=vP(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function gw(n){j_(n.g,function(e,t){this.g.hasOwnProperty(t)&&OS(e)},n),n.g={}}function mw(){this.g=!0}function fu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return FS(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}hu.prototype.M=function(){hu.Z.M.call(this),gw(this)},hu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mw.prototype.Aa=function(){this.g=!1},mw.prototype.info=function(){};var Xd={},HS=null;function _w(){return HS=HS||new ui}function Mp(n){bi.call(this,Xd.Ma,n)}function xp(n){const e=_w();Ei(e,new Mp(e,n))}function RP(n,e){bi.call(this,Xd.STAT_EVENT,n),this.stat=e}function cs(n){const e=_w();Ei(e,new RP(e,n))}function K_(n,e){bi.call(this,Xd.Na,n),this.size=e}function kp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return rn.setTimeout(function(){n()},e)}Xd.Ma="serverreachability",vi(Mp,bi),Xd.STAT_EVENT="statevent",vi(RP,bi),Xd.Na="timingevent",vi(K_,bi);var yw={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},MP={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vw(){}function bw(){}vw.prototype.h=null;var Ew,Op={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $S(){bi.call(this,"d")}function zS(){bi.call(this,"c")}function Kl(){}function Pp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new hu(this),this.P=kP,this.W=new Jd(n=nw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new GS}function GS(){this.i=null,this.g="",this.h=!1}vi($S,bi),vi(zS,bi),vi(Kl,vw),Kl.prototype.g=function(){return new XMLHttpRequest},Kl.prototype.i=function(){return{}},Ew=new Kl;var kP=45e3,Np={},Y_={};function Yi(n,e,t){n.K=1,n.v=ty($a(e)),n.s=t,n.U=!0,WS(n,null)}function WS(n,e){n.F=Date.now(),pu(n),n.A=$a(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ny(t.h,"t",r),n.C=0,t=n.l.H,n.h=new GS,n.g=fA(n.l,t?e:null,!n.s),0<n.O&&(n.L=new AP(On(n.Ia,n,n.g),n.O)),pw(n.V,n.g,"readystatechange",n.gb),e=n.H?wS(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xp(1),function(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),g=0;g<f.length;g++){var b=f[g].split("=");if(1<b.length){var C=b[0];b=b[1];var D=C.split("_");c=2<=D.length&&"type"==D[1]?c+(C+"=")+b+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Z_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function qS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=OP(n,t),i==Y_){4==e&&(n.o=4,cs(14),r=!1),fu(n.j,n.m,null,"[Incomplete Response]");break}if(i==Np){n.o=4,cs(15),fu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}fu(n.j,n.m,i,null),Q_(n,i)}Z_(n)&&i!=Y_&&i!=Np&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nw(e),e.L=!0,cs(11))):(fu(n.j,n.m,t,"[Invalid Chunked Response]"),Yl(n),Lp(n))}function OP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Y_:(t=Number(e.substring(t,r)),isNaN(t)?Np:(r+=1)+t>e.length?Y_:(e=e.substr(r,t),n.C=r+t,e))}function pu(n){n.Y=Date.now()+n.P,ww(n,n.P)}function ww(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kp(On(n.eb,n),e)}function Fp(n){n.B&&(rn.clearTimeout(n.B),n.B=null)}function Lp(n){0==n.l.G||n.I||WP(n.l,n)}function Yl(n){Fp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ql(n.W),gw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Q_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ry(t.i,n)))if(t.I=n.N,!n.J&&ry(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=kp(On(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;uy(t),cy(t)}cA(t),cs(18)}if(1>=Aw(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else yu(t,11)}else if((n.J||t.g==n)&&uy(t),!L_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const C=b[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=b[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const R=b[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const x=n.g;if(x){const B=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var a=r.i;!a.g&&(xi(B,"spdy")||xi(B,"quic")||xi(B,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Rw(a,a.h),a.h=null))}if(r.D){const ae=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.sa=ae,_r(r.F,r.D,ae))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=hA(r,r.H?r.la:null,r.W),c.J){QS(r.i,c);var f=c,g=r.K;g&&f.setTimeout(g),f.B&&(Fp(f),pu(f)),r.g=c}else lA(r);0<t.l.length&&Pw(t)}else"stop"!=b[0]&&"close"!=b[0]||yu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?yu(t,7):rh(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}xp(4)}catch(b){}}function Cw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ZE(n)||"string"==typeof n)F_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ZE(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ZE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Zl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Zl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function J_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ql(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Ql(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Ql(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(yt=Pp.prototype).setTimeout=function(n){this.P=n},yt.gb=function(n){n=n.target;const e=this.L;e&&3==Xo(n)?e.l():this.Ia(n)},yt.Ia=function(n){try{if(n==this.g)e:{const C=Xo(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||nw||this.g&&(this.h.h||this.g.ga()||ri(this.g)))){this.I||4!=C||7==e||xp(8==e||0>=D?3:2),Fp(this);var t=this.g.ba();this.N=t;t:if(Z_(this)){var r=ri(this.g);n="";var i=r.length,a=4==Xo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yl(this),Lp(this);var c="";break t}this.h.i=new rn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L_(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,cs(12),Yl(this),Lp(this);break e}fu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Q_(this,t)}this.U?(qS(this,C,c),nw&&this.i&&3==C&&(pw(this.V,this.W,"tick",this.fb),this.W.start())):(fu(this.j,this.m,c,null),Q_(this,c)),4==C&&Yl(this),this.i&&!this.I&&(4==C?WP(this.l,this):(this.i=!1,pu(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,cs(12)):(this.o=0,cs(13)),Yl(this),Lp(this)}}}catch(C){}},yt.fb=function(){if(this.g){var n=Xo(this.g),e=this.g.ga();this.C<e.length&&(Fp(this),qS(this,n,e),this.i&&4!=n&&pu(this))}},yt.cancel=function(){this.I=!0,Yl(this)},yt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xp(3),cs(17)),Yl(this),this.o=2,Lp(this)):ww(this,this.Y-n)},(yt=Zl.prototype).R=function(){J_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},yt.T=function(){return J_(this),this.g.concat()},yt.get=function(n,e){return Ql(this.h,n)?this.h[n]:e},yt.set=function(n,e){Ql(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},yt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var X_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wi(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wi){this.g=void 0!==e?e:n.g,Iw(this,n.j),this.s=n.s,ey(this,n.i),Tw(this,n.m),this.l=n.l,e=n.h;var t=new Up;t.i=e.i,e.g&&(t.g=new Zl(e.g),t.h=e.h),KS(this,t),this.o=n.o}else n&&(t=String(n).match(X_))?(this.g=!!e,Iw(this,t[1]||"",!0),this.s=eh(t[2]||""),ey(this,t[3]||"",!0),Tw(this,t[4]),this.l=eh(t[5]||"",!0),KS(this,t[6]||"",!0),this.o=eh(t[7]||"")):(this.g=!!e,this.h=new Up(null,this.g))}function $a(n){return new wi(n)}function Iw(n,e,t){n.j=t?eh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ey(n,e,t){n.i=t?eh(e,!0):e}function Tw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function KS(n,e,t){e instanceof Up?(n.h=e,function(n,e){e&&!n.j&&(Jl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Sw(this,r),ny(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Vp(e,YS)),n.h=new Up(e,n.g))}function _r(n,e,t){n.h.set(e,t)}function ty(n){return _r(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function eh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,LP),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function LP(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wi.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vp(e,Dw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vp(e,Dw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vp(t,"/"==t.charAt(0)?p2:VP,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vp(t,ZS)),n.join("")};var Dw=/[#\/\?@]/g,VP=/[#\?:]/g,p2=/[#\?]/g,YS=/[#\?@]/g,ZS=/#/g;function Up(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Jl(n){n.g||(n.g=new Zl,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Sw(n,e){Jl(n),e=gu(n,e),Ql(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ql((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&J_(n)))}function th(n,e){return Jl(n),e=gu(n,e),Ql(n.g.h,e)}function ny(n,e,t){Sw(n,e),0<t.length&&(n.i=null,n.g.set(gu(n,e),XE(t)),n.h+=t.length)}function gu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jP(n){this.l=n||g2,n=rn.PerformanceNavigationTiming?0<(n=rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(rn.g&&rn.g.Ea&&rn.g.Ea()&&rn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=Up.prototype).add=function(n,e){Jl(this),this.i=null,n=gu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){Jl(this),this.g.forEach(function(t,r){F_(t,function(i){n.call(e,i,r,this)},this)},this)},yt.T=function(){Jl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},yt.R=function(n){Jl(this);var e=[];if("string"==typeof n)th(this,n)&&(e=JE(e,this.g.get(gu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=JE(e,n[t])}return e},yt.set=function(n,e){return Jl(this),this.i=null,th(this,n=gu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var g2=10;function HP(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Aw(n){return n.h?1:n.g?n.g.size:0}function ry(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rw(n,e){n.g?n.g.add(e):n.h=e}function QS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JS(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return XE(n.i)}function Mw(){}function XS(){this.g=new Mw}function m2(n,e,t){const r=t||"";try{Cw(n,function(i,a){let c=i;Qd(i)&&(c=FS(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iy(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function mu(n){this.l=n.$b||null,this.j=n.ib||!1}function Fr(n,e){ui.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=eA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jP.prototype.cancel=function(){if(this.i=JS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mw.prototype.stringify=function(n){return rn.JSON.stringify(n,void 0)},Mw.prototype.parse=function(n){return rn.JSON.parse(n,void 0)},vi(mu,vw),mu.prototype.g=function(){return new Fr(this.l,this.j)},mu.prototype.i=function(n){return function(){return n}}({}),vi(Fr,ui);var eA=0;function xw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function nh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bp(n)}function Bp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=Fr.prototype).open=function(n,e){if(this.readyState!=eA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Bp(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||rn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nh(this)),this.readyState=eA},yt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bp(this)),this.g&&(this.readyState=3,Bp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==rn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},yt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nh(this):Bp(this),3==this.readyState&&xw(this)}},yt.Ua=function(n){this.g&&(this.response=this.responseText=n,nh(this))},yt.Ta=function(n){this.g&&(this.response=n,nh(this))},yt.ha=function(){this.g&&nh(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sy=rn.JSON.parse;function Gr(n){ui.call(this),this.headers=new Zl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tA,this.K=this.L=!1}vi(Gr,ui);var tA="",nA=/^https?$/i,_u=["POST","PUT"];function kw(n){return"content-type"==n.toLowerCase()}function oy(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iA(n),ay(n)}function iA(n){n.D||(n.D=!0,Ei(n,"complete"),Ei(n,"error"))}function jp(n){if(n.h&&void 0!==N_&&(!n.C[1]||4!=Xo(n)||2!=n.ba()))if(n.v&&4==Xo(n))W_(n.Fa,0,n);else if(Ei(n,"readystatechange"),4==Xo(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(X_)[1]||null;if(!i&&rn.self&&rn.self.location){var a=rn.self.location.protocol;i=a.substr(0,a.length-1)}r=!nA.test(i?i.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var c=2<Xo(n)?n.g.statusText:""}catch(g){c=""}n.j=c+" ["+n.ba()+"]",iA(n)}}finally{ay(n)}}}function ay(n,e){if(n.g){ly(n);const t=n.g,r=n.C[0]?Tp:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function ly(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(rn.clearTimeout(n.A),n.A=null)}function Xo(n){return n.g?n.g.readyState:0}function ri(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ow(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return j_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):_r(n,e,t))}function Hp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $P(n){this.za=0,this.l=[],this.h=new mw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hp("baseRetryDelayMs",5e3,n),this.$a=Hp("retryDelaySeedMs",1e4,n),this.Ya=Hp("forwardChannelMaxRetries",2,n),this.ra=Hp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new jP(n&&n.concurrentRequestLimit),this.Ca=new XS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function rh(n){if(zP(n),3==n.G){var e=n.V++,t=$a(n.F);_r(t,"SID",n.J),_r(t,"RID",e),_r(t,"TYPE","terminate"),$p(n,t),(e=new Pp(n,n.h,e,void 0)).K=2,e.v=ty($a(t)),t=!1,rn.navigator&&rn.navigator.sendBeacon&&(t=rn.navigator.sendBeacon(e.v.toString(),"")),!t&&rn.Image&&((new Image).src=e.v,t=!0),t||(e.g=fA(e.l,null),e.g.ea(e.v)),e.F=Date.now(),pu(e)}dA(n)}function cy(n){n.g&&(Nw(n),n.g.cancel(),n.g=null)}function zP(n){cy(n),n.u&&(rn.clearTimeout(n.u),n.u=null),uy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&rn.clearTimeout(n.m),n.m=null)}function sA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Pw(n)}function Pw(n){HP(n.i)||n.m||(n.m=!0,VS(n.Ha,n),n.C=0)}function oA(n,e){var t;t=e?e.m:n.V++;const r=$a(n.F);_r(r,"SID",n.J),_r(r,"RID",t),_r(r,"AID",n.U),$p(n,r),n.o&&n.s&&Ow(r,n.o,n.s),t=new Pp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=aA(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Rw(n.i,t),Yi(t,r,e)}function $p(n,e){n.j&&Cw({},function(t,r){_r(e,r,t)})}function aA(n,e,t){t=Math.min(n.l.length,t);var r=n.j?On(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let g=0;g<t;g++){let b=i[g].h;const C=i[g].g;if(b-=a,0>b)a=Math.max(0,i[g].h-100),f=!1;else try{m2(C,c,"req"+b+"_")}catch(D){r&&r(C)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function lA(n){n.g||n.u||(n.Y=1,VS(n.Ga,n),n.A=0)}function cA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=kp(On(n.Ga,n),qP(n,n.A)),n.A++,0))}function Nw(n){null!=n.B&&(rn.clearTimeout(n.B),n.B=null)}function uA(n){n.g=new Pp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$a(n.oa);_r(e,"RID","rpc"),_r(e,"SID",n.J),_r(e,"CI",n.N?"0":"1"),_r(e,"AID",n.U),$p(n,e),_r(e,"TYPE","xmlhttp"),n.o&&n.s&&Ow(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ty($a(e)),t.s=null,t.U=!0,WS(t,n)}function uy(n){null!=n.v&&(rn.clearTimeout(n.v),n.v=null)}function WP(n,e){var t=null;if(n.g==e){uy(n),Nw(n),n.g=null;var r=2}else{if(!ry(n.i,e))return;t=e.D,QS(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ei(r=_w(),new K_(r,t,e,i)),Pw(n)}else lA(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(Aw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=kp(On(n.Ha,n,e),qP(n,n.C)),n.C++,0)))}(n,e)||2==r&&cA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:yu(n,5);break;case 4:yu(n,10);break;case 3:yu(n,6);break;default:yu(n,2)}}function qP(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function yu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=On(n.jb,n);t||(t=new wi("//www.google.com/images/cleardot.gif"),rn.location&&"http"==rn.location.protocol||Iw(t,"https"),ty(t)),function(n,e){const t=new mw;if(rn.Image){const r=new Image;r.onload=Ha(iy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ha(iy,t,r,"TestLoadImage: error",!1,e),r.onabort=Ha(iy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ha(iy,t,r,"TestLoadImage: timeout",!1,e),rn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else cs(2);n.G=0,n.j&&n.j.va(e),dA(n),zP(n)}function dA(n){n.G=0,n.I=-1,n.j&&((0!=JS(n.i).length||0!=n.l.length)&&(n.i.i.length=0,XE(n.l),n.l.length=0),n.j.ua())}function hA(n,e,t){let r=function(n){return n instanceof wi?$a(n):new wi(n,void 0)}(t);if(""!=r.i)e&&ey(r,e+"."+r.i),Tw(r,r.m);else{const i=rn.location;r=function(n,e,t,r){var i=new wi(null,void 0);return n&&Iw(i,n),e&&ey(i,e),t&&Tw(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&j_(n.aa,function(i,a){_r(r,a,i)}),t=n.sa,(e=n.D)&&t&&_r(r,e,t),_r(r,"VER",n.ma),$p(n,r),r}function fA(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gr(t&&n.Ba&&!n.qa?new mu({ib:!0}):n.qa)).L=n.H,e}function pA(){}function us(){if(Wl&&!(10<=Number(DS)))throw Error("Environmental error: no available transport.")}function Ss(n,e){ui.call(this),this.g=new $P(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!L_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!L_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ih(this)}function gA(n){$S.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mA(){zS.call(this),this.status=1}function ih(n){this.g=n}(yt=Gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ew.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Ew),this.g.onreadystatechange=On(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void oy(this,a)}n=t||"";const i=new Zl(this.headers);r&&Cw(r,function(a,c){i.set(c,a)}),r=function(n){e:{var e=kw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=rn.FormData&&n instanceof rn.FormData,!(0<=ES(_u,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ly(this),0<this.B&&((this.K=function(n){return Wl&&TS()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=On(this.pa,this)):this.A=W_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){oy(this,a)}},yt.pa=function(){void 0!==N_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),ay(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ay(this,!0)),Gr.Z.M.call(this)},yt.Fa=function(){this.s||(this.F||this.v||this.l?jp(this):this.cb())},yt.cb=function(){jp(this)},yt.ba=function(){try{return 2<Xo(this)?this.g.status:-1}catch(n){return-1}},yt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},yt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sy(e)}},yt.Da=function(){return this.m},yt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=$P.prototype).ma=8,yt.G=1,yt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},yt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Pp(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=wS(a),Sp(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=aA(this,i,e),_r(t=$a(this.F),"RID",n),_r(t,"CVER",22),this.D&&_r(t,"X-HTTP-Session-Id",this.D),$p(this,t),this.o&&a&&Ow(t,this.o,a),Rw(this.i,i),this.Ra&&_r(t,"TYPE","init"),this.ja?(_r(t,"$req",e),_r(t,"SID","null"),i.$=!0,Yi(i,t,null)):Yi(i,t,e),this.G=2}}else 3==this.G&&(n?oA(this,n):0==this.l.length||HP(this.i)||oA(this))},yt.Ga=function(){if(this.u=null,uA(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=kp(On(this.bb,this),n)}},yt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,cs(10),cy(this),uA(this))},yt.ab=function(){null!=this.v&&(this.v=null,cy(this),cA(this),cs(19))},yt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),cs(2)):(this.h.info("Failed to ping google.com"),cs(1))},(yt=pA.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Oa=function(){},us.prototype.g=function(n,e){return new Ss(n,e)},vi(Ss,ui),Ss.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),VS(On(n.hb,n,e))),cs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=hA(n,null,n.W),Pw(n)},Ss.prototype.close=function(){rh(this.g)},Ss.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,sA(this.g,e)}else this.v?((e={}).__data__=FS(n),sA(this.g,e)):sA(this.g,n)},Ss.prototype.M=function(){this.g.j=null,delete this.j,rh(this.g),delete this.g,Ss.Z.M.call(this)},vi(gA,$S),vi(mA,zS),vi(ih,pA),ih.prototype.xa=function(){Ei(this.g,"a")},ih.prototype.wa=function(n){Ei(this.g,new gA(n))},ih.prototype.va=function(n){Ei(this.g,new mA(n))},ih.prototype.ua=function(){Ei(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,Ss.prototype.send=Ss.prototype.u,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,yw.NO_ERROR=0,yw.TIMEOUT=8,yw.HTTP_ERROR=6,MP.COMPLETE="complete",bw.EventType=Op,Op.OPEN="a",Op.CLOSE="b",Op.ERROR="c",Op.MESSAGE="d",ui.prototype.listen=ui.prototype.N,Gr.prototype.listenOnce=Gr.prototype.O,Gr.prototype.getLastError=Gr.prototype.La,Gr.prototype.getLastErrorCode=Gr.prototype.Da,Gr.prototype.getStatus=Gr.prototype.ba,Gr.prototype.getResponseJson=Gr.prototype.Qa,Gr.prototype.getResponseText=Gr.prototype.ga,Gr.prototype.send=Gr.prototype.ea;var v2=bo.createWebChannelTransport=function(){return new us},KP=bo.getStatEventTarget=function(){return _w()},Fw=bo.ErrorCode=yw,YP=bo.EventType=MP,zp=bo.Event=Xd,Lw=bo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},b2=bo.FetchXmlHttpFactory=mu,dy=bo.WebChannel=bw,E2=bo.XhrIo=Gr;const ZP="@firebase/firestore";class ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");let Xl="9.4.0";const ec=new Ws.Yd("@firebase/firestore");function Vw(){return ec.logLevel}function st(n,...e){if(ec.logLevel<=Ws.in.DEBUG){const t=e.map(Uw);ec.debug(`Firestore (${Xl}): ${n}`,...t)}}function Wr(n,...e){if(ec.logLevel<=Ws.in.ERROR){const t=e.map(Uw);ec.error(`Firestore (${Xl}): ${n}`,...t)}}function Gp(n,...e){if(ec.logLevel<=Ws.in.WARN){const t=e.map(Uw);ec.warn(`Firestore (${Xl}): ${n}`,...t)}}function Uw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: `+n;throw Wr(e),new Error(e)}function en(n,e){n||_t()}function dt(n,e){return n}const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hy{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Bw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ki.UNAUTHENTICATED))}shutdown(){}}class jw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fy{constructor(e){this.t=e,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ii,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,ke.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},g=b=>{st("FirebaseCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>g(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?g(b):(st("FirebaseCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ii)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(st("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(en("string"==typeof r.accessToken),new hy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return en(null===e||"string"==typeof e),new ki(e)}}class py{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ki.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class yA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new py(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ds{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function JP(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ds.T=-1;class vA{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=JP(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function _n(n,e){return n<e?-1:n>e?1:0}function sh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bA(n){return n+"\0"}class di{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ze(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return di.fromMillis(Date.now())}static fromDate(e){return di.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new di(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_n(this.nanoseconds,e.nanoseconds):_n(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ln{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ln(e)}static min(){return new ln(new di(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function EA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tc{constructor(e,t,r){void 0===t?t=0:t>e.length&&_t(),void 0===r?r=e.length-t:r>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Rn extends tc{construct(e,t,r){return new Rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(Me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Rn(t)}static emptyPath(){return new Rn([])}}const gy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class si extends tc{construct(e,t,r){return new si(e,t,r)}static isValidIdentifier(e){return gy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),si.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new si(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ze(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new ze(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new ze(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new ze(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new si(t)}static emptyPath(){return new si([])}}class vu{constructor(e){this.fields=e,e.sort(si.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new hi(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _n(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const XP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(n){if(en(!!n),"string"==typeof n){let e=0;const t=XP.exec(n);if(en(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qr(n.seconds),nanos:qr(n.nanos)}}function qr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bu(n){return"string"==typeof n?hi.fromBase64String(n):hi.fromUint8Array(n)}function Hw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wA(n){const e=n.mapValue.fields.__previous_value__;return Hw(e)?wA(e):e}function Wp(n){const e=nc(n.mapValue.fields.__local_write_time__.timestampValue);return new di(e.seconds,e.nanos)}function hs(n){return null==n}function rc(n){return 0===n&&1/n==-1/0}function _y(n){return"number"==typeof n&&Number.isInteger(n)&&!rc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class kt{constructor(e){this.path=e}static fromPath(e){return new kt(Rn.fromString(e))}static fromName(e){return new kt(Rn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kt(new Rn(e.slice()))}}function Eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hw(n)?4:10:_t()}function ea(n,e){const t=Eu(n);if(t!==Eu(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wp(n).isEqual(Wp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=nc(r.timestampValue),c=nc(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,bu(n.bytesValue).isEqual(bu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return qr(r.geoPointValue.latitude)===qr(i.geoPointValue.latitude)&&qr(r.geoPointValue.longitude)===qr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return qr(r.integerValue)===qr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=qr(r.doubleValue),c=qr(i.doubleValue);return a===c?rc(a)===rc(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return sh(n.arrayValue.values||[],e.arrayValue.values||[],ea);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(EA(a)!==EA(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!ea(a[f],c[f])))return!1;return!0}(n,e);default:return _t()}var i}function wu(n,e){return void 0!==(n.values||[]).find(t=>ea(t,e))}function ah(n,e){const t=Eu(n),r=Eu(e);if(t!==r)return _n(t,r);switch(t){case 0:return 0;case 1:return _n(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=qr(i.integerValue||i.doubleValue),f=qr(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return $w(n.timestampValue,e.timestampValue);case 4:return $w(Wp(n),Wp(e));case 5:return _n(n.stringValue,e.stringValue);case 6:return function(i,a){const c=bu(i),f=bu(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let g=0;g<c.length&&g<f.length;g++){const b=_n(c[g],f[g]);if(0!==b)return b}return _n(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=_n(qr(i.latitude),qr(a.latitude));return 0!==c?c:_n(qr(i.longitude),qr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let g=0;g<c.length&&g<f.length;++g){const b=ah(c[g],f[g]);if(b)return b}return _n(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},f=Object.keys(c),g=a.fields||{},b=Object.keys(g);f.sort(),b.sort();for(let C=0;C<f.length&&C<b.length;++C){const D=_n(f[C],b[C]);if(0!==D)return D;const R=ah(c[f[C]],g[b[C]]);if(0!==R)return R}return _n(f.length,b.length)}(n.mapValue,e.mapValue);default:throw _t()}}function $w(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return _n(n,e);const t=nc(n),r=nc(e),i=_n(t.seconds,r.seconds);return 0!==i?i:_n(t.nanos,r.nanos)}function yy(n){return zw(n)}function zw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bu(n.bytesValue).toBase64():"referenceValue"in n?kt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=zw(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${zw(r.fields[f])}`;return a+"}"}(n.mapValue):_t();var e}function vy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gw(n){return!!n&&"integerValue"in n}function Eo(n){return!!n&&"arrayValue"in n}function lh(n){return!!n&&"nullValue"in n}function Cu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Iu(n){return!!n&&"mapValue"in n}function ta(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Lr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ta(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ta(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Iu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(t)}setAll(e){let t=si.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=ta(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Iu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Iu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lr(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Oi(ta(this.value))}}function CA(n){const e=[];return Lr(n.fields,(t,r)=>{const i=new si([t]);if(Iu(r)){const a=CA(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new vu(e)}class yr{constructor(e,t,r,i,a){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new yr(e,0,ln.min(),Oi.empty(),0)}static newFoundDocument(e,t,r){return new yr(e,1,t,r,0)}static newNoDocument(e,t){return new yr(e,2,t,Oi.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new yr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class IA{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.A=null}}function Ww(n,e=null,t=[],r=[],i=null,a=null,c=null){return new IA(n,e,t,r,i,a,c)}function ch(n){const e=dt(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+yy(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),hs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Ey(e.startAt)),e.endAt&&(t+="|ub:",t+=Ey(e.endAt)),e.A=t}return e.A}function uh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!D2(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ea(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nN(n.startAt,e.startAt)&&nN(n.endAt,e.endAt)}function by(n){return kt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Zi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new Tu(e,t,r):"array-contains"===t?new w2(e,r):"in"===t?new C2(e,r):"not-in"===t?new I2(e,r):"array-contains-any"===t?new T2(e,r):new Zi(e,t,r)}static R(e,t,r){return"in"===t?new qw(e,r):new eN(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(ah(t,this.value)):null!==t&&Eu(this.value)===Eu(t)&&this.P(ah(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Tu extends Zi{constructor(e,t,r){super(e,t,r),this.key=kt.fromName(r.referenceValue)}matches(e){const t=kt.comparator(e.key,this.key);return this.P(t)}}class qw extends Zi{constructor(e,t){super(e,"in",t),this.keys=SA(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eN extends Zi{constructor(e,t){super(e,"not-in",t),this.keys=SA(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SA(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>kt.fromName(r.referenceValue))}class w2 extends Zi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Eo(t)&&wu(t.arrayValue,this.value)}}class C2 extends Zi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wu(this.value.arrayValue,t)}}class I2 extends Zi{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wu(this.value.arrayValue,t)}}class T2 extends Zi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Eo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}}class qp{constructor(e,t){this.position=e,this.before=t}}function Ey(n){return`${n.before?"b":"a"}:${n.position.map(e=>yy(e)).join(",")}`}class Kp{constructor(e,t="asc"){this.field=e,this.dir=t}}function D2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?kt.comparator(kt.fromName(c.referenceValue),t.key):ah(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function nN(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ea(n.position[t],e.position[t]))return!1;return!0}class za{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=g,this.V=null,this.S=null}}function rN(n,e,t,r,i,a,c,f){return new za(n,e,t,r,i,a,c,f)}function Yp(n){return new za(n)}function Kw(n){return!hs(n.limit)&&"F"===n.limitType}function Yw(n){return!hs(n.limit)&&"L"===n.limitType}function s(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function o(n){for(const e of n.filters)if(e.v())return e.field;return null}function l(n){return null!==n.collectionGroup}function u(n){const e=dt(n);if(null===e.V){e.V=[];const t=o(e),r=s(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new Kp(t)),e.V.push(new Kp(si.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.V.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Kp(si.keyField(),a))}}}return e.V}function h(n){const e=dt(n);if(!e.S)if("F"===e.limitType)e.S=Ww(e.path,e.collectionGroup,u(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of u(e))t.push(new Kp(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new qp(e.endAt.position,!e.endAt.before):null,i=e.startAt?new qp(e.startAt.position,!e.startAt.before):null;e.S=Ww(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.S}function p(n,e,t){return new za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function m(n,e){return uh(h(n),h(e))&&n.limitType===e.limitType}function v(n){return`${ch(h(n))}|lt:${n.limitType}`}function w(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${yy(r.value)}`;var r}).join(", ")}]`),hs(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Ey(n.startAt)),n.endAt&&(e+=", endAt: "+Ey(n.endAt)),`Target(${e})`}(h(n))}; limitType=${n.limitType})`}function T(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):kt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!tN(t.startAt,u(t),r)||t.endAt&&tN(t.endAt,u(t),r)));var t,r}function S(n){return(e,t)=>{let r=!1;for(const i of u(n)){const a=k(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function k(n,e,t){const r=n.field.isKeyField()?kt.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),g=c.data.field(i);return null!==f&&null!==g?ah(f,g):_t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}function P(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function W(n){return{integerValue:""+n}}function ee(n,e){return _y(e)?W(e):P(n,e)}class Ce{constructor(){this._=void 0}}function he(n,e,t){return n instanceof Ct?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ft?pn(n,e):n instanceof lr?As(n,e):function(r,i){const a=Fe(r,i),c=Du(a)+Du(r.C);return Gw(a)&&Gw(r.C)?W(c):P(r.N,c)}(n,e)}function Ye(n,e,t){return n instanceof Ft?pn(n,e):n instanceof lr?As(n,e):t}function Fe(n,e){return n instanceof na?Gw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ct extends Ce{}class Ft extends Ce{constructor(e){super(),this.elements=e}}function pn(n,e){const t=Su(e);for(const r of n.elements)t.some(i=>ea(i,r))||t.push(r);return{arrayValue:{values:t}}}class lr extends Ce{constructor(e){super(),this.elements=e}}function As(n,e){let t=Su(e);for(const r of n.elements)t=t.filter(i=>!ea(i,r));return{arrayValue:{values:t}}}class na extends Ce{constructor(e,t){super(),this.N=e,this.C=t}}function Du(n){return qr(n.integerValue||n.doubleValue)}function Su(n){return Eo(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ra{constructor(e,t){this.field=e,this.transform=t}}class Qw{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class hh{}function wq(n,e,t){n instanceof Jw?function(r,i,a){const c=r.value.clone(),f=M2(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof fh?function(r,i,a){if(!dh(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=M2(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(R2(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function iN(n,e,t){var i;n instanceof Jw?function(r,i,a){if(!dh(r.precondition,i))return;const c=r.value.clone(),f=x2(r.fieldTransforms,a,i);c.setAll(f),i.convertToFoundDocument(A2(i),c).setHasLocalMutations()}(n,e,t):n instanceof fh?function(r,i,a){if(!dh(r.precondition,i))return;const c=x2(r.fieldTransforms,a,i),f=i.data;f.setAll(R2(r)),f.setAll(c),i.convertToFoundDocument(A2(i),f).setHasLocalMutations()}(n,e,t):dh(n.precondition,i=e)&&i.convertToNoDocument(ln.min())}function Cq(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Fe(r.transform,i||null);null!=a&&(null==t&&(t=Oi.empty()),t.set(r.field,a))}return t||null}function S2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sh(t,r,(i,a)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ft&&r instanceof Ft||t instanceof lr&&r instanceof lr?sh(t.elements,r.elements,ea):t instanceof na&&r instanceof na?ea(t.C,r.C):t instanceof Ct&&r instanceof Ct);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function A2(n){return n.isFoundDocument()?n.version:ln.min()}class Jw extends hh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class fh extends hh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function R2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function M2(n,e,t){const r=new Map;en(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,Ye(c,f,t[i]))}return r}function x2(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,he(a,c,e))}return r}class Xw extends hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class sN extends hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Iq{constructor(e){this.count=e}}var fi,Mn;function k2(n){switch(n){default:return _t();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}function O2(n){if(void 0===n)return Wr("GRPC error has no .code"),Me.UNKNOWN;switch(n){case fi.OK:return Me.OK;case fi.CANCELLED:return Me.CANCELLED;case fi.UNKNOWN:return Me.UNKNOWN;case fi.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case fi.INTERNAL:return Me.INTERNAL;case fi.UNAVAILABLE:return Me.UNAVAILABLE;case fi.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case fi.NOT_FOUND:return Me.NOT_FOUND;case fi.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case fi.ABORTED:return Me.ABORTED;case fi.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case fi.DATA_LOSS:return Me.DATA_LOSS;default:return _t()}}(Mn=fi||(fi={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";class Ci{constructor(e,t){this.comparator=e,this.root=t||Qi.EMPTY}insert(e,t){return new Ci(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new Ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new AA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new AA(this.root,e,this.comparator,!1)}getReverseIterator(){return new AA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new AA(this.root,e,this.comparator,!0)}}class AA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Qi.RED,this.left=null!=i?i:Qi.EMPTY,this.right=null!=a?a:Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Qi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1,Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Qi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kr{constructor(e){this.comparator=e,this.data=new Ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P2(this.data.getIterator())}getIteratorFrom(e){return new P2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kr(this.comparator);return t.data=e,t}}class P2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Tq=new Ci(kt.comparator);function ia(){return Tq}const Dq=new Ci(kt.comparator);function oN(){return Dq}const Sq=new Ci(kt.comparator);function N2(){return Sq}const Aq=new Kr(kt.comparator);function Zn(...n){let e=Aq;for(const t of n)e=e.add(t);return e}const Rq=new Kr(_n);function RA(){return Rq}class eC{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,tC.createSynthesizedTargetChangeForCurrentChange(e,t)),new eC(ln.min(),r,RA(),ia(),Zn())}}class tC{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new tC(hi.EMPTY_BYTE_STRING,t,Zn(),Zn(),Zn())}}class MA{constructor(e,t,r,i){this.k=e,this.removedTargetIds=t,this.key=r,this.$=i}}class F2{constructor(e,t){this.targetId=e,this.O=t}}class L2{constructor(e,t,r=hi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class V2{constructor(){this.F=0,this.M=B2(),this.L=hi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Zn(),t=Zn(),r=Zn();return this.M.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_t()}}),new tC(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=B2()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Mq{constructor(e){this.tt=e,this.et=new Map,this.nt=ia(),this.st=U2(),this.it=new Kr(_n)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,i)=>{this.ht(i)&&t(i)})}ft(e){const t=e.targetId,r=e.O.count,i=this.dt(t);if(i){const a=i.target;if(by(a))if(0===r){const c=new kt(a.path);this.ct(t,c,yr.newNoDocument(c,ln.min()))}else en(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((a,c)=>{const f=this.dt(c);if(f){if(a.current&&by(f.target)){const g=new kt(f.target.path);null!==this.nt.get(g)||this.gt(c,g)||this.ct(c,g,yr.newNoDocument(g,e))}a.K&&(t.set(c,a.W()),a.G())}});let r=Zn();this.st.forEach((a,c)=>{let f=!0;c.forEachWhile(g=>{const b=this.dt(g);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(a))});const i=new eC(e,t,this.it,this.nt,r);return this.nt=ia(),this.st=U2(),this.it=new Kr(_n),i}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,r){if(!this.ht(e))return;const i=this.ut(e);this.gt(e,t)?i.H(t,1):i.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new V2,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Kr(_n),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||st("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new V2),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function U2(){return new Ci(kt.comparator)}function B2(){return new Ci(kt.comparator)}const xq={asc:"ASCENDING",desc:"DESCENDING"},kq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Oq{constructor(e,t){this.databaseId=e,this.D=t}}function nC(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(n,e){return n.D?e.toBase64():e.toUint8Array()}function Pq(n,e){return nC(n,e.toTimestamp())}function Pi(n){return en(!!n),ln.fromTimestamp(function(e){const t=nc(e);return new di(t.seconds,t.nanos)}(n))}function aN(n,e){return(t=n,new Rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function H2(n){const e=Rn.fromString(n);return en(ej(e)),e}function rC(n,e){return aN(n.databaseId,e.path)}function ic(n,e){const t=H2(e);if(t.get(1)!==n.databaseId.projectId)throw new ze(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ze(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new kt(z2(t))}function lN(n,e){return aN(n.databaseId,e)}function $2(n){const e=H2(n);return 4===e.length?Rn.emptyPath():z2(e)}function iC(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function z2(n){return en(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function G2(n,e,t){return{name:rC(n,e),fields:t.value.mapValue.fields}}function W2(n,e,t){const r=ic(n,e.name),i=Pi(e.updateTime),a=new Oi({mapValue:{fields:e.fields}}),c=yr.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function xA(n,e){let t;if(e instanceof Jw)t={update:G2(n,e.key,e.value)};else if(e instanceof Xw)t={delete:rC(n,e.key)};else if(e instanceof fh)t={update:G2(n,e.key,e.data),updateMask:$q(e.fieldMask)};else{if(!(e instanceof sN))return _t();t={verify:rC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Ct)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ft)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof na)return{fieldPath:a.field.canonicalString(),increment:c.C};throw _t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Pq(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:_t()),t;var i}function q2(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Mr.updateTime(Pi(i.updateTime)):void 0!==i.exists?Mr.exists(i.exists):Mr.none():Mr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(en("REQUEST_TIME"===c.setToServerValue),f=new Ct):"appendMissingElements"in c?f=new Ft(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new lr(c.removeAllFromArray.values||[]):"increment"in c?f=new na(a,c.increment):_t();const g=si.fromServerFormat(c.fieldPath);return new ra(g,f)}(n,i)):[];var i;if(e.update){const i=ic(n,e.update.name),a=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new vu((e.updateMask.fieldPaths||[]).map(b=>si.fromServerFormat(b)));return new fh(i,a,c,t,r)}return new Jw(i,a,t,r)}if(e.delete){const i=ic(n,e.delete);return new Xw(i,t)}if(e.verify){const i=ic(n,e.verify);return new sN(i,t)}return _t()}function K2(n,e){return{documents:[lN(n,e.path)]}}function Y2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=lN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=lN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const g=f.map(b=>function(C){if("=="===C.op){if(Cu(C.value))return{unaryFilter:{field:wy(C.field),op:"IS_NAN"}};if(lh(C.value))return{unaryFilter:{field:wy(C.field),op:"IS_NULL"}}}else if("!="===C.op){if(Cu(C.value))return{unaryFilter:{field:wy(C.field),op:"IS_NOT_NAN"}};if(lh(C.value))return{unaryFilter:{field:wy(C.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wy(C.field),op:Bq(C.op),value:C.value}}}(b));return 1===g.length?g[0]:{compositeFilter:{op:"AND",filters:g}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(f){if(0!==f.length)return f.map(g=>{return{field:wy((b=g).field),direction:Uq(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(g=e.limit,n.D||hs(g)?g:{value:g});var g;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=J2(e.startAt)),e.endAt&&(t.structuredQuery.endAt=J2(e.endAt)),t}function Z2(n){let e=$2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){en(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=Q2(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Kp(Cy((D=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let f=null;t.limit&&(f=function(C){let D;return D="object"==typeof C?C.value:C,hs(D)?null:D}(t.limit));let g=null;t.startAt&&(g=X2(t.startAt));let b=null;return t.endAt&&(b=X2(t.endAt)),rN(e,i,c,a,f,"F",g,b)}function Q2(n){return n?void 0!==n.unaryFilter?[Hq(n)]:void 0!==n.fieldFilter?[jq(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Q2(e)).reduce((e,t)=>e.concat(t)):_t():[]}function J2(n){return{before:n.before,values:n.position}}function X2(n){return new qp(n.values||[],!!n.before)}function Uq(n){return xq[n]}function Bq(n){return kq[n]}function wy(n){return{fieldPath:n.canonicalString()}}function Cy(n){return si.fromServerFormat(n.fieldPath)}function jq(n){return Zi.create(Cy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value)}function Hq(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Cy(n.unaryFilter.field);return Zi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Cy(n.unaryFilter.field);return Zi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cy(n.unaryFilter.field);return Zi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Cy(n.unaryFilter.field);return Zi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}function $q(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ej(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ga(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tj(e)),e=zq(n.get(t),e);return tj(e)}function zq(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function tj(n){return n+"\x01\x01"}function Au(n){const e=n.length;if(en(e>=2),2===e)return en("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&_t(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:_t()}a=c+2}return new Rn(r)}class Gq{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class wo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}wo.store="owner",wo.key="owner";class ph{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}ph.store="mutationQueues",ph.keyPath="userId";class wr{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}wr.store="mutations",wr.keyPath="batchId",wr.userMutationsIndex="userMutationsIndex",wr.userMutationsKeyPath=["userId","batchId"];class fs{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Ga(t)]}static key(e,t,r){return[e,Ga(t),r]}}fs.store="documentMutations",fs.PLACEHOLDER=new fs;class Wq{constructor(e,t){this.path=e,this.readTime=t}}class qq{constructor(e,t){this.path=e,this.version=t}}class Yr{constructor(e,t,r,i,a,c){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=c}}Yr.store="remoteDocuments",Yr.readTimeIndex="readTimeIndex",Yr.readTimeIndexPath="readTime",Yr.collectionReadTimeIndex="collectionReadTimeIndex",Yr.collectionReadTimeIndexPath=["parentPath","readTime"];class sc{constructor(e){this.byteSize=e}}sc.store="remoteDocumentGlobal",sc.key="remoteDocumentGlobalKey";class qs{constructor(e,t,r,i,a,c,f){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=c,this.query=f}}qs.store="targets",qs.keyPath="targetId",qs.queryTargetsIndexName="queryTargetsIndex",qs.queryTargetsKeyPath=["canonicalId","targetId"];class Ji{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Ji.store="targetDocuments",Ji.keyPath=["targetId","path"],Ji.documentTargetsIndex="documentTargetsIndex",Ji.documentTargetsKeyPath=["path","targetId"];class Co{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Co.key="targetGlobalKey",Co.store="targetGlobal";class Zp{constructor(e,t){this.collectionId=e,this.parent=t}}Zp.store="collectionParents",Zp.keyPath=["collectionId","parent"];class Ru{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Ru.store="clientMetadata",Ru.keyPath="clientId";class Iy{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Iy.store="bundles",Iy.keyPath="bundleId";class Ty{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Ty.store="namedQueries",Ty.keyPath="name";const Kq=[ph.store,wr.store,fs.store,Yr.store,qs.store,wo.store,Co.store,Ji.store,Ru.store,sc.store,Zp.store,Iy.store,Ty.store],nj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ge((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ge?t:Ge.resolve(t)}catch(t){return Ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ge.reject(t)}static resolve(e){return new Ge((t,r)=>{t(e)})}static reject(e){return new Ge((t,r)=>{r(e)})}static waitFor(e){return new Ge((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},g=>r(g))}),c=!0,a===i&&t()})}static or(e){let t=Ge.resolve(!1);for(const r of e)t=t.next(i=>i?Ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class kA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new ii,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new sC(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const i=cN(r.target.error);this.Et.reject(new sC(e,i))}}static open(e,t,r,i){try{return new kA(t,e.transaction(i,r))}catch(a){throw new sC(t,a)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(st("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Zq(t)}}class Wa{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===Wa.Rt((0,se.z$)())&&Wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return st("SimpleDb","Removing database:",e),Jp(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,se.hl)())return!1;if(Wa.Pt())return!0;const e=(0,se.z$)(),t=Wa.Rt(e),r=0<t&&t<10,i=Wa.vt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,ke.Z)(function*(){return t.db||(st("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new sC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new ze(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new ze(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new sC(e,f))},a.onupgradeneeded=c=>{st("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.At.Ct(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{st("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ke.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.Dt(e);const g=kA.open(a.db,e,c?"readonly":"readwrite",r),b=i(g).catch(C=>(g.abort(C),Ge.reject(C))).toPromise();return b.catch(()=>{}),yield g.It,b}catch(g){const b="FirebaseError"!==g.name&&f<3;if(st("SimpleDb","Transaction failed with error:",g.message,"Retrying:",b),a.close(),!b)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yq{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Jp(this.kt.delete())}}class sC extends ze{constructor(e,t){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qp(n){return"IndexedDbTransactionError"===n.name}class Zq{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(st("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(st("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jp(r)}add(e){return st("SimpleDb","ADD",this.store.name,e,e),Jp(this.store.add(e))}get(e){return Jp(this.store.get(e)).next(t=>(void 0===t&&(t=null),st("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return st("SimpleDb","DELETE",this.store.name,e),Jp(this.store.delete(e))}count(){return st("SimpleDb","COUNT",this.store.name),Jp(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Bt(r,(a,c)=>{i.push(c)}).next(()=>i)}Ut(e,t){st("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const i=this.cursor(r);return this.Bt(i,(a,c,f)=>f.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Bt(i,t)}jt(e){const t=this.cursor({});return new Ge((r,i)=>{t.onerror=a=>{const c=cN(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Bt(e,t){const r=[];return new Ge((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const g=new Yq(f),b=t(f.primaryKey,f.value,g);if(b instanceof Ge){const C=b.catch(D=>(g.done(),Ge.reject(D)));r.push(C)}g.isDone?i():null===g.Ft?f.continue():f.continue(g.Ft)}}).next(()=>Ge.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Jp(n){return new Ge((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=cN(r.target.error);t(i)}})}let ij=!1;function cN(n){const e=Wa.Rt((0,se.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ij||(ij=!0,setTimeout(()=>{throw r},0)),r}}return n}class sj extends rj{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ks(n,e){const t=dt(n);return Wa.St(t.Qt,e)}class uN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&wq(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&iN(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&iN(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ln.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zn())}isEqual(e){return this.batchId===e.batchId&&sh(this.mutations,e.mutations,(t,r)=>S2(t,r))&&sh(this.baseMutations,e.baseMutations,(t,r)=>S2(t,r))}}class dN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){en(e.mutations.length===r.length);let i=N2();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new dN(e,t,r,i)}}class gh{constructor(e,t,r,i,a=ln.min(),c=ln.min(),f=hi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new gh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oj{constructor(e){this.Wt=e}}function hN(n,e){if(e.document)return W2(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=kt.fromSegments(e.noDocument.path),r=Sy(e.noDocument.readTime),i=yr.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=kt.fromSegments(e.unknownDocument.path),r=Sy(e.unknownDocument.version);return yr.newUnknownDocument(t,r)}return _t()}function aj(n,e,t){const r=fN(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const a={name:rC(f=n.Wt,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:nC(f,g.version.toTimestamp())};return new Yr(null,null,a,e.hasCommittedMutations,r,i)}var f,g;if(e.isNoDocument()){const a=e.key.path.toArray(),c=Dy(e.version),f=e.hasCommittedMutations;return new Yr(null,new Wq(a,c),null,f,r,i)}if(e.isUnknownDocument()){const a=e.key.path.toArray(),c=Dy(e.version);return new Yr(new qq(a,c),null,null,!0,r,i)}return _t()}function fN(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lj(n){const e=new di(n[0],n[1]);return ln.fromTimestamp(e)}function Dy(n){const e=n.toTimestamp();return new Gq(e.seconds,e.nanoseconds)}function Sy(n){const e=new di(n.seconds,n.nanoseconds);return ln.fromTimestamp(e)}function Ay(n,e){const t=(e.baseMutations||[]).map(a=>q2(n.Wt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>q2(n.Wt,a)),i=di.fromMillis(e.localWriteTimeMs);return new uN(e.batchId,i,t,r)}function oC(n){const e=Sy(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Sy(n.lastLimboFreeSnapshotVersion):ln.min();let r;var i;return void 0!==n.query.documents?(en(1===(i=n.query).documents.length),r=h(Yp($2(i.documents[0])))):r=h(Z2(n.query)),new gh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hi.fromBase64String(n.resumeToken))}function cj(n,e){const t=Dy(e.snapshotVersion),r=Dy(e.lastLimboFreeSnapshotVersion);let i;i=by(e.target)?K2(n.Wt,e.target):Y2(n.Wt,e.target);const a=e.resumeToken.toBase64();return new qs(e.targetId,ch(e.target),t,a,e.sequenceNumber,r,i)}function pN(n){const e=Z2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?p(e,e.limit,"L"):e}class Qq{getBundleMetadata(e,t){return uj(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Sy(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return uj(e).put({bundleId:(r=t).id,createTime:Dy(Pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return dj(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:pN(i.bundledQuery),readTime:Sy(i.readTime)};var i})}saveNamedQuery(e,t){return dj(e).put({name:(r=t).name,readTime:Dy(Pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function uj(n){return Ks(n,Iy.store)}function dj(n){return Ks(n,Ty.store)}class Jq{constructor(){this.Gt=new gN}addToCollectionParentIndex(e,t){return this.Gt.add(t),Ge.resolve()}getCollectionParents(e,t){return Ge.resolve(this.Gt.getEntries(t))}}class gN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kr(Rn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kr(Rn.comparator)).toArray()}}class Xq{constructor(){this.zt=new gN}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const a={collectionId:r,parent:Ga(i)};return hj(e).put(a)}return Ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[bA(t),""],!1,!0);return hj(e).Lt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Au(c.parent))}return r})}}function hj(n){return Ks(n,Zp.store)}const fj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ys(e,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function pj(n,e,t){const r=n.store(wr.store),i=n.store(fs.store),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const g=r.Kt({range:c},(C,D,R)=>(f++,R.delete()));a.push(g.next(()=>{en(1===f)}));const b=[];for(const C of t.mutations){const D=fs.key(e,C.key.path,t.batchId);a.push(i.delete(D)),b.push(C.key)}return Ge.waitFor(a).next(()=>b)}function OA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _t();e=n.noDocument}return JSON.stringify(e).length}Ys.DEFAULT_COLLECTION_PERCENTILE=10,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ys.DEFAULT=new Ys(41943040,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ys.DISABLED=new Ys(-1,0,0);class mN{constructor(e,t,r,i){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=i,this.Jt={}}static Yt(e,t,r,i){en(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new mN(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).Kt({index:wr.userMutationsIndex,range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ry(e),c=mh(e);return c.add({}).next(f=>{en("number"==typeof f);const g=new uN(f,t,r,i),b=function(R,x,B){const ae=B.baseMutations.map(et=>xA(R.Wt,et)),me=B.mutations.map(et=>xA(R.Wt,et));return new wr(x,B.batchId,B.localWriteTime.toMillis(),ae,me)}(this.N,this.userId,g),C=[];let D=new Kr((R,x)=>_n(R.canonicalString(),x.canonicalString()));for(const R of i){const x=fs.key(this.userId,R.key.path,f);D=D.add(R.key.path.popLast()),C.push(c.put(b)),C.push(a.put(x,fs.PLACEHOLDER))}return D.forEach(R=>{C.push(this.Ht.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Jt[f]=g.keys()}),Ge.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return mh(e).get(t).next(r=>r?(en(r.userId===this.userId),Ay(this.N,r)):null)}Xt(e,t){return this.Jt[t]?Ge.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Jt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return mh(e).Kt({index:wr.userMutationsIndex,range:i},(c,f,g)=>{f.userId===this.userId&&(en(f.batchId>=r),a=Ay(this.N,f)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mh(e).Kt({index:wr.userMutationsIndex,range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).Lt(wr.userMutationsIndex,t).next(r=>r.map(i=>Ay(this.N,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fs.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ry(e).Kt({range:i},(c,f,g)=>{const[b,C,D]=c,R=Au(C);if(b===this.userId&&t.path.isEqual(R))return mh(e).get(D).next(x=>{if(!x)throw _t();en(x.userId===this.userId),a.push(Ay(this.N,x))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kr(_n);const i=[];return t.forEach(a=>{const c=fs.prefixForPath(this.userId,a.path),f=IDBKeyRange.lowerBound(c),g=Ry(e).Kt({range:f},(b,C,D)=>{const[R,x,B]=b,ae=Au(x);R===this.userId&&a.path.isEqual(ae)?r=r.add(B):D.done()});i.push(g)}),Ge.waitFor(i).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=fs.prefixForPath(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new Kr(_n);return Ry(e).Kt({range:c},(g,b,C)=>{const[D,R,x]=g,B=Au(R);D===this.userId&&r.isPrefixOf(B)?B.length===i&&(f=f.add(x)):C.done()}).next(()=>this.Zt(e,f))}Zt(e,t){const r=[],i=[];return t.forEach(a=>{i.push(mh(e).get(a).next(c=>{if(null===c)throw _t();en(c.userId===this.userId),r.push(Ay(this.N,c))}))}),Ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return pj(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ge.resolve();const r=IDBKeyRange.lowerBound(fs.prefixForUser(this.userId)),i=[];return Ry(e).Kt({range:r},(a,c,f)=>{if(a[0]===this.userId){const g=Au(a[1]);i.push(g)}else f.done()}).next(()=>{en(0===i.length)})})}containsKey(e,t){return gj(e,this.userId,t)}ee(e){return mj(e).get(this.userId).next(t=>t||new ph(this.userId,-1,""))}}function gj(n,e,t){const r=fs.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Ry(n).Kt({range:a,qt:!0},(f,g,b)=>{const[C,D,R]=f;C===e&&D===i&&(c=!0),b.done()}).next(()=>c)}function mh(n){return Ks(n,wr.store)}function Ry(n){return Ks(n,fs.store)}function mj(n){return Ks(n,ph.store)}class Xp{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Xp(0)}static ie(){return new Xp(-1)}}class e6{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new Xp(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>ln.fromTimestamp(new di(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.oe(e,i)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ae(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>My(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(en(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return My(e).Kt((c,f)=>{const g=oC(f);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>Ge.waitFor(a)).next(()=>i)}forEachTarget(e,t){return My(e).Kt((r,i)=>{const a=oC(i);t(a)})}re(e){return _j(e).get(Co.key).next(t=>(en(null!==t),t))}oe(e,t){return _j(e).put(Co.key,t)}ce(e,t){return My(e).put(cj(this.N,t))}ae(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ch(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return My(e).Kt({range:i,index:qs.queryTargetsIndexName},(c,f,g)=>{const b=oC(f);uh(t,b.target)&&(a=b,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=_h(e);return t.forEach(c=>{const f=Ga(c.path);i.push(a.put(new Ji(r,f))),i.push(this.referenceDelegate.addReference(e,r,c))}),Ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=_h(e);return Ge.forEach(t,a=>{const c=Ga(a.path);return Ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=_h(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_h(e);let a=Zn();return i.Kt({range:r,qt:!0},(c,f,g)=>{const b=Au(c[1]),C=new kt(b);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Ga(t.path),i=IDBKeyRange.bound([r],[bA(r)],!1,!0);let a=0;return _h(e).Kt({index:Ji.documentTargetsIndex,qt:!0,range:i},([c,f],g,b)=>{0!==c&&(a++,b.done())}).next(()=>a>0)}Tt(e,t){return My(e).get(t).next(r=>r?oC(r):null)}}function My(n){return Ks(n,qs.store)}function _j(n){return Ks(n,Co.store)}function _h(n){return Ks(n,Ji.store)}function eg(n){return _N.apply(this,arguments)}function _N(){return(_N=(0,ke.Z)(function*(n){if(n.code!==Me.FAILED_PRECONDITION||n.message!==nj)throw n;st("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function yj([n,e],[t,r]){const i=_n(n,t);return 0===i?_n(e,r):i}class t6{constructor(e){this.ue=e,this.buffer=new Kr(yj),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n6{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;st("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ke.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Qp(i)?st("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield eg(i)}yield t._e(e)}))}}class r6{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ge.resolve(ds.T);const r=new t6(t);return this.me.forEachTarget(e,i=>r.fe(i.sequenceNumber)).next(()=>this.me.ye(e,i=>r.fe(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(fj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fj):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,i,a,c,f,g,b;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,f=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(b=Date.now(),Vw()<=Ws.in.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(g-f)+`ms\n\tRemoved ${D} documents in `+(b-g)+`ms\nTotal Duration: ${b-C}ms`),Ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class i6{constructor(e,t){this.db=e,this.garbageCollector=new r6(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,i)=>t(i))}addReference(e,t,r){return PA(e,r)}removeReference(e,t,r){return PA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return PA(e,t)}Ie(e,t){return function(r,i){let a=!1;return mj(r).jt(c=>gj(r,c,i).next(f=>(f&&(a=!0),Ge.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ee(e,(c,f)=>{if(f<=t){const g=this.Ie(e,c).next(b=>{if(!b)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c),_h(e).delete([0,Ga(c.path)])))});i.push(g)}}).next(()=>Ge.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return PA(e,t)}Ee(e,t){const r=_h(e);let i,a=ds.T;return r.Kt({index:Ji.documentTargetsIndex},([c,f],{path:g,sequenceNumber:b})=>{0===c?(a!==ds.T&&t(new kt(Au(i)),a),a=b,i=g):a=ds.T}).next(()=>{a!==ds.T&&t(new kt(Au(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PA(n,e){return _h(n).put((r=n.currentSequenceNumber,new Ji(0,Ga(e.path),r)));var r}class xy{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){Lr(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return oh(this.inner)}}class vj{constructor(){this.changes=new xy(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:ln.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:yr.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ge.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s6{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return yh(e).put(NA(t),r)}removeEntry(e,t){const r=yh(e),i=NA(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return yh(e).get(NA(t)).next(r=>this.Re(t,r))}be(e,t){return yh(e).get(NA(t)).next(r=>({document:this.Re(t,r),size:OA(r)}))}getEntries(e,t){let r=ia();return this.Pe(e,t,(i,a)=>{const c=this.Re(i,a);r=r.insert(i,c)}).next(()=>r)}ve(e,t){let r=ia(),i=new Ci(kt.comparator);return this.Pe(e,t,(a,c)=>{const f=this.Re(a,c);r=r.insert(a,f),i=i.insert(a,OA(c))}).next(()=>({documents:r,Ve:i}))}Pe(e,t,r){if(t.isEmpty())return Ge.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let c=a.getNext();return yh(e).Kt({range:i},(f,g,b)=>{const C=kt.fromSegments(f);for(;c&&kt.comparator(c,C)<0;)r(c,null),c=a.getNext();c&&c.isEqual(C)&&(r(c,g),c=a.hasNext()?a.getNext():null),c?b.Mt(c.path.toArray()):b.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=ia();const a=t.path.length+1,c={};if(r.isEqual(ln.min())){const f=t.path.toArray();c.range=IDBKeyRange.lowerBound(f)}else{const f=t.path.toArray(),g=fN(r);c.range=IDBKeyRange.lowerBound([f,g],!0),c.index=Yr.collectionReadTimeIndex}return yh(e).Kt(c,(f,g,b)=>{if(f.length!==a)return;const C=hN(this.N,g);t.path.isPrefixOf(C.key.path)?T(t,C)&&(i=i.insert(C.key,C)):b.done()}).next(()=>i)}newChangeBuffer(e){return new o6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bj(e).get(sc.key).next(t=>(en(!!t),t))}Ae(e,t){return bj(e).put(sc.key,t)}Re(e,t){if(t){const r=hN(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(ln.min()))return r}return yr.newInvalidDocument(e)}}class o6 extends vj{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new xy(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kr((a,c)=>_n(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.De.get(a);if(c.document.isValidDocument()){const g=aj(this.Se.N,c.document,this.getReadTime(a));i=i.add(a.path.popLast()),r+=OA(g)-f,t.push(this.Se.addEntry(e,a,g))}else if(r-=f,this.trackRemovals){const g=aj(this.Se.N,yr.newNoDocument(a,ln.min()),this.getReadTime(a));t.push(this.Se.addEntry(e,a,g))}else t.push(this.Se.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,a))}),t.push(this.Se.updateMetadata(e,r)),Ge.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:i})=>(i.forEach((a,c)=>{this.De.set(a,c)}),r))}}function bj(n){return Ks(n,sc.store)}function yh(n){return Ks(n,Yr.store)}function NA(n){return n.path.toArray()}class a6{constructor(e){this.N=e}Ct(e,t,r,i){en(r<i&&r>=0&&i<=11);const a=new kA("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore(wo.store),(f=e).createObjectStore(ph.store,{keyPath:ph.keyPath}),f.createObjectStore(wr.store,{keyPath:wr.keyPath,autoIncrement:!0}).createIndex(wr.userMutationsIndex,wr.userMutationsKeyPath,{unique:!0}),f.createObjectStore(fs.store),Ej(e),function(f){f.createObjectStore(Yr.store)}(e));let c=Ge.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore(Ji.store),f.deleteObjectStore(qs.store),f.deleteObjectStore(Co.store)}(e),Ej(e)),c=c.next(()=>function(f){const g=f.store(Co.store),b=new Co(0,0,ln.min().toTimestamp(),0);return g.put(Co.key,b)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,g){return g.store(wr.store).Lt().next(b=>{f.deleteObjectStore(wr.store),f.createObjectStore(wr.store,{keyPath:wr.keyPath,autoIncrement:!0}).createIndex(wr.userMutationsIndex,wr.userMutationsKeyPath,{unique:!0});const C=g.store(wr.store),D=b.map(R=>C.put(R));return Ge.waitFor(D)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore(Ru.store,{keyPath:Ru.keyPath})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ce(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore(sc.store)}(e),this.Ne(a)))),r<7&&i>=7&&(c=c.next(()=>this.xe(a))),r<8&&i>=8&&(c=c.next(()=>this.ke(e,a))),r<9&&i>=9&&(c=c.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e),function(f){const g=f.objectStore(Yr.store);g.createIndex(Yr.readTimeIndex,Yr.readTimeIndexPath,{unique:!1}),g.createIndex(Yr.collectionReadTimeIndex,Yr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(c=c.next(()=>this.$e(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore(Iy.store,{keyPath:Iy.keyPath})})(e),function(f){f.createObjectStore(Ty.store,{keyPath:Ty.keyPath})}(e)})),c}Ne(e){let t=0;return e.store(Yr.store).Kt((r,i)=>{t+=OA(i)}).next(()=>{const r=new sc(t);return e.store(sc.store).put(sc.key,r)})}Ce(e){const t=e.store(ph.store),r=e.store(wr.store);return t.Lt().next(i=>Ge.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.Lt(wr.userMutationsIndex,c).next(f=>Ge.forEach(f,g=>{en(g.userId===a.userId);const b=Ay(this.N,g);return pj(e,a.userId,b).next(()=>{})}))}))}xe(e){const t=e.store(Ji.store),r=e.store(Yr.store);return e.store(Co.store).get(Co.key).next(i=>{const a=[];return r.Kt((c,f)=>{const g=new Rn(c),b=[0,Ga(g)];a.push(t.get(b).next(C=>C?Ge.resolve():t.put(new Ji(0,Ga(g),i.highestListenSequenceNumber))))}).next(()=>Ge.waitFor(a))})}ke(e,t){e.createObjectStore(Zp.store,{keyPath:Zp.keyPath});const r=t.store(Zp.store),i=new gN,a=c=>{if(i.add(c)){const f=c.lastSegment(),g=c.popLast();return r.put({collectionId:f,parent:Ga(g)})}};return t.store(Yr.store).Kt({qt:!0},(c,f)=>{const g=new Rn(c);return a(g.popLast())}).next(()=>t.store(fs.store).Kt({qt:!0},([c,f,g],b)=>{const C=Au(f);return a(C.popLast())}))}$e(e){const t=e.store(qs.store);return t.Kt((r,i)=>{const a=oC(i),c=cj(this.N,a);return t.put(c)})}}function Ej(n){n.createObjectStore(Ji.store,{keyPath:Ji.keyPath}).createIndex(Ji.documentTargetsIndex,Ji.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(qs.store,{keyPath:qs.keyPath}).createIndex(qs.queryTargetsIndexName,qs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Co.store)}const yN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vN{constructor(e,t,r,i,a,c,f,g,b,C){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=a,this.window=c,this.document=f,this.Fe=b,this.Me=C,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=D=>Promise.resolve(),!vN.bt())throw new ze(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new i6(this,i),this.We=t+"main",this.N=new oj(g),this.Ge=new Wa(this.We,11,new a6(this.N)),this.ze=new e6(this.referenceDelegate,this.N),this.Ht=new Xq,this.He=new s6(this.N,this.Ht),this.Je=new Qq,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===C&&Wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ze(Me.FAILED_PRECONDITION,yN);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ds(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,ke.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,ke.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,ke.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>FA(e).put(new Ru(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Qp(e))return st("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return st("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return aC(e).get(wo.key).next(t=>Ge.resolve(this.an(t)))}un(e){return FA(e).delete(this.clientId)}hn(){var e=this;return(0,ke.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ks(r,Ru.store);return i.Lt().next(a=>{const c=e.fn(a,18e5),f=a.filter(g=>-1===c.indexOf(g));return Ge.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Ge.resolve(!0):aC(e).get(wo.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new ze(Me.FAILED_PRECONDITION,yN);return!1}}return!(!this.networkEnabled||!this.inForeground)||FA(e).Lt().next(r=>void 0===this.fn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&st("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ke.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[wo.store,Ru.store],t=>{const r=new sj(t,ds.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>FA(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return mN.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let a;return st("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",Kq,c=>(a=new sj(c,this.Le?this.Le.next():ds.T),"readwrite-primary"===t?this.sn(a).next(f=>!!f||this.rn(a)).next(f=>{if(!f)throw Wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new ze(Me.FAILED_PRECONDITION,nj);return r(a)}).next(f=>this.cn(a).next(()=>f)):this.Tn(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Tn(e){return aC(e).get(wo.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ze(Me.FAILED_PRECONDITION,yN)})}cn(e){const t=new wo(this.clientId,this.allowTabSynchronization,Date.now());return aC(e).put(wo.key,t)}static bt(){return Wa.bt()}on(e){const t=aC(e);return t.get(wo.key).next(r=>this.an(r)?(st("IndexedDbPersistence","Releasing primary lease."),t.delete(wo.key)):Ge.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,se.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return st("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Wr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function aC(n){return Ks(n,wo.store)}function FA(n){return Ks(n,Ru.store)}function bN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class l6{constructor(e,t){this.progress=e,this.En=t}}class wj{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}bn(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return kt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Vn(e,t.path):l(t)?this.Sn(e,t,r):this.Dn(e,t,r);var i}Vn(e,t){return this.An(e,new kt(t)).next(r=>{let i=oN();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Sn(e,t,r){const i=t.collectionGroup;let a=oN();return this.Ht.getCollectionParents(e,i).next(c=>Ge.forEach(c,f=>{const g=(b=t,C=f.child(i),new za(C,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,C;return this.Dn(e,g,r).next(b=>{b.forEach((C,D)=>{a=a.insert(C,D)})})}).next(()=>a))}Dn(e,t,r){let i,a;return this.He.getDocumentsMatchingQuery(e,t,r).next(c=>(i=c,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(c=>(a=c,this.Cn(e,a,i).next(f=>{i=f;for(const g of a)for(const b of g.mutations){const C=b.key;let D=i.get(C);null==D&&(D=yr.newInvalidDocument(C),i=i.insert(C,D)),iN(b,D,g.localWriteTime),D.isFoundDocument()||(i=i.remove(C))}}))).next(()=>(i.forEach((c,f)=>{T(t,f)||(i=i.remove(c))}),i))}Cn(e,t,r){let i=Zn();for(const c of t)for(const f of c.mutations)f instanceof fh&&null===r.get(f.key)&&(i=i.add(f.key));let a=r;return this.He.getEntries(e,i).next(c=>(c.forEach((f,g)=>{g.isFoundDocument()&&(a=a.insert(f,g))}),a))}}class EN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=i}static kn(e,t){let r=Zn(),i=Zn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new EN(e,t.fromCache,r,i)}}class Cj{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(ln.min())?this.Fn(e,t):this.On.Pn(e,i).next(a=>{const c=this.Mn(t,a);return(Kw(t)||Yw(t))&&this.Ln(t.limitType,c,i,r)?this.Fn(e,t):(Vw()<=Ws.in.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),w(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(f=>(c.forEach(g=>{f=f.insert(g.key,g)}),f)))});var a}Mn(e,t){let r=new Kr(S(e));return t.forEach((i,a)=>{T(e,a)&&(r=r.add(a))}),r}Ln(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fn(e,t){return Vw()<=Ws.in.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",w(t)),this.On.getDocumentsMatchingQuery(e,t,ln.min())}}class c6{constructor(e,t,r,i){this.persistence=e,this.Bn=t,this.N=i,this.Un=new Ci(_n),this.qn=new xy(a=>ch(a),uh),this.Kn=ln.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new wj(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function Ij(n,e,t,r){return new c6(n,e,t,r)}function Tj(n,e){return wN.apply(this,arguments)}function wN(){return(wN=(0,ke.Z)(function*(n,e){const t=dt(n);let r=t.In,i=t.Qn;const a=yield t.persistence.runTransaction("Handle user change","readonly",c=>{let f;return t.In.getAllMutationBatches(c).next(g=>(f=g,r=t.persistence.getMutationQueue(e),i=new wj(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(c))).next(g=>{const b=[],C=[];let D=Zn();for(const R of f){b.push(R.batchId);for(const x of R.mutations)D=D.add(x.key)}for(const R of g){C.push(R.batchId);for(const x of R.mutations)D=D.add(x.key)}return i.Pn(c,D).next(R=>({Wn:R,removedBatchIds:b,addedBatchIds:C}))})});return t.In=r,t.Qn=i,t.Bn.$n(t.Qn),a})).apply(this,arguments)}function u6(n,e){const t=dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.jn.newChangeBuffer({trackRemovals:!0});return function(c,f,g,b){const C=g.batch,D=C.keys();let R=Ge.resolve();return D.forEach(x=>{R=R.next(()=>b.getEntry(f,x)).next(B=>{const ae=g.docVersions.get(x);en(null!==ae),B.version.compareTo(ae)<0&&(C.applyToRemoteDocument(B,g),B.isValidDocument()&&b.addEntry(B,g.commitVersion))})}),R.next(()=>c.In.removeMutationBatch(f,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,i))})}function Dj(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function d6(n,e){const t=dt(n),r=e.snapshotVersion;let i=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.jn.newChangeBuffer({trackRemovals:!0});i=t.Un;const f=[];e.targetChanges.forEach((b,C)=>{const D=i.get(C);if(!D)return;f.push(t.ze.removeMatchingKeys(a,b.removedDocuments,C).next(()=>t.ze.addMatchingKeys(a,b.addedDocuments,C)));const R=b.resumeToken;if(R.approximateByteSize()>0){const x=D.withResumeToken(R,r).withSequenceNumber(a.currentSequenceNumber);i=i.insert(C,x),B=D,me=b,en((ae=x).resumeToken.approximateByteSize()>0),(0===B.resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&f.push(t.ze.updateTargetData(a,x))}var B,ae,me});let g=ia();if(e.documentUpdates.forEach((b,C)=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(Sj(a,c,e.documentUpdates,r,void 0).next(b=>{g=b})),!r.isEqual(ln.min())){const b=t.ze.getLastRemoteSnapshotVersion(a).next(C=>t.ze.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return Ge.waitFor(f).next(()=>c.apply(a)).next(()=>t.Qn.vn(a,g)).next(()=>g)}).then(a=>(t.Un=i,a))}function Sj(n,e,t,r,i){let a=Zn();return t.forEach(c=>a=a.add(c)),e.getEntries(n,a).next(c=>{let f=ia();return t.forEach((g,b)=>{const C=c.get(g),D=(null==i?void 0:i.get(g))||r;b.isNoDocument()&&b.version.isEqual(ln.min())?(e.removeEntry(g,D),f=f.insert(g,b)):!C.isValidDocument()||b.version.compareTo(C.version)>0||0===b.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(b,D),f=f.insert(g,b)):st("LocalStore","Ignoring outdated watch update for ",g,". Current version:",C.version," Watch version:",b.version)}),f})}function h6(n,e){const t=dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function ky(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ze.getTargetData(r,e).next(a=>a?(i=a,Ge.resolve(i)):t.ze.allocateTargetId(r).next(c=>(i=new gh(e,c,0,r.currentSequenceNumber),t.ze.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Un.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function Oy(n,e,t){return CN.apply(this,arguments)}function CN(){return(CN=(0,ke.Z)(function*(n,e,t){const r=dt(n),i=r.Un.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Qp(c))throw c;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Un=r.Un.remove(e),r.qn.delete(i.target)})).apply(this,arguments)}function LA(n,e,t){const r=dt(n);let i=ln.min(),a=Zn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,g,b){const C=dt(f),D=C.qn.get(b);return void 0!==D?Ge.resolve(C.Un.get(D)):C.ze.getTargetData(g,b)}(r,c,h(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(c,f.targetId).next(g=>{a=g})}).next(()=>r.Bn.getDocumentsMatchingQuery(c,e,t?i:ln.min(),t?a:Zn())).next(f=>({documents:f,Gn:a})))}function Aj(n,e){const t=dt(n),r=dt(t.ze),i=t.Un.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(c=>c?c.target:null))}function Rj(n){const e=dt(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const c=dt(r);let f=ia(),g=fN(a);const b=yh(i),C=IDBKeyRange.lowerBound(g,!0);return b.Kt({index:Yr.readTimeIndex,range:C},(D,R)=>{const x=hN(c.N,R);f=f.insert(x.key,x),g=R.readTime}).next(()=>({En:f,readTime:lj(g)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function IN(){return(IN=(0,ke.Z)(function*(n){const e=dt(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=yh(r);let a=ln.min();return i.Kt({index:Yr.readTimeIndex,reverse:!0},(c,f,g)=>{f.readTime&&(a=lj(f.readTime)),g.done()}).next(()=>a)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function TN(){return(TN=(0,ke.Z)(function*(n,e,t,r){const i=dt(n);let a=Zn(),c=ia(),f=N2();for(const C of t){const D=e.zn(C.metadata.name);C.document&&(a=a.add(D)),c=c.insert(D,e.Hn(C)),f=f.insert(D,e.Jn(C.metadata.readTime))}const g=i.jn.newChangeBuffer({trackRemovals:!0}),b=yield ky(i,(C=r,h(Yp(Rn.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>Sj(C,g,c,ln.min(),f).next(D=>(g.apply(C),D)).next(D=>i.ze.removeMatchingKeysForTargetId(C,b.targetId).next(()=>i.ze.addMatchingKeys(C,a,b.targetId)).next(()=>i.Qn.vn(C,D)).next(()=>D)))})).apply(this,arguments)}function g6(n,e){return DN.apply(this,arguments)}function DN(){return(DN=(0,ke.Z)(function*(n,e,t=Zn()){const r=yield ky(n,h(pN(e.bundledQuery))),i=dt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Pi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Je.saveNamedQuery(a,e);const f=r.withResumeToken(hi.EMPTY_BYTE_STRING,c);return i.Un=i.Un.insert(f.targetId,f),i.ze.updateTargetData(a,f).next(()=>i.ze.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ze.addMatchingKeys(a,t,r.targetId)).next(()=>i.Je.saveNamedQuery(a,e))})})).apply(this,arguments)}class m6{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Ge.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:Pi(r.createTime)}),Ge.resolve()}getNamedQuery(e,t){return Ge.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:pN(r.bundledQuery),readTime:Pi(r.readTime)}),Ge.resolve();var r}}class SN{constructor(){this.Zn=new Kr(Ni.ts),this.es=new Kr(Ni.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ni(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ni(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new kt(new Rn([])),r=new Ni(t,e),i=new Ni(t,e+1),a=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),a.push(c.key)}),a}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new kt(new Rn([])),r=new Ni(t,e),i=new Ni(t,e+1);let a=Zn();return this.es.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ni(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ni{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return kt.comparator(e.key,t.key)||_n(e.ls,t.ls)}static ns(e,t){return _n(e.ls,t.ls)||kt.comparator(e.key,t.key)}}class _6{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Kr(Ni.ts)}checkEmpty(e){return Ge.resolve(0===this.In.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const c=new uN(a,t,r,i);this.In.push(c);for(const f of i)this.ds=this.ds.add(new Ni(f.key,a)),this.Ht.addToCollectionParentIndex(e,f.key.path.popLast());return Ge.resolve(c)}lookupMutationBatch(e,t){return Ge.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const i=this._s(t+1),a=i<0?0:i;return Ge.resolve(this.In.length>a?this.In[a]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Ge.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ni(t,0),i=new Ni(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],c=>{const f=this.ws(c.ls);a.push(f)}),Ge.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kr(_n);return t.forEach(i=>{const a=new Ni(i,0),c=new Ni(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,c],f=>{r=r.add(f.ls)})}),Ge.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;kt.isDocumentKey(a)||(a=a.child(""));const c=new Ni(new kt(a),0);let f=new Kr(_n);return this.ds.forEachWhile(g=>{const b=g.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(g.ls)),!0)},c),Ge.resolve(this.gs(f))}gs(e){const t=[];return e.forEach(r=>{const i=this.ws(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){en(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return Ge.forEach(t.mutations,i=>{const a=new Ni(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new Ni(t,0),i=this.ds.firstAfterOrEqual(r);return Ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ge.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class y6{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Ci(kt.comparator),this.size=0}addEntry(e,t,r){const i=t.key,a=this.docs.get(i),c=a?a.size:0,f=this.ps(t);return this.docs=this.docs.insert(i,{document:t.clone(),size:f,readTime:r}),this.size+=f-c,this.Ht.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ge.resolve(r?r.document.clone():yr.newInvalidDocument(t))}getEntries(e,t){let r=ia();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.clone():yr.newInvalidDocument(i))}),Ge.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=ia();const a=new kt(t.path.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:f,value:{document:g,readTime:b}}=c.getNext();if(!t.path.isPrefixOf(f.path))break;b.compareTo(r)<=0||T(t,g)&&(i=i.insert(g.key,g.clone()))}return Ge.resolve(i)}Ts(e,t){return Ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new v6(this)}getSize(e){return Ge.resolve(this.size)}}class v6 extends vj{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.Se.addEntry(e,i.document,this.getReadTime(r))):this.Se.removeEntry(r)}),Ge.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class b6{constructor(e){this.persistence=e,this.Es=new xy(t=>ch(t),uh),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.Is=0,this.As=new SN,this.targetCount=0,this.Rs=Xp.se()}forEachTarget(e,t){return this.Es.forEach((r,i)=>t(i)),Ge.resolve()}getLastRemoteSnapshotVersion(e){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ge.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),Ge.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Xp(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Ge.resolve()}updateTargetData(e,t){return this.ce(t),Ge.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Es.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Es.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Ge.waitFor(a).next(()=>i)}getTargetCount(e){return Ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return Ge.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Ge.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),Ge.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Ge.resolve(r)}containsKey(e,t){return Ge.resolve(this.As.containsKey(t))}}class E6{constructor(e,t){this.bs={},this.Le=new ds(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new b6(this),this.Ht=new Jq,this.He=new y6(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new oj(t),this.Je=new m6(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new _6(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){st("MemoryPersistence","Starting transaction:",e);const i=new w6(this.Le.next());return this.referenceDelegate.vs(),r(i).next(a=>this.referenceDelegate.Vs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ss(e,t){return Ge.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class w6 extends rj{constructor(e){super(),this.currentSequenceNumber=e}}class AN{constructor(e){this.persistence=e,this.Ds=new SN,this.Cs=null}static Ns(e){return new AN(e)}get xs(){if(this.Cs)return this.Cs;throw _t()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),Ge.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),Ge.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ge.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.xs,r=>{const i=kt.fromPath(r);return this.ks(e,i).next(a=>{a||t.removeEntry(i)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Ge.or([()=>Ge.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function Mj(n,e){return`firestore_clients_${n}_${e}`}function xj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function RN(n,e){return`firestore_targets_${n}_${e}`}class VA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static $s(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new ze(i.error.code,i.error.message))),c?new VA(e,t,i.state,a):(Wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ze(r.error.code,r.error.message))),a?new lC(e,r.state,i):(Wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class UA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=RA();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=_y(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new UA(e,a):(Wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class MN{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new MN(t.clientId,t.onlineState):(Wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xN{constructor(){this.activeTargetIds=RA()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kN{constructor(e,t,r,i,a){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Ci(_n),this.started=!1,this.Ks=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.js=Mj(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new xN),this.Ws=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(f){return`firestore_bundle_loaded_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ke.Z)(function*(){const t=yield e.syncEngine.pn();for(const i of t){if(i===e.Ls)continue;const a=e.getItem(Mj(e.persistenceKey,i));if(a){const c=UA.$s(i,a);c&&(e.qs=e.qs.insert(c.clientId,c))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const i=e.Xs(r);i&&e.Zs(i)}for(const i of e.Ks)e.Us(i);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(RN(this.persistenceKey,e));if(r){const i=lC.$s(e,r);i&&(t=i.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(RN(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ni(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return st("SharedClientState","READ",e,t),t}setItem(e,t){st("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){st("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(st("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void Wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ke.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const i=t.ci(r.key);return t.ai(i,null)}{const i=t.ui(r.key,r.newValue);if(i)return t.ai(i.clientId,i)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const i=t.hi(r.key,r.newValue);if(i)return t.li(i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.fi(r.key,r.newValue);if(i)return t.di(i)}}else if(r.key===t.Hs){if(null!==r.newValue){const i=t.Xs(r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.Qs){const i=function(a){let c=ds.T;if(null!=a)try{const f=JSON.parse(a);en("number"==typeof f),c=f}catch(f){Wr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==ds.T&&t.sequenceNumberHandler(i)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const i=new VA(this.currentUser,e,t,r),a=xj(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Os())}ni(e){const t=xj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const i=RN(this.persistenceKey,e),a=new lC(e,t,r);this.setItem(i,a.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ci(e);return UA.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),i=Number(r[1]);return VA.$s(new ki(void 0!==r[2]?r[2]:null),i,t)}fi(e,t){const r=this.zs.exec(e),i=Number(r[1]);return lC.$s(i,t)}Xs(e){return MN.$s(e)}li(e){var t=this;return(0,ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);st("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),a=this.ti(r),c=[],f=[];return a.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{a.has(g)||f.push(g)}),this.syncEngine.gi(c,f).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=RA();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class kj{constructor(){this.yi=new xN,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new xN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class C6{Ti(e){}shutdown(){}}class Oj{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const I6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class T6{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class D6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,i){const a=this.Bi(e,t);st("RestConnection","Sending: ",a,r);const c={};return this.Ui(c,i),this.qi(e,a,c,r).then(f=>(st("RestConnection","Received: ",f),f),f=>{throw Gp("RestConnection",`${e} failed with error: `,f,"url: ",a,"request:",r),f})}Ki(e,t,r,i){return this.Li(e,t,r,i)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Xl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${I6[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,i){return new Promise((a,c)=>{const f=new E2;f.listenOnce(YP.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Fw.NO_ERROR:const b=f.getResponseJson();st("Connection","XHR received:",JSON.stringify(b)),a(b);break;case Fw.TIMEOUT:st("Connection",'RPC "'+e+'" timed out'),c(new ze(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Fw.HTTP_ERROR:const C=f.getStatus();if(st("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){const D=f.getResponseJson().error;if(D&&D.status&&D.message){const R=function(x){const B=x.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(B)>=0?B:Me.UNKNOWN}(D.status);c(new ze(R,D.message))}else c(new ze(Me.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new ze(Me.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{st("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);f.send(t,"POST",g,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=v2(),a=KP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new b2({})),this.Ui(c.initMessageHeaders,t),(0,se.uI)()||(0,se.b$)()||(0,se.d)()||(0,se.w1)()||(0,se.Mn)()||(0,se.ru)()||(c.httpHeadersOverwriteParam="$httpHeaders");const f=r.join("");st("Connection","Creating WebChannel: "+f,c);const g=i.createWebChannel(f,c);let b=!1,C=!1;const D=new T6({vi:x=>{C?st("Connection","Not sending because WebChannel is closed:",x):(b||(st("Connection","Opening WebChannel transport."),g.open(),b=!0),st("Connection","WebChannel sending:",x),g.send(x))},Vi:()=>g.close()}),R=(x,B,ae)=>{x.listen(B,me=>{try{ae(me)}catch(et){setTimeout(()=>{throw et},0)}})};return R(g,dy.EventType.OPEN,()=>{C||st("Connection","WebChannel transport opened.")}),R(g,dy.EventType.CLOSE,()=>{C||(C=!0,st("Connection","WebChannel transport closed"),D.$i())}),R(g,dy.EventType.ERROR,x=>{C||(C=!0,Gp("Connection","WebChannel transport errored:",x),D.$i(new ze(Me.UNAVAILABLE,"The operation could not be completed")))}),R(g,dy.EventType.MESSAGE,x=>{var B;if(!C){const ae=x.data[0];en(!!ae);const me=ae,et=me.error||(null===(B=me[0])||void 0===B?void 0:B.error);if(et){st("Connection","WebChannel received error:",et);const pt=et.status;let vt=function(Dn){const $n=fi[Dn];if(void 0!==$n)return O2($n)}(pt),ht=et.message;void 0===vt&&(vt=Me.INTERNAL,ht="Unknown error status: "+pt+" with message "+et.message),C=!0,D.$i(new ze(vt,ht)),g.close()}else st("Connection","WebChannel received:",ae),D.Oi(ae)}}),R(a,zp.STAT_EVENT,x=>{x.stat===Lw.PROXY?st("Connection","Detected buffering proxy"):x.stat===Lw.NOPROXY&&st("Connection","Detected no buffering proxy")}),setTimeout(()=>{D.ki()},0),D}}function Pj(){return"undefined"!=typeof window?window:null}function BA(){return"undefined"!=typeof document?document:null}function cC(n){return new Oq(n,!0)}class ON{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=i,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,t-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Nj{constructor(e,t,r,i,a,c,f){this.Oe=e,this.er=r,this.nr=i,this.sr=a,this.credentialsProvider=c,this.listener=f,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new ON(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,ke.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,ke.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,ke.Z)(function*(){r.gr(),r.yr(),r.ar.cancel(),r.ir++,4!==e?r.ar.reset():t&&t.code===Me.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),r.ar.Yi()):t&&t.code===Me.UNAUTHENTICATED&&3!==r.state&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.pr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(r=>{this.ir===t&&this.Er(r)},r=>{e(()=>{const i=new ze(Me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ir(i)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.Ir(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}lr(){var e=this;this.state=5,this.ar.Xi((0,ke.Z)(function*(){e.state=0,e.start()}))}Ir(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S6 extends Nj{constructor(e,t,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a),this.N=i}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:_t(),i=e.targetChange.targetIds||[],a=function(g,b){return g.D?(en(void 0===b||"string"==typeof b),hi.fromBase64String(b||"")):(en(void 0===b||b instanceof Uint8Array),hi.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(g){const b=void 0===g.code?Me.UNKNOWN:O2(g.code);return new ze(b,g.message||"")}(c);t=new L2(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=ic(n,r.document.name),a=Pi(r.document.updateTime),c=new Oi({mapValue:{fields:r.document.fields}}),f=yr.newFoundDocument(i,a,c);t=new MA(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=ic(n,r.document),a=r.readTime?Pi(r.readTime):ln.min(),c=yr.newNoDocument(i,a);t=new MA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ic(n,r.document);t=new MA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return _t();{const r=e.filter,a=new Iq(r.count||0);t=new F2(r.targetId,a)}}var g;return t}(this.N,e),r=function(i){if(!("targetChange"in i))return ln.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ln.min():a.readTime?Pi(a.readTime):ln.min()}(e);return this.listener.Rr(t,r)}br(e){const t={};t.database=iC(this.N),t.addTarget=function(i,a){let c;const f=a.target;return c=by(f)?{documents:K2(i,f)}:{query:Y2(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=j2(i,a.resumeToken):a.snapshotVersion.compareTo(ln.min())>0&&(c.readTime=nC(i,a.snapshotVersion.toTimestamp())),c}(this.N,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _t()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.mr(t)}Pr(e){const t={};t.database=iC(this.N),t.removeTarget=e,this.mr(t)}}class A6 extends Nj{constructor(e,t,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a),this.N=i,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(en(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(n,e){return n&&n.length>0?(en(void 0!==e),n.map(t=>function(r,i){let a=Pi(r.updateTime?r.updateTime:i);return a.isEqual(ln.min())&&(a=Pi(i)),new Qw(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.Dr(r,t)}return en(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=iC(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xA(this.N,r))};this.mr(t)}}class R6 extends class{}{constructor(e,t,r){super(),this.credentials=e,this.sr=t,this.N=r,this.kr=!1}$r(){if(this.kr)throw new ze(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.$r(),this.credentials.getToken().then(i=>this.sr.Li(e,t,r,i)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Me.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new ze(Me.UNKNOWN,i.toString())})}Ki(e,t,r){return this.$r(),this.credentials.getToken().then(i=>this.sr.Ki(e,t,r,i)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Me.UNAUTHENTICATED&&this.credentials.invalidateToken(),i):new ze(Me.UNKNOWN,i.toString())})}terminate(){this.kr=!0}}class M6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Wr(t),this.Mr=!1):st("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class x6{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=a,this.zr.Ti(f=>{r.enqueueAndForget((0,ke.Z)(function*(){var g;vh(c)&&(st("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ke.Z)(function*(b){const C=dt(b);C.Wr.add(4),yield Py(C),C.Hr.set("Unknown"),C.Wr.delete(4),yield uC(C)}),function(b){return g.apply(this,arguments)})(c))}))}),this.Hr=new M6(r,i)}}function uC(n){return PN.apply(this,arguments)}function PN(){return(PN=(0,ke.Z)(function*(n){if(vh(n))for(const e of n.Gr)yield e(!0)})).apply(this,arguments)}function Py(n){return NN.apply(this,arguments)}function NN(){return(NN=(0,ke.Z)(function*(n){for(const e of n.Gr)yield e(!1)})).apply(this,arguments)}function jA(n,e){const t=dt(n);t.Qr.has(e.targetId)||(t.Qr.set(e.targetId,e),VN(t)?LN(t):Fy(t).hr()&&FN(t,e))}function dC(n,e){const t=dt(n),r=Fy(t);t.Qr.delete(e),r.hr()&&Fj(t,e),0===t.Qr.size&&(r.hr()?r.wr():vh(t)&&t.Hr.set("Unknown"))}function FN(n,e){n.Jr.Y(e.targetId),Fy(n).br(e)}function Fj(n,e){n.Jr.Y(e),Fy(n).Pr(e)}function LN(n){n.Jr=new Mq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.Qr.get(e)||null}),Fy(n).start(),n.Hr.Lr()}function VN(n){return vh(n)&&!Fy(n).ur()&&n.Qr.size>0}function vh(n){return 0===dt(n).Wr.size}function Lj(n){n.Jr=void 0}function k6(n){return UN.apply(this,arguments)}function UN(){return(UN=(0,ke.Z)(function*(n){n.Qr.forEach((e,t)=>{FN(n,e)})})).apply(this,arguments)}function O6(n,e){return BN.apply(this,arguments)}function BN(){return(BN=(0,ke.Z)(function*(n,e){Lj(n),VN(n)?(n.Hr.qr(e),LN(n)):n.Hr.set("Unknown")})).apply(this,arguments)}function P6(n,e,t){return jN.apply(this,arguments)}function jN(){return(jN=(0,ke.Z)(function*(n,e,t){if(n.Hr.set("Online"),e instanceof L2&&2===e.state&&e.cause)try{yield(r=(0,ke.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Qr.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Qr.delete(f),i.Jr.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HA(n,r)}else if(e instanceof MA?n.Jr.rt(e):e instanceof F2?n.Jr.ft(e):n.Jr.at(e),!t.isEqual(ln.min()))try{const r=yield Dj(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Jr._t(a);return c.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.Qr.get(g);b&&i.Qr.set(g,b.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach(f=>{const g=i.Qr.get(f);if(!g)return;i.Qr.set(f,g.withResumeToken(hi.EMPTY_BYTE_STRING,g.snapshotVersion)),Fj(i,f);const b=new gh(g.target,f,1,g.sequenceNumber);FN(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){st("RemoteStore","Failed to raise snapshot:",r),yield HA(n,r)}var r})).apply(this,arguments)}function HA(n,e,t){return HN.apply(this,arguments)}function HN(){return(HN=(0,ke.Z)(function*(n,e,t){if(!Qp(e))throw e;n.Wr.add(1),yield Py(n),n.Hr.set("Offline"),t||(t=()=>Dj(n.localStore)),n.asyncQueue.enqueueRetryable((0,ke.Z)(function*(){st("RemoteStore","Retrying IndexedDB access"),yield t(),n.Wr.delete(1),yield uC(n)}))})).apply(this,arguments)}function Vj(n,e){return e().catch(t=>HA(n,t,e))}function Ny(n){return $N.apply(this,arguments)}function $N(){return($N=(0,ke.Z)(function*(n){const e=dt(n),t=bh(e);let r=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;N6(e);)try{const i=yield h6(e.localStore,r);if(null===i){0===e.jr.length&&t.wr();break}r=i.batchId,F6(e,i)}catch(i){yield HA(e,i)}Uj(e)&&Bj(e)})).apply(this,arguments)}function N6(n){return vh(n)&&n.jr.length<10}function F6(n,e){n.jr.push(e);const t=bh(n);t.hr()&&t.Vr&&t.Sr(e.mutations)}function Uj(n){return vh(n)&&!bh(n).ur()&&n.jr.length>0}function Bj(n){bh(n).start()}function L6(n){return zN.apply(this,arguments)}function zN(){return(zN=(0,ke.Z)(function*(n){bh(n).Nr()})).apply(this,arguments)}function V6(n){return GN.apply(this,arguments)}function GN(){return(GN=(0,ke.Z)(function*(n){const e=bh(n);for(const t of n.jr)e.Sr(t.mutations)})).apply(this,arguments)}function U6(n,e,t){return WN.apply(this,arguments)}function WN(){return(WN=(0,ke.Z)(function*(n,e,t){const r=n.jr.shift(),i=dN.from(r,e,t);yield Vj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ny(n)})).apply(this,arguments)}function B6(n,e){return qN.apply(this,arguments)}function qN(){return(qN=(0,ke.Z)(function*(n,e){var t;e&&bh(n).Vr&&(yield(t=(0,ke.Z)(function*(r,i){if(k2(a=i.code)&&a!==Me.ABORTED){const c=r.jr.shift();bh(r).dr(),yield Vj(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Ny(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Uj(n)&&Bj(n)})).apply(this,arguments)}function KN(n,e){return YN.apply(this,arguments)}function YN(){return(YN=(0,ke.Z)(function*(n,e){const t=dt(n);e?(t.Wr.delete(2),yield uC(t)):e||(t.Wr.add(2),yield Py(t),t.Hr.set("Unknown"))})).apply(this,arguments)}function Fy(n){return n.Yr||(n.Yr=function(e,t,r){const i=dt(e);return i.$r(),new S6(t,i.sr,i.credentials,i.N,r)}(n.datastore,n.asyncQueue,{Si:k6.bind(null,n),Ci:O6.bind(null,n),Rr:P6.bind(null,n)}),n.Gr.push(function(){var e=(0,ke.Z)(function*(t){t?(n.Yr.dr(),VN(n)?LN(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),Lj(n))});return function(t){return e.apply(this,arguments)}}())),n.Yr}function bh(n){return n.Xr||(n.Xr=function(e,t,r){const i=dt(e);return i.$r(),new A6(t,i.sr,i.credentials,i.N,r)}(n.datastore,n.asyncQueue,{Si:L6.bind(null,n),Ci:B6.bind(null,n),Cr:V6.bind(null,n),Dr:U6.bind(null,n)}),n.Gr.push(function(){var e=(0,ke.Z)(function*(t){t?(n.Xr.dr(),yield Ny(n)):(yield n.Xr.stop(),n.jr.length>0&&(st("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Xr}class ZN{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new ZN(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ze(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Qp(n))return new ze(Me.UNAVAILABLE,`${e}: ${n}`);throw n}class Vy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||kt.comparator(t.key,r.key):(t,r)=>kt.comparator(t.key,r.key),this.keyedMap=oN(),this.sortedSet=new Ci(this.comparator)}static emptySet(e){return new Vy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jj{constructor(){this.Zr=new Ci(kt.comparator)}track(e){const t=e.doc.key,r=this.Zr.get(t);r?0!==e.type&&3===r.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==r.type?this.Zr=this.Zr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Zr=this.Zr.remove(t):1===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):_t():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,r)=>{e.push(r)}),e}}class Uy{constructor(e,t,r,i,a,c,f,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Uy(e,t,Vy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class j6{constructor(){this.no=void 0,this.listeners=[]}}class H6{constructor(){this.queries=new xy(e=>v(e),m),this.onlineState="Unknown",this.so=new Set}}function QN(n,e){return JN.apply(this,arguments)}function JN(){return(JN=(0,ke.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new j6),i)try{a.no=yield t.onListen(r)}catch(c){const f=Ly(c,`Initialization of query '${w(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.io(t.onlineState),a.no&&e.ro(a.no)&&tF(t)})).apply(this,arguments)}function XN(n,e){return eF.apply(this,arguments)}function eF(){return(eF=(0,ke.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function $6(n,e){const t=dt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.ro(i)&&(r=!0);c.no=i}}r&&tF(t)}function z6(n,e,t){const r=dt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function tF(n){n.so.forEach(e=>{e.next()})}class nF{constructor(e,t,r){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}ro(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Uy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=Uy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class G6{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class Hj{constructor(e){this.N=e}zn(e){return ic(this.N,e)}Hn(e){return e.metadata.exists?W2(this.N,e.document,!1):yr.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Pi(e)}}class W6{constructor(e,t,r){this._o=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=$j(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,r=new Hj(this.N);for(const i of e)if(i.metadata.queries){const a=r.zn(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Zn()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,ke.Z)(function*(){const t=yield function(n,e,t,r){return TN.apply(this,arguments)}(e.localStore,new Hj(e.N),e.documents,e._o.id),r=e.yo(e.documents);for(const i of e.queries)yield g6(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new l6(Object.assign({},e.progress),t)})()}}function $j(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zj{constructor(e){this.key=e}}class Gj{constructor(e){this.key=e}}class Wj{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=Zn(),this.mutatedKeys=Zn(),this.Io=S(e),this.Ao=new Vy(this.Io)}get Ro(){return this.po}bo(e,t){const r=t?t.Po:new jj,i=t?t.Ao:this.Ao;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const g=Kw(this.query)&&i.size===this.query.limit?i.last():null,b=Yw(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const R=i.get(C),x=T(this.query,D)?D:null,B=!!R&&this.mutatedKeys.has(R.key),ae=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let me=!1;R&&x?R.data.isEqual(x.data)?B!==ae&&(r.track({type:3,doc:x}),me=!0):this.vo(R,x)||(r.track({type:2,doc:x}),me=!0,(g&&this.Io(x,g)>0||b&&this.Io(x,b)<0)&&(f=!0)):!R&&x?(r.track({type:0,doc:x}),me=!0):R&&!x&&(r.track({type:1,doc:R}),me=!0,(g||b)&&(f=!0)),me&&(x?(c=c.add(x),a=ae?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),Kw(this.query)||Yw(this.query))for(;c.size>this.query.limit;){const C=Kw(this.query)?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Ao:c,Po:r,Ln:f,mutatedKeys:a}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const a=e.Po.eo();a.sort((b,C)=>function(D,R){const x=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return x(D)-x(R)}(b.type,C.type)||this.Io(b.doc,C.doc)),this.Vo(r);const c=t?this.So():[],f=0===this.Eo.size&&this.current?1:0,g=f!==this.To;return this.To=f,0!==a.length||g?{snapshot:new Uy(this.query,e.Ao,i,a,e.mutatedKeys,0===f,g,!1),Do:c}:{Do:c}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new jj,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(t=>this.po=this.po.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=Zn(),this.Ao.forEach(r=>{this.Co(r.key)&&(this.Eo=this.Eo.add(r.key))});const t=[];return e.forEach(r=>{this.Eo.has(r)||t.push(new Gj(r))}),this.Eo.forEach(r=>{e.has(r)||t.push(new zj(r))}),t}No(e){this.po=e.Gn,this.Eo=Zn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Uy.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class q6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class K6{constructor(e){this.key=e,this.ko=!1}}class Y6{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.$o={},this.Oo=new xy(f=>v(f),m),this.Fo=new Map,this.Mo=new Set,this.Lo=new Ci(kt.comparator),this.Bo=new Map,this.Uo=new SN,this.qo={},this.Ko=new Map,this.jo=Xp.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function Z6(n,e){return rF.apply(this,arguments)}function rF(){return(rF=(0,ke.Z)(function*(n,e){const t=DF(n);let r,i;const a=t.Oo.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.xo();else{const c=yield ky(t.localStore,h(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield iF(t,e,r,"current"===f),t.isPrimaryClient&&jA(t.remoteStore,c)}return i})).apply(this,arguments)}function iF(n,e,t,r){return sF.apply(this,arguments)}function sF(){return(sF=(0,ke.Z)(function*(n,e,t,r){n.Wo=(C,D,R)=>{return(x=(0,ke.Z)(function*(B,ae,me,et){let pt=ae.view.bo(me);pt.Ln&&(pt=yield LA(B.localStore,ae.query,!1).then(({documents:Dn})=>ae.view.bo(Dn,pt)));const vt=et&&et.targetChanges.get(ae.targetId),ht=ae.view.applyChanges(pt,B.isPrimaryClient,vt);return gF(B,ae.targetId,ht.Do),ht.snapshot}),function(B,ae,me,et){return x.apply(this,arguments)})(n,C,D,R);var x};const i=yield LA(n.localStore,e,!0),a=new Wj(e,i.Gn),c=a.bo(i.documents),f=tC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(c,n.isPrimaryClient,f);gF(n,t,g.Do);const b=new q6(e,t,a);return n.Oo.set(e,b),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),g.snapshot})).apply(this,arguments)}function Q6(n,e){return oF.apply(this,arguments)}function oF(){return(oF=(0,ke.Z)(function*(n,e){const t=dt(n),r=t.Oo.get(e),i=t.Fo.get(r.targetId);if(i.length>1)return t.Fo.set(r.targetId,i.filter(a=>!m(a,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Oy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dC(t.remoteStore,r.targetId),By(t,r.targetId)}).catch(eg))):(By(t,r.targetId),yield Oy(t.localStore,r.targetId,!0))})).apply(this,arguments)}function aF(){return(aF=(0,ke.Z)(function*(n,e,t){const r=SF(n);try{const i=yield function(a,c){const f=dt(a),g=di.now(),b=c.reduce((D,R)=>D.add(R.key),Zn());let C;return f.persistence.runTransaction("Locally write mutations","readwrite",D=>f.Qn.Pn(D,b).next(R=>{C=R;const x=[];for(const B of c){const ae=Cq(B,C.get(B.key));null!=ae&&x.push(new fh(B.key,ae,CA(ae.value.mapValue),Mr.exists(!0)))}return f.In.addMutationBatch(D,g,x,c)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let g=a.qo[a.currentUser.toKey()];g||(g=new Ci(_n)),g=g.insert(c,f),a.qo[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Mu(r,i.changes),yield Ny(r.remoteStore)}catch(i){const a=Ly(i,"Failed to persist write");t.reject(a)}})).apply(this,arguments)}function qj(n,e){return lF.apply(this,arguments)}function lF(){return(lF=(0,ke.Z)(function*(n,e){const t=dt(n);try{const r=yield d6(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Bo.get(a);c&&(en(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ko=!0:i.modifiedDocuments.size>0?en(c.ko):i.removedDocuments.size>0&&(en(c.ko),c.ko=!1))}),yield Mu(t,r,e)}catch(r){yield eg(r)}})).apply(this,arguments)}function Kj(n,e,t){const r=dt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Oo.forEach((a,c)=>{const f=c.view.io(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=dt(a);f.onlineState=c;let g=!1;f.queries.forEach((b,C)=>{for(const D of C.listeners)D.io(c)&&(g=!0)}),g&&tF(f)}(r.eventManager,e),i.length&&r.$o.Rr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function X6(n,e,t){return cF.apply(this,arguments)}function cF(){return(cF=(0,ke.Z)(function*(n,e,t){const r=dt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Bo.get(e),a=i&&i.key;if(a){let c=new Ci(kt.comparator);c=c.insert(a,yr.newNoDocument(a,ln.min()));const f=Zn().add(a),g=new eC(ln.min(),new Map,new Kr(_n),c,f);yield qj(r,g),r.Lo=r.Lo.remove(a),r.Bo.delete(e),mF(r)}else yield Oy(r.localStore,e,!1).then(()=>By(r,e,t)).catch(eg)})).apply(this,arguments)}function e4(n,e){return uF.apply(this,arguments)}function uF(){return(uF=(0,ke.Z)(function*(n,e){const t=dt(n),r=e.batch.batchId;try{const i=yield u6(t.localStore,e);pF(t,r,null),fF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Mu(t,i)}catch(i){yield eg(i)}})).apply(this,arguments)}function t4(n,e,t){return dF.apply(this,arguments)}function dF(){return(dF=(0,ke.Z)(function*(n,e,t){const r=dt(n);try{const i=yield function(a,c){const f=dt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return f.In.lookupMutationBatch(g,c).next(C=>(en(null!==C),b=C.keys(),f.In.removeMutationBatch(g,C))).next(()=>f.In.performConsistencyCheck(g)).next(()=>f.Qn.Pn(g,b))})}(r.localStore,e);pF(r,e,t),fF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Mu(r,i)}catch(i){yield eg(i)}})).apply(this,arguments)}function hF(){return(hF=(0,ke.Z)(function*(n,e){const t=dt(n);vh(t.remoteStore)||st("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=dt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.In.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ko.get(r)||[];i.push(e),t.Ko.set(r,i)}catch(r){const i=Ly(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function fF(n,e){(n.Ko.get(e)||[]).forEach(t=>{t.resolve()}),n.Ko.delete(e)}function pF(n,e,t){const r=dt(n);let i=r.qo[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.qo[r.currentUser.toKey()]=i}}function By(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Oo.delete(r),t&&n.$o.Go(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.Uo.cs(e).forEach(r=>{n.Uo.containsKey(r)||Yj(n,r)})}function Yj(n,e){n.Mo.delete(e.path.canonicalString());const t=n.Lo.get(e);null!==t&&(dC(n.remoteStore,t),n.Lo=n.Lo.remove(e),n.Bo.delete(t),mF(n))}function gF(n,e,t){for(const r of t)r instanceof zj?(n.Uo.addReference(r.key,e),r4(n,r)):r instanceof Gj?(st("SyncEngine","Document no longer in limbo: "+r.key),n.Uo.removeReference(r.key,e),n.Uo.containsKey(r.key)||Yj(n,r.key)):_t()}function r4(n,e){const t=e.key,r=t.path.canonicalString();n.Lo.get(t)||n.Mo.has(r)||(st("SyncEngine","New document in limbo: "+t),n.Mo.add(r),mF(n))}function mF(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const e=n.Mo.values().next().value;n.Mo.delete(e);const t=new kt(Rn.fromString(e)),r=n.jo.next();n.Bo.set(r,new K6(t)),n.Lo=n.Lo.insert(t,r),jA(n.remoteStore,new gh(h(Yp(t.path)),r,2,ds.T))}}function Mu(n,e,t){return _F.apply(this,arguments)}function _F(){return(_F=(0,ke.Z)(function*(n,e,t){const r=dt(n),i=[],a=[],c=[];var f;r.Oo.isEmpty()||(r.Oo.forEach((f,g)=>{c.push(r.Wo(g,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,b.fromCache?"not-current":"current"),i.push(b);const C=EN.kn(g.targetId,b);a.push(C)}}))}),yield Promise.all(c),r.$o.Rr(i),yield(f=(0,ke.Z)(function*(g,b){const C=dt(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Ge.forEach(b,R=>Ge.forEach(R.Nn,x=>C.persistence.referenceDelegate.addReference(D,R.targetId,x)).next(()=>Ge.forEach(R.xn,x=>C.persistence.referenceDelegate.removeReference(D,R.targetId,x)))))}catch(D){if(!Qp(D))throw D;st("LocalStore","Failed to update sequence numbers: "+D)}for(const D of b){const R=D.targetId;if(!D.fromCache){const x=C.Un.get(R),ae=x.withLastLimboFreeSnapshotVersion(x.snapshotVersion);C.Un=C.Un.insert(R,ae)}}}),function(g,b){return f.apply(this,arguments)})(r.localStore,a))})).apply(this,arguments)}function i4(n,e){return yF.apply(this,arguments)}function yF(){return(yF=(0,ke.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const r=yield Tj(t.localStore,e);t.currentUser=e,(i=t).Ko.forEach(c=>{c.forEach(f=>{f.reject(new ze(Me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ko.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mu(t,r.Wn)}var i})).apply(this,arguments)}function s4(n,e){const t=dt(n),r=t.Bo.get(e);if(r&&r.ko)return Zn().add(r.key);{let i=Zn();const a=t.Fo.get(e);if(!a)return i;for(const c of a){const f=t.Oo.get(c);i=i.unionWith(f.view.Ro)}return i}}function o4(n,e){return vF.apply(this,arguments)}function vF(){return(vF=(0,ke.Z)(function*(n,e){const t=dt(n),r=yield LA(t.localStore,e.query,!0),i=e.view.No(r);return t.isPrimaryClient&&gF(t,e.targetId,i.Do),i})).apply(this,arguments)}function a4(n){return bF.apply(this,arguments)}function bF(){return(bF=(0,ke.Z)(function*(n){const e=dt(n);return Rj(e.localStore).then(t=>Mu(e,t))})).apply(this,arguments)}function l4(n,e,t,r){return EF.apply(this,arguments)}function EF(){return(EF=(0,ke.Z)(function*(n,e,t,r){const i=dt(n),a=yield function(c,f){const g=dt(c),b=dt(g.In);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>b.Xt(C,f).next(D=>D?g.Qn.Pn(C,D):Ge.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Ny(i.remoteStore):"acknowledged"===t||"rejected"===t?(pF(i,e,r||null),fF(i,e),f=e,dt(dt(i.localStore).In).te(f)):_t(),yield Mu(i,a)):st("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function wF(){return(wF=(0,ke.Z)(function*(n,e){const t=dt(n);if(DF(t),SF(t),!0===e&&!0!==t.Qo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Zj(t,r.toArray());t.Qo=!0,yield KN(t.remoteStore,!0);for(const a of i)jA(t.remoteStore,a)}else if(!1===e&&!1!==t.Qo){const r=[];let i=Promise.resolve();t.Fo.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(By(t,c),Oy(t.localStore,c,!0))),dC(t.remoteStore,c)}),yield i,yield Zj(t,r),function(a){const c=dt(a);c.Bo.forEach((f,g)=>{dC(c.remoteStore,g)}),c.Uo.us(),c.Bo=new Map,c.Lo=new Ci(kt.comparator)}(t),t.Qo=!1,yield KN(t.remoteStore,!1)}})).apply(this,arguments)}function Zj(n,e,t){return CF.apply(this,arguments)}function CF(){return(CF=(0,ke.Z)(function*(n,e,t){const r=dt(n),i=[],a=[];for(const c of e){let f;const g=r.Fo.get(c);if(g&&0!==g.length){f=yield ky(r.localStore,h(g[0]));for(const b of g){const C=r.Oo.get(b),D=yield o4(r,C);D.snapshot&&a.push(D.snapshot)}}else{const b=yield Aj(r.localStore,c);f=yield ky(r.localStore,b),yield iF(r,Qj(b),c,!1)}i.push(f)}return r.$o.Rr(a),i})).apply(this,arguments)}function Qj(n){return rN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function u4(n){const e=dt(n);return dt(dt(e.localStore).persistence).pn()}function d4(n,e,t,r){return IF.apply(this,arguments)}function IF(){return(IF=(0,ke.Z)(function*(n,e,t,r){const i=dt(n);if(i.Qo)st("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(e))switch(t){case"current":case"not-current":{const a=yield Rj(i.localStore),c=eC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Mu(i,a,c);break}case"rejected":yield Oy(i.localStore,e,!0),By(i,e,r);break;default:_t()}})).apply(this,arguments)}function h4(n,e,t){return TF.apply(this,arguments)}function TF(){return(TF=(0,ke.Z)(function*(n,e,t){const r=DF(n);if(r.Qo){for(const i of e){if(r.Fo.has(i)){st("SyncEngine","Adding an already active target "+i);continue}const a=yield Aj(r.localStore,i),c=yield ky(r.localStore,a);yield iF(r,Qj(a),c.targetId,!1),jA(r.remoteStore,c)}for(const i of t)r.Fo.has(i)&&(yield Oy(r.localStore,i,!1).then(()=>{dC(r.remoteStore,i),By(r,i)}).catch(eg))}})).apply(this,arguments)}function DF(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X6.bind(null,e),e.$o.Rr=$6.bind(null,e.eventManager),e.$o.Go=z6.bind(null,e.eventManager),e}function SF(n){const e=dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t4.bind(null,e),e}class Jj{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ke.Z)(function*(){t.N=cC(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return Ij(this.persistence,new Cj,e.initialUser,this.N)}Jo(e){return new E6(AN.Ns,this.N)}Ho(e){return new kj}terminate(){var e=this;return(0,ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xj extends Jj{constructor(e,t,r){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ke.Z)(function*(){yield t().call(r,e),yield function(n){return IN.apply(this,arguments)}(r.localStore),yield r.Zo.initialize(r,e),yield SF(r.Zo.syncEngine),yield Ny(r.Zo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Xo(e){return Ij(this.persistence,new Cj,e.initialUser,this.N)}Yo(e){return new n6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=bN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ys.withCacheSize(this.cacheSizeBytes):Ys.DEFAULT;return new vN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Pj(),BA(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new kj}}class p4 extends Xj{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ke.Z)(function*(){yield t().call(r,e);const i=r.Zo.syncEngine;r.sharedClientState instanceof kN&&(r.sharedClientState.syncEngine={_i:l4.bind(null,i),mi:d4.bind(null,i),gi:h4.bind(null,i),pn:u4.bind(null,i),wi:a4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var a=(0,ke.Z)(function*(c){yield function(n,e){return wF.apply(this,arguments)}(r.Zo.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Ho(e){const t=Pj();if(!kN.bt(t))throw new ze(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class AF{initialize(e,t){var r=this;return(0,ke.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Kj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=i4.bind(null,r.syncEngine),yield KN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new H6}createDatastore(e){const t=cC(e.databaseInfo.databaseId),r=new D6(e.databaseInfo);return new R6(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>Kj(this.syncEngine,f,0),c=Oj.bt()?new Oj:new C6,new x6(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,g,b){const C=new Y6(r,i,a,c,f,g);return b&&(C.Qo=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ke.Z)(function*(t){const r=dt(t);st("RemoteStore","RemoteStore shutting down."),r.Wr.add(5),yield Py(r),r.zr.shutdown(),r.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eH(n,e=10240){let t=0;return{read:()=>(0,ke.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ke.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $A{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class g4{constructor(e,t){this.nc=e,this.N=t,this.metadata=new ii,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(r=>{r&&r.wo()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,ke.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,ke.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,ke.Z)(function*(){const t=yield e.rc();if(null===t)return null;const r=e.sc.decode(t),i=Number(r);isNaN(i)&&e.oc(`length string (${r}) is not valid number`);const a=yield e.cc(i);return new G6(JSON.parse(a),t.length+i)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,ke.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}cc(e){var t=this;return(0,ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const r=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.nc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class m4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ze(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ke.Z)(function*(a,c){const f=dt(a),g=iC(f.N)+"/documents",b={documents:c.map(x=>rC(f.N,x))},C=yield f.Ki("BatchGetDocuments",g,b),D=new Map;C.forEach(x=>{const B=function(n,e){return"found"in e?function(t,r){en(!!r.found);const i=ic(t,r.found.name),a=Pi(r.found.updateTime),c=new Oi({mapValue:{fields:r.found.fields}});return yr.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){en(!!r.missing),en(!!r.readTime);const i=ic(t,r.missing),a=Pi(r.readTime);return yr.newNoDocument(i,a)}(n,e):_t()}(f.N,x);D.set(B.key.toString(),B)});const R=[];return c.forEach(x=>{const B=D.get(x.toString());en(!!B),R.push(B)}),R}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=kt.fromPath(i);e.mutations.push(new sN(a,e.precondition(a)))}),yield(r=(0,ke.Z)(function*(i,a){const c=dt(i),f=iC(c.N)+"/documents",g={writes:a.map(b=>xA(c.N,b))};yield c.Li("Commit",f,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _t();t=ln.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ze(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Mr.updateTime(t):Mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ln.min()))throw new ze(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(t)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _4{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.hc=5,this.ar=new ON(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,ke.Z)(function*(){const t=new m4(e.datastore),r=e.fc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.dc(a)}))}).catch(i=>{e.dc(i)})}))}fc(e){try{const t=this.updateFunction(e);return!hs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!k2(t)}return!1}}class y4{constructor(e,t,r){var i=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=ki.UNAUTHENTICATED,this.clientId=vA.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var a=(0,ke.Z)(function*(c){st("FirestoreClient","Received user=",c.uid),yield i.credentialListener(c),i.user=c});return function(c){return a.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ze(Me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const i=Ly(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function tH(n,e){return RF.apply(this,arguments)}function RF(){return(RF=(0,ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ke.Z)(function*(a){r.isEqual(a)||(yield Tj(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function nH(n,e){return MF.apply(this,arguments)}function MF(){return(MF=(0,ke.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xF(n);st("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>{return(a=(0,ke.Z)(function*(c,f){const g=dt(c);g.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const b=vh(g);g.Wr.add(3),yield Py(g),b&&g.Hr.set("Unknown"),yield g.remoteSyncer.handleCredentialChange(f),g.Wr.delete(3),yield uC(g)}),function(c,f){return a.apply(this,arguments)})(e.remoteStore,i);var a}),n.onlineComponents=e})).apply(this,arguments)}function xF(n){return kF.apply(this,arguments)}function kF(){return(kF=(0,ke.Z)(function*(n){return n.offlineComponents||(st("FirestoreClient","Using default OfflineComponentProvider"),yield tH(n,new Jj)),n.offlineComponents})).apply(this,arguments)}function zA(n){return OF.apply(this,arguments)}function OF(){return(OF=(0,ke.Z)(function*(n){return n.onlineComponents||(st("FirestoreClient","Using default OnlineComponentProvider"),yield nH(n,new AF)),n.onlineComponents})).apply(this,arguments)}function rH(n){return xF(n).then(e=>e.persistence)}function PF(n){return xF(n).then(e=>e.localStore)}function iH(n){return zA(n).then(e=>e.remoteStore)}function NF(n){return zA(n).then(e=>e.syncEngine)}function jy(n){return FF.apply(this,arguments)}function FF(){return(FF=(0,ke.Z)(function*(n){const e=yield zA(n),t=e.eventManager;return t.onListen=Z6.bind(null,e.syncEngine),t.onUnlisten=Q6.bind(null,e.syncEngine),t})).apply(this,arguments)}function sH(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(i,a,c,f,g){const b=new $A({next:D=>{a.enqueueAndForget(()=>XN(i,C));const R=D.docs.has(c);!R&&D.fromCache?g.reject(new ze(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&f&&"server"===f.source?g.reject(new ze(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new nF(Yp(c.path),b,{includeMetadataChanges:!0,fo:!0});return QN(i,C)}(yield jy(n),n.asyncQueue,e,t,r)})),r.promise}function oH(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(i,a,c,f,g){const b=new $A({next:D=>{a.enqueueAndForget(()=>XN(i,C)),D.fromCache&&"server"===f.source?g.reject(new ze(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new nF(c,b,{includeMetadataChanges:!0,fo:!0});return QN(i,C)}(yield jy(n),n.asyncQueue,e,t,r)})),r.promise}class S4{constructor(e,t,r,i,a,c,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=g}}class Hy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hy&&e.projectId===this.projectId&&e.database===this.database}}const aH=new Map;function LF(n,e,t){if(!t)throw new ze(Me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lH(n,e,t,r){if(!0===e&&!0===r)throw new ze(Me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cH(n){if(!kt.isDocumentKey(n))throw new ze(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uH(n){if(kt.isDocumentKey(n))throw new ze(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_t()}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ze(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=GA(n);throw new ze(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dH(n,e){if(e<=0)throw new ze(Me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hH{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ze(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ze(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hC{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hH({}),this._settingsFrozen=!1,e instanceof Hy?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ze(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hy(r.options.projectId)}(e))}get app(){if(!this._app)throw new ze(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ze(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hH(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new Bw;switch(t.type){case"gapi":const r=t.client;return en(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new yA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ze(Me.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aH.get(e);t&&(st("ComponentProvider","Removing Datastore"),aH.delete(e),t.terminate())}(this),Promise.resolve()}}class Cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cr(this.firestore,e,this._key)}}class ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class oc extends ps{constructor(e,t,r){super(e,t,Yp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cr(this.firestore,null,new kt(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function fH(n,e,...t){if(n=(0,se.m9)(n),LF("collection","path",e),n instanceof hC){const r=Rn.fromString(e,...t);return uH(r),new oc(n,null,r)}{if(!(n instanceof Cr||n instanceof oc))throw new ze(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return uH(r),new oc(n.firestore,null,r)}}function WA(n,e,...t){if(n=(0,se.m9)(n),1===arguments.length&&(e=vA.I()),LF("doc","path",e),n instanceof hC){const r=Rn.fromString(e,...t);return cH(r),new Cr(n,null,new kt(r))}{if(!(n instanceof Cr||n instanceof oc))throw new ze(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(e,...t));return cH(r),new Cr(n.firestore,n instanceof oc?n.converter:null,new kt(r))}}function pH(n,e){return n=(0,se.m9)(n),e=(0,se.m9)(e),(n instanceof Cr||n instanceof oc)&&(e instanceof Cr||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gH(n,e){return n=(0,se.m9)(n),e=(0,se.m9)(e),n instanceof ps&&e instanceof ps&&n.firestore===e.firestore&&m(n._query,e._query)&&n.converter===e.converter}class M4{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new ON(this,"async_queue_retry"),this.Rc=()=>{const t=BA();t&&st("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const e=BA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=BA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new ii;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,ke.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(t){if(!Qp(t))throw t;st("AsyncQueue","Operation failed with retryable error: "+t)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(r=>{throw this.Tc=r,this.Ec=!1,Wr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Ec=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const i=ZN.createAndSchedule(this,e,t,r,a=>this.Vc(a));return this.yc.push(i),i}bc(){this.Tc&&_t()}verifyOperationInProgress(){}Sc(){var e=this;return(0,ke.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function VF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class x4{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vr extends hC{constructor(e,t){super(e,t),this.type="firestore",this._queue=new M4,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||mH(this),this._firestoreClient.terminate()}}function O4(n=(0,kn.getApp)()){return(0,kn._getProvider)(n,"firestore").getImmediate()}function Ii(n){return n._firestoreClient||mH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mH(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new S4(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new y4(n._credentials,n._queue,r)}function _H(n,e,t){const r=new ii;return n.asyncQueue.enqueue((0,ke.Z)(function*(){try{yield tH(n,t),yield nH(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===Me.FAILED_PRECONDITION||a.code===Me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function yH(n){if(n._initialized||n._terminated)throw new ze(Me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ze(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(hi.fromBase64String(e))}catch(t){throw new ze(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tg{constructor(e){this._methodName=e}}class qA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _n(this._lat,e._lat)||_n(this._long,e._long)}}const H4=/^__.*__$/;class $4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jw(e,this.data,t,this.fieldTransforms)}}class vH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class KA{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new KA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$c({path:r,Fc:!1});return i.Mc(e),i}Lc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.$c({path:r,Fc:!1});return i.xc(),i}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return ZA(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(bH(this.kc)&&H4.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class z4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||cC(e)}jc(e,t,r,i=!1){return new KA({kc:e,methodName:t,Kc:r,path:si.emptyPath(),Fc:!1,qc:i},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function ng(n){const e=n._freezeSettings(),t=cC(n._databaseId);return new z4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YA(n,e,t,r,i,a={}){const c=n.jc(a.merge||a.mergeFields?2:0,e,t,i);HF("Data must be an object, but it was:",c,r);const f=CH(r,c);let g,b;if(a.merge)g=new vu(c.fieldMask),b=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const D of a.mergeFields){const R=$F(e,D,t);if(!c.contains(R))throw new ze(Me.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);TH(C,R)||C.push(R)}g=new vu(C),b=c.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,b=c.fieldTransforms;return new $4(new Oi(f),g,b)}class fC extends tg{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fC}}function EH(n,e,t){return new KA({kc:3,Kc:e.settings.Kc,methodName:n._methodName,Fc:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class UF extends tg{_toFieldTransform(e){return new ra(e.path,new Ct)}isEqual(e){return e instanceof UF}}class G4 extends tg{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=EH(this,e,!0),r=this.Qc.map(a=>rg(a,t)),i=new Ft(r);return new ra(e.path,i)}isEqual(e){return this===e}}class W4 extends tg{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=EH(this,e,!0),r=this.Qc.map(a=>rg(a,t)),i=new lr(r);return new ra(e.path,i)}isEqual(e){return this===e}}class q4 extends tg{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new na(e.N,ee(e.N,this.Wc));return new ra(e.path,t)}isEqual(e){return this===e}}function BF(n,e,t,r){const i=n.jc(1,e,t);HF("Data must be an object, but it was:",i,r);const a=[],c=Oi.empty();Lr(r,(g,b)=>{const C=zF(e,g,t);b=(0,se.m9)(b);const D=i.Lc(C);if(b instanceof fC)a.push(C);else{const R=rg(b,D);null!=R&&(a.push(C),c.set(C,R))}});const f=new vu(a);return new vH(c,f,i.fieldTransforms)}function jF(n,e,t,r,i,a){const c=n.jc(1,e,t),f=[$F(e,r,t)],g=[i];if(a.length%2!=0)throw new ze(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)f.push($F(e,a[R])),g.push(a[R+1]);const b=[],C=Oi.empty();for(let R=f.length-1;R>=0;--R)if(!TH(b,f[R])){const x=f[R];let B=g[R];B=(0,se.m9)(B);const ae=c.Lc(x);if(B instanceof fC)b.push(x);else{const me=rg(B,ae);null!=me&&(b.push(x),C.set(x,me))}}const D=new vu(b);return new vH(C,D,c.fieldTransforms)}function wH(n,e,t,r=!1){return rg(t,n.jc(r?4:3,e))}function rg(n,e){if(IH(n=(0,se.m9)(n)))return HF("Unsupported field value:",e,n),CH(n,e);if(n instanceof tg)return function(t,r){if(!bH(r.kc))throw r.Uc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Uc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=rg(c,r.Bc(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,se.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ee(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=di.fromDate(t);return{timestampValue:nC(r.N,i)}}if(t instanceof di){const i=new di(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nC(r.N,i)}}if(t instanceof qA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:j2(r.N,t._byteString)};if(t instanceof Cr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Uc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:aN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Uc(`Unsupported field value: ${GA(t)}`)}(n,e)}function CH(n,e){const t={};return oh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(n,(r,i)=>{const a=rg(i,e.Oc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function IH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof di||n instanceof qA||n instanceof ac||n instanceof Cr||n instanceof tg)}function HF(n,e,t){if(!IH(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=GA(t);throw e.Uc("an object"===r?n+" a custom object":n+" "+r)}var r}function $F(n,e,t){if((e=(0,se.m9)(e))instanceof xu)return e._internalPath;if("string"==typeof e)return zF(n,e);throw ZA("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const K4=new RegExp("[~\\*/\\[\\]]");function zF(n,e,t){if(e.search(K4)>=0)throw ZA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xu(...e.split("."))._internalPath}catch(r){throw ZA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZA(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(a||c)&&(g+=" (found",a&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new ze(Me.INVALID_ARGUMENT,f+n+g)}function TH(n,e){return n.some(t=>t.isEqual(e))}class pC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Y4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Y4 extends pC{data(){return super.data()}}function QA(n,e){return"string"==typeof e?zF(n,e):e instanceof xu?e._internalPath:e._delegate._internalPath}class ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ku extends pC{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gC extends ku{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gC(this._firestore,this._userDataWriter,r.key,r,new ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new gC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ig(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new gC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ig(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,b=-1;return 0!==c.type&&(g=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),b=a.indexOf(c.doc.key)),{type:Z4(c.type),doc:f,oldIndex:g,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Z4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function DH(n,e){return n instanceof ku&&e instanceof ku?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&gH(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function SH(n){if(Yw(n)&&0===n.explicitOrderBy.length)throw new ze(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mC{}function wh(n,...e){for(const t of e)n=t._apply(n);return n}class Q4 extends mC{constructor(e,t,r){super(),this.Gc=e,this.zc=t,this.Hc=r,this.type="where"}_apply(e){const t=ng(e.firestore),r=function(i,a,c,f,g,b,C){let D;if(g.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new ze(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on FieldPath.documentId().`);if("in"===b||"not-in"===b){OH(C,b);const x=[];for(const B of C)x.push(kH(f,i,B));D={arrayValue:{values:x}}}else D=kH(f,i,C)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||OH(C,b),D=wH(c,"where",C,"in"===b||"not-in"===b);const R=Zi.create(g,b,D);return function(x,B){if(B.v()){const me=o(x);if(null!==me&&!me.isEqual(B.field))throw new ze(Me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${me.toString()}' and '${B.field.toString()}'`);const et=s(x);null!==et&&PH(0,B.field,et)}const ae=function(me,et){for(const pt of me.filters)if(et.indexOf(pt.op)>=0)return pt.op;return null}(x,function(me){switch(me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==ae)throw new ze(Me.INVALID_ARGUMENT,ae===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${ae.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new ps(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new za(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class X4 extends mC{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ze(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ze(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Kp(i,a);return function(f,g){if(null===s(f)){const b=o(f);null!==b&&PH(0,b,g.field)}}(r,c),c}(e._query,this.Gc,this.Jc);return new ps(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new za(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class AH extends mC{constructor(e,t,r){super(),this.type=e,this.Yc=t,this.Xc=r}_apply(e){return new ps(e.firestore,e.converter,p(e._query,this.Yc,this.Xc))}}class RH extends mC{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=xH(e,this.type,this.Zc,this.ta);return new ps(e.firestore,e.converter,(i=t,new za((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class MH extends mC{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=xH(e,this.type,this.Zc,this.ta);return new ps(e.firestore,e.converter,(i=t,new za((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function xH(n,e,t,r){if(t[0]=(0,se.m9)(t[0]),t[0]instanceof pC)return function(i,a,c,f,g){if(!f)throw new ze(Me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const C of u(i))if(C.field.isKeyField())b.push(vy(a,f.key));else{const D=f.data.field(C.field);if(Hw(D))throw new ze(Me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=C.field.canonicalString();throw new ze(Me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}b.push(D)}return new qp(b,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ng(n.firestore);return function(a,c,f,g,b,C){const D=a.explicitOrderBy;if(b.length>D.length)throw new ze(Me.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let x=0;x<b.length;x++){const B=b[x];if(D[x].field.isKeyField()){if("string"!=typeof B)throw new ze(Me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!l(a)&&-1!==B.indexOf("/"))throw new ze(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const ae=a.path.child(Rn.fromString(B));if(!kt.isDocumentKey(ae))throw new ze(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${g}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const me=new kt(ae);R.push(vy(c,me))}else{const ae=wH(f,g,B);R.push(ae)}}return new qp(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kH(n,e,t){if("string"==typeof(t=(0,se.m9)(t))){if(""===t)throw new ze(Me.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!l(e)&&-1!==t.indexOf("/"))throw new ze(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Rn.fromString(t));if(!kt.isDocumentKey(r))throw new ze(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vy(n,new kt(r))}if(t instanceof Cr)return vy(n,t._key);throw new ze(Me.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${GA(t)}.`)}function OH(n,e){if(!Array.isArray(n)||0===n.length)throw new ze(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ze(Me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function PH(n,e,t){if(!t.isEqual(e))throw new ze(Me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class GF{convertValue(e,t="none"){switch(Eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){const r={};return Lr(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new qA(qr(e.latitude),qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wp(e));default:return null}}convertTimestamp(e){const t=nc(e);return new di(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Rn.fromString(e);en(ej(r));const i=new Hy(r.get(1),r.get(3)),a=new kt(r.popFirst(5));return i.isEqual(t)||Wr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function JA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class aK extends GF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}class NH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ng(e)}set(e,t,r){this._verifyNotCommitted();const i=Ch(e,this._firestore),a=JA(i.converter,t,r),c=YA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Mr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ch(e,this._firestore);let c;return c="string"==typeof(t=(0,se.m9)(t))||t instanceof xu?jF(this._dataReader,"WriteBatch.update",a._key,t,r,i):BF(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ch(e,this._firestore);return this._mutations=this._mutations.concat(new Xw(t._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ch(n,e){if((n=(0,se.m9)(n)).firestore!==e)throw new ze(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class sg extends GF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}function FH(n,e,t){n=xn(n,Cr);const r=xn(n.firestore,Vr),i=JA(n.converter,e,t);return $y(r,[YA(ng(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Mr.none())])}function LH(n,e,t,...r){n=xn(n,Cr);const i=xn(n.firestore,Vr),a=ng(i);let c;return c="string"==typeof(e=(0,se.m9)(e))||e instanceof xu?jF(a,"updateDoc",n._key,e,t,r):BF(a,"updateDoc",n._key,e),$y(i,[c.toMutation(n._key,Mr.exists(!0))])}function VH(n,...e){var t,r,i;n=(0,se.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||VF(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(VF(e[c])){const D=e[c];e[c]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,b,C;if(n instanceof Cr)b=xn(n.firestore,Vr),C=Yp(n._key.path),g={next:D=>{e[c]&&e[c](WF(b,n,D))},error:e[c+1],complete:e[c+2]};else{const D=xn(n,ps);b=xn(D.firestore,Vr),C=D._query;const R=new sg(b);g={next:x=>{e[c]&&e[c](new Eh(b,R,D,x))},error:e[c+1],complete:e[c+2]},SH(n._query)}return function(D,R,x,B){const ae=new $A(B),me=new nF(R,ae,x);return D.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return QN(yield jy(D),me)})),()=>{ae.ec(),D.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return XN(yield jy(D),me)}))}}(Ii(b),C,f,g)}function $y(n,e){return function(t,r){const i=new ii;return t.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(n,e,t){return aF.apply(this,arguments)}(yield NF(t),r,i)})),i.promise}(Ii(n),e)}function WF(n,e,t){const r=t.docs.get(e._key),i=new sg(n);return new ku(n,i,e._key,r,new ig(t.hasPendingWrites,t.fromCache),e.converter)}class _K extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ng(e)}get(e){const t=Ch(e,this._firestore),r=new aK(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return _t();const a=i[0];if(a.isFoundDocument())return new pC(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new pC(this._firestore,r,t._key,null,t.converter);throw _t()})}set(e,t,r){const i=Ch(e,this._firestore),a=JA(i.converter,t,r),c=YA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Ch(e,this._firestore);let c;return c="string"==typeof(t=(0,se.m9)(t))||t instanceof xu?jF(this._dataReader,"Transaction.update",a._key,t,r,i):BF(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ch(e,this._firestore),r=new sg(this._firestore);return super.get(e).then(i=>new ku(this._firestore,r,t._key,i._document,new ig(!1,!1),t.converter))}}function qF(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ze("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function UH(){if("undefined"==typeof Uint8Array)throw new ze("unimplemented","Uint8Arrays are not available in this environment.")}function BH(){if("undefined"==typeof atob)throw new ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xl=kn.SDK_VERSION,(0,kn._registerComponent)(new zl.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Vr(i,new fy(t.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,kn.registerVersion)(ZP,"3.3.0",n),(0,kn.registerVersion)(ZP,"3.3.0","esm2017")}();class _C{constructor(e){this._delegate=e}static fromBase64String(e){return BH(),new _C(ac.fromBase64String(e))}static fromUint8Array(e){return UH(),new _C(ac.fromUint8Array(e))}toBase64(){return BH(),this._delegate.toBase64()}toUint8Array(){return UH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KF(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class SK{enableIndexedDbPersistence(e,t){return function(n,e){yH(n=xn(n,Vr));const t=Ii(n),r=n._freezeSettings(),i=new AF;return _H(t,i,new Xj(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){yH(n=xn(n,Vr));const e=Ii(n),t=n._freezeSettings(),r=new AF;return _H(e,r,new p4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new ze(Me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{yield(t=(0,ke.Z)(function*(r){if(!Wa.bt())return Promise.resolve();const i=r+"main";yield Wa.delete(i)}),function(r){return t.apply(this,arguments)})(bN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jH{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Gp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const a=(n=xn(n,hC))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Gp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=ki.MOCK_USER;else{c=(0,se.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ze(Me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ki(g)}n._credentials=new jw(new hy(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield rH(n),t=yield iH(n);return e.setNetworkEnabled(!0),function(r){const i=dt(r);return i.Wr.delete(0),uC(i)}(t)}))}(Ii(n=xn(n,Vr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield rH(n),t=yield iH(n);return e.setNetworkEnabled(!1),(r=(0,ke.Z)(function*(i){const a=dt(i);a.Wr.add(0),yield Py(a),a.Hr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ii(n=xn(n,Vr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lH("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new ii;return e.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(n,e){return hF.apply(this,arguments)}(yield NF(e),t)})),t.promise}(Ii(n=xn(n,Vr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new $A(e);return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return r=yield jy(n),i=t,dt(r).so.add(i),void i.next();var r,i})),()=>{t.ec(),n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return r=yield jy(n),i=t,void dt(r).so.delete(i);var r,i}))}}(Ii(n=xn(n,Vr)),VF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zy(this,fH(this._delegate,e))}catch(t){throw Rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,WA(this._delegate,e))}catch(t){throw Rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function(n,e){if(n=xn(n,hC),LF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ze(Me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ps(n,null,(t=e,new za(Rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){const r=yield(i=n,zA(i).then(a=>a.datastore));var i;new _4(n.asyncQueue,r,e,t).run()})),t.promise}(Ii(n=xn(n,Vr)),t=>e(new _K(n,t)))}(this._delegate,t=>e(new HH(this,t)))}batch(){return Ii(this._delegate),new $H(new NH(this._delegate,e=>$y(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Ii(n=xn(n,Vr)),r=new x4;return function(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,b){if(g instanceof Uint8Array)return eH(g,b);if(g instanceof ArrayBuffer)return eH(new Uint8Array(g),b);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new g4(g,c);var g}(t,cC(e));n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){!function(n,e,t){const r=dt(n);var i;(i=(0,ke.Z)(function*(a,c,f){try{const g=yield c.getMetadata();if(yield function(R,x){const B=dt(R),ae=Pi(x.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",me=>B.Je.getBundleMetadata(me,x.id)).then(me=>!!me&&me.createTime.compareTo(ae)>=0)}(a.localStore,g))return yield c.close(),void f._completeWith((R=g,{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}));f._updateProgress($j(g));const b=new W6(g,a.localStore,c.N);let C=yield c.zo();for(;C;){const R=yield b.mo(C);R&&f._updateProgress(R),C=yield c.zo()}const D=yield b.complete();yield Mu(a,D.En,void 0),yield function(R,x){const B=dt(R);return B.persistence.runTransaction("Save bundle","readwrite",ae=>B.Je.saveBundleMetadata(ae,x))}(a.localStore,g),f._completeWith(D.progress)}catch(g){Gp("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g)}var R}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield NF(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ke.Z)(function*(){return function(t,r){const i=dt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Je.getNamedQuery(a,r))}(yield PF(n),e)}))}(Ii(n=xn(n,Vr)),e).then(t=>t?new ps(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class XA extends GF{constructor(e){super(),this.firestore=e}convertBytes(e){return new _C(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class HH{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new XA(e)}get(e){const t=ag(e);return this._delegate.get(t).then(r=>new yC(this._firestore,new ku(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ag(e);return r?(qF("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=ag(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=ag(e);return this._delegate.delete(t),this}}class $H{constructor(e){this._delegate=e}set(e,t,r){const i=ag(e);return r?(qF("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=ag(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=ag(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class og{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=og.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new og(e,new XA(e),t),i.set(t,a)),a}}og.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new Cr(t._delegate,r,new kt(e)))}static forKey(e,t,r){return new sa(t,new Cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zy(this.firestore,fH(this._delegate,e))}catch(t){throw Rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,se.m9)(e))instanceof Cr&&pH(this._delegate,e)}set(e,t){t=qF("DocumentReference.set",t);try{return t?FH(this._delegate,e,t):FH(this._delegate,e)}catch(r){throw Rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?LH(this._delegate,e):LH(this._delegate,e,t,...r)}catch(i){throw Rs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return $y(xn(n.firestore,Vr),[new Xw(n._key,Mr.none())])}(this._delegate)}onSnapshot(...e){const t=zH(e),r=GH(e,i=>new yC(this.firestore,new ku(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return VH(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=xn(n,Cr);const e=xn(n.firestore,Vr),t=Ii(e),r=new sg(e);return function(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(r=(0,ke.Z)(function*(i,a,c){try{const f=yield function(g,b){const C=dt(g);return C.persistence.runTransaction("read document","readonly",D=>C.Qn.An(D,b))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new ze(Me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=Ly(f,`Failed to get document '${a} from cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield PF(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ku(e,r,n._key,i,new ig(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=xn(n,Cr);const e=xn(n.firestore,Vr);return sH(Ii(e),n._key,{source:"server"}).then(t=>WF(e,n,t))}(this._delegate):function(n){n=xn(n,Cr);const e=xn(n.firestore,Vr);return sH(Ii(e),n._key).then(t=>WF(e,n,t))}(this._delegate),t.then(r=>new yC(this.firestore,new ku(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?og.getInstance(this.firestore,e):null))}}function Rs(n,e,t){return n.message=n.message.replace(e,t),n}function zH(n){for(const e of n)if("object"==typeof e&&!KF(e))return e;return{}}function GH(n,e){var t,r;let i;return i=KF(n[0])?n[0]:KF(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class yC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return DH(this._delegate,e._delegate)}}class vC extends yC{data(e){const t=this._delegate.data(e);return function(n,e){n||_t()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XA(e)}where(e,t,r){try{return new Ms(this.firestore,wh(this._delegate,function(n,e,t){const r=e,i=QA("where",n);return new Q4(i,r,t)}(e,t,r)))}catch(i){throw Rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,wh(this._delegate,function(n,e="asc"){const t=e,r=QA("orderBy",n);return new X4(r,t)}(e,t)))}catch(r){throw Rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,wh(this._delegate,function(n){return dH("limit",n),new AH("limit",n,"F")}(e)))}catch(t){throw Rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,wh(this._delegate,function(n){return dH("limitToLast",n),new AH("limitToLast",n,"L")}(e)))}catch(t){throw Rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,wh(this._delegate,function(...n){return new RH("startAt",n,!0)}(...e)))}catch(t){throw Rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,wh(this._delegate,function(...n){return new RH("startAfter",n,!1)}(...e)))}catch(t){throw Rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,wh(this._delegate,function(...n){return new MH("endBefore",n,!0)}(...e)))}catch(t){throw Rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,wh(this._delegate,function(...n){return new MH("endAt",n,!1)}(...e)))}catch(t){throw Rs(t,"endAt()","Query.endAt()")}}isEqual(e){return gH(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=xn(n,ps);const e=xn(n.firestore,Vr),t=Ii(e),r=new sg(e);return function(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(r=(0,ke.Z)(function*(i,a,c){try{const f=yield LA(i,a,!0),g=new Wj(a,f.Gn),b=g.bo(f.documents),C=g.applyChanges(b,!1);c.resolve(C.snapshot)}catch(f){const g=Ly(f,`Failed to execute query '${a} against cache`);c.reject(g)}}),function(i,a,c){return r.apply(this,arguments)})(yield PF(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Eh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=xn(n,ps);const e=xn(n.firestore,Vr),t=Ii(e),r=new sg(e);return oH(t,n._query,{source:"server"}).then(i=>new Eh(e,r,n,i))}(this._delegate):function(n){n=xn(n,ps);const e=xn(n.firestore,Vr),t=Ii(e),r=new sg(e);return SH(n._query),oH(t,n._query).then(i=>new Eh(e,r,n,i))}(this._delegate),t.then(r=>new YF(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=zH(e),r=GH(e,i=>new YF(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return VH(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?og.getInstance(this.firestore,e):null))}}class RK{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class YF{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new RK(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vC(this._firestore,r))})}isEqual(e){return DH(this._delegate,e._delegate)}}class zy extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?WA(this._delegate):WA(this._delegate,e))}catch(t){throw Rs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=xn(n.firestore,Vr),r=WA(n),i=JA(n.converter,e);return $y(t,[YA(ng(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return pH(this._delegate,e._delegate)}withConverter(e){return new zy(this.firestore,this._delegate.withConverter(e?og.getInstance(this.firestore,e):null))}}function ag(n){return xn(n,Cr)}class ZF{constructor(...e){this._delegate=new xu(...e)}static documentId(){return new ZF(si.keyField().canonicalString())}isEqual(e){return(e=(0,se.m9)(e))instanceof xu&&this._delegate._internalPath.isEqual(e._internalPath)}}class lg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new UF("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new lg(e)}static delete(){const e=new fC("deleteField");return e._methodName="FieldValue.delete",new lg(e)}static arrayUnion(...e){const t=function(...n){return new G4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lg(t)}static arrayRemove(...e){const t=function(...n){return new W4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lg(t)}static increment(e){const t=function(n){return new q4("increment",n)}(e);return t._methodName="FieldValue.increment",new lg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MK={Firestore:jH,GeoPoint:qA,Timestamp:di,Blob:_C,Transaction:HH,WriteBatch:$H,DocumentReference:sa,DocumentSnapshot:yC,Query:Ms,QueryDocumentSnapshot:vC,QuerySnapshot:YF,CollectionReference:zy,FieldPath:ZF,FieldValue:lg,setLogLevel:function(n){!function(n){ec.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new zl.wA("firestore-compat",t=>((e,t)=>new jH(e,t,new SK))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},MK)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.7")}(YE.Z);const eR=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function WH(n=null){return e=>e.lift(new OK(n))}class OK{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new PK(e,this.defaultValue))}}class PK extends mi.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function qH(n=LK){return e=>e.lift(new NK(n))}class NK{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new FK(e,this.errorFactory))}}class FK extends mi.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function LK(){return new eR}var KH=O(4487);function cg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((i,a)=>n(i,a,r)):KH.y,Cs(1),t?WH(e):qH(()=>new eR))}function YH(n,e){return e?fr(()=>n,e):fr(()=>n)}var QF=O(9673),Xi=O(2329);class Io{constructor(e){return e}}class lc{constructor(){return(0,Xi.C6)()}}const JF=new d.OlP("angularfire2._apps"),UK={provide:Io,useFactory:function(n){return n&&1===n.length?n[0]:new Io((0,Xi.Mq)())},deps:[[new d.FiY,JF]]},BK={provide:lc,deps:[[new d.FiY,JF]]};function jK(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Io(r)}}let HK=(()=>{class n{constructor(t){(0,Xi.KN)("angularfire",at.q4.full,"core"),(0,Xi.KN)("angularfire",at.q4.full,"app"),(0,Xi.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[UK,BK]}),n})();function $K(n,...e){return{ngModule:HK,providers:[{provide:JF,useFactory:jK(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,...e]}]}}const zK=(0,at.u3)(Xi.ZF,!0),ZH=new Map,GK={activated:!1,tokenObservers:[]},WK={initialized:!1,enabled:!1};function gs(n){return ZH.get(n)||GK}function qa(n,e){ZH.set(n,e)}function tR(){return WK}class ZK{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ke.Z)(function*(){t.stop();try{t.pending=new se.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new se.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const oa=new se.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function JH(n){if(!gs(n).activated)throw oa.create("use-before-activation",{appName:n.name})}function e1(n,e){return t1.apply(this,arguments)}function t1(){return(t1=(0,ke.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(D){throw oa.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==c.status)throw oa.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(D){throw oa.create("fetch-parse-error",{originalErrorMessage:D.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw oa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(g[1]),C=Date.now();return{token:f.attestationToken,expireTimeMillis:C+b,issuedAtTimeMillis:C}})).apply(this,arguments)}function nY(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const bC="firebase-app-check-store";let rR=null;function e$(){return rR||(rR=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oa.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(bC,{keyPath:"compositeKey"})}}}catch(t){e(oa.create("storage-open",{originalErrorMessage:t.message}))}}),rR)}function n1(){return(n1=(0,ke.Z)(function*(n,e){const r=(yield e$()).transaction(bC,"readwrite"),a=r.objectStore(bC).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=g=>{c()},r.onerror=g=>{var b;f(oa.create("storage-set",{originalErrorMessage:null===(b=g.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const iR=new Ws.Yd("@firebase/app-check");function i$(n,e){return(0,se.hl)()?function(n,e){return function(n,e){return n1.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{iR.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function s$(){return tR().enabled}function o$(){return o1.apply(this,arguments)}function o1(){return(o1=(0,ke.Z)(function*(){const n=tR();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hY={error:"UNKNOWN_ERROR"};function fY(n){return se.US.encodeString(JSON.stringify(n),!1)}function sR(n){return a1.apply(this,arguments)}function a1(){return(a1=(0,ke.Z)(function*(n,e=!1){const t=n.app;JH(t);const r=gs(t);let a,c,i=r.token;if(!i){const f=yield r.cachedTokenPromise;f&&EC(f)&&(i=f,qa(t,Object.assign(Object.assign({},r),{token:i})),l$(t,{token:i.token}))}if(!e&&i&&EC(i))return{token:i.token};if(s$()){const f=yield e1(nY(t,yield o$()),n.platformLoggerProvider);return yield i$(t,f),qa(t,Object.assign(Object.assign({},r),{token:f})),{token:f.token}}try{i=yield r.provider.getToken()}catch(f){iR.error(f),a=f}return i?(c={token:i.token},qa(t,Object.assign(Object.assign({},r),{token:i})),yield i$(t,i)):c=gY(a),l$(t,c),c})).apply(this,arguments)}function l1(n,e){const t=gs(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),qa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function l$(n,e){const t=gs(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function EC(n){return n.expireTimeMillis-Date.now()>0}function gY(n){return{token:fY(hY),error:n}}class mY{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=gs(this.app);for(const t of e)l1(this.app,t.next);return Promise.resolve()}}const p$="app-check-internal";(0,kn._registerComponent)(new zl.wA("app-check",n=>function(n,e){return new mY(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(p$).initialize()})),(0,kn._registerComponent)(new zl.wA(p$,n=>function(n){return{getToken:e=>sR(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,a=gs(i),c={next:t,error:r,type:e},f=Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]});if(!f.tokenRefresher){const g=function(n){const{app:e}=n;return new ZK((0,ke.Z)(function*(){let r;if(r=gs(e).token?yield sR(n,!0):yield sR(n),r.error)throw r.error}),()=>!0,()=>{const t=gs(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);f.tokenRefresher=g}if(!f.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&f.tokenRefresher.start(),a.token&&EC(a.token)){const g=a.token;Promise.resolve().then(()=>t({token:g.token})).catch(()=>{})}else null==a.token&&a.cachedTokenPromise.then(g=>{g&&EC(g)&&t({token:g.token})}).catch(()=>{});qa(i,f)}(n,"INTERNAL",e),removeTokenListener:e=>l1(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,kn.registerVersion)("@firebase/app-check","0.5.1");class Ih{constructor(){return(0,at.vb)("app-check")}}"undefined"!=typeof window&&window;var NY=O(7841);const m$=new d.OlP("angularfire2.auth.use-emulator"),_$=new d.OlP("angularfire2.auth.settings"),y$=new d.OlP("angularfire2.auth.tenant-id"),v$=new d.OlP("angularfire2.auth.langugage-code"),b$=new d.OlP("angularfire2.auth.use-device-language"),E$=new d.OlP("angularfire.auth.persistence"),w$=(n,e,t,r,i,a,c,f)=>(0,Ds.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),c)for(const[b,C]of Object.entries(c))g.settings[b]=C;return f&&g.setPersistence(f),g},[t,r,i,a,c,f]);let C$=(()=>{class n{constructor(t,r,i,a,c,f,g,b,C,D,R,x){const B=new At.xQ,ae=(0,wt.of)(void 0).pipe((0,Xr.QV)(c.outsideAngular),fr(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4828)))),(0,Bt.U)(()=>(0,Ds.on)(t,a,r)),(0,Bt.U)(me=>w$(me,a,f,b,C,D,g,R)),Pc({bufferSize:1,refCount:!1}));if(Hi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wt.of)(null);else{ae.pipe(cg()).subscribe();const et=ae.pipe(fr(ht=>ht.getRedirectResult().then(Dn=>Dn,()=>null)),at.iC,Pc({bufferSize:1,refCount:!1})),pt=ae.pipe(fr(ht=>new Yn.y(Dn=>({unsubscribe:a.runOutsideAngular(()=>ht.onAuthStateChanged($n=>Dn.next($n),$n=>Dn.error($n),()=>Dn.complete()))})))),vt=ae.pipe(fr(ht=>new Yn.y(Dn=>({unsubscribe:a.runOutsideAngular(()=>ht.onIdTokenChanged($n=>Dn.next($n),$n=>Dn.error($n),()=>Dn.complete()))}))));this.authState=et.pipe(YH(pt),(0,QF.R)(c.outsideAngular),(0,Xr.QV)(c.insideAngular)),this.user=et.pipe(YH(vt),(0,QF.R)(c.outsideAngular),(0,Xr.QV)(c.insideAngular)),this.idToken=this.user.pipe(fr(ht=>ht?(0,hr.D)(ht.getIdToken()):(0,wt.of)(null))),this.idTokenResult=this.user.pipe(fr(ht=>ht?(0,hr.D)(ht.getIdTokenResult()):(0,wt.of)(null))),this.credential=(0,wd.T)(et,B,this.authState.pipe(Er(ht=>!ht))).pipe((0,Bt.U)(ht=>(null==ht?void 0:ht.user)?ht:null),(0,QF.R)(c.outsideAngular),(0,Xr.QV)(c.insideAngular))}return(0,Ds.pX)(this,ae,a,{spy:{apply:(me,et,pt)=>{(me.startsWith("signIn")||me.startsWith("createUser"))&&pt.then(vt=>B.next(vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ds.Dh),d.LFG(Ds.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(at.HU),d.LFG(m$,8),d.LFG(_$,8),d.LFG(y$,8),d.LFG(v$,8),d.LFG(b$,8),d.LFG(E$,8),d.LFG(Ih,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function I$(n,e){return function(n,e=wa.z){return new Yn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function f1(n,e){return I$(n,e).pipe((0,Bt.U)(t=>({payload:t,type:"query"})))}function aR(n,e){return f1(n,e).pipe(Hr(void 0),vs(),(0,Bt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const g=i.find(C=>C.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function T$(n,e,t){return aR(n,t).pipe(Ip((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return p1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return p1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return p1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),kc(),(0,Bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function p1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function D$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class S${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aR(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hr(void 0),vs(),Er(([r,i])=>i.length>0||!r),(0,Bt.U)(([r,i])=>i),at.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ip((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=D$(e);return T$(this.query,t,this.afs.schedulers.outsideAngular).pipe(at.iC)}valueChanges(e={}){return f1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),at.iC)}get(e){return(0,hr.D)(this.query.get(e)).pipe(at.iC)}add(e){return this.ref.add(e)}doc(e){return new A$(this.ref.doc(e),this.afs)}}class A${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=x$(r,t);return new S$(i,a,this.afs)}snapshotChanges(){return function(n,e){return I$(n,e).pipe(Hr(void 0),vs(),(0,Bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(at.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hr.D)(this.ref.get(e)).pipe(at.iC)}}class jY{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Er(t=>t.length>0),at.iC):aR(this.query,this.afs.schedulers.outsideAngular).pipe(at.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ip((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=D$(e);return T$(this.query,t,this.afs.schedulers.outsideAngular).pipe(at.iC)}valueChanges(e={}){return f1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),at.iC)}get(e){return(0,hr.D)(this.query.get(e)).pipe(at.iC)}}const R$=new d.OlP("angularfire2.enableFirestorePersistence"),M$=new d.OlP("angularfire2.firestore.persistenceSettings"),HY=new d.OlP("angularfire2.firestore.settings"),$Y=new d.OlP("angularfire2.firestore.use-emulator");function x$(n,e=(t=>t)){return{query:e(n),ref:n}}let k$=(()=>{class n{constructor(t,r,i,a,c,f,g,b,C,D,R,x,B,ae,me,et,pt){this.schedulers=g;const vt=(0,Ds.on)(t,f,r),ht=C;D&&w$(vt,f,R,B,ae,me,x,et),[this.firestore,this.persistenceEnabled$]=(0,Ds.cc)(`${vt.name}.firestore`,"AngularFirestore",vt.name,()=>{const Dn=f.runOutsideAngular(()=>vt.firestore());if(a&&Dn.settings(a),ht&&Dn.useEmulator(...ht),i&&!Hi(c)){const $n=()=>{try{return(0,hr.D)(Dn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(oi){return"undefined"!=typeof console&&console.warn(oi),(0,wt.of)(!1)}};return[Dn,f.runOutsideAngular($n)]}return[Dn,(0,wt.of)(!1)]},[a,ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=x$(i,r),f=this.schedulers.ngZone.run(()=>a);return new S$(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new jY(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new A$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ds.Dh),d.LFG(Ds.xv,8),d.LFG(R$,8),d.LFG(HY,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(at.HU),d.LFG(M$,8),d.LFG($Y,8),d.LFG(C$,8),d.LFG(m$,8),d.LFG(_$,8),d.LFG(y$,8),d.LFG(v$,8),d.LFG(b$,8),d.LFG(E$,8),d.LFG(Ih,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zY=(()=>{class n{constructor(){NY.Z.registerVersion("angularfire",at.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:R$,useValue:!0},{provide:M$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[k$]}),n})();const GY=["*",[["mat-toolbar-row"]]],WY=["*","mat-toolbar-row"],qY=Kf(class{constructor(n){this._elementRef=n}});let KY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),YY=(()=>{class n extends qY{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Vn),d.Y36(ie))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,KY,5),2&t){let a;d.iGM(a=d.CRH())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[d.qOj],ngContentSelectors:WY,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(GY),d.Hsn(0),d.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),ZY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[zr],zr]}),n})();const QY=["*",[["mat-card-footer"]]],JY=["*","mat-card-footer"];let O$=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yo,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:JY,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(QY),d.Hsn(0),d.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),r8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[zr],zr]}),n})();function i8(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"mat-card",1),d.NdJ("dblclick",function(){d.CHM(t);const i=d.oxw();return i.edit.emit(i.task)}),d.TgZ(1,"h2"),d._uU(2),d.qZA(),d.TgZ(3,"p"),d._uU(4),d.qZA(),d.qZA()}if(2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.task.title),d.xp6(2),d.hij(" ",t.task.description," ")}}let s8=(()=>{class n{constructor(){this.task=null,this.edit=new d.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-task"]],inputs:{task:"task"},outputs:{edit:"edit"},decls:1,vars:1,consts:[["class","item",3,"dblclick",4,"ngIf"],[1,"item",3,"dblclick"]],template:function(t,r){1&t&&d.YNc(0,i8,5,2,"mat-card",0),2&t&&d.Q6J("ngIf",r.task)},directives:[ms,O$],styles:["[_nghost-%COMP%]{display:block}.item[_ngcontent-%COMP%]{margin-bottom:10px;cursor:pointer}"]}),n})();function o8(n,e){1&n&&(d.TgZ(0,"p",13),d._uU(1,"Empty list"),d.qZA())}function a8(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-task",14),d.NdJ("edit",function(i){return d.CHM(t),d.oxw().editTask("todo",i)}),d.qZA()}2&n&&d.Q6J("task",e.$implicit)}function l8(n,e){1&n&&(d.TgZ(0,"p",13),d._uU(1,"Empty list"),d.qZA())}function c8(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-task",14),d.NdJ("edit",function(i){return d.CHM(t),d.oxw().editTask("inProgress",i)}),d.qZA()}2&n&&d.Q6J("task",e.$implicit)}function u8(n,e){1&n&&(d.TgZ(0,"p",13),d._uU(1,"Empty list"),d.qZA())}function d8(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-task",14),d.NdJ("edit",function(i){return d.CHM(t),d.oxw().editTask("done",i)}),d.qZA()}2&n&&d.Q6J("task",e.$implicit)}const g1=function(n,e){return[n,e]},m1=n=>{const e=new $r([]);return n.valueChanges({idField:"id"}).subscribe(t=>{e.next(t)}),e};let h8=(()=>{class n{constructor(t,r){this.dialog=t,this.store=r,this.todo=m1(this.store.collection("todo")),this.inProgress=m1(this.store.collection("inProgress")),this.done=m1(this.store.collection("done"))}newTask(){this.dialog.open(Cp,{width:"270px",data:{task:{}}}).afterClosed().subscribe(r=>{!r||this.store.collection("todo").add(r.task)})}editTask(t,r){this.dialog.open(Cp,{width:"270px",data:{task:r,enableDelete:!0}}).afterClosed().subscribe(a=>{!a||(a.delete?this.store.collection(t).doc(r.id).delete():this.store.collection(t).doc(r.id).update(r))})}drop(t){if(t.previousContainer===t.container||!t.previousContainer.data||!t.container.data)return;const r=t.previousContainer.data[t.previousIndex];this.store.firestore.runTransaction(()=>Promise.all([this.store.collection(t.previousContainer.id).doc(r.id).delete(),this.store.collection(t.container.id).add(r)])),function(n,e,t,r){const i=Hc(t,n.length-1),a=Hc(r,e.length);n.length&&e.splice(a,0,n.splice(i,1)[0])}(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Xf),d.Y36(k$))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:41,vars:39,consts:[["color","primary"],[1,"content-wrapper"],["mat-button","",3,"click"],[1,"container-wrapper"],[1,"container"],["cdkDropList","","id","todo",1,"list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["todoList","cdkDropList"],["class","empty-label",4,"ngIf"],["cdkDrag","",3,"task","edit",4,"ngFor","ngForOf"],["cdkDropList","","id","inProgress",1,"list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["inProgressList","cdkDropList"],["cdkDropList","","id","done",1,"list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["doneList","cdkDropList"],[1,"empty-label"],["cdkDrag","",3,"task","edit"]],template:function(t,r){if(1&t&&(d.TgZ(0,"mat-toolbar",0),d.TgZ(1,"mat-icon"),d._uU(2,"local_fire_department"),d.qZA(),d.TgZ(3,"span"),d._uU(4,"Kanban Fire"),d.qZA(),d.qZA(),d.TgZ(5,"div",1),d.TgZ(6,"button",2),d.NdJ("click",function(){return r.newTask()}),d.TgZ(7,"mat-icon"),d._uU(8,"add"),d.qZA(),d._uU(9," Add Task "),d.qZA(),d.TgZ(10,"div",3),d.TgZ(11,"div",4),d.TgZ(12,"h2"),d._uU(13,"Backlog"),d.qZA(),d.TgZ(14,"mat-card",5,6),d.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),d.ALo(16,"async"),d.YNc(17,o8,2,0,"p",7),d.ALo(18,"async"),d.YNc(19,a8,1,1,"app-task",8),d.ALo(20,"async"),d.qZA(),d.qZA(),d.TgZ(21,"div",4),d.TgZ(22,"h2"),d._uU(23,"In progress"),d.qZA(),d.TgZ(24,"mat-card",9,10),d.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),d.ALo(26,"async"),d.YNc(27,l8,2,0,"p",7),d.ALo(28,"async"),d.YNc(29,c8,1,1,"app-task",8),d.ALo(30,"async"),d.qZA(),d.qZA(),d.TgZ(31,"div",4),d.TgZ(32,"h2"),d._uU(33,"Done"),d.qZA(),d.TgZ(34,"mat-card",11,12),d.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),d.ALo(36,"async"),d.YNc(37,u8,2,0,"p",7),d.ALo(38,"async"),d.YNc(39,d8,1,1,"app-task",8),d.ALo(40,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const i=d.MAs(15),a=d.MAs(25),c=d.MAs(35);let f,g,b;d.xp6(14),d.Q6J("cdkDropListData",d.lcZ(16,12,r.todo))("cdkDropListConnectedTo",d.WLB(30,g1,c,a)),d.xp6(3),d.Q6J("ngIf",0===(null==(f=d.lcZ(18,14,r.todo))?null:f.length)),d.xp6(2),d.Q6J("ngForOf",d.lcZ(20,16,r.todo)),d.xp6(5),d.Q6J("cdkDropListData",d.lcZ(26,18,r.inProgress))("cdkDropListConnectedTo",d.WLB(33,g1,i,c)),d.xp6(3),d.Q6J("ngIf",0===(null==(g=d.lcZ(28,20,r.inProgress))?null:g.length)),d.xp6(2),d.Q6J("ngForOf",d.lcZ(30,22,r.inProgress)),d.xp6(5),d.Q6J("cdkDropListData",d.lcZ(36,24,r.done))("cdkDropListConnectedTo",d.WLB(36,g1,i,a)),d.xp6(3),d.Q6J("ngIf",0===(null==(b=d.lcZ(38,26,r.done))?null:b.length)),d.xp6(2),d.Q6J("ngForOf",d.lcZ(40,28,r.done))}},directives:[YY,Zd,HE,O$,_I,ms,Sn,s8,yI],pipes:[pv],styles:["mat-toolbar[_ngcontent-%COMP%]{margin-bottom:20px}mat-toolbar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:10px}.content-wrapper[_ngcontent-%COMP%]{max-width:1400px;margin:auto}.container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]{width:400px;margin:0 25px 25px 0}.list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;border-radius:4px}app-new-task[_ngcontent-%COMP%]{margin-bottom:30px}.empty-label[_ngcontent-%COMP%]{font-size:2em;padding-top:10px;text-align:center;opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}"]}),n})();const _1_firebase={apiKey:"AIzaSyAVWOFxMBbljoGVd9iA-2zalz3FqrwUMP0",authDomain:"kanban-d6ed2.firebaseapp.com",projectId:"kanban-d6ed2",storageBucket:"kanban-d6ed2.appspot.com",messagingSenderId:"267450946909",appId:"1:267450946909:web:f2bbd79f383d06d019c4b4",measurementId:"G-E4W1P029Y3"};class p8{constructor(e,t,r,i){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=i}call(e,t){return t.subscribe(new g8(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class g8 extends mi.L{constructor(e,t,r,i,a){super(e),this.keySelector=t,this.elementSelector=r,this.durationSelector=i,this.subjectSelector=a,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(e){let t;try{t=this.keySelector(e)}catch(r){return void this.error(r)}this._group(e,t)}_group(e,t){let r=this.groups;r||(r=this.groups=new Map);let a,i=r.get(t);if(this.elementSelector)try{a=this.elementSelector(e)}catch(c){this.error(c)}else a=e;if(!i){i=this.subjectSelector?this.subjectSelector():new At.xQ,r.set(t,i);const c=new P$(t,i,this);if(this.destination.next(c),this.durationSelector){let f;try{f=this.durationSelector(new P$(t,i))}catch(g){return void this.error(g)}this.add(f.subscribe(new m8(t,i,this)))}}i.closed||i.next(a)}_error(e){const t=this.groups;t&&(t.forEach((r,i)=>{r.error(e)}),t.clear()),this.destination.error(e)}_complete(){const e=this.groups;e&&(e.forEach((t,r)=>{t.complete()}),e.clear()),this.destination.complete()}removeGroup(e){this.groups.delete(e)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class m8 extends mi.L{constructor(e,t,r){super(t),this.key=e,this.group=t,this.parent=r}_next(e){this.complete()}_unsubscribe(){const{parent:e,key:t}=this;this.key=this.parent=null,e&&e.removeGroup(t)}}class P$ extends Yn.y{constructor(e,t,r){super(),this.key=e,this.groupSubject=t,this.refCountSubscription=r}_subscribe(e){const t=new li.w,{refCountSubscription:r,groupSubject:i}=this;return r&&!r.closed&&t.add(new _8(r)),t.add(i.subscribe(e)),t}}class _8 extends li.w{constructor(e){super(),this.parent=e,e.count++}unsubscribe(){const e=this.parent;!e.closed&&!this.closed&&(super.unsubscribe(),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())}}var y8=O(4762);class v8 extends mi.L{notifyNext(e,t,r,i,a){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class b8 extends mi.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var E8=O(7444);function w8(n,e,t,r,i=new b8(n,t,r)){if(!i.closed)return e instanceof Yn.y?e.subscribe(i):(0,E8.s)(e)(i)}var C8=O(6693);const N$={};class T8{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new D8(e,this.resultSelector))}}class D8 extends v8{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(N$),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(w8(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,c=this.toRespond?i[r]===N$?--this.toRespond:this.toRespond:0;i[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}var S8=O(2441);function y1(n){return function(t){return 0===n?(0,zo.c)():t.lift(new A8(n))}}class A8{constructor(e){if(this.total=e,this.total<0)throw new yd}call(e,t){return t.subscribe(new R8(e,this.total))}}class R8 extends mi.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let a=0;a<r;a++){const c=t++%r;e.next(i[c])}}e.complete()}}var x8=O(1307);class Ou{constructor(e,t){this.id=e,this.url=t}}class v1 extends Ou{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wC extends Ou{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class F$ extends Ou{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class k8 extends Ou{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class O8 extends Ou{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P8 extends Ou{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class N8 extends Ou{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class F8 extends Ou{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L8 extends Ou{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L${constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class V${constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class V8{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class U8{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B8{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class U${constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}const bn="primary";class j8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gy(n){return new j8(n)}const j$="ngNavigationCancelingError";function b1(n){const e=Error("NavigationCancelingError: "+n);return e[j$]=!0,e}function $8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!H$(n[i],e[i]))return!1;return!0}function H$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function z$(n){return n.length>0?n[n.length-1]:null}function es(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function uc(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,hr.D)(Promise.resolve(n)):(0,wt.of)(n)}const W8={exact:function q$(n,e,t){if(!dg(n.segments,e.segments)||!lR(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!q$(n.children[r],e.children[r],t))return!1;return!0},subset:K$},G$={exact:function(n,e){return cc(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>H$(n[t],e[t]))},ignored:()=>!0};function W$(n,e,t){return W8[t.paths](n.root,e.root,t.matrixParams)&&G$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function K$(n,e,t){return Y$(n,e,e.segments,t)}function Y$(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!dg(i,t)||e.hasChildren()||!lR(i,t,r))}if(n.segments.length===t.length){if(!dg(n.segments,t)||!lR(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!K$(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(dg(n.segments,i)&&lR(n.segments,i,r)&&n.children[bn])&&Y$(n.children[bn],e,a,r)}}function lR(n,e,t){return e.every((r,i)=>G$[t](n[i].parameters,r.parameters))}class ug{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gy(this.queryParams)),this._queryParamMap}toString(){return Q8.serialize(this)}}class Tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,es(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cR(this)}}class CC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gy(this.parameters)),this._parameterMap}toString(){return X$(this)}}function dg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class E1{}class Z${parse(e){const t=new o7(e);return new ug(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){return`${`/${IC(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${uR(t)}=${uR(i)}`).join("&"):`${uR(t)}=${uR(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Q8=new Z$;function cR(n){return n.segments.map(e=>X$(e)).join("/")}function IC(n,e){if(!n.hasChildren())return cR(n);if(e){const t=n.children[bn]?IC(n.children[bn],!1):"",r=[];return es(n.children,(i,a)=>{a!==bn&&r.push(`${a}:${IC(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return es(n.children,(r,i)=>{i===bn&&(t=t.concat(e(r,i)))}),es(n.children,(r,i)=>{i!==bn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===bn?[IC(n.children[bn],!1)]:[`${i}:${IC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bn]?`${cR(n)}/${t[0]}`:`${cR(n)}/(${t.join("//")})`}}function Q$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uR(n){return Q$(n).replace(/%3B/gi,";")}function w1(n){return Q$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dR(n){return decodeURIComponent(n)}function J$(n){return dR(n.replace(/\+/g,"%20"))}function X$(n){return`${w1(n.path)}${function(n){return Object.keys(n).map(e=>`;${w1(e)}=${w1(n[e])}`).join("")}(n.parameters)}`}const t7=/^[^\/()?;=#]+/;function hR(n){const e=n.match(t7);return e?e[0]:""}const n7=/^[^=?&#]+/,i7=/^[^?&#]+/;class o7{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bn]=new Tn(e,t)),r}parseSegment(){const e=hR(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new CC(dR(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hR(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=hR(this.remaining);i&&(r=i,this.capture(r))}e[dR(t)]=dR(r)}parseQueryParam(e){const t=function(n){const e=n.match(n7);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(i7);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=J$(t),a=J$(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hR(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=bn);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[bn]:new Tn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ez{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=C1(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=C1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=I1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return I1(e,this._root).map(t=>t.value)}}function C1(n,e){if(n===e.value)return e;for(const t of e.children){const r=C1(n,t);if(r)return r}return null}function I1(n,e){if(n===e.value)return[e];for(const t of e.children){const r=I1(n,t);if(r.length)return r.unshift(e),r}return[]}class Pu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function TC(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class tz extends ez{constructor(e,t){super(e),this.snapshot=t,T1(this,e)}toString(){return this.snapshot.toString()}}function nz(n,e){const t=function(n,e){const c=new fR([],{},{},"",{},bn,e,null,n.root,-1,{});return new iz("",new Pu(c,[]))}(n,e),r=new $r([new CC("",{})]),i=new $r({}),a=new $r({}),c=new $r({}),f=new $r(""),g=new Wy(r,i,c,f,a,bn,e,t.root);return g.snapshot=t.root,new tz(new Pu(g,[]),t)}class Wy{constructor(e,t,r,i,a,c,f,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Bt.U)(e=>Gy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Bt.U)(e=>Gy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rz(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fR{constructor(e,t,r,i,a,c,f,g,b,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=g,this._urlSegment=b,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class iz extends ez{constructor(e,t){super(t),this.url=e,T1(this,t)}toString(){return sz(this._root)}}function T1(n,e){e.value._routerState=n,e.children.forEach(t=>T1(n,t))}function sz(n){const e=n.children.length>0?` { ${n.children.map(sz).join(", ")} } `:"";return`${n.value}${e}`}function D1(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),cc(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),cc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function S1(n,e){return cc(n.params,e.params)&&function(n,e){return dg(n,e)&&n.every((t,r)=>cc(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||S1(n.parent,e.parent))}function pR(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return pR(n,r,i);return pR(n,r)})}(n,e,t);return new Pu(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return oz(e,c),c}}const r=function(n){return new Wy(new $r(n.url),new $r(n.params),new $r(n.queryParams),new $r(n.fragment),new $r(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>pR(n,a));return new Pu(r,i)}}function oz(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)oz(n.children[t],e.children[t])}function gR(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function DC(n){return"object"==typeof n&&null!=n&&n.outlets}function A1(n,e,t,r,i){let a={};return r&&es(r,(c,f)=>{a[f]=Array.isArray(c)?c.map(g=>`${g}`):`${c}`}),new ug(t.root===n?e:az(t.root,n,e),a,i)}function az(n,e,t){const r={};return es(n.children,(i,a)=>{r[a]=i===e?t:az(i,e,t)}),new Tn(n.segments,r)}class lz{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gR(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(DC);if(i&&i!==z$(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R1{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cz(n,e,t){if(n||(n=new Tn([],{})),0===n.segments.length&&n.hasChildren())return mR(n,e,t);const r=function(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(DC(f))break;const g=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&b&&"object"==typeof b&&void 0===b.outlets){if(!dz(g,b,c))return a;r+=2}else{if(!dz(g,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Tn(n.segments.slice(0,r.pathIndex),{});return a.children[bn]=new Tn(n.segments.slice(r.pathIndex),n.children),mR(a,0,i)}return r.match&&0===i.length?new Tn(n.segments,{}):r.match&&!n.hasChildren()?M1(n,e,t):r.match?mR(n,0,i):M1(n,e,t)}function mR(n,e,t){if(0===t.length)return new Tn(n.segments,{});{const r=function(n){return DC(n[0])?n[0].outlets:{[bn]:n}}(t),i={};return es(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=cz(n.children[c],e,a))}),es(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new Tn(n.segments,i)}}function M1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(DC(a)){const g=y7(a.outlets);return new Tn(r,g)}if(0===i&&gR(t[0])){r.push(new CC(n.segments[e].path,uz(t[0]))),i++;continue}const c=DC(a)?a.outlets[bn]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&gR(f)?(r.push(new CC(c,uz(f))),i+=2):(r.push(new CC(c,{})),i++)}return new Tn(r,{})}function y7(n){const e={};return es(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=M1(new Tn([],{}),0,t))}),e}function uz(n){const e={};return es(n,(t,r)=>e[r]=`${t}`),e}function dz(n,e,t){return n==t.path&&cc(e,t.parameters)}class b7{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),D1(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=TC(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),es(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=TC(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=TC(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new U$(a.value.snapshot))}),e.children.length&&this.forwardEvent(new U8(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(D1(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),hz(f.route)}else{const f=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=g,c.outlet&&c.outlet.activateWith(i,g),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function hz(n){D1(n.value),n.children.forEach(hz)}class x1{constructor(e,t){this.routes=e,this.module=t}}function Th(n){return"function"==typeof n}function hg(n){return n instanceof ug}const SC=Symbol("INITIAL_VALUE");function AC(){return fr(n=>function(...n){let e,t;return(0,ff.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ea.k)(n[0])&&(n=n[0]),(0,C8.n)(n,t).lift(new T8(e))}(n.map(e=>e.pipe(Cs(1),Hr(SC)))).pipe(Ip((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==SC?i:(a===SC&&(r=!0),r||!1!==a&&c!==t.length-1&&!hg(a)?i:a),e)},SC),Er(e=>e!==SC),(0,Bt.U)(e=>hg(e)?e:!0===e),Cs(1)))}let k1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:function(){return[Rz]},encapsulation:2}),n})();function fz(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];S7(r,A7(e,r))}}function S7(n,e){n.children&&fz(n.children,e)}function A7(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function O1(n){const e=n.children&&n.children.map(O1),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bn&&(t.component=k1),t}function aa(n){return n.outlet||bn}function pz(n,e){const t=n.filter(r=>aa(r)===e);return t.push(...n.filter(r=>aa(r)!==e)),t}const gz={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _R(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},gz):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||$8)(t,n,e);if(!a)return Object.assign({},gz);const c={};es(a.posParams,(g,b)=>{c[b]=g.path});const f=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function yR(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>vR(n,e,r)&&aa(r)!==bn)}(n,t,r)){const c=new Tn(e,function(n,e,t,r){const i={};i[bn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&aa(a)!==bn){const c=new Tn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[aa(a)]=c}return i}(n,e,r,new Tn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>vR(n,e,r))}(n,t,r)){const c=new Tn(n.segments,function(n,e,t,r,i,a){const c={};for(const f of r)if(vR(n,t,f)&&!i[aa(f)]){const g=new Tn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[aa(f)]=g}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new Tn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function vR(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mz(n,e,t,r){return!!(aa(n)===r||r!==bn&&vR(e,t,n))&&("**"===n.path||_R(e,n,t).matched)}function _z(n,e,t){return 0===e.length&&!n.children[t]}class RC{constructor(e){this.segmentGroup=e||null}}class yz{constructor(e){this.urlTree=e}}function bR(n){return new Yn.y(e=>e.error(new RC(n)))}function vz(n){return new Yn.y(e=>e.error(new yz(n)))}function O7(n){return new Yn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class F7{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=yR(this.urlTree.root,[],[],this.config).segmentGroup,t=new Tn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,bn).pipe((0,Bt.U)(a=>this.createUrlTree(P1(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hl(a=>{if(a instanceof yz)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof RC?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,bn).pipe((0,Bt.U)(i=>this.createUrlTree(P1(i),e.queryParams,e.fragment))).pipe(Hl(i=>{throw i instanceof RC?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Tn([],{[bn]:e}):e;return new ug(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Bt.U)(a=>new Tn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,hr.D)(i).pipe(qd(a=>{const c=r.children[a],f=pz(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,Bt.U)(g=>({segment:g,outlet:a})))}),Ip((a,c)=>(a[c.outlet]=c.segment,a),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Er((i,a)=>n(i,a,r)):KH.y,y1(1),t?WH(e):qH(()=>new eR))}())}expandSegment(e,t,r,i,a,c){return(0,hr.D)(r).pipe(qd(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(Hl(b=>{if(b instanceof RC)return(0,wt.of)(null);throw b}))),cg(f=>!!f),Hl((f,g)=>{if(f instanceof eR||"EmptyError"===f.name){if(_z(t,i,a))return(0,wt.of)(new Tn([],{}));throw new RC(t)}throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return mz(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):bR(t):bR(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vz(a):this.lineralizeSegments(r,a).pipe((0,yi.zg)(c=>{const f=new Tn(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:g,lastChild:b,positionalParamSegments:C}=_R(t,i,a);if(!f)return bR(t);const D=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?vz(D):this.lineralizeSegments(i,D).pipe((0,yi.zg)(R=>this.expandSegment(e,t,r,R.concat(a.slice(b)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,wt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Bt.U)(R=>(r._loadedConfig=R,new Tn(i,{})))):(0,wt.of)(new Tn(i,{}));const{matched:c,consumedSegments:f,lastChild:g}=_R(t,r,i);if(!c)return bR(t);const b=i.slice(g);return this.getChildConfig(e,r,i).pipe((0,yi.zg)(D=>{const R=D.module,x=D.routes,{segmentGroup:B,slicedSegments:ae}=yR(t,f,b,x),me=new Tn(B.segments,B.children);if(0===ae.length&&me.hasChildren())return this.expandChildren(R,x,me).pipe((0,Bt.U)(ht=>new Tn(f,ht)));if(0===x.length&&0===ae.length)return(0,wt.of)(new Tn(f,{}));const et=aa(r)===a;return this.expandSegment(R,me,x,ae,et?bn:a,!0).pipe((0,Bt.U)(vt=>new Tn(f.concat(vt.segments),vt.children)))}))}getChildConfig(e,t,r){return t.children?(0,wt.of)(new x1(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,wt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,yi.zg)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Bt.U)(a=>(t._loadedConfig=a,a))):function(n){return new Yn.y(e=>e.error(b1(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):(0,wt.of)(new x1([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return(0,wt.of)(!0);const a=i.map(c=>{const f=e.get(c);let g;if(function(n){return n&&Th(n.canLoad)}(f))g=f.canLoad(t,r);else{if(!Th(f))throw new Error("Invalid CanLoad guard");g=f(t,r)}return uc(g)});return(0,wt.of)(a).pipe(AC(),(0,Ri.b)(c=>{if(!hg(c))return;const f=b1(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Bt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,wt.of)(r);if(i.numberOfChildren>1||!i.children[bn])return O7(e.redirectTo);i=i.children[bn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ug(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return es(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return es(t.children,(f,g)=>{c[g]=this.createSegmentGroup(e,f,r,i)}),new Tn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function P1(n){const e={};for(const r of Object.keys(n.children)){const a=P1(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function(n){if(1===n.numberOfChildren&&n.children[bn]){const e=n.children[bn];return new Tn(n.segments.concat(e.segments),e.children)}return n}(new Tn(n.segments,e))}class bz{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ER{constructor(e,t){this.component=e,this.route=t}}function U7(n,e,t){const r=n._root;return MC(r,e?e._root:null,t,[r.value])}function wR(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function MC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=TC(e);return n.children.forEach(c=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const g=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dg(n.url,e.url)||!cc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!S1(n,e)||!cc(n.queryParams,e.queryParams);case"paramsChange":default:return!S1(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new bz(r)):(a.data=c.data,a._resolvedData=c._resolvedData),MC(n,e,a.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new ER(f.outlet.component,c))}else c&&xC(e,f,i),i.canActivateChecks.push(new bz(r)),MC(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),es(a,(c,f)=>xC(c,t.getContext(f),i)),i}function xC(n,e,t){const r=TC(n),i=n.value;es(r,(a,c)=>{xC(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ER(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class J7{}function Ez(n){return new Yn.y(e=>e.error(n))}class eZ{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=yR(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,bn);if(null===t)return null;const r=new fR([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},bn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Pu(r,t),a=new iz(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=rz(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],f=pz(e,a),g=this.processSegmentGroup(f,c,a);if(null===g)return null;r.push(...g)}const i=wz(r);return function(n){n.sort((e,t)=>e.value.outlet===bn?-1:t.value.outlet===bn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return _z(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!mz(e,t,r,i))return null;let a,c=[],f=[];if("**"===e.path){const x=r.length>0?z$(r).parameters:{};a=new fR(r,x,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tz(e),aa(e),e.component,e,Cz(t),Iz(t)+r.length,Dz(e))}else{const x=_R(t,e,r);if(!x.matched)return null;c=x.consumedSegments,f=r.slice(x.lastChild),a=new fR(c,x.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tz(e),aa(e),e.component,e,Cz(t),Iz(t)+c.length,Dz(e))}const g=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:C}=yR(t,c,f,g.filter(x=>void 0===x.redirectTo),this.relativeLinkResolution);if(0===C.length&&b.hasChildren()){const x=this.processChildren(g,b);return null===x?null:[new Pu(a,x)]}if(0===g.length&&0===C.length)return[new Pu(a,[])];const D=aa(e)===i,R=this.processSegment(g,b,C,D?bn:i);return null===R?null:[new Pu(a,R)]}}function rZ(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function wz(n){const e=[],t=new Set;for(const r of n){if(!rZ(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=wz(r.children);e.push(new Pu(r.value,i))}return e.filter(r=>!t.has(r))}function Cz(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Iz(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Tz(n){return n.data||{}}function Dz(n){return n.resolve||{}}function N1(n){return fr(e=>{const t=n(e);return t?(0,hr.D)(t).pipe((0,Bt.U)(()=>e)):(0,wt.of)(e)})}class dZ extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const F1=new d.OlP("ROUTES");class Sz{constructor(e,t,r,i){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Bt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new x1(function(n){return Array.prototype.concat.apply([],n)}(c.injector.get(F1,void 0,d.XFs.Self|d.XFs.Optional)).map(O1),c)}),Hl(a=>{throw t._loader$=void 0,a}));return t._loader$=new S8.c(i,()=>new At.xQ).pipe((0,x8.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,hr.D)(this.loader.load(e)):uc(e()).pipe((0,yi.zg)(t=>t instanceof d.YKP?(0,wt.of)(t):(0,hr.D)(this.compiler.compileModuleAsync(t))))}}class hZ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qy,this.attachRef=null}}class qy{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new hZ,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class pZ{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function gZ(n){throw n}function mZ(n,e,t){return e.parse("/")}function Az(n,e){return(0,wt.of)(null)}const _Z={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xs=(()=>{class n{constructor(t,r,i,a,c,f,g,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new At.xQ,this.errorHandler=gZ,this.malformedUriErrorHandler=mZ,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Az,afterPreactivation:Az},this.urlHandlingStrategy=new pZ,this.routeReuseStrategy=new dZ,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const R=c.get(d.R0b);this.isNgZoneEnabled=R instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new ug(new Tn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sz(f,g,x=>this.triggerEvent(new L$(x)),x=>this.triggerEvent(new V$(x))),this.routerState=nz(this.currentUrlTree,this.rootComponentType),this.transitions=new $r({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Er(i=>0!==i.id),(0,Bt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),fr(i=>{let a=!1,c=!1;return(0,wt.of)(i).pipe((0,Ri.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fr(f=>{const g=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return CR(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,wt.of)(f).pipe(fr(D=>{const R=this.transitions.getValue();return r.next(new v1(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions.getValue()?zo.E:Promise.resolve(D)}),function(n,e,t,r){return fr(i=>function(n,e,t,r,i){return new F7(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Bt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ri.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function(n,e,t,r,i){return(0,yi.zg)(a=>function(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new eZ(n,e,t,r,i,a).recognize();return null===c?Ez(new J7):(0,wt.of)(c)}catch(c){return Ez(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Bt.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ri.b)(D=>{"eager"===this.urlUpdateStrategy&&(D.extras.skipLocationChange||this.setBrowserUrl(D.urlAfterRedirects,D),this.browserUrlTree=D.urlAfterRedirects);const R=new O8(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(R)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:x,source:B,restoredState:ae,extras:me}=f,et=new v1(R,this.serializeUrl(x),B,ae);r.next(et);const pt=nz(x,this.rootComponentType).snapshot;return(0,wt.of)(Object.assign(Object.assign({},f),{targetSnapshot:pt,urlAfterRedirects:x,extras:Object.assign(Object.assign({},me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),zo.E}),N1(f=>{const{targetSnapshot:g,id:b,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:x}}=f;return this.hooks.beforePreactivation(g,{navigationId:b,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!x})}),(0,Ri.b)(f=>{const g=new P8(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}),(0,Bt.U)(f=>Object.assign(Object.assign({},f),{guards:U7(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,e){return(0,yi.zg)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,wt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,hr.D)(n).pipe((0,yi.zg)(i=>function(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,wt.of)(!0);const c=a.map(f=>{const g=wR(f,e,i);let b;if(function(n){return n&&Th(n.canDeactivate)}(g))b=uc(g.canDeactivate(n,e,t,r));else{if(!Th(g))throw new Error("Invalid CanDeactivate guard");b=uc(g(n,e,t,r))}return b.pipe(cg())});return(0,wt.of)(c).pipe(AC())}(i.component,i.route,t,e,r)),cg(i=>!0!==i,!0))}(c,r,i,n).pipe((0,yi.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,e,t,r){return(0,hr.D)(e).pipe(qd(i=>Ai(function(n,e){return null!==n&&e&&e(new V8(n)),(0,wt.of)(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new B8(n)),(0,wt.of)(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>KT(()=>{const f=c.guards.map(g=>{const b=wR(g,c.node,t);let C;if(function(n){return n&&Th(n.canActivateChild)}(b))C=uc(b.canActivateChild(r,n));else{if(!Th(b))throw new Error("Invalid CanActivateChild guard");C=uc(b(r,n))}return C.pipe(cg())});return(0,wt.of)(f).pipe(AC())}));return(0,wt.of)(a).pipe(AC())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,wt.of)(!0);const i=r.map(a=>KT(()=>{const c=wR(a,e,t);let f;if(function(n){return n&&Th(n.canActivate)}(c))f=uc(c.canActivate(e,n));else{if(!Th(c))throw new Error("Invalid CanActivate guard");f=uc(c(e,n))}return f.pipe(cg())}));return(0,wt.of)(i).pipe(AC())}(n,i.route,t))),cg(i=>!0!==i,!0))}(r,a,n,e):(0,wt.of)(f)),(0,Bt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Ri.b)(f=>{if(hg(f.guardsResult)){const b=b1(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const g=new N8(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(g)}),Er(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),N1(f=>{if(f.guards.canActivateChecks.length)return(0,wt.of)(f).pipe((0,Ri.b)(g=>{const b=new F8(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(b)}),fr(g=>{let b=!1;return(0,wt.of)(g).pipe(function(n,e){return(0,yi.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,wt.of)(t);let a=0;return(0,hr.D)(i).pipe(qd(c=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return(0,wt.of)({});const a={};return(0,hr.D)(i).pipe((0,yi.zg)(c=>function(n,e,t,r){const i=wR(n,e,r);return uc(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Ri.b)(f=>{a[c]=f}))),y1(1),(0,yi.zg)(()=>Object.keys(a).length===i.length?(0,wt.of)(a):zo.E))}(n._resolve,n,e,r).pipe((0,Bt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),rz(n,t).resolve),null)))}(c.route,r,n,e)),(0,Ri.b)(()=>a++),y1(1),(0,yi.zg)(c=>a===i.length?(0,wt.of)(t):zo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ri.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,Ri.b)(g=>{const b=new L8(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(b)}))}),N1(f=>{const{targetSnapshot:g,id:b,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:x}}=f;return this.hooks.afterPreactivation(g,{navigationId:b,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!x})}),(0,Bt.U)(f=>{const g=function(n,e,t){const r=pR(n,e._root,t?t._root:void 0);return new tz(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:g})}),(0,Ri.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Bt.U)(r=>(new b7(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Ri.b)({next(){a=!0},complete(){a=!0}}),ZD(()=>{var f;if(!a&&!c){const g=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,g)):this.cancelNavigationTransition(i,g)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Hl(f=>{if(c=!0,function(n){return n&&n[j$]}(f)){const g=hg(f.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const b=new F$(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),g?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||CR(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new k8(i.id,this.serializeUrl(i.extractedUrl),f);r.next(g);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return zo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:a,urlTree:c}=r,f={replaceUrl:!0};if(a){const g=Object.assign({},a);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(f.state=g)}this.scheduleNavigation(c,i,a,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const i=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!i||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){fz(t),this.config=t.map(O1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:g}=r,b=i||this.routerState.root,C=g?this.currentUrlTree.fragment:c;let D=null;switch(f){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),function(n,e,t,r,i){if(0===t.length)return A1(e.root,e.root,e,r,i);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lz(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return es(a.outlets,(g,b)=>{f[b]="string"==typeof g?g.split("/"):g}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new lz(t,e,r)}(t);if(a.toRoot())return A1(e.root,new Tn([],{}),e,r,i);const c=function(n,e,t){if(n.isAbsolute)return new R1(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new R1(a,a===e.root,0)}const r=gR(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new R1(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=c.processChildren?mR(c.segmentGroup,c.index,a.commands):cz(c.segmentGroup,c.index,a.commands);return A1(c.segmentGroup,f,e,r,i)}(b,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=hg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},_Z):!1===r?Object.assign({},yZ):r,hg(t))return W$(this.currentUrlTree,t,i);const a=this.parseUrl(t);return W$(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new wC(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var f,g;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),C=CR(r)&&b&&!CR(b.source),x=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(C&&x)return Promise.resolve(!0);let B,ae,me;c?(B=c.resolve,ae=c.reject,me=c.promise):me=new Promise((vt,ht)=>{B=vt,ae=ht});const et=++this.navigationId;let pt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),pt=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):pt=0,this.setTransition({id:et,targetPageId:pt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:B,reject:ae,promise:me,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),me.catch(vt=>Promise.reject(vt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new F$(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.DyG),d.LFG(E1),d.LFG(qy),d.LFG(Lt),d.LFG(d.zs3),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(void 0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function CR(n){return"imperative"!==n}let Rz=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.name=a||bn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,g=new wZ(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qy),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class wZ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wy?this.route:e===qy?this.childContexts:this.parent.get(e,t)}}var j1=O(3047),Fz=O(4495);function FZ(n){return new Yn.y(function(e){return{unsubscribe:(0,Fz.t)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class IR{constructor(e){return e}}class kC{constructor(){return(0,at.vb)("auth")}}const H1=new d.OlP("angularfire2.auth-instances");function UZ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new IR(r)}}const BZ={provide:kC,deps:[[new d.FiY,H1]]},jZ={provide:IR,useFactory:function(n,e){const t=(0,at.JM)("auth",n,e);return t&&new IR(t)},deps:[[new d.FiY,H1],Io]};let HZ=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[jZ,BZ]}),n})();function $Z(n,...e){return{ngModule:HZ,providers:[{provide:H1,useFactory:UZ(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,[new d.FiY,Ih],...e]}]}}const zZ=(0,at.u3)(FZ,!0),GZ=(0,at.u3)(Fz.n,!0);class OC{constructor(e){return e}}const Vz="analytics",Uz=at.nk.async,qZ=(0,at.u3)(j1.IH,!0),KZ=(0,at.u3)(j1.Kz,!0),YZ=(0,at.u3)(j1.Iv,!0);let $1=(()=>{class n{constructor(t,r,i){let a;this.disposables=[],(0,Xi.KN)("angularfire",at.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(c=>{a=c})),Uz().then(()=>{const c=i.get(OC);c?this.disposables=[zZ(t).subscribe(f=>{YZ(c,null==f?void 0:f.uid),a()})]:a()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(IR),d.LFG(d.R0b),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Bz="firebase_screen_id",z1="outlet",PC="screen_class",jz="screen_name";let a5=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const G1={},l5=n=>{const e=[n[PC],n[z1]].join("#");if(G1.hasOwnProperty(e))return G1[e];{const t=a5++;return G1[e]=t,t}};let Hz=(()=>{class n{constructor(t,r,i,a,c,f){(0,Xi.KN)("angularfire",at.q4.full,"screen-tracking"),Uz().then(()=>{const g=f.get(OC);!t||!g||a.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Er(i=>i instanceof U$)).pipe(fr(i=>{var a;const f=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,x=>x.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",g=n.routerState.root.children.map(x=>x).find(x=>x.outlet===i.snapshot.outlet);if(!g)return(0,wt.of)(null);let b=g;for(;b.firstChild;)b=b.firstChild;const C=b.pathFromRoot.map(x=>{var B;return null===(B=x.routeConfig)||void 0===B?void 0:B.path}).filter(x=>x).join("/")||"/",D={[jz]:C,page_path:`/${f}`,firebase_event_origin:"auto",firebase_screen:C,[z1]:i.snapshot.outlet};e&&(D.page_title=e.getTitle());let R=g.component;if(R){if(R===k1){let x=i.snapshot;for(;x.firstChild;)x=x.firstChild;R=x.component}}else R=i.snapshot.component;if("string"==typeof R)return(0,wt.of)(Object.assign(Object.assign({},D),{[PC]:R}));if(R){const x=t.resolveComponentFactory(R);return(0,wt.of)(Object.assign(Object.assign({},D),{[PC]:x.selector}))}return(0,wt.of)(null)}),Er(i=>!!i),(0,Bt.U)(i=>Object.assign({firebase_screen_class:i[PC],[Bz]:l5(i)},i)),function(n,e,t,r){return i=>i.lift(new p8(n,void 0,void 0,void 0))}(i=>i[z1]),(0,yi.zg)(i=>i.pipe(kc((a,c)=>JSON.stringify(a)===JSON.stringify(c)),Hr(void 0),vs(),(0,Bt.U)(([a,c])=>a?Object.assign({firebase_previous_class:a[PC],firebase_previous_screen:a[jz],firebase_previous_id:a[Bz]},c):c)))))(t,r,i).pipe(fr(b=>(0,y8.mG)(this,void 0,void 0,function*(){return c&&(yield c.initialized),KZ(g,"screen_view",b)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xs,8),d.LFG(af,8),d.LFG(d._Vd),d.LFG(d.R0b),d.LFG($1,8),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const W1=new d.OlP("angularfire2.analytics-instances");function d5(n){return(e,t)=>{if(!at.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new OC(r)}}const h5={provide:class{constructor(){return(0,at.vb)(Vz)}},deps:[[new d.FiY,W1]]},f5={provide:OC,useFactory:function(n,e){if(!at.nk.sync())return null;const t=(0,at.JM)(Vz,n,e);return t&&new OC(t)},deps:[[new d.FiY,W1],Io]};let p5=(()=>{class n{constructor(t,r){(0,Xi.KN)("angularfire",at.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hz,8),d.LFG($1,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[f5,h5,{provide:d.ip1,useValue:at.nk.async,multi:!0}]}),n})();function g5(n,...e){return{ngModule:p5,providers:[{provide:W1,useFactory:d5(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,...e]}]}}const $z="@firebase/database";let q1="";class _5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,se.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,se.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class y5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,se.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Gz=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _5(e)}}catch(e){}return new y5},pg=Gz("localStorage"),K1=Gz("sessionStorage"),Yy=new Ws.Yd("@firebase/database"),Wz=function(){let n=1;return function(){return n++}}(),qz=function(n){const e=(0,se.dS)(n),t=new se.gQ;t.update(e);const r=t.digest();return se.US.encodeByteArray(r)},NC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=NC.apply(null,r):e+="object"==typeof r?(0,se.Pz)(r):r,e+=" "}return e};let gg=null,Kz=!0;const Fi=function(...n){if(!0===Kz&&(Kz=!1,null===gg&&!0===K1.get("logging_enabled")&&function(n,e){(0,se.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Yy.logLevel=Ws.in.VERBOSE,gg=Yy.log.bind(Yy),e&&K1.set("logging_enabled",!0)):"function"==typeof n?gg=n:(gg=null,K1.remove("logging_enabled"))}(!0)),gg){const e=NC.apply(null,n);gg(e)}},FC=function(n){return function(...e){Fi(n,...e)}},Y1=function(...n){const e="FIREBASE INTERNAL ERROR: "+NC(...n);Yy.error(e)},dc=function(...n){const e=`FIREBASE FATAL ERROR: ${NC(...n)}`;throw Yy.error(e),new Error(e)},ks=function(...n){const e="FIREBASE WARNING: "+NC(...n);Yy.warn(e)},TR=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nu="[MIN_NAME]",hc="[MAX_NAME]",mg=function(n,e){if(n===e)return 0;if(n===Nu||e===hc)return-1;if(e===Nu||n===hc)return 1;{const t=DR(n),r=DR(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},E5=function(n,e){return n===e?0:n<e?-1:1},LC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,se.Pz)(e))},Z1=function(n){if("object"!=typeof n||null===n)return(0,se.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,se.Pz)(e[r]),t+=":",t+=Z1(n[e[r]]);return t+="}",t},Zz=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Qz=function(n){(0,se.hu)(!TR(n),"Invalid JSON number");const r=1023;let i,a,c,f,g;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(g=52;g;g-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)b.push(a%2?1:0),a=Math.floor(a/2);b.push(i?1:0),b.reverse();const C=b.join("");let D="";for(g=0;g<64;g+=8){let R=parseInt(C.substr(g,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},T5=new RegExp("^-?(0*)\\d{1,10}$"),DR=function(n){if(T5.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Zy=function(n){try{n()}catch(e){setTimeout(()=>{throw ks("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},VC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class S5{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class A5{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Fi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ks(e)}}let UC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const r3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,s3="websocket",o3="long_polling";class X1{constructor(e,t,r,i,a=!1,c="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function a3(n,e,t){let r;if((0,se.hu)("string"==typeof e,"typeof type must == string"),(0,se.hu)("object"==typeof t,"typeof params must == object"),e===s3)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==o3)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Li(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class x5{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,se.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,se.p$)(this.counters_)}}const eL={},tL={};function nL(n){const e=n.toString();return eL[e]||(eL[e]=new x5),eL[e]}class O5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Zy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qy{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=FC(e),this.stats_=nL(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),a3(t,o3,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new O5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,se.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rL((...a)=>{const[c,f,g,b,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&r3.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qy.forceAllow_=!0}static forceDisallow(){Qy.forceDisallow_=!0}static isAvailable(){return!((0,se.Yr)()||!Qy.forceAllow_&&(Qy.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,se.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,se.h$)(t),i=Zz(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,se.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,se.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class rL{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,se.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Wz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=rL.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Fi("frame writing exception"),f.stack&&Fi(f.stack),Fi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,se.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Fi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let BC=null;"undefined"!=typeof MozWebSocket?BC=MozWebSocket:"undefined"!=typeof WebSocket&&(BC=WebSocket);let jC=(()=>{class n{constructor(t,r,i,a,c,f,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=FC(this.connId),this.stats_=nL(r),this.connURL=n.connectionURL_(r,f,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,se.Yr)()&&"undefined"!=typeof location&&location.hostname&&r3.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),a3(t,s3,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pg.set("previous_websocket_failure",!0);try{if((0,se.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${q1}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(a.proxy={origin:f}),this.mySock=new BC(this.connURL,[],a)}else this.mySock=new BC(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==BC&&!n.forceDisallow_}static previouslyFailed(){return pg.isInMemoryStorage||!0===pg.get("previous_websocket_failure")}markConnectionHealthy(){pg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,se.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,se.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,se.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Zz(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class iL{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Qy,jC]}initTransports_(e){const t=jC&&jC.isAvailable();let r=t&&!jC.previouslyFailed();if(e.webSocketOnly&&(t||ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jC];else{const i=this.transports_=[];for(const a of iL.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class b3{constructor(e,t,r,i,a,c,f,g,b,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=g,this.onKill_=b,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=FC("c:"+this.id+":"),this.transportManager_=new iL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=VC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=LC("t",e),r=LC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=LC("t",e),r=LC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=LC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Y1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Y1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),VC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):VC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class E3{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class w3{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,se.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,se.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class AR extends w3{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,se.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AR}getInitialEvent(e){return(0,se.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Fn(){return new Hn("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Dh(n){return n.pieces_.length-n.pieceNum_}function cr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Hn(n.pieces_,e)}function oL(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function HC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function T3(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Hn(e,0)}function xr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Hn(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function Os(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return Os(cr(n),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function aL(n,e){if(Dh(n)!==Dh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function la(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Dh(n)>Dh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class nQ{constructor(e,t){this.errorPrefix_=t,this.parts_=HC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,se.ug)(this.parts_[r]);D3(this)}}function D3(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_g(n))}function _g(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class lL extends w3{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new lL}getInitialEvent(e){return(0,se.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $C=1e3;let MR,yg=(()=>{class n extends E3{constructor(t,r,i,a,c,f,g,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=FC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$C,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,se.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lL.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&AR.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,se.Pz)(c)),(0,se.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new se.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:f=>{const g=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[c];void 0===f||a!==f||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,se.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,se.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,g=>{const b=g.d,C=g.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,se.r3)(t,"w")){const i=(0,se.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,se.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,se.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,se.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,se.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Y1("Unrecognized action received from server: "+(0,se.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,se.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$C,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$C,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$C),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ke.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let g=!1,b=null;const C=function(){b?b.close():(g=!0,a())};t.realtime_={close:C,sendRequest:function(x){(0,se.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(x)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[x,B]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);g?Fi("getToken() completed but was canceled"):(Fi("getToken() completed. Creating connection."),t.authToken_=x&&x.accessToken,t.appCheckToken_=B&&B.token,b=new b3(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ae=>{ks(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(x){t.log_("Failed to get token: "+x),g||(t.repoInfo_.nodeAdmin&&ks(x),C())}}})()}interrupt(t){Fi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Fi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,se.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$C,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Z1(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Hn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Fi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Fi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,se.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+q1.replace(/\./g,"-")]=1,(0,se.uI)()?t["framework.cordova"]=1:(0,se.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=AR.getInstance().currentlyOnline();return(0,se.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class En{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new En(e,t)}}class RR{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new En(Nu,e),i=new En(Nu,t);return 0!==this.compare(r,i)}minPost(){return En.MIN}}class R3 extends RR{static get __EMPTY_NODE(){return MR}static set __EMPTY_NODE(e){MR=e}compare(e,t){return mg(e.name,t.name)}isDefinedOn(e){throw(0,se.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return En.MIN}maxPost(){return new En(hc,MR)}makePost(e,t){return(0,se.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new En(e,MR)}toString(){return".key"}}const fc=new R3;class xR{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let uL,Ka=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Zs.EMPTY_NODE,this.right=null!=c?c:Zs.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Zs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Zs{constructor(e,t=Zs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Zs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ka.BLACK,null,null))}remove(e){return new Zs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ka.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xR(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xR(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xR(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xR(this.root_,null,this.comparator_,!0,e)}}function dQ(n,e){return mg(n.name,e.name)}function cL(n,e){return mg(n,e)}Zs.EMPTY_NODE=new class{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ka(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const M3=function(n){return"number"==typeof n?"number:"+Qz(n):"string:"+n},x3=function(n){if(n.isLeafNode()){const e=n.val();(0,se.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,se.r3)(e,".sv"),"Priority must be a string or number.")}else(0,se.hu)(n===uL||n.isEmpty(),"priority of unexpected type.");(0,se.hu)(n===uL||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let k3,O3,P3,Jy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,se.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),x3(this.priorityNode_)}static set __childrenNodeConstructor(t){k3=t}static get __childrenNodeConstructor(){return k3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=yn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,se.hu)(".priority"!==i||1===Dh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+M3(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Qz(this.value_):this.value_,this.lazyHash_=qz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,se.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,se.hu)(a>=0,"Unknown leaf type: "+r),(0,se.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const vr=new class extends RR{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?mg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return En.MIN}maxPost(){return new En(hc,new Jy("[PRIORITY-POST]",P3))}makePost(e,t){const r=O3(e);return new En(t,new Jy("[PRIORITY-POST]",r))}toString(){return".priority"}},mQ=Math.log(2);class _Q{constructor(e){this.count=parseInt(Math.log(e+1)/mQ,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kR=function(n,e,t,r){n.sort(e);const i=function(g,b){const C=b-g;let D,R;if(0===C)return null;if(1===C)return D=n[g],R=t?t(D):D,new Ka(R,D.node,Ka.BLACK,null,null);{const x=parseInt(C/2,10)+g,B=i(g,x),ae=i(x+1,b);return D=n[x],R=t?t(D):D,new Ka(R,D.node,Ka.BLACK,B,ae)}},f=function(g){let b=null,C=null,D=n.length;const R=function(B,ae){const me=D-B,et=D;D-=B;const pt=i(me+1,et),vt=n[me],ht=t?t(vt):vt;x(new Ka(ht,vt.node,ae,null,pt))},x=function(B){b?(b.left=B,b=B):(C=B,b=B)};for(let B=0;B<g.count;++B){const ae=g.nextBitIsOne(),me=Math.pow(2,g.count-(B+1));ae?R(me,Ka.BLACK):(R(me,Ka.BLACK),R(me,Ka.RED))}return C}(new _Q(n.length));return new Zs(r||e,f)};let dL;const Xy={};class Fu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,se.hu)(Xy&&vr,"ChildrenNode.ts has not been loaded"),dL=dL||new Fu({".priority":Xy},{".priority":vr}),dL}get(e){const t=(0,se.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zs?t:null}hasIndex(e){return(0,se.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,se.hu)(e!==fc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(En.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?kR(r,e.getCompare()):Xy;const g=e.toString(),b=Object.assign({},this.indexSet_);b[g]=e;const C=Object.assign({},this.indexes_);return C[g]=f,new Fu(C,b)}addToIndexes(e,t){const r=(0,se.UI)(this.indexes_,(i,a)=>{const c=(0,se.DV)(this.indexSet_,a);if((0,se.hu)(c,"Missing index implementation for "+a),i===Xy){if(c.isDefinedOn(e.node)){const f=[],g=t.getIterator(En.Wrap);let b=g.getNext();for(;b;)b.name!==e.name&&f.push(b),b=g.getNext();return f.push(e),kR(f,c.getCompare())}return Xy}{const f=t.get(e.name);let g=i;return f&&(g=g.remove(new En(e.name,f))),g.insert(e,e.node)}});return new Fu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,se.UI)(this.indexes_,i=>{if(i===Xy)return i;{const a=t.get(e.name);return a?i.remove(new En(e.name,a)):i}});return new Fu(r,this.indexSet_)}}let zC,un=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&x3(this.priorityNode_),this.children_.isEmpty()&&(0,se.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zC||(zC=new n(new Zs(cL),null,Fu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?zC:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(cr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,se.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new En(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?zC:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=yn(t);if(null===i)return r;{(0,se.hu)(".priority"!==yn(t)||1===Dh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(cr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(vr,(f,g)=>{r[f]=g.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+M3(this.getPriority().val())+":"),this.forEachChild(vr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":qz(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new En(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new En(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new En(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,En.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,En.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===GC?-1:0}withIndex(t){if(t===fc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(vr),a=r.getIterator(vr);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===fc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const GC=new class extends un{constructor(){super(new Zs(cL),un.EMPTY_NODE,Fu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return un.EMPTY_NODE}isEmpty(){return!1}};function Ur(n,e=null){if(null===n)return un.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,se.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Jy(n,Ur(e));if(n instanceof Array){let t=un.EMPTY_NODE;return Li(n,(r,i)=>{if((0,se.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ur(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ur(e))}{const t=[];let r=!1;if(Li(n,(c,f)=>{if("."!==c.substring(0,1)){const g=Ur(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new En(c,g)))}}),0===t.length)return un.EMPTY_NODE;const a=kR(t,dQ,c=>c.name,cL);if(r){const c=kR(t,vr.getCompare());return new un(a,Ur(e),new Fu({".priority":c},{".priority":vr}))}return new un(a,Ur(e),Fu.Default)}}Object.defineProperties(En,{MIN:{value:new En(Nu,un.EMPTY_NODE)},MAX:{value:new En(hc,GC)}}),R3.__EMPTY_NODE=un.EMPTY_NODE,Jy.__childrenNodeConstructor=un,function(n){uL=n}(GC),function(n){P3=n}(GC),function(n){O3=n}(Ur);class hL extends RR{constructor(e){super(),this.indexPath_=e,(0,se.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?mg(e.name,t.name):a}makePost(e,t){const r=Ur(e),i=un.EMPTY_NODE.updateChild(this.indexPath_,r);return new En(t,i)}maxPost(){const e=un.EMPTY_NODE.updateChild(this.indexPath_,GC);return new En(hc,e)}toString(){return HC(this.indexPath_,0).join("/")}}const fL=new class extends RR{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?mg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return En.MIN}maxPost(){return En.MAX}makePost(e,t){const r=Ur(e);return new En(t,r)}toString(){return".value"}};function qC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class mL{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,se.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,se.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,se.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,se.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,se.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vr}copy(){const e=new mL;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function B3(n){const e={};if(n.isDefault())return e;let t;return n.index_===vr?t="$priority":n.index_===fL?t="$value":n.index_===fc?t="$key":((0,se.hu)(n.index_ instanceof hL,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,se.Pz)(t),n.startSet_&&(e.startAt=(0,se.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,se.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,se.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,se.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function j3(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==vr&&(e.i=n.index_.toString()),e}class PR extends E3{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=FC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,se.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=PR.getListenId_(e,r),f={};this.listens_[c]=f;const g=B3(e._queryParams);this.restRequest_(a+".json",g,(b,C)=>{let D=C;if(404===b&&(D=null,b=null),null===b&&this.onDataUpdate_(a,D,!1,r),(0,se.DV)(this.listens_,c)===f){let R;R=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(R,null)}})}unlisten(e,t){const r=PR.getListenId_(e,t);delete this.listens_[r]}get(e){const t=B3(e._queryParams),r=e._path.toString(),i=new se.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,se.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,se.cI)(f.responseText)}catch(b){ks("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&ks("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class RQ{constructor(){this.rootNode_=un.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function NR(){return{value:null,children:new Map}}function nv(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,NR()),nv(n.children.get(r),e=cr(e),t)}}function bL(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{bL(i,new Hn(e.toString()+"/"+r),t)})}class xQ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Li(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class PQ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xQ(e);const r=1e4+2e4*Math.random();VC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Li(e,(i,a)=>{a>0&&(0,se.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),VC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ca=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ca||(ca={})),ca))();function CL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class FR{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ca.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,se.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Hn(e));return new FR(Fn(),t,this.revert)}}return(0,se.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new FR(cr(this.path),this.affectedTree,this.revert)}}class vg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ca.OVERWRITE}operationForChild(e){return vn(this.path)?new vg(this.source,Fn(),this.snap.getImmediateChild(e)):new vg(this.source,cr(this.path),this.snap)}}class rv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ca.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new Hn(e));return t.isEmpty()?null:t.value?new vg(this.source,Fn(),t.value):new rv(this.source,Fn(),t)}return(0,se.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rv(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function ZC(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,g)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,se.g5)("Should only compare child_ events.");const r=new En(e.childName,e.snapshotNode),i=new En(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),c.forEach(f=>{const g=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(b=>{b.respondsTo(f.type)&&e.push(b.createEvent(g,n.query_))})})}function LR(n,e){return{eventCache:n,serverCache:e}}function QC(n,e,t,r){return LR(new Sh(e,t,r),n.serverCache)}function $3(n,e,t,r){return LR(n.eventCache,new Sh(e,t,r))}function VR(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let IL;class br{constructor(e,t=(()=>(IL||(IL=new Zs(E5)),IL))()){this.value=e,this.children=t}static fromObject(e){let t=new br(null);return Li(e,(r,i)=>{t=t.set(new Hn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Fn(),value:this.value};if(vn(e))return null;{const r=yn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(cr(e),t);return null!=a?{path:xr(new Hn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(cr(e)):new br(null)}}set(e,t){if(vn(e))return new br(t,this.children);{const r=yn(e),a=(this.children.get(r)||new br(null)).set(cr(e),t),c=this.children.insert(r,a);return new br(this.value,c)}}remove(e){if(vn(e))return this.children.isEmpty()?new br(null):new br(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const i=r.remove(cr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new br(null):new br(this.value,a)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(cr(e)):null}}setTree(e,t){if(vn(e))return t;{const r=yn(e),a=(this.children.get(r)||new br(null)).setTree(cr(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new br(this.value,c)}}fold(e){return this.fold_(Fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(xr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Fn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(vn(e))return null;{const a=yn(e),c=this.children.get(a);return c?c.findOnPath_(cr(e),xr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Fn(),t)}foreachOnPath_(e,t,r){if(vn(e))return this;{this.value&&r(t,this.value);const i=yn(e),a=this.children.get(i);return a?a.foreachOnPath_(cr(e),xr(t,i),r):new br(null)}}foreach(e){this.foreach_(Fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(xr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ya{constructor(e){this.writeTree_=e}static empty(){return new Ya(new br(null))}}function JC(n,e,t){if(vn(e))return new Ya(new br(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Os(i,e);return a=a.updateChild(c,t),new Ya(n.writeTree_.set(i,a))}{const i=new br(t),a=n.writeTree_.setTree(e,i);return new Ya(a)}}}function TL(n,e,t){let r=n;return Li(t,(i,a)=>{r=JC(r,xr(e,i),a)}),r}function z3(n,e){if(vn(e))return Ya.empty();{const t=n.writeTree_.setTree(e,new br(null));return new Ya(t)}}function DL(n,e){return null!=Eg(n,e)}function Eg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Os(t.path,e)):null}function G3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(vr,(r,i)=>{e.push(new En(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new En(r,i.value))}),e}function Ah(n,e){if(vn(e))return n;{const t=Eg(n,e);return new Ya(null!=t?new br(t):n.writeTree_.subtree(e))}}function SL(n){return n.writeTree_.isEmpty()}function iv(n,e){return W3(Fn(),n.writeTree_,e)}function W3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,se.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=W3(xr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(xr(n,".priority"),r)),t}}function UR(n,e){return Q3(e,n)}function zQ(n,e){if(n.snap)return la(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&la(xr(n.path,t),e))return!0;return!1}function WQ(n){return n.visible}function q3(n,e,t){let r=Ya.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)la(t,c)?(f=Os(t,c),r=JC(r,f,a.snap)):la(c,t)&&(f=Os(c,t),r=JC(r,Fn(),a.snap.getChild(f)));else{if(!a.children)throw(0,se.g5)("WriteRecord should have .snap or .children");if(la(t,c))f=Os(t,c),r=TL(r,f,a.children);else if(la(c,t))if(f=Os(c,t),vn(f))r=TL(r,Fn(),a.children);else{const g=(0,se.DV)(a.children,yn(f));if(g){const b=g.getChild(cr(f));r=JC(r,Fn(),b)}}}}}return r}function K3(n,e,t,r,i){if(r||i){const a=Ah(n.visibleWrites,e);return!i&&SL(a)?t:i||null!=t||DL(a,Fn())?iv(q3(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(la(b.path,e)||la(e,b.path))},e),t||un.EMPTY_NODE):null}{const a=Eg(n.visibleWrites,e);if(null!=a)return a;{const c=Ah(n.visibleWrites,e);return SL(c)?t:null!=t||DL(c,Fn())?iv(c,t||un.EMPTY_NODE):null}}}function BR(n,e,t,r){return K3(n.writeTree,n.treePath,e,t,r)}function AL(n,e){return function(n,e,t){let r=un.EMPTY_NODE;const i=Eg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(vr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Ah(n.visibleWrites,e);return t.forEachChild(vr,(c,f)=>{const g=iv(Ah(a,new Hn(c)),f);r=r.updateImmediateChild(c,g)}),G3(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return G3(Ah(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function Y3(n,e,t,r){return function(n,e,t,r,i){(0,se.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=xr(e,t);if(DL(n.visibleWrites,a))return null;{const c=Ah(n.visibleWrites,a);return SL(c)?i.getChild(t):iv(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function jR(n,e){return function(n,e){return Eg(n.visibleWrites,e)}(n.writeTree,xr(n.treePath,e))}function RL(n,e,t){return function(n,e,t,r){const i=xr(e,t),a=Eg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?iv(Ah(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Z3(n,e){return Q3(xr(n.treePath,e),n.writeTree)}function Q3(n,e){return{treePath:n,writeTree:e}}class e9{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,se.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,se.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,qC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,se.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,qC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const J3=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ML{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RL(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bg(this.viewCache_),a=function(n,e,t,r,i,a){return function(n,e,t,r,i,a,c){let f;const g=Ah(n.visibleWrites,e),b=Eg(g,Fn());if(null!=b)f=b;else{if(null==t)return[];f=iv(g,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const C=[],D=c.getCompare(),R=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let x=R.getNext();for(;x&&C.length<i;)0!==D(x,r)&&C.push(x),x=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function X3(n,e,t,r,i,a){const c=e.eventCache;if(null!=jR(r,t))return e;{let f,g;if(vn(t))if((0,se.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=bg(e),D=AL(r,b instanceof un?b:un.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const b=BR(r,bg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),b,a)}else{const b=yn(t);if(".priority"===b){(0,se.hu)(1===Dh(t),"Can't have a priority with additional path components");const C=c.getNode();g=e.serverCache.getNode();const D=Y3(r,t,C,g);f=null!=D?n.filter.updatePriority(C,D):c.getNode()}else{const C=cr(t);let D;if(c.isCompleteForChild(b)){g=e.serverCache.getNode();const R=Y3(r,t,c.getNode(),g);D=null!=R?c.getNode().getImmediateChild(b).updateChild(C,R):c.getNode().getImmediateChild(b)}else D=RL(r,b,e.serverCache);f=null!=D?n.filter.updateChild(c.getNode(),b,D,C,i,a):c.getNode()}}return QC(e,f,c.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function HR(n,e,t,r,i,a,c,f){const g=e.serverCache;let b;const C=c?n.filter:n.filter.getIndexedFilter();if(vn(t))b=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){const x=g.getNode().updateChild(t,r);b=C.updateFullNode(g.getNode(),x,null)}else{const x=yn(t);if(!g.isCompleteForPath(t)&&Dh(t)>1)return e;const B=cr(t),me=g.getNode().getImmediateChild(x).updateChild(B,r);b=".priority"===x?C.updatePriority(g.getNode(),me):C.updateChild(g.getNode(),x,me,B,J3,null)}const D=$3(e,b,g.isFullyInitialized()||vn(t),C.filtersNodes());return X3(n,D,t,i,new ML(i,D,a),f)}function xL(n,e,t,r,i,a,c){const f=e.eventCache;let g,b;const C=new ML(i,e,a);if(vn(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,c),g=QC(e,b,!0,n.filter.filtersNodes());else{const D=yn(t);if(".priority"===D)b=n.filter.updatePriority(e.eventCache.getNode(),r),g=QC(e,b,f.isFullyInitialized(),f.isFiltered());else{const R=cr(t),x=f.getNode().getImmediateChild(D);let B;if(vn(R))B=r;else{const ae=C.getCompleteChild(D);B=null!=ae?".priority"===oL(R)&&ae.getChild(T3(R)).isEmpty()?ae:ae.updateChild(R,r):un.EMPTY_NODE}g=x.equals(B)?e:QC(e,n.filter.updateChild(f.getNode(),D,B,R,C,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function eG(n,e){return n.eventCache.isCompleteForChild(e)}function tG(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kL(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,g=e;b=vn(t)?r:new br(null).setTree(t,r);const C=e.serverCache.getNode();return b.children.inorderTraversal((D,R)=>{if(C.hasChild(D)){const B=tG(0,e.serverCache.getNode().getImmediateChild(D),R);g=HR(n,g,new Hn(D),B,i,a,c,f)}}),b.children.inorderTraversal((D,R)=>{const x=!e.serverCache.isCompleteForChild(D)&&void 0===R.value;if(!C.hasChild(D)&&!x){const ae=tG(0,e.serverCache.getNode().getImmediateChild(D),R);g=HR(n,g,new Hn(D),ae,i,a,c,f)}}),g}function f9(n,e){const t=bg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function iG(n,e,t,r){e.type===ca.MERGE&&null!==e.source.queryId&&((0,se.hu)(bg(n.viewCache_),"We should always have a full cache before handling merges"),(0,se.hu)(VR(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function(n,e,t,r,i){const a=new e9;let c,f;if(t.type===ca.OVERWRITE){const b=t;b.source.fromUser?c=xL(n,e,b.path,b.snap,r,i,a):((0,se.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||e.serverCache.isFiltered()&&!vn(b.path),c=HR(n,e,b.path,b.snap,r,i,f,a))}else if(t.type===ca.MERGE){const b=t;b.source.fromUser?c=function(n,e,t,r,i,a,c){let f=e;return r.foreach((g,b)=>{const C=xr(t,g);eG(e,yn(C))&&(f=xL(n,f,C,b,i,a,c))}),r.foreach((g,b)=>{const C=xr(t,g);eG(e,yn(C))||(f=xL(n,f,C,b,i,a,c))}),f}(n,e,b.path,b.children,r,i,a):((0,se.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||e.serverCache.isFiltered(),c=kL(n,e,b.path,b.children,r,i,f,a))}else if(t.type===ca.ACK_USER_WRITE){const b=t;c=b.revert?function(n,e,t,r,i,a){let c;if(null!=jR(r,t))return e;{const f=new ML(r,e,i),g=e.eventCache.getNode();let b;if(vn(t)||".priority"===yn(t)){let C;if(e.serverCache.isFullyInitialized())C=BR(r,bg(e));else{const D=e.serverCache.getNode();(0,se.hu)(D instanceof un,"serverChildren would be complete if leaf node"),C=AL(r,D)}C=C,b=n.filter.updateFullNode(g,C,a)}else{const C=yn(t);let D=RL(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=g.getImmediateChild(C)),b=null!=D?n.filter.updateChild(g,C,D,cr(t),f,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,un.EMPTY_NODE,cr(t),f,a):g,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=BR(r,bg(e)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=jR(r,Fn()),QC(e,b,c,n.filter.filtersNodes())}}(n,e,b.path,r,i,a):function(n,e,t,r,i,a,c){if(null!=jR(i,t))return e;const f=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(vn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return HR(n,e,t,g.getNode().getChild(t),i,a,f,c);if(vn(t)){let b=new br(null);return g.getNode().forEachChild(fc,(C,D)=>{b=b.set(new Hn(C),D)}),kL(n,e,t,b,i,a,f,c)}return e}{let b=new br(null);return r.foreach((C,D)=>{const R=xr(t,C);g.isCompleteForPath(R)&&(b=b.set(C,g.getNode().getChild(R)))}),kL(n,e,t,b,i,a,f,c)}}(n,e,b.path,b.affectedTree,r,i,a)}else{if(t.type!==ca.LISTEN_COMPLETE)throw(0,se.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,i){const a=e.serverCache;return X3(n,$3(e,a.getNode(),a.isFullyInitialized()||vn(t),a.isFiltered()),t,r,J3,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=VR(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function(n){return{type:"value",snapshotNode:n}}(VR(e)))}}(e,c,g),{viewCache:c,changes:g}}(n.processor_,i,e,t,r);return function(n,e){(0,se.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,se.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,se.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function(n,e,t,r){return function(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),ZC(n,i,"child_removed",e,r,t),ZC(n,i,"child_added",e,r,t),ZC(n,i,"child_moved",a,r,t),ZC(n,i,"child_changed",e,r,t),ZC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let $R,GR;function OL(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,se.hu)(null!=a,"SyncTree gave us an op for an invalid query."),iG(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(iG(c,e,t,r));return a}}function Rh(n,e){let t=null;for(const r of n.views.values())t=t||f9(r,e);return t}class dG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new br(null),this.pendingWriteTree_={visibleWrites:Ya.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function PL(n,e,t,r,i){return function(n,e,t,r,i){(0,se.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=JC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?sv(n,new vg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function xh(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,se.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&zQ(f,r.path)?i=!1:la(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function(n){n.visibleWrites=q3(n.allWrites,WQ,Fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=z3(n.visibleWrites,r.path):Li(r.children,g=>{n.visibleWrites=z3(n.visibleWrites,xr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new br(null);return null!=r.snap?a=a.set(Fn(),!0):Li(r.children,c=>{a=a.set(new Hn(c),!0)}),sv(n,new FR(r.path,a,t))}return[]}function XC(n,e,t){return sv(n,new vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function WR(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const b=Rh(f,Os(c,e));if(b)return b});return K3(i,e,a,t,!0)}function sv(n,e){return fG(e,n.syncPointTree_,null,UR(n.pendingWriteTree_,Fn()))}function fG(n,e,t,r){if(vn(n.path))return pG(n,e,t,r);{const i=e.get(Fn());null==t&&null!=i&&(t=Rh(i,Fn()));let a=[];const c=yn(n.path),f=n.operationForChild(c),g=e.children.get(c);if(g&&f){const b=t?t.getImmediateChild(c):null,C=Z3(r,c);a=a.concat(fG(f,g,b,C))}return i&&(a=a.concat(OL(i,n,r,t))),a}}function pG(n,e,t,r){const i=e.get(Fn());null==t&&null!=i&&(t=Rh(i,Fn()));let a=[];return e.children.inorderTraversal((c,f)=>{const g=t?t.getImmediateChild(c):null,b=Z3(r,c),C=n.operationForChild(c);C&&(a=a.concat(pG(C,f,g,b)))}),i&&(a=a.concat(OL(i,n,r,t))),a}function FL(n,e){return n.tagToQueryMap.get(e)}function LL(n){const e=n.indexOf("$");return(0,se.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Hn(n.substr(0,e))}}function VL(n,e,t){const r=n.syncPointTree_.get(e);return(0,se.hu)(r,"Missing sync point for query tag that we're tracking"),OL(r,t,UR(n.pendingWriteTree_,e),null)}class UL{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new UL(t)}node(){return this.node_}}class BL{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xr(this.path_,e);return new BL(this.syncTree_,t)}node(){return WR(this.syncTree_,this.path_)}}const mG=function(n,e,t){return n&&"object"==typeof n?((0,se.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?F9(n[".sv"],e,t):"object"==typeof n[".sv"]?L9(n[".sv"],e):void(0,se.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},F9=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,se.hu)(!1,"Unexpected server value: "+n)}},L9=function(n,e,t){n.hasOwnProperty("increment")||(0,se.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,se.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,se.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},jL=function(n,e,t){return HL(n,new UL(e),t)};function HL(n,e,t){const r=n.getPriority().val(),i=mG(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=mG(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new Jy(f,Ur(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Jy(i))),c.forEachChild(vr,(f,g)=>{const b=HL(g,e.getImmediateChild(f),t);b!==g&&(a=a.updateImmediateChild(f,b))}),a}}class $L{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function YR(n,e){let t=e instanceof Hn?e:new Hn(e),r=n,i=yn(t);for(;null!==i;){const a=(0,se.DV)(r.node.children,i)||{children:{},childCount:0};r=new $L(i,r,a),t=cr(t),i=yn(t)}return r}function wg(n){return n.node.value}function zL(n,e){n.node.value=e,GL(n)}function yG(n){return n.node.childCount>0}function ZR(n,e){Li(n.node.children,(t,r)=>{e(new $L(t,n,r))})}function vG(n,e,t,r){t&&!r&&e(n),ZR(n,i=>{vG(i,e,!0,r)}),t&&r&&e(n)}function t0(n){return new Hn(null===n.parent?n.name:t0(n.parent)+"/"+n.name)}function GL(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===wg(n)&&!yG(n)}(t),i=(0,se.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,GL(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,GL(n))}(n.parent,n.name,n)}const j9=/[\[\].#$\/\u0000-\u001F\u007F]/,H9=/[\[\].#$\u0000-\u001F\u007F]/,WL=10485760,QR=function(n){return"string"==typeof n&&0!==n.length&&!j9.test(n)},r0=function(n,e,t){const r=t instanceof Hn?new nQ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+_g(r));if("function"==typeof e)throw new Error(n+"contains a function "+_g(r)+" with contents = "+e.toString());if(TR(e))throw new Error(n+"contains "+e.toString()+" "+_g(r));if("string"==typeof e&&e.length>WL/3&&(0,se.ug)(e)>WL)throw new Error(n+"contains a string greater than "+WL+" utf8 bytes "+_g(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Li(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!QR(c)))throw new Error(n+" contains an invalid key ("+c+") "+_g(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,se.ug)(e),D3(n)})(r,c),r0(n,f,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,se.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+_g(r)+" in addition to actual children.")}},wG=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!QR(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!H9.test(n)}(n)}(t))throw new Error((0,se.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class W9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ua(n,e,t){(function(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!aL(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(q9(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>la(r,e)||la(e,r))}function q9(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();gg&&Fi("event: "+t.toString()),Zy(r)}}}class Y9{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new W9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=NR(),this.transactionQueueTree_=new $L,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function TG(n){const t=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function o0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:TG(n)})}function DG(n,e,t,r,i){n.dataUpdateCount++;const a=new Hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const g=(0,se.UI)(t,b=>Ur(b));c=function(n,e,t,r){const i=FL(n,r);if(i){const a=LL(i),c=a.path,f=a.queryId,g=Os(c,e),b=br.fromObject(t);return VL(n,c,new rv(CL(f),g,b))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Ur(t);c=function(n,e,t,r){const i=FL(n,r);if(null!=i){const a=LL(i),c=a.path,f=a.queryId,g=Os(c,e);return VL(n,c,new vg(CL(f),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,se.UI)(t,b=>Ur(b));c=function(n,e,t){const r=br.fromObject(t);return sv(n,new rv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Ur(t);c=XC(n.serverSyncTree_,a,g)}let f=a;c.length>0&&(f=av(n,a)),ua(n.eventQueue_,f,c)}function SG(n,e){ZL(n,"connected",e),!1===e&&function(n){ov(n,"onDisconnectEvents");const e=o0(n),t=NR();bL(n.onDisconnect_,Fn(),(i,a)=>{const c=function(n,e,t,r){return HL(e,new BL(t,n),r)}(i,a,n.serverSyncTree_,e);nv(t,i,c)});let r=[];bL(t,Fn(),(i,a)=>{r=r.concat(XC(n.serverSyncTree_,i,a));const c=function(n,e){const t=t0(MG(n,e)),r=YR(n.transactionQueueTree_,e);return function(n,e,t){let r=void 0?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{tV(n,i)}),tV(n,r),vG(r,i=>{tV(n,i)}),t}(n,i);av(n,c)}),n.onDisconnect_=NR(),ua(n.eventQueue_,Fn(),r)}(n)}function ZL(n,e,t){const r=new Hn("/.info/"+e),i=Ur(t);n.infoData_.updateSnapshot(r,i);const a=XC(n.infoSyncTree_,r,i);ua(n.eventQueue_,r,a)}function XR(n){return n.nextWriteId_++}function ov(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Fi(t,...e)}function XL(n,e,t){return WR(n.serverSyncTree_,e,t)||un.EMPTY_NODE}function eM(n,e=n.transactionQueueTree_){if(e||tM(n,e),wg(e)){const t=xG(n,e);(0,se.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),i=XL(n,e,r);let a=i;const c=i.hash();for(let b=0;b<t.length;b++){const C=t[b];(0,se.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Os(e,C.path);a=a.updateChild(D,C.currentOutputSnapshotRaw)}const f=a.val(!0),g=e;n.server_.put(g.toString(),f,b=>{ov(n,"transaction put response",{path:g.toString(),status:b});let C=[];if("ok"===b){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(xh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();tM(n,YR(n.transactionQueueTree_,e)),eM(n,n.transactionQueueTree_),ua(n.eventQueue_,e,C);for(let R=0;R<D.length;R++)Zy(D[R])}else{if("datastale"===b)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{ks("transaction at "+g.toString()+" failed: "+b);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=b}av(n,e)}},c)}(n,t0(e),t)}else yG(e)&&ZR(e,t=>{eM(n,t)})}function av(n,e){const t=MG(n,e),r=t0(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const g=e[f],b=Os(t,g.path);let D,C=!1;if((0,se.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,D=g.abortReason,i=i.concat(xh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)C=!0,D="maxretry",i=i.concat(xh(n.serverSyncTree_,g.currentWriteId,!0));else{const R=XL(n,g.path,c);g.currentInputSnapshot=R;const x=e[f].update(R.val());if(void 0!==x){r0("transaction failed: Data returned ",x,g.path);let B=Ur(x);"object"==typeof x&&null!=x&&(0,se.r3)(x,".priority")||(B=B.updatePriority(R.getPriority()));const me=g.currentWriteId,et=o0(n),pt=jL(B,R,et);g.currentOutputSnapshotRaw=B,g.currentOutputSnapshotResolved=pt,g.currentWriteId=XR(n),c.splice(c.indexOf(me),1),i=i.concat(PL(n.serverSyncTree_,g.path,pt,g.currentWriteId,g.applyLocally)),i=i.concat(xh(n.serverSyncTree_,me,!0))}else C=!0,D="nodata",i=i.concat(xh(n.serverSyncTree_,g.currentWriteId,!0))}ua(n.eventQueue_,t,i),i=[],C&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===D?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(D),!1,null)))}tM(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Zy(r[f]);eM(n,n.transactionQueueTree_)}(n,xG(n,t),r),r}function MG(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===wg(r);)r=YR(r,t),t=yn(e=cr(e));return r}function xG(n,e){const t=[];return kG(n,e,t),t.sort((r,i)=>r.order-i.order),t}function kG(n,e,t){const r=wg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ZR(e,i=>{kG(n,i,t)})}function tM(n,e){const t=wg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,zL(e,t.length>0?t:void 0)}ZR(e,r=>{tM(n,r)})}function tV(n,e){const t=wg(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,se.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,se.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(xh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?zL(e,void 0):t.length=a+1,ua(n.eventQueue_,t0(e),i);for(let c=0;c<r.length;c++)Zy(r[c])}}const nV=function(n,e){const t=dJ(n),r=t.namespace;return"firebase.com"===t.domain&&dc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&dc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new X1(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Hn(t.pathString)}},dJ=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",g=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,D)));const R=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ks(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));b=e.indexOf(":"),b>=0?(c="https"===f||"wss"===f,g=parseInt(e.substring(b+1),10)):b=e.length;const x=e.slice(0,b);if("localhost"===x.toLowerCase())t="localhost";else if(x.split(".").length<=2)t=x;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}};class To{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return vn(this._path)?null:oL(this._path)}get ref(){return new Za(this._repo,this._path)}get _queryIdentifier(){const e=j3(this._queryParams),t=Z1(e);return"{}"===t?"default":t}get _queryObject(){return j3(this._queryParams)}isEqual(e){if(!((e=(0,se.m9)(e))instanceof To))return!1;const t=this._repo===e._repo,r=aL(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Za extends To{constructor(e,t){super(e,t,new mL,!1)}get parent(){const e=T3(this._path);return null===e?null:new Za(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function(n){(0,se.hu)(!$R,"__referenceConstructor has already been defined"),$R=n})(Za),function(n){(0,se.hu)(!GR,"__referenceConstructor has already been defined"),GR=n}(Za);const rV={};class MJ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=nL(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new PR(n.repoInfo_,(r,i,a,c)=>{DG(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>SG(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,se.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new yg(n.repoInfo_,e,(r,i,a,c)=>{DG(n,r,i,a,c)},r=>{SG(n,r)},r=>{!function(n,e){Li(e,(t,r)=>{ZL(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return tL[t]||(tL[t]=e()),tL[t]}(n.repoInfo_,()=>new PQ(n.stats_,n.server_)),n.infoData_=new RQ,n.infoSyncTree_=new dG({startListening:(r,i,a,c)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=XC(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),ZL(n,"connected",!1),n.serverSyncTree_=new dG({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,g)=>{const b=c(f,g);ua(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Za(this._repo,Fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=rV[e];(!t||t[n.key]!==n)&&dc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&dc("Cannot call "+e+" on a deleted database.")}}function xJ(n=(0,kn.getApp)(),e){return(0,kn._getProvider)(n,"database").getImmediate({identifier:e})}yg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},yg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function(n){q1=n}(kn.SDK_VERSION),(0,kn._registerComponent)(new zl.wA("database",(e,{instanceIdentifier:t})=>function(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||dc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,b,c=nV(a,i),f=c.repoInfo;"undefined"!=typeof process&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(g=!0,a=`http://${b}?ns=${f.namespace}`,c=nV(a,i),f=c.repoInfo):g=!c.repoInfo.secure;const C=i&&g?new UC(UC.OWNER):new A5(n.name,n.options,e);wG("Invalid Firebase Database URL",c),vn(c.path)||dc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function(n,e,t,r){let i=rV[e.name];i||(i={},rV[e.name]=i);let a=i[n.toURLString()];return a&&dc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Y9(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,C,new S5(n.name,t));return new MJ(D,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)($z,"0.12.4",void 0),(0,kn.registerVersion)($z,"0.12.4","esm2017");class iV{constructor(e){return e}}const BG="database",sV=new d.OlP("angularfire2.database-instances");function LJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new iV(r)}}const VJ={provide:class{constructor(){return(0,at.vb)(BG)}},deps:[[new d.FiY,sV]]},UJ={provide:iV,useFactory:function(n,e){const t=(0,at.JM)(BG,n,e);return t&&new iV(t)},deps:[[new d.FiY,sV],Io]};let BJ=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[UJ,VJ]}),n})();function jJ(n,...e){return{ngModule:BJ,providers:[{provide:sV,useFactory:LJ(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,[new d.FiY,kC],[new d.FiY,Ih],...e]}]}}const HJ=(0,at.u3)(xJ,!0);class oV{constructor(e){return e}}const jG="firestore",aV=new d.OlP("angularfire2.firestore-instances");function GJ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new oV(r)}}const WJ={provide:class{constructor(){return(0,at.vb)(jG)}},deps:[[new d.FiY,aV]]},qJ={provide:oV,useFactory:function(n,e){const t=(0,at.JM)(jG,n,e);return t&&new oV(t)},deps:[[new d.FiY,aV],Io]};let KJ=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[qJ,WJ]}),n})();function YJ(n,...e){return{ngModule:KJ,providers:[{provide:aV,useFactory:GJ(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,[new d.FiY,kC],[new d.FiY,Ih],...e]}]}}const ZJ=(0,at.u3)(O4,!0),cV="functions";class tX{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,ke.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return(0,ke.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return(0,ke.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,ke.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const uV="us-central1";class rX{constructor(e,t,r,i,a=uV,c){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new tX(t,r,i),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(a);this.customDomain=f.origin,this.region=uV}catch(f){this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const zG="@firebase/functions";function hX(n=(0,kn.getApp)(),e=uV){return(0,kn._getProvider)((0,se.m9)(n),cV).getImmediate({identifier:e})}!function(n,e){(0,kn._registerComponent)(new zl.wA(cV,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),c=r.getProvider("auth-internal"),f=r.getProvider("messaging-internal"),g=r.getProvider("app-check-internal");return new rX(a,c,f,g,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(zG,"0.7.6",void 0),(0,kn.registerVersion)(zG,"0.7.6","esm2017")}(fetch.bind(self));class fV{constructor(e){return e}}const WG="functions",pV=new d.OlP("angularfire2.functions-instances");function gX(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new fV(r)}}const mX={provide:class{constructor(){return(0,at.vb)(WG)}},deps:[[new d.FiY,pV]]},_X={provide:fV,useFactory:function(n,e){const t=(0,at.JM)(WG,n,e);return t&&new fV(t)},deps:[[new d.FiY,pV],Io]};let yX=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[_X,mX]}),n})();function vX(n,...e){return{ngModule:yX,providers:[{provide:pV,useFactory:gX(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,[new d.FiY,kC],[new d.FiY,Ih],...e]}]}}const bX=(0,at.u3)(hX,!0);var EX=O(7373);class gV{constructor(e){return e}}const qG="messaging",mV=new d.OlP("angularfire2.messaging-instances");function IX(n){return(e,t)=>{if(!at.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new gV(r)}}const TX={provide:class{constructor(){return(0,at.vb)(qG)}},deps:[[new d.FiY,mV]]},DX={provide:gV,useFactory:function(n,e){if(!at.n1.sync())return null;const t=(0,at.JM)(qG,n,e);return t&&new gV(t)},deps:[[new d.FiY,mV],Io]};let SX=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[DX,TX,{provide:d.ip1,useValue:at.n1.async,multi:!0}]}),n})();function AX(n,...e){return{ngModule:SX,providers:[{provide:mV,useFactory:IX(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,...e]}]}}const RX=(0,at.u3)(EX.KL,!0);O(3328);const KG="@firebase/performance",_V="0.5.4",yV="FB-PERF-TRACE-MEASURE",eW="@firebase/performance/config",tW="@firebase/performance/configexpire",nW="Performance",ts=new se.LL("performance",nW,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),mc=new Ws.Yd(nW);let vV,rW,iW,EV;mc.logLevel=Ws.in.INFO;class Vi{constructor(e){if(this.window=e,!e)throw ts.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,se.zI)()?!!(0,se.hl)()||(mc.info("IndexedDB is not supported by current browswer"),!1):(mc.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===vV&&(vV=new Vi(rW)),vV}}function bV(){return iW}function sW(n,e){const t=n.length-e.length;if(t<0||t>1)throw ts.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class Do{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=sW("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=sW("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===EV&&(EV=new Do),EV}}var Ig=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(Ig||(Ig={})),Ig))();const LX=["firebase_","google_","ga_"],VX=new RegExp("^[a-zA-Z]\\w*$");function jX(){const n=Vi.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function oW(){switch(Vi.getInstance().document.visibilityState){case"visible":return Ig.VISIBLE;case"hidden":return Ig.HIDDEN;default:return Ig.UNKNOWN}}function HX(){const e=Vi.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function aW(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw ts.create("no app id");return t}const XX="Could not fetch config, will use default configs";function lW(n){if(!n)return n;const e=Do.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0===t.fpr_enabled||"true"===String(t.fpr_enabled),t.fpr_log_source&&(e.logSource=Number(t.fpr_log_source)),t.fpr_log_endpoint_url&&(e.logEndPointUrl=t.fpr_log_endpoint_url),t.fpr_log_transport_key&&(e.transportKey=t.fpr_log_transport_key),void 0!==t.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate)),void 0!==t.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=cW(e.tracesSamplingRate),e.logNetworkAfterSampling=cW(e.networkRequestsSamplingRate),n}function cW(n){return Math.random()<=n}let CV,wV=1;function uW(n){return wV=2,CV=CV||function(n){return function(){const n=Vi.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function(n){const e=n.getId();return e.then(t=>{iW=t}),e}(n.installations)).then(e=>function(n,e){const t=function(){const n=Vi.getInstance().localStorage;if(!n)return;const e=n.getItem(tW);if(!e||!function(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(eW);if(t)try{return JSON.parse(t)}catch(r){return}}();return t?(lW(t),Promise.resolve()):function(n,e){return function(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw ts.create("no project id");return t}(n.app),i=function(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw ts.create("no api key");return t}(n.app),c=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:aW(n.app),app_version:"0.5.4",sdk_version:"0.0.1"})});return fetch(c).then(f=>{if(f.ok)return f.json();throw ts.create("RC response not ok")})}).catch(()=>{mc.info(XX)})}(n,e).then(lW).then(r=>function(n){const e=Vi.getInstance().localStorage;!n||!e||(e.setItem(eW,JSON.stringify(n)),e.setItem(tW,String(Date.now()+60*Do.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>dW(),()=>dW())}(n),CV}function dW(){wV=3}let TV,aM=3,Ph=[],fW=!1;function lM(n){setTimeout(()=>{if(0!==aM){if(!Ph.length)return lM(1e4);!function(){const n=Ph.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function(n,e){return function(n){const e=Do.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||mc.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(Ph=[...e,...Ph],mc.info("Retry transport request later.")),aM=3,lM(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Do.getInstance().logSource,log_event:e},n).catch(()=>{Ph=[...n,...Ph],aM--,mc.info(`Tries left: ${aM}.`),lM(1e4)})}()}},n)}function pW(n,e){TV||(TV=function(n){return(...e)=>{!function(n){if(!n.eventTime||!n.message)throw ts.create("invalid cc log");Ph=[...Ph,n]}({message:n(...e),eventTime:Date.now()})}}(pee)),TV(n,e)}function cM(n){const e=Do.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!Vi.getInstance().requiredApisAvailable()||n.isAuto&&oW()!==Ig.VISIBLE||(3===wV?DV(n):uW(n.performanceController).then(()=>DV(n),()=>DV(n)))}function DV(n){if(!bV())return;const e=Do.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>pW(n,1),0)}function pee(n,e){return 0===e?function(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:gW(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:gW(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function gW(n){return{google_app_id:aW(n),app_instance_id:bV(),web_app_info:{sdk_version:"0.5.4",page_url:Vi.getInstance().getUrl(),service_worker_status:jX(),visibility_state:oW(),effective_connection_type:HX()},application_process_state:0}}const vee=["_fp","_fcp","_fid"];class Nh{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Vi.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${yV}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw ts.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw ts.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),cM(this)}record(e,t,r){if(e<=0)throw ts.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw ts.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Number(Math.floor(r.metrics[i])));cM(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&vee.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw ts.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function(n){const e=Math.floor(n);return e<n&&mc.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function(n){return!(0===n.length||n.length>40||LX.some(t=>n.startsWith(t))||!n.match(VX))}(e),i=function(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw ts.create("invalid attribute name",{attributeName:e});if(!i)throw ts.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=Vi.getInstance().getUrl();if(!a)return;const c=new Nh(e,"_wt_"+a,!0),f=Math.floor(1e3*Vi.getInstance().getTimeOrigin());if(c.setStartTime(f),t&&t[0]&&(c.setDuration(Math.floor(1e3*t[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const C=r.find(R=>"first-paint"===R.name);C&&C.startTime&&c.putMetric("_fp",Math.floor(1e3*C.startTime));const D=r.find(R=>"first-contentful-paint"===R.name);D&&D.startTime&&c.putMetric("_fcp",Math.floor(1e3*D.startTime)),i&&c.putMetric("_fid",Math.floor(1e3*i))}cM(c)}static createUserTimingTrace(e,t){cM(new Nh(e,t,!1,t))}}function mW(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=Vi.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,c=Math.floor(1e3*(t.responseEnd-t.startTime));!function(n){const e=Do.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>pW(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:c})}function _W(n){!bV()||(setTimeout(()=>function(n){const e=Vi.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{Nh.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),Nh.createOobTrace(n,t,r,a))})}else Nh.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function(n){const e=Vi.getInstance(),t=e.getEntriesByType("resource");for(const r of t)mW(n,r);e.setupObserver("resource",r=>mW(n,r))}(n),0),setTimeout(()=>function(n){const e=Vi.getInstance(),t=e.getEntriesByType("measure");for(const r of t)yW(n,r);e.setupObserver("measure",r=>yW(n,r))}(n),0))}function yW(n,e){const t=e.name;t.substring(0,yV.length)!==yV&&Nh.createUserTimingTrace(n,t)}class Dee{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),Vi.getInstance().requiredApisAvailable()?(0,se.eu)().then(t=>{t&&(fW||(lM(5500),fW=!0),uW(this).then(()=>_W(this),()=>_W(this)),this.initialized=!0)}).catch(t=>{mc.info(`Environment doesn't support IndexedDB: ${t}`)}):mc.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Do.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Do.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Do.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Do.getInstance().dataCollectionEnabled}}function Aee(n=(0,kn.getApp)()){return n=(0,se.m9)(n),(0,kn._getProvider)(n,"performance").getImmediate()}(0,kn._registerComponent)(new zl.wA("performance",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw ts.create("FB not default");if("undefined"==typeof window)throw ts.create("no window");!function(n){rW=n}(window);const i=new Dee(t,r);return i._init(e),i},"PUBLIC")),(0,kn.registerVersion)(KG,_V),(0,kn.registerVersion)(KG,_V,"esm2017");class SV{constructor(e){return e}}const vW="performance",AV=new d.OlP("angularfire2.performance-instances");function Oee(n){return(e,t,r)=>{if(!rl(t))return null;const i=e.runOutsideAngular(()=>n(r));return new SV(i)}}const Pee={provide:class{constructor(){return(0,at.vb)(vW)}},deps:[[new d.FiY,AV]]},Nee={provide:SV,useFactory:function(n,e,t){if(!rl(t))return null;const r=(0,at.JM)(vW,n,e);return r&&new SV(r)},deps:[[new d.FiY,AV],Io,d.Lbi]};let Fee=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Nee,Pee]}),n})();function Lee(n,...e){return{ngModule:Fee,providers:[{provide:AV,useFactory:Oee(n),multi:!0,deps:[d.R0b,d.Lbi,d.zs3,at.HU,lc,...e]}]}}const Vee=(0,at.u3)(Aee,!0);var Uee=O(2354);class RV{constructor(e){return e}}const bW="remote-config",MV=new d.OlP("angularfire2.remote-config-instances");function Hee(n){return(e,t)=>{if(!at._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new RV(r)}}const $ee={provide:class{constructor(){return(0,at.vb)(bW)}},deps:[[new d.FiY,MV]]},zee={provide:RV,useFactory:function(n,e){if(!at._J.sync())return null;const t=(0,at.JM)(bW,n,e);return t&&new RV(t)},deps:[[new d.FiY,MV],Io]};let Gee=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[zee,$ee,{provide:d.ip1,useValue:at._J.async,multi:!0}]}),n})();function Wee(n,...e){return{ngModule:Gee,providers:[{provide:MV,useFactory:Hee(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,...e]}]}}const qee=(0,at.u3)(Uee.sN,!0),EW="firebasestorage.googleapis.com";class Zr extends se.ZR{constructor(e,t){super(xV(e),`Firebase Storage: ${t} (${xV(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zr.prototype)}_codeEquals(e){return xV(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function xV(n){return"storage/"+n}function OV(n){return new Zr("invalid-argument",n)}function TW(){return new Zr("app-deleted","The Firebase app was deleted.")}class Ps{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ps.makeFromUrl(e,t)}catch(i){return new Ps(e,"")}if(""===r.path)return r;throw function(n){return new Zr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(ht){ht.path_=decodeURIComponent(ht.path)}const D=t.replace(/[.]/g,"\\."),vt=[{regex:f,indices:{bucket:1,path:3},postModify:function(ht){"/"===ht.path.charAt(ht.path.length-1)&&(ht.path_=ht.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===EW?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let ht=0;ht<vt.length;ht++){const Dn=vt[ht],$n=Dn.regex.exec(e);if($n){let Fs=$n[Dn.indices.path];Fs||(Fs=""),r=new Ps($n[Dn.indices.bucket],Fs),Dn.postModify(r);break}}if(null==r)throw function(n){return new Zr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class lte{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NV(n,e,t,r){if(r<e)throw OV(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw OV(`Invalid value for '${n}'. Expected ${t} or less.`)}var Lh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Lh||(Lh={})),Lh))();class pte{constructor(e,t,r,i,a,c,f,g,b,C,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=g,this.timeout_=b,this.progressCallback_=C,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,x)=>{this.resolve_=R,this.reject_=x,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponseText());!function(n){return void 0!==n}(g)?a():a(g)}catch(g){c(g)}else if(null!==f){const g=new Zr("unknown","An unknown error occurred, please check the error payload for server response.");g.serverResponse=f.getResponseText(),c(this.errorCallback_?this.errorCallback_(f,g):g)}else c(i.canceled?this.appDelete_?TW():new Zr("canceled","User canceled the upload/download."):new Zr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new hM(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function g(){return 2===f}let b=!1;function C(...me){b||(b=!0,e.apply(null,me))}function D(me){i=setTimeout(()=>{i=null,n(x,g())},me)}function R(){a&&clearTimeout(a)}function x(me,...et){if(b)return void R();if(me)return R(),void C.call(null,me,...et);if(g()||c)return R(),void C.call(null,me,...et);let vt;r<64&&(r*=2),1===f?(f=2,vt=0):vt=1e3*(r+Math.random()),D(vt)}let B=!1;function ae(me){B||(B=!0,R(),!b&&(null!==i?(me||(f=2),clearTimeout(i),D(0)):me||(f=1)))}return D(0),a=setTimeout(()=>{c=!0,ae(!0)},t),ae}((r,i)=>{if(i)return void r(!1,new hM(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===Lh.NO_ERROR,g=a.getStatus();if(!f||this.isRetryStatusCode_(g)){const C=a.getErrorCode()===Lh.ABORT;return void r(!1,new hM(!1,null,C))}const b=-1!==this.successCodes_.indexOf(g);r(!0,new hM(b,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class hM{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Tg{constructor(e,t){this._service=e,this._location=t instanceof Ps?t:Ps.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tg(e,t)}get root(){const e=new Ps(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ps(this._location.bucket,e);return new Tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(n){return new Zr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function WW(n,e){const t=null==e?void 0:e.storageBucket;return null==t?null:Ps.makeFromBucketSpec(t,n)}class HV{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=EW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ps.makeFromBucketSpec(i,this._host):WW(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ps.makeFromBucketSpec(this._url,e):WW(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ke.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ke.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new lte(TW());{const a=function(n,e,t,r,i,a){const c=function(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),f=n.url+c,g=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new pte(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ke.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const qW="@firebase/storage",YW="storage";function ane(n=(0,kn.getApp)(),e){return n=(0,se.m9)(n),(0,kn._getProvider)(n,YW).getImmediate({identifier:e})}(0,kn._registerComponent)(new zl.wA(YW,function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new HV(t,r,i,e,kn.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(qW,"0.8.7",""),(0,kn.registerVersion)(qW,"0.8.7","esm2017");class $V{constructor(e){return e}}const ZW="storage",zV=new d.OlP("angularfire2.storage-instances");function hne(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new $V(r)}}const fne={provide:class{constructor(){return(0,at.vb)(ZW)}},deps:[[new d.FiY,zV]]},pne={provide:$V,useFactory:function(n,e){const t=(0,at.JM)(ZW,n,e);return t&&new $V(t)},deps:[[new d.FiY,zV],Io]};let gne=(()=>{class n{constructor(){(0,Xi.KN)("angularfire",at.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[pne,fne]}),n})();function mne(n,...e){return{ngModule:gne,providers:[{provide:zV,useFactory:hne(n),multi:!0,deps:[d.R0b,d.zs3,at.HU,lc,[new d.FiY,kC],[new d.FiY,Ih],...e]}]}}const _ne=(0,at.u3)(ane,!0);let yne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[h8]}),n.\u0275inj=d.cJS({providers:[Hz,$1],imports:[[jg,mk,uP,ZY,r8,bx,BO,h_,LO,kO,Ds.hO.initializeApp(_1_firebase),zY,$K(()=>zK(_1_firebase)),g5(()=>qZ()),$Z(()=>GZ()),jJ(()=>HJ()),YJ(()=>ZJ()),vX(()=>bX()),AX(()=>RX()),Lee(()=>Vee()),Wee(()=>qee()),mne(()=>_ne())]]}),n})();Rc().bootstrapModule(yne).catch(n=>console.error(n))},4762:(gt,Oe,O)=>{"use strict";function le(de,Ee){var pe={};for(var Se in de)Object.prototype.hasOwnProperty.call(de,Se)&&Ee.indexOf(Se)<0&&(pe[Se]=de[Se]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(Se=Object.getOwnPropertySymbols(de);Ue<Se.length;Ue++)Ee.indexOf(Se[Ue])<0&&Object.prototype.propertyIsEnumerable.call(de,Se[Ue])&&(pe[Se[Ue]]=de[Se[Ue]])}return pe}function te(de,Ee,pe,Se){return new(pe||(pe=Promise))(function(be,It){function sn(bt){try{Et(Se.next(bt))}catch(Ne){It(Ne)}}function gn(bt){try{Et(Se.throw(bt))}catch(Ne){It(Ne)}}function Et(bt){bt.done?be(bt.value):function(be){return be instanceof pe?be:new pe(function(It){It(be)})}(bt.value).then(sn,gn)}Et((Se=Se.apply(de,Ee||[])).next())})}O.d(Oe,{_T:()=>le,mG:()=>te})},3394:(gt,Oe,O)=>{"use strict";O.d(Oe,{Z:()=>Le});var d=O(3854),U=O(3910),F=O(8026),le=O(5422);class ye{constructor(ge,oe){this._delegate=ge,this.firebase=oe,(0,F._addComponent)(ge,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ge,oe=F._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(ge);return!Be.isInitialized()&&"EXPLICIT"===(null===(Re=Be.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:oe})}_removeServiceInstance(ge,oe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(oe)}_addComponent(ge){(0,F._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,F._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),N=function X(){const we=function(we){const ge={},oe={__esModule:!0,initializeApp:function(ve,Jt={}){const de=F.initializeApp(ve,Jt);if((0,d.r3)(ge,de.name))return ge[de.name];const Ee=new we(de,oe);return ge[de.name]=Ee,Ee},app:Be,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(ve){const Jt=ve.name,de=Jt.replace("-compat","");if(F._registerComponent(ve)&&"PUBLIC"===ve.type){const Ee=(pe=Be())=>{if("function"!=typeof pe[de])throw ie.create("invalid-app-argument",{appName:Jt});return pe[de]()};void 0!==ve.serviceProps&&(0,d.ZB)(Ee,ve.serviceProps),oe[de]=Ee,we.prototype[de]=function(...pe){return this._getService.bind(this,Jt).apply(this,ve.multipleInstances?pe:[])}}return"PUBLIC"===ve.type?oe[de]:null},removeApp:function(ve){delete ge[ve]},useAsService:function(ve,Jt){return"serverAuth"===Jt?null:Jt},modularAPIs:F}};function Be(ve){if(!(0,d.r3)(ge,ve=ve||F._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:ve});return ge[ve]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(ge).map(ve=>ge[ve])}}),Be.App=we,oe}(ye);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:X,extendNamespace:function(oe){(0,d.ZB)(we,oe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),we}(),j=new le.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=N;(0,F.registerVersion)("@firebase/app-compat","0.1.9",undefined)},8026:(gt,Oe,O)=>{"use strict";O.r(Oe),O.d(Oe,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Bn,_DEFAULT_ENTRY_NAME:()=>gn,_addComponent:()=>Rt,_addOrOverwriteComponent:()=>Nt,_apps:()=>bt,_clearComponents:()=>qt,_components:()=>Ne,_getProvider:()=>rt,_registerComponent:()=>Vt,_removeServiceInstance:()=>Ut,deleteApp:()=>Qn,getApp:()=>Gn,getApps:()=>wn,initializeApp:()=>Ir,onLog:()=>xe,registerVersion:()=>re,setLogLevel:()=>ct});var d=O(8239),U=O(3910),F=O(5422),le=O(3854);class ye{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(Ot=>{if(function(Je){const ot=Je.getComponent();return"VERSION"===(null==ot?void 0:ot.type)}(Ot)){const Dt=Ot.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(Ot=>Ot).join(" ")}}const ie="@firebase/app",X=new F.Yd("@firebase/app"),gn="[DEFAULT]",Et={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,Ne=new Map;function Rt(Je,ot){try{Je.container.addComponent(ot)}catch(Ot){X.debug(`Component ${ot.name} failed to register with FirebaseApp ${Je.name}`,Ot)}}function Nt(Je,ot){Je.container.addOrOverwriteComponent(ot)}function Vt(Je){const ot=Je.name;if(Ne.has(ot))return X.debug(`There were multiple attempts to register component ${ot}.`),!1;Ne.set(ot,Je);for(const Ot of bt.values())Rt(Ot,Je);return!0}function rt(Je,ot){return Je.container.getProvider(ot)}function Ut(Je,ot,Ot=gn){rt(Je,ot).clearInstance(Ot)}function qt(){Ne.clear()}const zn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Un{constructor(ot,Ot,Dt){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},Ot),this._name=Ot.name,this._automaticDataCollectionEnabled=Ot.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}const Bn="9.4.1";function Ir(Je,ot={}){"object"!=typeof ot&&(ot={name:ot});const Ot=Object.assign({name:gn,automaticDataCollectionEnabled:!1},ot),Dt=Ot.name;if("string"!=typeof Dt||!Dt)throw zn.create("bad-app-name",{appName:String(Dt)});const Yt=bt.get(Dt);if(Yt){if((0,le.vZ)(Je,Yt.options)&&(0,le.vZ)(Ot,Yt.config))return Yt;throw zn.create("duplicate-app",{appName:Dt})}const Mt=new U.H0(Dt);for(const lt of Ne.values())Mt.addComponent(lt);const $e=new Un(Je,Ot,Mt);return bt.set(Dt,$e),$e}function Gn(Je=gn){const ot=bt.get(Je);if(!ot)throw zn.create("no-app",{appName:Je});return ot}function wn(){return Array.from(bt.values())}function Qn(Je){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(Je){const ot=Je.name;bt.has(ot)&&(bt.delete(ot),yield Promise.all(Je.container.getProviders().map(Ot=>Ot.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function re(Je,ot,Ot){var Dt;let Yt=null!==(Dt=Et[Je])&&void 0!==Dt?Dt:Je;Ot&&(Yt+=`-${Ot}`);const Mt=Yt.match(/\s|\//),$e=ot.match(/\s|\//);if(Mt||$e){const lt=[`Unable to register library "${Yt}" with version "${ot}":`];return Mt&&lt.push(`library name "${Yt}" contains illegal characters (whitespace or "/")`),Mt&&$e&&lt.push("and"),$e&&lt.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void X.warn(lt.join(" "))}Vt(new U.wA(`${Yt}-version`,()=>({library:Yt,version:ot}),"VERSION"))}function xe(Je,ot){if(null!==Je&&"function"!=typeof Je)throw zn.create("invalid-log-argument");(0,F.Am)(Je,ot)}function ct(Je){(0,F.Ub)(Je)}Vt(new U.wA("platform-logger",ot=>new ye(ot),"PRIVATE")),re(ie,"0.7.8",""),re(ie,"0.7.8","esm2017"),re("fire-js","")},3910:(gt,Oe,O)=>{"use strict";O.d(Oe,{wA:()=>F,H0:()=>te});var d=O(8239),U=O(3854);class F{constructor(N,j,L){this.name=N,this.instanceFactory=j,this.type=L,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(N){return this.instantiationMode=N,this}setMultipleInstances(N){return this.multipleInstances=N,this}setServiceProps(N){return this.serviceProps=N,this}setInstanceCreatedCallback(N){return this.onInstanceCreated=N,this}}const le="[DEFAULT]";class ye{constructor(N,j){this.name=N,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(N){const j=this.normalizeInstanceIdentifier(N);if(!this.instancesDeferred.has(j)){const L=new U.BH;if(this.instancesDeferred.set(j,L),this.isInitialized(j)||this.shouldAutoInitialize())try{const ne=this.getOrInitializeService({instanceIdentifier:j});ne&&L.resolve(ne)}catch(ne){}}return this.instancesDeferred.get(j).promise}getImmediate(N){var j;const L=this.normalizeInstanceIdentifier(null==N?void 0:N.identifier),ne=null!==(j=null==N?void 0:N.optional)&&void 0!==j&&j;if(!this.isInitialized(L)&&!this.shouldAutoInitialize()){if(ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:L})}catch(De){if(ne)return null;throw De}}getComponent(){return this.component}setComponent(N){if(N.name!==this.name)throw Error(`Mismatching Component ${N.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=N,this.shouldAutoInitialize()){if("EAGER"===N.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:le})}catch(j){}for(const[j,L]of this.instancesDeferred.entries()){const ne=this.normalizeInstanceIdentifier(j);try{const De=this.getOrInitializeService({instanceIdentifier:ne});L.resolve(De)}catch(De){}}}}clearInstance(N=le){this.instancesDeferred.delete(N),this.instancesOptions.delete(N),this.instances.delete(N)}delete(){var N=this;return(0,d.Z)(function*(){const j=Array.from(N.instances.values());yield Promise.all([...j.filter(L=>"INTERNAL"in L).map(L=>L.INTERNAL.delete()),...j.filter(L=>"_delete"in L).map(L=>L._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(N=le){return this.instances.has(N)}getOptions(N=le){return this.instancesOptions.get(N)||{}}initialize(N={}){const{options:j={}}=N,L=this.normalizeInstanceIdentifier(N.instanceIdentifier);if(this.isInitialized(L))throw Error(`${this.name}(${L}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ne=this.getOrInitializeService({instanceIdentifier:L,options:j});for(const[De,Le]of this.instancesDeferred.entries())L===this.normalizeInstanceIdentifier(De)&&Le.resolve(ne);return ne}onInit(N,j){var L;const ne=this.normalizeInstanceIdentifier(j),De=null!==(L=this.onInitCallbacks.get(ne))&&void 0!==L?L:new Set;De.add(N),this.onInitCallbacks.set(ne,De);const Le=this.instances.get(ne);return Le&&N(Le,ne),()=>{De.delete(N)}}invokeOnInitCallbacks(N,j){const L=this.onInitCallbacks.get(j);if(L)for(const ne of L)try{ne(N,j)}catch(De){}}getOrInitializeService({instanceIdentifier:N,options:j={}}){let L=this.instances.get(N);if(!L&&this.component&&(L=this.component.instanceFactory(this.container,{instanceIdentifier:(X=N,X===le?void 0:X),options:j}),this.instances.set(N,L),this.instancesOptions.set(N,j),this.invokeOnInitCallbacks(L,N),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,N,L)}catch(ne){}var X;return L||null}normalizeInstanceIdentifier(N=le){return this.component?this.component.multipleInstances?N:le:N}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(N){this.name=N,this.providers=new Map}addComponent(N){const j=this.getProvider(N.name);if(j.isComponentSet())throw new Error(`Component ${N.name} has already been registered with ${this.name}`);j.setComponent(N)}addOrOverwriteComponent(N){this.getProvider(N.name).isComponentSet()&&this.providers.delete(N.name),this.addComponent(N)}getProvider(N){if(this.providers.has(N))return this.providers.get(N);const j=new ye(N,this);return this.providers.set(N,j),j}getProviders(){return Array.from(this.providers.values())}}},3328:(gt,Oe,O)=>{"use strict";var d=O(8239),U=O(8026),F=O(3910),le=O(3854),ye=O(6676);const J="@firebase/installations",X="w:0.5.4",N="FIS_v2",we=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ge(Y){return Y instanceof le.ZR&&Y.code.includes("request-failed")}function oe({projectId:Y}){return`https://firebaseinstallations.googleapis.com/v1/projects/${Y}/installations`}function Re(Y){return{token:Y.token,requestStatus:2,expiresIn:Jt(Y.expiresIn),creationTime:Date.now()}}function Be(Y,Te){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(Y,Te){const Xe=(yield Te.json()).error;return we.create("request-failed",{requestName:Y,serverCode:Xe.code,serverMessage:Xe.message,serverStatus:Xe.status})})).apply(this,arguments)}function Lt({apiKey:Y}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Y})}function Pt(Y,{refreshToken:Te}){const Ve=Lt(Y);return Ve.append("Authorization",function(Y){return`${N} ${Y}`}(Te)),Ve}function Ht(Y){return ve.apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(Y){const Te=yield Y();return Te.status>=500&&Te.status<600?Y():Te})).apply(this,arguments)}function Jt(Y){return Number(Y.replace("s","000"))}function Ee(Y,Te){return pe.apply(this,arguments)}function pe(){return(pe=(0,d.Z)(function*(Y,{fid:Te}){const Ve=oe(Y),ft={method:"POST",headers:Lt(Y),body:JSON.stringify({fid:Te,authVersion:N,appId:Y.appId,sdkVersion:X})},er=yield Ht(()=>fetch(Ve,ft));if(er.ok){const qn=yield er.json();return{fid:qn.fid||Te,registrationStatus:2,refreshToken:qn.refreshToken,authToken:Re(qn.authToken)}}throw yield Be("Create Installation",er)})).apply(this,arguments)}function Se(Y){return new Promise(Te=>{setTimeout(Te,Y)})}const be=/^[cdef][\w-]{21}$/;function sn(){try{const Y=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Y),Y[0]=112+Y[0]%16;const Ve=function(Y){return function(Y){return btoa(String.fromCharCode(...Y)).replace(/\+/g,"-").replace(/\//g,"_")}(Y).substr(0,22)}(Y);return be.test(Ve)?Ve:""}catch(Y){return""}}function Et(Y){return`${Y.appName}!${Y.appId}`}const bt=new Map;function Ne(Y,Te){const Ve=Et(Y);Vt(Ve,Te),function(Y,Te){const Ve=(!Ut&&"BroadcastChannel"in self&&(Ut=new BroadcastChannel("[Firebase] FID Change"),Ut.onmessage=Y=>{Vt(Y.data.key,Y.data.fid)}),Ut);Ve&&Ve.postMessage({key:Y,fid:Te}),0===bt.size&&Ut&&(Ut.close(),Ut=null)}(Ve,Te)}function Vt(Y,Te){const Ve=bt.get(Y);if(Ve)for(const Xe of Ve)Xe(Te)}let Ut=null;const Bn="firebase-installations-store";let Ir=null;function Gn(){return Ir||(Ir=(0,ye.openDb)("firebase-installations-database",1,Y=>{switch(Y.oldVersion){case 0:Y.createObjectStore(Bn)}})),Ir}function wn(Y,Te){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(Y,Te){const Ve=Et(Y),Ln=(yield Gn()).transaction(Bn,"readwrite"),ft=Ln.objectStore(Bn),er=yield ft.get(Ve);return yield ft.put(Te,Ve),yield Ln.complete,(!er||er.fid!==Te.fid)&&Ne(Y,Te.fid),Te})).apply(this,arguments)}function it(Y){return re.apply(this,arguments)}function re(){return(re=(0,d.Z)(function*(Y){const Te=Et(Y),Xe=(yield Gn()).transaction(Bn,"readwrite");yield Xe.objectStore(Bn).delete(Te),yield Xe.complete})).apply(this,arguments)}function xe(Y,Te){return ct.apply(this,arguments)}function ct(){return(ct=(0,d.Z)(function*(Y,Te){const Ve=Et(Y),Ln=(yield Gn()).transaction(Bn,"readwrite"),ft=Ln.objectStore(Bn),er=yield ft.get(Ve),qn=Te(er);return void 0===qn?yield ft.delete(Ve):yield ft.put(qn,Ve),yield Ln.complete,qn&&(!er||er.fid!==qn.fid)&&Ne(Y,qn.fid),qn})).apply(this,arguments)}function mt(Y){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(Y){let Te;const Ve=yield xe(Y,Xe=>{const Ln=ot(Xe),ft=Ot(Y,Ln);return Te=ft.registrationPromise,ft.installationEntry});return""===Ve.fid?{installationEntry:yield Te}:{installationEntry:Ve,registrationPromise:Te}})).apply(this,arguments)}function ot(Y){return Jn(Y||{fid:sn(),registrationStatus:0})}function Ot(Y,Te){if(0===Te.registrationStatus){if(!navigator.onLine)return{installationEntry:Te,registrationPromise:Promise.reject(we.create("app-offline"))};const Ve={fid:Te.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:Ve,registrationPromise:function(Y,Te){return Yt.apply(this,arguments)}(Y,Ve)}}return 1===Te.registrationStatus?{installationEntry:Te,registrationPromise:Mt(Y)}:{installationEntry:Te}}function Yt(){return(Yt=(0,d.Z)(function*(Y,Te){try{return wn(Y,yield Ee(Y,Te))}catch(Ve){throw ge(Ve)&&409===Ve.customData.serverCode?yield it(Y):yield wn(Y,{fid:Te.fid,registrationStatus:0}),Ve}})).apply(this,arguments)}function Mt(Y){return $e.apply(this,arguments)}function $e(){return($e=(0,d.Z)(function*(Y){let Te=yield lt(Y);for(;1===Te.registrationStatus;)yield Se(100),Te=yield lt(Y);if(0===Te.registrationStatus){const{installationEntry:Ve,registrationPromise:Xe}=yield mt(Y);return Xe||Ve}return Te})).apply(this,arguments)}function lt(Y){return xe(Y,Te=>{if(!Te)throw we.create("installation-not-found");return Jn(Te)})}function Jn(Y){return function(Y){return 1===Y.registrationStatus&&Y.registrationTime+1e4<Date.now()}(Y)?{fid:Y.fid,registrationStatus:0}:Y}function Xn(Y,Te){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*({appConfig:Y,platformLoggerProvider:Te},Ve){const Xe=Xt(Y,Ve),Ln=Pt(Y,Ve),ft=Te.getImmediate({optional:!0});ft&&Ln.append("x-firebase-client",ft.getPlatformInfoString());const qn={method:"POST",headers:Ln,body:JSON.stringify({installation:{sdkVersion:X}})},Js=yield Ht(()=>fetch(Xe,qn));if(Js.ok)return Re(yield Js.json());throw yield Be("Generate Auth Token",Js)})).apply(this,arguments)}function Xt(Y,{fid:Te}){return`${oe(Y)}/${Te}/authTokens:generate`}function Wn(Y){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*(Y,Te=!1){let Ve;const Xe=yield xe(Y.appConfig,ft=>{if(!ce(ft))throw we.create("not-registered");const er=ft.authToken;if(!Te&&Ie(er))return ft;if(1===er.requestStatus)return Ve=z(Y,Te),ft;{if(!navigator.onLine)throw we.create("app-offline");const qn=nt(ft);return Ve=fe(Y,qn),qn}});return Ve?yield Ve:Xe.authToken})).apply(this,arguments)}function z(Y,Te){return Q.apply(this,arguments)}function Q(){return(Q=(0,d.Z)(function*(Y,Te){let Ve=yield Pe(Y.appConfig);for(;1===Ve.authToken.requestStatus;)yield Se(100),Ve=yield Pe(Y.appConfig);const Xe=Ve.authToken;return 0===Xe.requestStatus?Wn(Y,Te):Xe})).apply(this,arguments)}function Pe(Y){return xe(Y,Te=>{if(!ce(Te))throw we.create("not-registered");return function(Y){return 1===Y.requestStatus&&Y.requestTime+1e4<Date.now()}(Te.authToken)?Object.assign(Object.assign({},Te),{authToken:{requestStatus:0}}):Te})}function fe(Y,Te){return ut.apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(Y,Te){try{const Ve=yield Xn(Y,Te),Xe=Object.assign(Object.assign({},Te),{authToken:Ve});return yield wn(Y.appConfig,Xe),Ve}catch(Ve){if(!ge(Ve)||401!==Ve.customData.serverCode&&404!==Ve.customData.serverCode){const Xe=Object.assign(Object.assign({},Te),{authToken:{requestStatus:0}});yield wn(Y.appConfig,Xe)}else yield it(Y.appConfig);throw Ve}})).apply(this,arguments)}function ce(Y){return void 0!==Y&&2===Y.registrationStatus}function Ie(Y){return 2===Y.requestStatus&&!function(Y){const Te=Date.now();return Te<Y.creationTime||Y.creationTime+Y.expiresIn<Te+36e5}(Y)}function nt(Y){const Te={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Y),{authToken:Te})}function $(){return($=(0,d.Z)(function*(Y){const Te=Y,{installationEntry:Ve,registrationPromise:Xe}=yield mt(Te.appConfig);return Xe?Xe.catch(console.error):Wn(Te).catch(console.error),Ve.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(Y,Te=!1){const Ve=Y;return yield Ze(Ve.appConfig),(yield Wn(Ve,Te)).token})).apply(this,arguments)}function Ze(Y){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(Y){const{registrationPromise:Te}=yield mt(Y);Te&&(yield Te)})).apply(this,arguments)}function Tr(Y){return we.create("missing-app-config-values",{valueName:Y})}const H="installations";(0,U._registerComponent)(new F.wA(H,Y=>{const Te=Y.getProvider("app").getImmediate();return{app:Te,appConfig:function(Y){if(!Y||!Y.options)throw Tr("App Configuration");if(!Y.name)throw Tr("App Name");const Te=["projectId","apiKey","appId"];for(const Ve of Te)if(!Y.options[Ve])throw Tr(Ve);return{appName:Y.name,projectId:Y.options.projectId,apiKey:Y.options.apiKey,appId:Y.options.appId}}(Te),platformLoggerProvider:(0,U._getProvider)(Te,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,U._registerComponent)(new F.wA("installations-internal",Y=>{const Te=Y.getProvider("app").getImmediate(),Ve=(0,U._getProvider)(Te,H).getImmediate();return{getId:()=>function(Y){return $.apply(this,arguments)}(Ve),getToken:Ln=>function(Y){return Ae.apply(this,arguments)}(Ve,Ln)}},"PRIVATE")),(0,U.registerVersion)(J,"0.5.4"),(0,U.registerVersion)(J,"0.5.4","esm2017")},5422:(gt,Oe,O)=>{"use strict";O.d(Oe,{in:()=>U,Yd:()=>ie,Ub:()=>te,Am:()=>X});const d=[];var U=(()=>{return(N=U||(U={}))[N.DEBUG=0]="DEBUG",N[N.VERBOSE=1]="VERBOSE",N[N.INFO=2]="INFO",N[N.WARN=3]="WARN",N[N.ERROR=4]="ERROR",N[N.SILENT=5]="SILENT",U;var N})();const F={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},le=U.INFO,ye={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},J=(N,j,...L)=>{if(j<N.logLevel)return;const ne=(new Date).toISOString(),De=ye[j];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[De](`[${ne}]  ${N.name}:`,...L)};class ie{constructor(j){this.name=j,this._logLevel=le,this._logHandler=J,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in U))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?F[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...j),this._logHandler(this,U.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...j),this._logHandler(this,U.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,U.INFO,...j),this._logHandler(this,U.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,U.WARN,...j),this._logHandler(this,U.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...j),this._logHandler(this,U.ERROR,...j)}}function te(N){d.forEach(j=>{j.setLogLevel(N)})}function X(N,j){for(const L of d){let ne=null;j&&j.level&&(ne=F[j.level]),L.userLogHandler=null===N?null:(De,Le,...we)=>{const ge=we.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(Re){return null}}).filter(oe=>oe).join(" ");Le>=(null!=ne?ne:De.logLevel)&&N({level:U[Le].toLowerCase(),message:ge,args:we,type:De.name})}}}},8239:(gt,Oe,O)=>{"use strict";function d(F,le,ye,J,ie,te,X){try{var N=F[te](X),j=N.value}catch(L){return void ye(L)}N.done?le(j):Promise.resolve(j).then(J,ie)}function U(F){return function(){var le=this,ye=arguments;return new Promise(function(J,ie){var te=F.apply(le,ye);function X(j){d(te,J,ie,X,N,"next",j)}function N(j){d(te,J,ie,X,N,"throw",j)}X(void 0)})}}O.d(Oe,{Z:()=>U})}},gt=>{gt(gt.s=5803)}]);